[{"title":"docker gitlab jenkinsæ­å»ºå‰ç«¯æŒç»­åŒ–éƒ¨ç½²ç¯å¢ƒ","date":"2020-07-21T07:44:06.000Z","date_formatted":{"ll":"2020å¹´7æœˆ21æ—¥","L":"2020/07/21","MM-DD":"07-21"},"author":"zao","updated":"2020-07-21T07:44:06.000Z","content":"gitlabå®‰è£…1docker pull gitlab/gitlab-ce\n\n12345678910111213 docker run \\--detach \\ # åå°è¿è¡Œ--publish 8443:443 \\ # æ˜ å°„httpsç«¯å£--publish 80:80 \\ # æ˜ å°„80ç«¯å£--publish 8022:22 \\ # æ˜ å°„ssh 22ç«¯å£--name gitlab \\ --restart always \\--hostname 39.108.51.10 \\-v /home/gitlab/etc:/etc/gitlab \\ # æŒ‚è½½gitlabçš„é…ç½®æ–‡ä»¶-v /home/gitlab/logs:/var/log/gitlab \\ # æŒ‚è½½gitlabçš„æ—¥å¿—æ–‡ä»¶-v /home/gitlab/data:/var/opt/gitlab \\ # æŒ‚è½½gitlabçš„æ•°æ®-v /etc/localtime:/etc/localtime:ro \\ # ä¿æŒå®¿ä¸»æœºå’Œå®¹å™¨æ—¶é—´åŒæ­¥--privileged=true gitlab/gitlab-ce # åœ¨å®¹å™¨å†…ä»¥rootèº«ä»½æ‰§è¡Œæ“ä½œ\n\njenkinså®‰è£…å’ŒåŠ é€Ÿé…ç½®jenkinså®‰è£…å’Œå¯åŠ¨1docker pull jenkins&#x2F;jenkins\n\n1docker run --name my-jenkins --user=root -p 8080:8080 -p 50000:50000 -v /home/myjenkins/jenkins_home:/var/jenkins_home -d jenkins/jenkins\n\nåŠ é€Ÿè®¾ç½®è¿›å…¥åˆ°Jenkinså·¥ä½œç›®å½•\næˆ‘è¿™é‡Œæ˜¯\n1cd /home/myjenkins/jenkins_home/updates\n\né…ç½®æ¸…åé•œåƒ\n1sed -i 's/http:\\/\\/updates.jenkins-ci.org\\/download/https:\\/\\/mirrors.tuna.tsinghua.edu.cn\\/jenkins/g' default.json &amp;&amp; sed -i 's/http:\\/\\/www.google.com/https:\\/\\/www.baidu.com/g' default.json\n\né‡å¯jenkinså®¹å™¨\n","plink":"https://www.hansomezao.com/2020/07/21/articles/docker gitlab jenkinsæ­å»ºå‰ç«¯æŒç»­åŒ–éƒ¨ç½²ç¯å¢ƒ/"},{"title":"dockerå®‰è£…å’Œä½¿ç”¨","date":"2020-07-10T03:48:33.000Z","date_formatted":{"ll":"2020å¹´7æœˆ10æ—¥","L":"2020/07/10","MM-DD":"07-10"},"author":"zao","updated":"2020-07-10T03:48:33.000Z","content":"\nä»¥ä¸‹æ“ä½œä»…åœ¨ubnutu18.04ä»¥åŠwsl2ç¯å¢ƒä¸‹è¿è¡Œè¿‡\n\ndockerç›¸å…³å®‰è£…ä»¥åŠé•œåƒæºè®¾ç½®dockerå®‰è£…è„šæœ¬è‡ªåŠ¨å®‰è£…\n1curl -fsSL https://get.docker.com | bash -s docker --mirror Aliyun\n\ndocker-composeå®‰è£…1curl -L https://get.daocloud.io/docker/compose/releases/download/1.25.5/docker-compose-`uname -s`-`uname -m` &gt; /usr/local/bin/docker-compose\n\n1sudo chmod +x /usr/local/bin/docker-compose\n\næ·»åŠ dockeré•œåƒæº1sudo vim /etc/docker/daemon.json\n\n1234// è¿™é‡Œæ”¹æˆä½ è‡ªå·±çš„åŠ é€Ÿåœ°å€å°±è¡Œäº†&#123;  \"registry-mirrors\": [\"https://klpsba92.mirror.aliyuncs.com\"]&#125;\n\n1sudo service docker restart\n\nå¸¸ç”¨å‘½ä»¤é•œåƒè·å–é•œåƒ\n123# æ‹‰å–é•œåƒdocker pull [image]:[version]docker pull nginx:alpine\n\næŸ¥çœ‹é•œåƒä¿¡æ¯\n12345678# åˆ—å‡ºä¸‹è½½çš„é•œåƒdocker images# ä½¿ç”¨tagå¯ä»¥ä¸ºé•œåƒæ·»åŠ tagï¼ŒæŒ‡å‘ä»ç„¶æ˜¯åŒä¸€ä¸ªé•œåƒdocker tag [image]:[version] [target tag]:[version]docker tag ubuntu:latest myubuntu:latest# ä½¿ç”¨inspectæŸ¥çœ‹é•œåƒè¯¦ç»†ä¿¡æ¯docker inspect [image]:[version]docker inspect nginx:alpine\n\næœå¯»é•œåƒ\n1docker search [image]\n\nåˆ é™¤é•œåƒ\n123# åˆ é™¤é•œåƒdocker rmi [options] [image]:[version]docker rmi [options] [image id]\n\n\n-fï¼Œ-forceï¼šå¼ºåˆ¶åˆ é™¤é•œåƒï¼Œå³ä½¿æœ‰å®¹å™¨ä¾èµ–å®ƒï¼›\n-no-pruneï¼šä¸è¦æ¸…ç†æœªå¸¦æ ‡ç­¾çš„çˆ¶é•œåƒ\n\n\næ¸…ç†é•œåƒ\n12# æ¸…é™¤ç³»ç»Ÿé—ç•™çš„ä¸€äº›ä¸´æ—¶é•œåƒæ–‡ä»¶ï¼Œä»¥åŠä¸€äº›æ²¡æœ‰è¢«ä½¿ç”¨çš„é•œåƒdocker image [options] prune\n\n\n-aï¼Œ-allï¼šåˆ é™¤æ‰€æœ‰æ— ç”¨é•œåƒï¼Œä¸å…‰æ˜¯ä¸´æ—¶é•œåƒï¼›\n-filter filterï¼šåªæ¸…ç†ç¬¦åˆç»™å®šè¿‡æ»¤å™¨çš„é•œåƒï¼›\n-fï¼Œ-forceï¼šå¼ºåˆ¶åˆ é™¤é•œåƒã€‚\n\n\nåˆ›å»ºé•œåƒ\n123456# åŸºäºå·²æœ‰å®¹å™¨åˆ›å»ºé•œåƒdocker commit [options] [container]docker commit -m \"init\" -a \"zao\" -p meeting-system# åŸºäºDockerfileåˆ›å»ºdocker build -t [image]:[version] .docker build -t ms:1 .\n\n\n-aï¼Œâ€“author=â€œâ€ï¼šä½œè€…ä¿¡æ¯ï¼›\n-cï¼Œâ€“change=[]ï¼šæäº¤çš„æ—¶å€™æ‰§è¡ŒDockerfileæŒ‡ä»¤ï¼ŒåŒ…æ‹¬CMD|ENTRYPOINT|ENV|EXPOSE|LABEL|ONBUILD|USER|VOLUME|WORKDIRï¼›\n-mï¼Œâ€“message=â€œâ€ï¼šæäº¤ä¿¡æ¯ï¼›\n-pï¼Œâ€“pause=trueï¼šæäº¤æ—¶æš‚åœå®¹å™¨è¿è¡Œ\n\n\nä¸Šä¼ é•œåƒ\n1docker push [image]:[version]\n\n\nå®¹å™¨åˆ—å‡ºå®¹å™¨\n1docker ps [options]\n\n\n-a :æ˜¾ç¤ºæ‰€æœ‰çš„å®¹å™¨ï¼ŒåŒ…æ‹¬æœªè¿è¡Œçš„ã€‚\n-f :æ ¹æ®æ¡ä»¶è¿‡æ»¤æ˜¾ç¤ºçš„å†…å®¹ã€‚\nâ€“format :æŒ‡å®šè¿”å›å€¼çš„æ¨¡æ¿æ–‡ä»¶ã€‚\n-l :æ˜¾ç¤ºæœ€è¿‘åˆ›å»ºçš„å®¹å™¨ã€‚\n-n :åˆ—å‡ºæœ€è¿‘åˆ›å»ºçš„nä¸ªå®¹å™¨ã€‚\nâ€“no-trunc :ä¸æˆªæ–­è¾“å‡ºã€‚\n-q :é™é»˜æ¨¡å¼ï¼Œåªæ˜¾ç¤ºå®¹å™¨ç¼–å·ã€‚\n-s :æ˜¾ç¤ºæ€»çš„æ–‡ä»¶å¤§å°ã€‚\n\n\næ–°å»ºå®¹å™¨\n12# æ–°å»ºå®¹å™¨ï¼Œæ­¤æ—¶å®¹å™¨å¤„äºåœæ­¢çŠ¶æ€ï¼Œå¯ä»¥é€šè¿‡startå¯åŠ¨docker create [options] [image]:[version]\n\n\nä¸å®¹å™¨è¿è¡Œæ¨¡å¼ç›¸å…³\n-aï¼Œâ€“attach= [] æ˜¯å¦ç»‘å®šåˆ°æ ‡å‡†è¾“äººã€è¾“å‡ºå’Œé”™è¯¯\n-dï¼Œâ€“detach=true| false æ˜¯å¦åœ¨åå°è¿è¡Œå®¹å™¨ï¼Œé»˜è®¤ä¸ºå¦\nâ€“detach-keys=â€â€ ä»attachæ¨¡å¼é€€å‡ºçš„å¿«æ·é”®\nâ€“entrypoint=â€â€ é•œåƒå­˜åœ¨äººå£å‘½ä»¤æ—¶ï¼Œè¦†ç›–ä¸ºæ–°çš„å‘½ä»¤\nâ€“ expose= [] æŒ‡å®šå®¹å™¨ä¼šæš´éœ²å‡ºæ¥çš„ç«¯å£æˆ–ç«¯å£èŒƒå›´\nâ€“group-add= [] è¿è¡Œå®¹å™¨çš„ç”¨æˆ·ç»„\n-iï¼Œâ€“ interactive=true| false ä¿æŒæ ‡å‡†è¾“äººæ‰“å¼€ï¼Œé»˜è®¤ä¸ºfalse\nâ€“ipc=â€â€ å®¹å™¨IPCå‘½åç©ºé—´ï¼Œå¯ä»¥ä¸ºå…¶ä»–å®¹å™¨æˆ–ä¸»æœº\nâ€“ isolation= â€œdefaultâ€ å®¹å™¨ä½¿ç”¨çš„éš”ç¦»æœºåˆ¶\nâ€“ log-driver= â€œjson-fileâ€ æŒ‡å®šå®¹å™¨çš„æ—¥å¿—é©±åŠ¨ç±»å‹ï¼Œå¯ä»¥ä¸ºjson-fileã€syslogã€journaldã€gelfã€fluentdã€awslogsã€splunkã€etwlogsã€gcplogsæˆ–none\nâ€“log-opt=[] ä¼ é€’ç»™æ—¥å¿—é©±åŠ¨çš„é€‰é¡¹\n- -net= â€œbridgeâ€ æŒ‡å®šå®¹å™¨ç½‘ç»œæ¨¡å¼ï¼ŒåŒ…æ‹¬bridgeã€noneã€ å…¶ä»–å®¹å™¨å†…ç½‘ç»œã€host çš„ç½‘ç»œæˆ–æŸä¸ªç°æœ‰ç½‘ç»œç­‰\nâ€“net-alias= [] å®¹å™¨åœ¨ç½‘ç»œä¸­çš„åˆ«å\n-Pï¼Œâ€“publish-all=true | false é€šè¿‡NATæœºåˆ¶å°†å®¹å™¨æ ‡è®°æš´éœ²çš„ç«¯å£è‡ªåŠ¨æ˜ å°„åˆ°æœ¬åœ°ä¸»æœºçš„ä¸´æ—¶ç«¯å£\n-pï¼Œ â€“publish=[] æŒ‡å®šå¦‚ä½•æ˜ å°„åˆ°æœ¬åœ°ä¸»æœºç«¯å£ï¼Œä¾‹å¦‚-p 11234-12234:1234-2234\nâ€“pid=host å®¹å™¨çš„PIDå‘½åç©ºé—´\nâ€“userns=â€â€ å¯ç”¨userns - remapæ—¶é…ç½®ç”¨æˆ·å‘½åç©ºé—´çš„æ¨¡å¼\nâ€“uts=host å®¹å™¨çš„utSå‘½åç©ºé—´\nâ€“ restart= â€œnoâ€ å®¹å™¨çš„é‡å¯ç­–ç•¥ï¼ŒåŒ…æ‹¬noã€on- failure[:max-retry]ã€alwaysã€unless- stoppedç­‰\nâ€“ rm=true | false å®¹å™¨é€€å‡ºåæ˜¯å¦è‡ªåŠ¨åˆ é™¤ï¼Œä¸èƒ½è·Ÿ-dåŒæ—¶ä½¿ç”¨\n-tï¼Œâ€“tty=true | false æ˜¯å¦åˆ†é…-ä¸€ä¸ªä¼ªç»ˆç«¯ï¼Œé»˜è®¤ä¸ºfalse\nâ€“ tmpfs= [] æŒ‚è½½ä¸´æ—¶æ–‡ä»¶ç³»ç»Ÿåˆ°å®¹å™¨\n-v| â€“volume [= [ [HOST- DIR: ] CONTAINER -DIR [:OPTIONS]]] æŒ‚è½½ä¸»æœºä¸Šçš„æ–‡ä»¶å·åˆ°å®¹å™¨å†…\n- -volume - driver=â€â€ æŒ‚è½½æ–‡ä»¶å·çš„é©±åŠ¨ç±»å‹\nâ€“volumes- from= [] ä»å…¶ä»–å®¹å™¨æŒ‚è½½å·\n-Wï¼Œâ€“workdir= â€â€ å®¹å™¨å†…çš„é»˜è®¤å·¥ä½œç›®å½•\n\nä¸å®¹å™¨ç¯å¢ƒå’Œé…ç½®ç›¸å…³\nâ€“ add-host= [] åœ¨å®¹å™¨å†…æ·»åŠ ä¸€ä¸ª ä¸»æœºååˆ°IPåœ°å€çš„æ˜ å°„å…³ ç³»(é€šè¿‡/etc/hosts æ–‡ä»¶)\nâ€“ device= [] æ˜ å°„ç‰©ç†æœºä¸Šçš„è®¾å¤‡åˆ°å®¹å™¨å†…\nâ€“dns - search= [] DNSæœç´¢åŸŸ\nâ€“dns -opt= [] è‡ªå®šä¹‰çš„DNSé€‰é¡¹\nâ€“dns= [] è‡ªå®šä¹‰çš„DNSæœåŠ¡å™¨\n-eï¼Œâ€“env= [] æŒ‡å®šå®¹å™¨å†…ç¯å¢ƒå˜é‡\nâ€“env-file= [] ä»æ–‡ä»¶ä¸­è¯»å–ç¯å¢ƒå˜é‡åˆ°å®¹å™¨å†…\n-hï¼Œâ€“ hostname=â€ â€œ æŒ‡å®šå®¹å™¨å†…çš„ä¸»æœºå\nâ€“name=â€ â€œ æŒ‡å®šå®¹å™¨çš„åˆ«å\n\nä¸å®¹å™¨èµ„æºé™åˆ¶å’Œå®‰å…¨ä¿æŠ¤ç›¸å…³\n-Uï¼Œâ€“user=â€â€ æŒ‡å®šåœ¨å®¹å™¨å†…æ‰§è¡Œå‘½ä»¤çš„ç”¨æˆ·ä¿¡æ¯\nâ€“userns=â€â€ æŒ‡å®šç”¨æˆ·å‘½åç©ºé—´\nâ€“ulimit=[] é€šè¿‡ulimitæ¥é™åˆ¶æœ€å¤§æ–‡ä»¶æ•°ã€æœ€å¤§è¿›ç¨‹æ•°\n\n\nå¯åŠ¨å®¹å™¨\n1docker start [container]\n\nå¯åŠ¨å¹¶è¿è¡Œå®¹å™¨\n1docker run [options] [image]:[version]\n\næŸ¥çœ‹å®¹å™¨è¾“å‡º\n1docker logs [options] [container]\n\n\n-detailsï¼šæ‰“å°è¯¦ç»†ä¿¡æ¯ï¼›\n-fï¼Œ-followï¼šæŒç»­ä¿æŒè¾“å‡ºï¼›\n-since stringï¼šè¾“å‡ºä»æŸä¸ªæ—¶é—´å¼€å§‹çš„æ—¥å¿—ï¼›\n-tail stringï¼šè¾“å‡ºæœ€è¿‘çš„è‹¥å¹²æ—¥å¿—ï¼›\n-tï¼Œ-timestampsï¼šæ˜¾ç¤ºæ—¶é—´æˆ³ä¿¡æ¯ï¼›\n-until stringï¼šè¾“å‡ºæŸä¸ªæ—¶é—´ä¹‹å‰çš„æ—¥å¿—ï¼›\n\n\næš‚åœå®¹å™¨\n1docker pause [container]\n\nåœæ­¢å®¹å™¨\n1docker stop [container]\n\nè¿›å…¥å®¹å™¨\n1# attachå‘½ä»¤docker attach [options] [container]\n\n\nâ€“detach-keys[=[]]ï¼šæŒ‡å®šé€€å‡ºattachæ¨¡å¼çš„å¿«æ·é”®åºåˆ—ï¼Œé»˜è®¤æ˜¯CTRL-p CTRL-qï¼›\nâ€“no-stdin=true|falseï¼šæ˜¯å¦å…³é—­æ ‡å‡†è¾“å…¥ï¼Œé»˜è®¤æ˜¯ä¿æŒæ‰“å¼€ï¼›\nâ€“sig-proxy=true|falseï¼šæ˜¯å¦ä»£ç†æ”¶åˆ°çš„ç³»ç»Ÿä¿¡å·ç»™åº”ç”¨è¿›ç¨‹ï¼Œé»˜è®¤æ˜¯trueã€‚\n\n123# execå‘½ä»¤docker exec [options] [container]docker exec -it 12kjhjasdasda /bin/bash\n\n\n-dï¼Œâ€“detachï¼šåœ¨å®¹å™¨ä¸­åå°æ‰§è¡Œå‘½ä»¤ï¼›\nâ€“detach-keys=â€œâ€ï¼šæŒ‡å®šå°†å®¹å™¨åˆ‡å›åå°çš„æŒ‰é”®ï¼›\n-eï¼Œâ€“env=[]ï¼šæŒ‡å®šç¯å¢ƒå˜é‡åˆ—è¡¨ï¼›\n-iï¼Œâ€“interactive=true|falseï¼šæ‰“å¼€æ ‡å‡†è¾“å…¥æ¥å—ç”¨æˆ·è¾“å…¥å‘½ä»¤ï¼Œé»˜è®¤å€¼ä¸ºfalseï¼›\nâ€“privileged=true|falseï¼šæ˜¯å¦ç»™æ‰§è¡Œå‘½ä»¤ä»¥æœ€é«˜æƒé™ï¼Œé»˜è®¤å€¼ä¸ºfalseï¼›\n-tï¼Œâ€“tty=true|falseï¼šåˆ†é…ä¼ªç»ˆç«¯ï¼Œé»˜è®¤å€¼ä¸ºfalseï¼›\n-uï¼Œâ€“user=â€œâ€ï¼šæ‰§è¡Œå‘½ä»¤çš„ç”¨æˆ·åæˆ–IDã€‚\n\n\nåˆ é™¤å®¹å™¨\n1docker rm [options] container\n\n\n-fï¼Œâ€“force=falseï¼šæ˜¯å¦å¼ºåˆ¶ç»ˆæ­¢å¹¶åˆ é™¤ä¸€ä¸ªè¿è¡Œä¸­çš„å®¹å™¨ï¼›\n-lï¼Œâ€“link=falseï¼šåˆ é™¤å®¹å™¨çš„è¿æ¥ï¼Œä½†ä¿ç•™å®¹å™¨ï¼›\n-vï¼Œâ€“volumes=falseï¼šåˆ é™¤å®¹å™¨æŒ‚è½½çš„æ•°æ®å·ã€‚\n\n\næŸ¥çœ‹å®¹å™¨\n1234# æŸ¥çœ‹å®¹å™¨è¯¦æƒ…docker container inspect [container]# æŸ¥çœ‹å®¹å™¨å†…è¿›ç¨‹docker top [container]\n\n12# æŸ¥çœ‹ç»Ÿè®¡ä¿¡æ¯docker stats [container]\n\n\n-aï¼Œ-allï¼šè¾“å‡ºæ‰€æœ‰å®¹å™¨ç»Ÿè®¡ä¿¡æ¯ï¼Œé»˜è®¤ä»…åœ¨è¿è¡Œä¸­ï¼›\n-format stringï¼šæ ¼å¼åŒ–è¾“å‡ºä¿¡æ¯ï¼›\n-no-streamï¼šä¸æŒç»­è¾“å‡ºï¼Œé»˜è®¤ä¼šè‡ªåŠ¨æ›´æ–°æŒç»­å®æ—¶ç»“æœï¼›\n-no-truncï¼šä¸æˆªæ–­è¾“å‡ºä¿¡æ¯ã€‚\n\n\nå¤åˆ¶æ–‡ä»¶\n1docker cp [path] [container]:[path]\n\næŸ¥çœ‹å®¹å™¨å†…æ–‡ä»¶ç³»ç»Ÿçš„å˜æ›´\n1docker container diff [container]\n\næŸ¥çœ‹ç«¯å£æ˜ å°„\n1docker container port [container]\n\næ›´æ–°é…ç½®\n1docker update [options] [container]\n\n\n","plink":"https://www.hansomezao.com/2020/07/10/articles/dockerå®‰è£…å’Œä½¿ç”¨/"},{"title":"liunxç»ˆç«¯ç¾åŒ–ï¼ˆubuntuï¼‰","date":"2020-07-10T03:45:31.000Z","date_formatted":{"ll":"2020å¹´7æœˆ10æ—¥","L":"2020/07/10","MM-DD":"07-10"},"author":"zao","updated":"2020-07-10T03:45:31.000Z","content":"å®‰è£…zsh1sudo apt install zsh\n\nå®‰è£…Oh-My-Zsh1sh -c \"$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)\"\n\n\næœ‰å¯èƒ½å‡ºç°443ï¼Œè¢«å¢™äº†ï¼Œåˆ™è¿›è¡Œä¸‹åˆ—æ“ä½œ\nåœ¨https://www.ipaddress.com/æŸ¥è¯¢raw.githubusercontent.comçš„çœŸå®IP\n\nä¿®æ”¹hostsæ–‡ä»¶\n1sudo vim &#x2F;etc&#x2F;hosts\n\næ·»åŠ \n1199.232.68.133  raw.githubusercontent.com\n\nå®‰è£…zshæ’ä»¶1cd ~/.oh-my-zsh/plugins\n\nzsh-syntax-highlighting\n1git clone https://github.com/zsh-users/zsh-syntax-highlighting.git $&#123;ZSH_CUSTOM:-~/.oh-my-zsh/custom&#125;/plugins/zsh-syntax-highlighting\n\nzsh-autosuggestions\n1git clone https://github.com/zsh-users/zsh-autosuggestions $&#123;ZSH_CUSTOM:-~/.oh-my-zsh/custom&#125;/plugins/zsh-autosuggestions\n\n\n1vim ~/.zshrc\n\næ·»åŠ \n\n1source ~/.zshrc","plink":"https://www.hansomezao.com/2020/07/10/articles/liunxç»ˆç«¯ç¾åŒ–ï¼ˆubuntuï¼‰/"},{"title":"windows terminalåŠ powershell7ç¾åŒ–å‘½ä»¤è¡Œæ“ä½œ","date":"2020-05-28T03:36:53.000Z","date_formatted":{"ll":"2020å¹´5æœˆ28æ—¥","L":"2020/05/28","MM-DD":"05-28"},"author":"zao","updated":"2020-05-28T03:36:53.000Z","content":"ä¹‹å‰å†™è¿‡ä¸€ç¯‡æ–‡ç« vscode+wsl+windows terminalç¾åŒ–å’Œæ­å»ºlinuxå¼€å‘ç¯å¢ƒ\n[åšå®¢é“¾æ¥](https://www.hansomezao.com/2020/05/28/articles/windows terminalåŠ powershell7ç¾åŒ–å‘½ä»¤è¡Œæ“ä½œ)\nwslæŒºå¥½ç”¨çš„ï¼Œä¸è¿‡æ¯”è¾ƒéº»çƒ¦ï¼Œè€Œä¸”windowsä¸‹çš„liunxå­ç³»ç»Ÿä¸å®Œæ•´ï¼Œå¾ˆå¤šä¸œè¥¿ä¸èƒ½ç”¨ï¼Œæ¯•ç«Ÿä¸æ˜¯è™šæ‹Ÿæœºã€‚çœ‹åˆ°powershell7ï¼Œå¿ƒåŠ¨äº†ï¼Œæœ¬ç¯‡æ–‡ç« å°±å¦‚æ ‡é¢˜æ‰€è¨€ç¾åŒ–å‘½ä»¤è¡Œæ“ä½œã€‚\nä¸‹è½½windows terminalMicrosoft Storeå°±æœ‰ä¸‹è½½\nä¸‹è½½å¹¶å®‰è£…powershell7é€‰ä¸ªæœ€æ–°çš„å°±è¡Œï¼Œæˆ‘ä¸‹è½½çš„æ˜¯7.1.0-preview3ï¼Œpowershell7ä¸‹è½½\nä¸‹è½½scoopæˆ–è€… chocolatey (windowsåŒ…ç®¡ç†å·¥å…·)ä¹Ÿå¯ä»¥ç”¨powershellçš„Install-Moduleï¼Œä¸è¿‡è¿˜æ˜¯æ¨èä½¿ç”¨scoopæˆ–è€…chocolatey\nä»¥scoopä¸ºä¾‹:\nå®‰è£…scoop\n1234Invoke-Expression (New-Objec System.Net.WebClient).DownloadString('https://get.scoop.sh')# oriwr -useb get.scoop.sh | iexå¤åˆ¶ä»£ç \n\nç¾åŒ–powershellè¿™é‡Œä¸»è¦ç”¨åˆ°ä¸¤ä¸ªåŒ…ï¼ŒPSReadLineå‘½ä»¤è¡Œæç¤ºè®°å½•ï¼Œstarshipç¾åŒ–æ˜¾ç¤ºæ ·å¼ï¼Œcolortoolé¢œè‰²é…ç½®\nå®‰è£…\n123Install-Module -Name PSReadLine -AllowPrerelease -Force # PSReadLinescoop install colortoolscoop install starship\n\nå†™powershellçš„é…ç½®æ–‡ä»¶\næ‰“å¼€é…ç½®æ–‡ä»¶\n123notepad.exe $Profile# or ç”¨vscodecode $Profile\n\nå†™å…¥\n123456789101112131415161718192021222324252627282930313233#-----------------------------------------------------PSReadline# è®¾ç½® Tab é”®è¡¥å…¨Set-PSReadlineKeyHandler -Key Tab -Function Complete# è®¾ç½® Ctrl+d ä¸ºèœå•è¡¥å…¨å’Œ Intellisense# Set-PSReadLineKeyHandler -Key \"Tab\" -Function MenuComplete# è®¾ç½® Ctrl+d ä¸ºé€€å‡º PowerShellSet-PSReadlineKeyHandler -Key \"Ctrl+d\" -Function ViExit# è®¾ç½® Ctrl+z ä¸ºæ’¤é”€Set-PSReadLineKeyHandler -Key \"Ctrl+z\" -Function Undo# è®¾ç½®å‘ä¸Šé”®ä¸ºåå‘æœç´¢å†å²è®°å½•Set-PSReadLineKeyHandler -Key UpArrow -Function HistorySearchBackward# è®¾ç½®å‘ä¸‹é”®ä¸ºå‰å‘æœç´¢å†å²çºªå½•Set-PSReadLineKeyHandler -Key DownArrow -Function HistorySearchForward# ä¸€äº›PSReadlineé…ç½®$PSReadLineOptions = @&#123;    EditMode = \"Emacs\"    HistoryNoDuplicates = $true    HistorySearchCursorMovesToEnd = $true    Colors = @&#123;        # æç¤ºæ–‡å­—é¢œè‰²ï¼ŒåŸæ¥çš„é¢œè‰²å¤ªæµ…äº†ï¼Œæˆ‘è¿™é‡Œæ¢äº†        Prediction = '#8F8B8B'    &#125;&#125;Set-PSReadLineOption @PSReadLineOptions#-----------------------------------------------------starshipInvoke-Expression (&amp;starship init powershell)\n\né…ç½®starship\nåˆ›å»ºè¿™ä¸ªæ–‡ä»¶å¤¹å¹¶åˆ›å»ºstartship.toml\n1mkdir -p ~/.config &amp;&amp; touch ~/.config/starship.toml\n\nå¦‚æœä½ åˆ›å»ºå¤±è´¥ï¼Œè¯´æ˜æœ‰è¿™ä¸ª.configè¿™ä¸ªæ–‡ä»¶å¤¹ï¼Œç›´æ¥\n1touch ~/.config/starship.toml\n\n123notepad.exe ~/.config/starship.toml# orcode ~/.config/starship.toml\n\nå…·ä½“é…ç½®çœ‹å®˜ç½‘ï¼Œè¿™é‡Œå‡ºç°çš„å°æ–¹æ¡†æˆ–è€…ä¹±ç æ˜¯å­—ä½“ç¼ºå¤±ï¼Œæˆ‘è¿™é‡Œç”¨çš„æ˜¯FiraCode Nerd Fontå­—ä½“ï¼Œè¿™ä¸ªåé¢å†è¯´\nå¤§æ¦‚åƒè¿™ä¸ªæ ·å­\n\n\n   1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465[character]      symbol &#x3D; &quot;âœ&quot;    [aws]symbol &#x3D; &quot;îŒ½ &quot;[battery]full_symbol &#x3D; &quot;ï•¸&quot;charging_symbol &#x3D; &quot;ï–ƒ&quot;discharging_symbol &#x3D; &quot;ï–‚&quot;[conda]symbol &#x3D; &quot;ï„Œ &quot;[docker]symbol &#x3D; &quot;ïŒˆ &quot;[elixir]symbol &#x3D; &quot;î‰µ &quot;[elm]symbol &#x3D; &quot;î˜¬ &quot;[git_branch]symbol &#x3D; &quot;ï˜ &quot;[golang]symbol &#x3D; &quot;î˜§ &quot;[haskell]symbol &#x3D; &quot;î˜Ÿ &quot;[hg_branch]symbol &#x3D; &quot;ï˜ &quot;[java]symbol &#x3D; &quot;î‰– &quot;[julia]symbol &#x3D; &quot;î˜¤ &quot;[memory_usage]symbol &#x3D; &quot;ï¡š &quot;[nix_shell]symbol &#x3D; &quot;ï‹œ &quot;[nodejs]# symbol &#x3D; &quot;î‰ &quot;symbol&#x3D;&quot;ï¢˜ &quot;[package]symbol &#x3D; &quot;ï£– &quot;[php]symbol &#x3D; &quot;î˜ˆ &quot;[python]symbol &#x3D; &quot;î˜† &quot;[ruby]symbol &#x3D; &quot;îˆ¾ &quot;[rust]symbol &#x3D; &quot;ï€“ &quot;\n\né…ç½®colortool\n12colortool -s # é¢œè‰²è¡¨colortool  OneHalfDark.itermcolors # colortoolsåé¢è·Ÿä¸»é¢˜åå­—å°±è¡Œ\n\n\n\n\n\nä¸‹è½½å¹¶é…ç½®FiraCode Nerd Fontå­—ä½“ä¸‹è½½FiraCode Nerd Fontå­—ä½“\næ‰“å¼€nerdfontsç½‘ç«™ï¼Œæ»‘åˆ°æœ€ä¸‹é¢æ‰¾åˆ°FiraCode Nerd Fontä¸‹è½½è§£å‹ï¼Œå…¨é€‰&amp;å³é”®å®‰è£…\n\n\nåœ¨vscodeä¸­é…ç½®å­—ä½“\næ‰“å¼€vscodeé…ç½®æ–‡ä»¶ï¼Œå†™å…¥\n1\"editor.fontFamily\": \"FiraCode Nerd Font,Consolas, 'Courier New', monospace\"\n\nè¿™æ—¶å€™ä½ æ‰“å¼€starship.tomlå°±å¯ä»¥çœ‹åˆ°ç¼ºå¤±çš„å­—ä½“äº†\n\nåœ¨windows terminalä¸­é…ç½®å­—ä½“\nåœ¨åç»­windows terminalé…ç½®ä¸­è§\n\né…ç½®windows terminal1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677&#123;    \"$schema\": \"https://aka.ms/terminal-profiles-schema\",    // \"defaultProfile\": \"&#123;61c54bbd-c2c6-5271-96e7-009a87ff44bf&#125;\",    \"defaultProfile\": \"&#123;574e775e-4f2a-5b96-ac1e-a2962a402336&#125;\",    \"copyOnSelect\": true,    \"profiles\": &#123;        \"defaults\": &#123;            \"startingDirectory\": \"./\",            \"useAcrylic\": true,            \"acrylicOpacity\": 0.8        &#125;,        \"list\": [&#123;                \"guid\": \"&#123;61c54bbd-c2c6-5271-96e7-009a87ff44bf&#125;\",                \"name\": \"Windows PowerShell\",                \"commandline\": \"powershell.exe\",                \"hidden\": false,                \"useAcrylic\": true            &#125;,            &#123;                \"guid\": \"&#123;0caa0dad-35be-5f56-a8ff-afceeeaa6101&#125;\",                \"name\": \"cmd\",                \"commandline\": \"cmd.exe\",                \"hidden\": false            &#125;,            &#123;                \"guid\": \"&#123;2c4de342-38b7-51cf-b940-2309a097f518&#125;\",                \"hidden\": false,                \"name\": \"Ubuntu\",                \"source\": \"Windows.Terminal.Wsl\"            &#125;,            &#123;                \"guid\": \"&#123;b453ae62-4e3d-5e58-b989-0a998ec441b8&#125;\",                \"hidden\": false,                \"name\": \"Azure Cloud Shell\",                \"source\": \"Windows.Terminal.Azure\"            &#125;,            // powershell 7            &#123;                \"guid\": \"&#123;574e775e-4f2a-5b96-ac1e-a2962a402336&#125;\",                \"hidden\": false,                \"name\": \"PowerShell\",                \"commandline\": \"C:/Program Files/PowerShell/7-preview/pwsh.exe -nologo\",                \"fontSize\": 12,                // å­—ä½“é…ç½®                \"fontFace\": \"FiraCode Nerd Font\",                \"historySize\": 9001,                \"padding\": \"5, 5, 20, 25\",                \"snapOnInput\": true,                \"colorScheme\": \"Andromeda\",                \"source\": \"Windows.Terminal.PowershellCore\"            &#125;        ]    &#125;,    \"schemes\": [ &#123;        \"name\": \"Andromeda\",        \"black\": \"#000000\",        \"red\": \"#cd3131\",        \"green\": \"#05bc79\",        \"yellow\": \"#e5e512\",        \"blue\": \"#2472c8\",        \"purple\": \"#bc3fbc\",        \"cyan\": \"#0fa8cd\",        \"white\": \"#e5e5e5\",        \"brightBlack\": \"#666666\",        \"brightRed\": \"#cd3131\",        \"brightGreen\": \"#05bc79\",        \"brightYellow\": \"#e5e512\",        \"brightBlue\": \"#2472c8\",        \"brightPurple\": \"#bc3fbc\",        \"brightCyan\": \"#0fa8cd\",        \"brightWhite\": \"#e5e5e5\",        \"background\": \"#262a33\",        \"foreground\": \"#e5e5e5\"    &#125;],    \"keybindings\": []&#125;\n\nè¿™ä¸ªæ—¶å€™æ‰“å¼€windows terminal\n\nwindows terminal åŠ å…¥ç³»ç»Ÿå³é”®win+rè¾“å…¥regeditæ‰¾åˆ°è®¡ç®—æœº\\HKEY_CLASSES_ROOT\\Directory\\Background\\shell æ–°å»ºé¡¹Terminal(åå­—éšä¾¿å–)\n\n\né€‰ä¸­Terminalï¼Œ(é»˜è®¤)ä¸ºå†™å…¥å³é”®çš„æ–‡æœ¬\n\nIconä¸ºå³é”®å›¾æ ‡ï¼Œè‡ªå·±æ‰¾ä¸€ä¸ªico\n\nå³é”®Terminalæ–°å»ºé¡¹commandï¼Œåœ¨é»˜è®¤ä¸‹å†™å…¥å€¼C:\\Users\\niwen\\AppData\\Local\\Microsoft\\WindowsApps\\wt.exe\nè¿™é‡Œçš„niwenæ˜¯æˆ‘ç”µè„‘ç”¨æˆ·çš„åç§°ï¼Œä½ ä»¬è‡ªå·±æ‰¾åˆ°wt.exeç„¶åæŠŠåœ°å€å†™ä¸Šå»å°±è¡Œ\n\nokæå®šç°åœ¨è¯•ä¸€ä¸‹å³é”®ç‚¹å‡»Terminal Here\n\n","plink":"https://www.hansomezao.com/2020/05/28/articles/windows-terminalåŠ powershell7ç¾åŒ–å‘½ä»¤è¡Œæ“ä½œ/"},{"title":"å‰ç«¯ä¸‹è½½åå°è¿”å›çš„æ–‡ä»¶æµ","date":"2020-04-16T03:32:23.000Z","date_formatted":{"ll":"2020å¹´4æœˆ16æ—¥","L":"2020/04/16","MM-DD":"04-16"},"author":"zao","updated":"2020-04-16T03:32:23.000Z","content":"é—®é¢˜åå°è¿”å›\n12content-disposition: attachment;filename=245484+%282%29.jpgcontent-type: application/octet-stream\n\næ‰“å¼€responseä¸ºä¹±ç \nè§£å†³æ–¹æ³•åšå“åº”æ‹¦æˆª,åˆ¤æ–­å½“content-typeä¸ºapplication/octet-stream,è®¾ç½®responseTypeä¸ºblob\nä»¥umi-requestä¸ºä¾‹\n1234567// æ‹¦æˆªå“åº”request.interceptors.response.use(async (response: Response, options: RequestOptionsInit) =&gt; &#123;  if (response.headers.get('Content-Type') === 'application/octet-stream') &#123;    options.responseType='blob'  &#125;  return response&#125;)\n\nå°è£…downloadå‡½æ•°\n1234567891011121314151617/*** ä¸‹è½½æ–‡ä»¶* @param content æ–‡ä»¶æµ* @param fileName æ–‡ä»¶åç§°*/ export const download = (content: any, fileName: string) =&gt; &#123;   const blob = new Blob([content], &#123;     type: 'application/octet-stream'   &#125;);   const a = document.createElement(\"a\");   const url = window.URL.createObjectURL(blob);   const filename = fileName;   a.href = url;   a.download = filename;   a.click();   window.URL.revokeObjectURL(url); &#125;\n\nè¯·æ±‚ï¼Œä»¥umijsçš„useRequestä¸ºä¾‹\n12345678910const downloadFileR = useRequest((meetingId, fileName) =&gt; downloadFile(meetingId, fileName), &#123; manual: true, onSuccess: (result, params) =&gt; &#123;   if (result.code &lt; 0) &#123;     message.error(result.message)   &#125; else &#123;     download(result, params[1])   &#125; &#125;&#125;)\n\nå…¶ä»–çš„è¯·æ±‚åº“å’Œå°è£…æ–¹å¼ç±»ä¼¼ï¼Œä¸å†ä¸¾ä¾‹\n\n","plink":"https://www.hansomezao.com/2020/04/16/articles/å‰ç«¯ä¸‹è½½åå°è¿”å›çš„æ–‡ä»¶æµ/"},{"title":"vscode+wsl+windows terminalç¾åŒ–å’Œæ­å»ºlinuxå¼€å‘ç¯å¢ƒ","date":"2020-03-11T03:23:23.000Z","date_formatted":{"ll":"2020å¹´3æœˆ11æ—¥","L":"2020/03/11","MM-DD":"03-11"},"author":"zao","updated":"2020-03-11T03:23:23.000Z","content":"é“¾æ¥â¡\nvscode + wsl + windows terminal ç¾åŒ–å’Œæ­å»ºlinuxå¼€å‘ç¯å¢ƒ\næ²¡é’±ä¹°mac,windwosä¸‹å‘½ä»¤è¡ŒæŒºéš¾ç”¨çš„,ä¹‹å‰ä¸€ç›´ç”¨cmderè¿˜ä¸é”™,ä½†åæœŸå¡å¡çš„,æ”¹ç”¨äº†windows terminal,çœŸé¦™å•Š,é€Ÿåº¦å’Œå¤–è§‚éƒ½ä¸é”™,åˆšå¥½æœ€è¿‘åœ¨å­¦linux,ä¸€ç›´ç”¨çš„é˜¿é‡Œäº‘åšæµ‹è¯•,æƒ³ç€ç»Ÿä¸€ä¸€ä¸‹åŒ…ç®¡ç†å’Œå‘½ä»¤è¡Œ,å‘ç°äº†wslè¿™ä¸ªä¸œè¥¿,å°±æ‰“ç®—æ”¹é€ ä¸€ä¸‹windows,ä¸ªäººç”µè„‘ç³»ç»Ÿä¸ºwindwos 10 1909,è¯¦ç»†æ“ä½œå¦‚ä¸‹:\n1. å¼€å¯wslã€å®‰è£…linuxè¢«è¿™ä¸ªå‘æƒ¨äº†,windowsç‰ˆæœ¬æ›´æ–°ä¸ä¸Š,ä¸€ç›´å‹¾é€‰ä¸äº†,åæ¥ä¸‹äº†è¡¥ä¸,æ‰“å¼€windowsåŠŸèƒ½ä¸€ç‰‡ç©ºç™½,æˆ‘æœäº†,å”‰,æœ€ååªæœ‰é‡è£…ç³»ç»Ÿäº†\n\nåœ¨windwoså•†åº—å®‰è£…ubuntuæˆ–è€…å…¶ä»–liunx\n2. é…ç½®ubuntuä¸‹è½½å®Œubuntu,ä¼šè®¾ç½®ç”¨æˆ·åå’Œå¯†ç ,è¾“å…¥å¯†ç æ—¶shellä¸Šå¹¶ä¸å¯è§,è¿™é‡Œä¸ç”¨æ‹…å¿ƒã€‚\næ›¿æ¢ä¸‹è½½æºä¸ºé˜¿é‡Œæº12345678910111213sudo vim &#x2F;etc&#x2F;apt&#x2F;sources.listdeb http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; bionic main restricted universe multiversedeb http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; bionic-security main restricted universe multiversedeb http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; bionic-updates main restricted universe multiversedeb http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; bionic-proposed main restricted universe multiversedeb http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; bionic-backports main restricted universe multiversedeb-src http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; bionic main restricted universe multiversedeb-src http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; bionic-security main restricted universe multiversedeb-src http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; bionic-updates main restricted universe multiversedeb-src http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; bionic-proposed main restricted universe multiversedeb-src http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;ubuntu&#x2F; bionic-backports main restricted universe multiversesudo apt-get updatesudo apt-get upgade\n\nå®‰è£…zshã€oh-my-zshæ¥ç¾åŒ–bash123sudo apt install zshsh -c &quot;$(curl -fsSL https:&#x2F;&#x2F;raw.github.com&#x2F;ohmyzsh&#x2F;ohmyzsh&#x2F;master&#x2F;tools&#x2F;install.sh)&quot;\n\nä¸‹è½½nodeã€nã€gitã€yarnã€nrmã€yrmç•¥\né…ç½®windows terminalæ‰“å¼€windows terminalè®¾ç½®è®¾ç½®defaultProfileå³é»˜è®¤æ‰“å¼€çš„terminal\n123456789101112131415161718192021222324252627282930313233343536373839404142434445464748&#123;    \"$schema\": \"https://aka.ms/terminal-profiles-schema\",    // \"defaultProfile\": \"&#123;61c54bbd-c2c6-5271-96e7-009a87ff44bf&#125;\",    \"defaultProfile\": \"&#123;2c4de342-38b7-51cf-b940-2309a097f518&#125;\",    \"copyOnSelect\": true,    \"profiles\": &#123;        \"defaults\": &#123;            // Put settings here that you want to apply to all profiles            \"startingDirectory\": \"./\",            \"useAcrylic\": true,            \"acrylicOpacity\": 0.8        &#125;,        \"list\": [&#123;                // Make changes here to the powershell.exe profile                \"guid\": \"&#123;61c54bbd-c2c6-5271-96e7-009a87ff44bf&#125;\",                \"name\": \"Windows PowerShell\",                \"commandline\": \"powershell.exe\",                \"hidden\": false,                \"useAcrylic\": true            &#125;,            &#123;                // Make changes here to the cmd.exe profile                \"guid\": \"&#123;0caa0dad-35be-5f56-a8ff-afceeeaa6101&#125;\",                \"name\": \"cmd\",                \"commandline\": \"cmd.exe\",                \"hidden\": false            &#125;,            &#123;                \"guid\": \"&#123;2c4de342-38b7-51cf-b940-2309a097f518&#125;\",                \"hidden\": false,                \"name\": \"Ubuntu\",                \"source\": \"Windows.Terminal.Wsl\"            &#125;,            &#123;                \"guid\": \"&#123;b453ae62-4e3d-5e58-b989-0a998ec441b8&#125;\",                \"hidden\": false,                \"name\": \"Azure Cloud Shell\",                \"source\": \"Windows.Terminal.Azure\"            &#125;        ]    &#125;,    // Add custom color schemes to this array    \"schemes\": [],    // Add any keybinding overrides to this array.    // To unbind a default keybinding, set the command to \"unbound\"    \"keybindings\": []&#125;\n\nç³»ç»Ÿçº§å³é”®èœå•,å†™å…¥æ³¨å†Œè¡¨win+rè¾“å…¥regeditæ‰¾åˆ°è®¡ç®—æœº\\HKEY_CLASSES_ROOT\\Directory\\Background\\shell æ–°å»ºé¡¹Terminal(åå­—éšä¾¿å–)\n\né»˜è®¤ä¸ºå³é”®æ–‡æœ¬\n\nIconä¸ºå›¾æ ‡,å€¼ä¸ºå›¾æ ‡åœ°å€,è‡ªå·±åœ¨å®˜ç½‘æ‰¾çš„ico\næ–°å»ºé¡¹command,åœ¨é»˜è®¤ä¸‹é”®å…¥å€¼C:\\Users\\niwen\\AppData\\Local\\Microsoft\\WindowsApps\\wt.exe è¿™é‡Œçš„niwenä½ è¦æ”¹ä¸ºä½ è‡ªå·±ç”µè„‘ç”¨æˆ·çš„åç§°\nå°†åŒæ ·é…ç½®å†™åœ¨è®¡ç®—æœº\\HKEY_CLASSES_ROOT\\Directory\\shellä¸‹\né…ç½®windows terminalçš„&quot;startingDirectory&quot;: &quot;./&quot;\nè¯•ä¸€è¯•å³é”®ç‚¹å‡»Terminal here\n\næ¥å…¥vscodeä¸‹è½½æ’ä»¶Remote - WSL\næ‰“å¼€setting.jsoné…ç½®terminalæ‰“å¼€æ–¹å¼ â€œterminal.integrated.shell.windowsâ€: â€œC:\\WINDOWS\\System32\\wsl.exeâ€ ç°åœ¨è¯•ä¸€è¯•æ•ˆæœ,èˆ’æœ\n\næ¥å…¥code runnerç°åœ¨ä½ çš„æ‰€æœ‰åŒ…éƒ½æ”¾åœ¨wslä¸­,è·‘code runneræ˜¯ä¸è¡Œçš„,é™¤éä½ è‡ªå·±åˆåœ¨windowsä¸Šå®‰è£…ä¸€é\nåªéœ€è¦åœ¨setting.jsonä¸­é…ç½®\n12\"code-runner.runInTerminal\": true,    \"code-runner.terminalRoot\": \"/mnt/\",\n\nå°±å®Œäº‹äº†\n\nç»ˆäºç»“æŸäº†,æˆ‘æ˜¯è¿™æ ·é…ç½®çš„,å¦‚æœæœ‰ä»€ä¹ˆé—®é¢˜æ¬¢è¿æå‡º\n","plink":"https://www.hansomezao.com/2020/03/11/articles/vscode-wsl-windows-terminalç¾åŒ–å’Œæ­å»ºlinuxå¼€å‘ç¯å¢ƒ/"},{"title":"hooksè¿ç§»-å®ç°classä¸­setStateçš„æ•ˆæœ","date":"2020-03-03T10:07:26.000Z","date_formatted":{"ll":"2020å¹´3æœˆ3æ—¥","L":"2020/03/03","MM-DD":"03-03"},"author":"zao","updated":"2020-03-03T10:07:26.000Z","content":"hooksä¸­å®ç°classçš„setStateçš„æ•ˆæœé—®é¢˜setStateæœ‰å›è°ƒå‡½æ•°ï¼Œå¯ä»¥å–å¾—æœ€æ–°çš„stateï¼Œè€Œhooksçš„useStateæ²¡æœ‰å›è°ƒï¼Œä¸èƒ½ç«‹å³å–å¾—æœ€æ–°å€¼ï¼Œè¿™æ˜¯ç”±äºuseStateçš„Capture valueçš„ç‰¹æ€§é€ æˆçš„ï¼Œç½‘ä¸Šè§£é‡ŠæŒºå¤šçš„ï¼Œè¿™é‡Œå°±ä¸å±•å¼€äº†ã€‚\nè§£å†³æ–¹å¼æ ¸å¿ƒæ˜¯é€šè¿‡refæ¥æ¥æ”¶stateï¼Œrefä¸å—Capture valueçš„å½±å“ä¸”å¯ä»¥åœ¨ä½œç”¨åŸŸå†…è®¿é—®\næºç å–å¾—æœ€æ–°å€¼2019å¹´äº†ï¼Œæ•´ç†äº†Nä¸ªå®ç”¨æ¡ˆä¾‹å¸®ä½ å¿«é€Ÿè¿ç§»åˆ°React Hooksæ•´æŒºå¥½çš„ï¼Œæˆ‘åªç”¨tsé‡å†™ä¸€éï¼Œåé¢ç»§ç»­ç”¨\nuseRefState.ts1234567891011121314151617181920212223242526272829303132333435363738394041import &#123;  useState,  useRef,  useCallback,  Dispatch,  SetStateAction,  MutableRefObject&#125; from 'react';const useRefState=&lt;T&gt;(  initialState: T | (() =&gt; T)): [T, Dispatch&lt;SetStateAction&lt;T&gt;&gt;, MutableRefObject&lt;T&gt;] &#123;  const ins = useRef&lt;any&gt;();  const [state, setState] = useState(() =&gt; &#123;    // åˆå§‹åŒ–    const value =      typeof initialState === 'function'        ? (initialState as () =&gt; T)()        : initialState;    ins.current = value;    return value;  &#125;);  const setValue = useCallback(value =&gt; &#123;    if (typeof value === 'function') &#123;      setState(prevState =&gt; &#123;        const finalValue = value(prevState);        ins.current = finalValue;        return finalValue;      &#125;);    &#125; else &#123;      ins.current = value;      setState(value);    &#125;  &#125;, []);  return [state, setValue, ins];&#125;export default useRefState;\n\nå›è°ƒå‡½æ•°ç»“åˆä¸Šé¢çš„hooks\nuseCBState.ts1234567891011121314151617181920212223242526272829import &#123; useEffect, useRef, MutableRefObject &#125; from 'react';import useRefState from './useRefState';const useCBState = &lt;T&gt;(  initState: T | (() =&gt; T)): [  T,  (state: T | ((prev: T) =&gt; T), cb: () =&gt; any) =&gt; void,  MutableRefObject&lt;T|undefined&gt;] =&gt; &#123;  const [state, setState, ins] = useRefState(initState);  let isUpdate = useRef&lt;any&gt;();  const setCBState = (state: T | ((prev: T) =&gt; T), cb: () =&gt; any) =&gt; &#123;    setState(prev =&gt; &#123;      isUpdate.current = cb;      return typeof state === 'function'        ? (state as (prev: T) =&gt; T)(prev)        : state;    &#125;);  &#125;;  useEffect(() =&gt; &#123;    if (isUpdate.current) &#123;      isUpdate.current();    &#125;  &#125;);  return [state, setCBState, ins];&#125;;export default useCBState;\n\nå®é™…ä¸Šï¼Œåˆ°è¿™é‡Œå·®ä¸å¤šå°±å®Œäº†ï¼Œè¦å®Œå…¨å®ç°setStateçš„åŠŸèƒ½å³åœ¨å›è°ƒå‡½æ•°é‡Œå–å¾—æœ€æ–°å€¼ï¼Œä¹Ÿå¯ä»¥æŠŠæœ€æ–°å€¼æ”¾åˆ°å®ƒçš„å‡½æ•°ä½œç”¨åŸŸå†…ã€‚\n","plink":"https://www.hansomezao.com/2020/03/03/articles/hooksè¿ç§»-å®ç°classä¸­setStateçš„æ•ˆæœ/"},{"title":"åŸmdæ‰¹é‡ä¿®æ”¹ä¸ºhexoæ–‡ç« æ ¼å¼","date":"2020-03-02T09:12:33.000Z","date_formatted":{"ll":"2020å¹´3æœˆ2æ—¥","L":"2020/03/02","MM-DD":"03-02"},"author":"zao","updated":"2020-03-02T09:12:33.000Z","content":"éœ€æ±‚æˆ‘æƒ³æŠŠä»¥å‰æ”¶é›†çš„ç¬”è®°å’Œæ–‡ç« å…¨éƒ¨è¿ç§»åˆ°æˆ‘çš„ hexo åšå®¢ä¸‹,ä¸€ä¸ªä¸ªå¤åˆ¶ç²˜è´´ front-matter å¥½éº»çƒ¦å“¦,äºæ˜¯æƒ³åˆ°åˆ©ç”¨ node.js æ‰¹é‡ç”Ÿæˆ\næ ¸å¿ƒæ­¥éª¤æŒºç®€å•çš„,ä¹Ÿæ²¡ä»€ä¹ˆå¥½è¯´çš„\nè¯»å–æºæ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰ md æ–‡ä»¶\nå¾ªç¯éå† md æ–‡ä»¶æ‰§è¡Œè¯»å–æ–‡ä»¶ä¿¡æ¯\nç”Ÿæˆæ‘¸æ¿æŠŠä¿¡æ¯åµŒå…¥è¿›å»\nè¯»å–æºæ–‡ä»¶ä¿å­˜æ•°æ®å¹¶åœ¨æ•°æ®å¼€å¤´æ·»åŠ æ¨¡æ¿\nå†™å…¥æ–‡ä»¶\n\næºä»£ç mdToHexoPost.js123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657let fs = require('fs');let path = require('path');/** * åœ¨mdå¤´éƒ¨å†™å…¥hexoæ–‡ç« ä¿¡æ¯ * @param &#123;string&#125; sourceRoot ç›®æ ‡æ–‡ä»¶çš„æ ¹è·¯å¾„ * @param &#123;string&#125; sourceFilePath ç›®æ ‡æ–‡ä»¶åœ¨æ ¹è·¯å¾„ä¸‹çš„è·¯å¾„ * @param &#123;string&#125; tag æ–‡ç« æ ‡ç­¾ */async function writeFileToLine(sourceRoot, targetRoot, sourceFilePath, tag) &#123;  try &#123;    let targetRootPath = path.join(targetRoot, `copy/$&#123;sourceFilePath&#125;`);    let filePath = path.join(sourceRoot, sourceFilePath);    let fileInfo = await fs.statSync(filePath);    let cTime = fileInfo.ctime      .toLocaleString()      .replace('T', ' ')      .slice(0, 19);    let title = sourceFilePath.slice(0, -3);    let template = `---title: $&#123;title&#125;date: $&#123;cTime&#125;tags: $&#123;tag&#125;category: noteauthor: zaotoc: truereward: falsecopyright: false---`;    let data = await fs.readFileSync(filePath, 'utf8').split(/\\r\\n|\\n|\\r/gm);    data.splice(-data.length, 0, template);    await fs.writeFileSync(targetRootPath, data.join('\\n'));  &#125; catch (error) &#123;    console.log('å¤±è´¥');    console.log(error);  &#125;&#125;/** * å¾ªç¯ç”Ÿæˆpost * @param &#123;string&#125; sourceRoot æºæ–‡ä»¶æ ¹è·¯å¾„ * @param &#123;string&#125; targetRoot ç›®æ ‡æ–‡ä»¶æ ¹è·¯å¾„ * @param &#123;string&#125; tag æ–‡ç« tag */async function writeFileLoop(sourceRoot, targetRoot, tag) &#123;  // let root = __dirname;  let targetDir = path.join(targetRoot, 'copy');  if (!fs.readdirSync(targetRoot).includes('copy')) &#123;    await fs.mkdirSync(targetDir);  &#125;  let files = await fs.readdirSync(sourceRoot);  let mdList = files.filter(item =&gt; item.match(/(.*)\\.md/));  mdList.forEach(file =&gt; writeFileToLine(sourceRoot, targetRoot, file, tag));&#125;writeFileLoop('c:\\\\Users\\\\Administrator\\\\Desktop', __dirname, 'js');\n\npsæ ¸å¿ƒæ€æƒ³æŒºç®€å•çš„,å…·ä½“æƒ…å†µè¿˜æ˜¯è¦æ”¹å“ˆä»£ç ,æˆ‘åªæ˜¯æ ¹æ®æˆ‘è‡ªå·±çš„æƒ…å†µè¿™ä¹ˆå†™çš„,ä¸è¿‡æ ¸å¿ƒæ€æƒ³æ²¡å˜,ğŸ˜‚\n","plink":"https://www.hansomezao.com/2020/03/02/articles/åŸmdæ‰¹é‡ä¿®æ”¹ä¸ºhexoæ–‡ç« æ ¼å¼/"},{"title":"hexo","date":"2020-02-29T04:55:20.000Z","date_formatted":{"ll":"2020å¹´2æœˆ29æ—¥","L":"2020/02/29","MM-DD":"02-29"},"author":"zao","updated":"2020-02-29T04:55:20.000Z","content":"ä¸€ã€æ–‡ä»¶ç›®å½•ç»“æ„12345678.â”œâ”€â”€ _config.ymlâ”œâ”€â”€ package.jsonâ”œâ”€â”€ scaffoldsâ”œâ”€â”€ source|   â”œâ”€â”€ _drafts|   â””â”€â”€ _postsâ””â”€â”€ themes\n\nscaffolds:\næ¨¡æ¿æ–‡ä»¶å¤¹ï¼Œæ–°å»ºæ–‡ç« æ—¶ï¼Œhexoä¼šæ ¹æ®scaffoldæ¥å»ºç«‹æ–‡ä»¶\n\nsource\nèµ„æºæ–‡ä»¶å¤¹æ˜¯å­˜æ”¾ç”¨æˆ·èµ„æºçš„åœ°æ–¹ã€‚é™¤ _posts æ–‡ä»¶å¤¹ä¹‹å¤–ï¼Œå¼€å¤´å‘½åä¸º _ (ä¸‹åˆ’çº¿)çš„æ–‡ä»¶ / æ–‡ä»¶å¤¹å’Œéšè—çš„æ–‡ä»¶å°†ä¼šè¢«å¿½ç•¥ã€‚Markdown å’Œ HTML æ–‡ä»¶ä¼šè¢«è§£æå¹¶æ”¾åˆ° public æ–‡ä»¶å¤¹ï¼Œè€Œå…¶ä»–æ–‡ä»¶ä¼šè¢«æ‹·è´è¿‡å»ã€‚\n\nthemes\nä¸»ä½“æ–‡ä»¶å¤¹ï¼Œhexoæ ¹æ®ä¸»é¢˜ï¼Œæ ¸å¿ƒæ˜¯ejsï¼Œæ¥ç”Ÿæˆé™æ€é¡µé¢\n\nsourceèµ„æºæ–‡ä»¶å¤¹assetèµ„æºï¼ˆAssetï¼‰ä»£è¡¨ source æ–‡ä»¶å¤¹ä¸­é™¤äº†æ–‡ç« ä»¥å¤–çš„æ‰€æœ‰æ–‡ä»¶ï¼Œä¾‹å¦‚å›¾ç‰‡ã€CSSã€JS æ–‡ä»¶ç­‰ã€‚æ¯”æ–¹è¯´ï¼Œå¦‚æœä½ çš„Hexoé¡¹ç›®ä¸­åªæœ‰å°‘é‡å›¾ç‰‡ï¼Œé‚£æœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯å°†å®ƒä»¬æ”¾åœ¨ source/images æ–‡ä»¶å¤¹ä¸­ã€‚ç„¶åé€šè¿‡ç±»ä¼¼äº ![](/images/image.jpg) çš„æ–¹æ³•è®¿é—®å®ƒä»¬ã€‚\næ–‡ç« èµ„æºæ–‡ä»¶å¤¹å¯¹äºé‚£äº›æƒ³è¦æ›´æœ‰è§„å¾‹åœ°æä¾›å›¾ç‰‡å’Œå…¶ä»–èµ„æºä»¥åŠæƒ³è¦å°†ä»–ä»¬çš„èµ„æºåˆ†å¸ƒåœ¨å„ä¸ªæ–‡ç« ä¸Šçš„äººæ¥è¯´ï¼ŒHexoä¹Ÿæä¾›äº†æ›´ç»„ç»‡åŒ–çš„æ–¹å¼æ¥ç®¡ç†èµ„æºã€‚è¿™ä¸ªç¨å¾®æœ‰äº›å¤æ‚ä½†æ˜¯ç®¡ç†èµ„æºéå¸¸æ–¹ä¾¿çš„åŠŸèƒ½å¯ä»¥é€šè¿‡å°† config.yml æ–‡ä»¶ä¸­çš„ post_asset_folder é€‰é¡¹è®¾ä¸º true æ¥æ‰“å¼€ã€‚\n1_config.ymlpost_asset_folder: true\n\nå½“èµ„æºæ–‡ä»¶ç®¡ç†åŠŸèƒ½æ‰“å¼€åï¼ŒHexoå°†ä¼šåœ¨ä½ æ¯ä¸€æ¬¡é€šè¿‡ hexo new [layout] &lt;title&gt; å‘½ä»¤åˆ›å»ºæ–°æ–‡ç« æ—¶è‡ªåŠ¨åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ã€‚è¿™ä¸ªèµ„æºæ–‡ä»¶å¤¹å°†ä¼šæœ‰ä¸è¿™ä¸ªæ–‡ç« æ–‡ä»¶ä¸€æ ·çš„åå­—ã€‚å°†æ‰€æœ‰ä¸ä½ çš„æ–‡ç« æœ‰å…³çš„èµ„æºæ”¾åœ¨è¿™ä¸ªå…³è”æ–‡ä»¶å¤¹ä¸­ä¹‹åï¼Œä½ å¯ä»¥é€šè¿‡ç›¸å¯¹è·¯å¾„æ¥å¼•ç”¨å®ƒä»¬ï¼Œè¿™æ ·ä½ å°±å¾—åˆ°äº†ä¸€ä¸ªæ›´ç®€å•è€Œä¸”æ–¹ä¾¿å¾—å¤šçš„å·¥ä½œæµã€‚\nç›¸å¯¹è·¯å¾„å¼•ç”¨çš„æ ‡ç­¾æ’ä»¶é€šè¿‡å¸¸è§„çš„ markdown è¯­æ³•å’Œç›¸å¯¹è·¯å¾„æ¥å¼•ç”¨å›¾ç‰‡å’Œå…¶å®ƒèµ„æºå¯èƒ½ä¼šå¯¼è‡´å®ƒä»¬åœ¨å­˜æ¡£é¡µæˆ–è€…ä¸»é¡µä¸Šæ˜¾ç¤ºä¸æ­£ç¡®ã€‚åœ¨Hexo 2æ—¶ä»£ï¼Œç¤¾åŒºåˆ›å»ºäº†å¾ˆå¤šæ’ä»¶æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ä½†æ˜¯ï¼Œéšç€Hexo 3 çš„å‘å¸ƒï¼Œè®¸å¤šæ–°çš„æ ‡ç­¾æ’ä»¶è¢«åŠ å…¥åˆ°äº†æ ¸å¿ƒä»£ç ä¸­ã€‚è¿™ä½¿å¾—ä½ å¯ä»¥æ›´ç®€å•åœ°åœ¨æ–‡ç« ä¸­å¼•ç”¨ä½ çš„èµ„æºã€‚\n1&#123;% asset_path slug %&#125;&#123;% asset_img slug [title] %&#125;&#123;% asset_link slug [title] %&#125;\n\næ¯”å¦‚è¯´ï¼šå½“ä½ æ‰“å¼€æ–‡ç« èµ„æºæ–‡ä»¶å¤¹åŠŸèƒ½åï¼Œä½ æŠŠä¸€ä¸ª example.jpg å›¾ç‰‡æ”¾åœ¨äº†ä½ çš„èµ„æºæ–‡ä»¶å¤¹ä¸­ï¼Œå¦‚æœé€šè¿‡ä½¿ç”¨ç›¸å¯¹è·¯å¾„çš„å¸¸è§„ markdown è¯­æ³• ![](/example.jpg) ï¼Œå®ƒå°† ä¸ä¼š å‡ºç°åœ¨é¦–é¡µä¸Šã€‚ï¼ˆä½†æ˜¯å®ƒä¼šåœ¨æ–‡ç« ä¸­æŒ‰ä½ æœŸå¾…çš„æ–¹å¼å·¥ä½œï¼‰\næ­£ç¡®çš„å¼•ç”¨å›¾ç‰‡æ–¹å¼æ˜¯ä½¿ç”¨ä¸‹åˆ—çš„æ ‡ç­¾æ’ä»¶è€Œä¸æ˜¯ markdown ï¼š\n1&#123;% asset_img example.jpg This is an example image %&#125;\n\né€šè¿‡è¿™ç§æ–¹å¼ï¼Œå›¾ç‰‡å°†ä¼šåŒæ—¶å‡ºç°åœ¨æ–‡ç« å’Œä¸»é¡µä»¥åŠå½’æ¡£é¡µä¸­ã€‚\næ•°æ®æ–‡ä»¶_dataæœ‰æ—¶æ‚¨å¯èƒ½éœ€è¦åœ¨ä¸»é¢˜ä¸­ä½¿ç”¨æŸäº›èµ„æ–™ï¼Œè€Œè¿™äº›èµ„æ–™å¹¶ä¸åœ¨æ–‡ç« å†…ï¼Œå¹¶ä¸”æ˜¯éœ€è¦é‡å¤ä½¿ç”¨çš„ï¼Œé‚£ä¹ˆæ‚¨å¯ä»¥è€ƒè™‘ä½¿ç”¨ Hexo 3.0 æ–°å¢çš„ã€Œæ•°æ®æ–‡ä»¶ã€åŠŸèƒ½ã€‚æ­¤åŠŸèƒ½ä¼šè½½å…¥ source/_data å†…çš„ YAML æˆ– JSON æ–‡ä»¶ï¼Œå¦‚æ­¤ä¸€æ¥æ‚¨ä¾¿èƒ½åœ¨ç½‘ç«™ä¸­å¤ç”¨è¿™äº›æ–‡ä»¶äº†ã€‚\nä¸¾ä¾‹æ¥è¯´ï¼Œåœ¨ source/_data æ–‡ä»¶å¤¹ä¸­æ–°å»º menu.yml æ–‡ä»¶ï¼š\n1Home: &#x2F;Gallery: &#x2F;gallery&#x2F;Archives: &#x2F;archives&#x2F;\n\næ‚¨å°±èƒ½åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨è¿™äº›èµ„æ–™ï¼š\n1&lt;% for (var link in site.data.menu) &#123; %&gt;  &lt;a href&#x3D;&quot;&lt;%&#x3D; site.data.menu[link] %&gt;&quot;&gt; &lt;%&#x3D; link %&gt; &lt;&#x2F;a&gt;&lt;% &#125; %&gt;\n\næ¸²æŸ“ç»“æœå¦‚ä¸‹ :\n1&lt;a href&#x3D;&quot;&#x2F;&quot;&gt; Home &lt;&#x2F;a&gt;&lt;a href&#x3D;&quot;&#x2F;gallery&#x2F;&quot;&gt; Gallery &lt;&#x2F;a&gt;&lt;a href&#x3D;&quot;&#x2F;archives&#x2F;&quot;&gt; Archives &lt;&#x2F;a&gt;\n\n_config.ymlç½‘ç«™\nå‚æ•°æè¿°\n\ntitleç½‘ç«™æ ‡é¢˜\n\nsubtitleç½‘ç«™å‰¯æ ‡é¢˜\n\ndescriptionç½‘ç«™æè¿°\n\nkeywordsç½‘ç«™çš„å…³é”®è¯ã€‚ä½¿ç”¨åŠè§’é€—å· , åˆ†éš”å¤šä¸ªå…³é”®è¯ã€‚\n\nauthoræ‚¨çš„åå­—\n\nlanguageç½‘ç«™ä½¿ç”¨çš„è¯­è¨€\n\ntimezoneç½‘ç«™æ—¶åŒºã€‚Hexo é»˜è®¤ä½¿ç”¨æ‚¨ç”µè„‘çš„æ—¶åŒºã€‚è¯·å‚è€ƒ æ—¶åŒºåˆ—è¡¨ è¿›è¡Œè®¾ç½®ï¼Œå¦‚ America/New_York, Japan, å’Œ UTC ã€‚ä¸€èˆ¬çš„ï¼Œå¯¹äºä¸­å›½å¤§é™†åœ°åŒºå¯ä»¥ä½¿ç”¨ Asia/Shanghaiã€‚\nå…¶ä¸­ï¼Œdescriptionä¸»è¦ç”¨äºSEOï¼Œå‘Šè¯‰æœç´¢å¼•æ“ä¸€ä¸ªå…³äºæ‚¨ç«™ç‚¹çš„ç®€å•æè¿°ï¼Œé€šå¸¸å»ºè®®åœ¨å…¶ä¸­åŒ…å«æ‚¨ç½‘ç«™çš„å…³é”®è¯ã€‚authorå‚æ•°ç”¨äºä¸»é¢˜æ˜¾ç¤ºæ–‡ç« çš„ä½œè€…ã€‚\nç½‘å€\nå‚æ•°æè¿°é»˜è®¤å€¼\n\nurlç½‘å€\n\nrootç½‘ç«™æ ¹ç›®å½•\n\npermalinkæ–‡ç« çš„ æ°¸ä¹…é“¾æ¥ æ ¼å¼:year/:month/:day/:title/\n\npermalink_defaultsæ°¸ä¹…é“¾æ¥ä¸­å„éƒ¨åˆ†çš„é»˜è®¤å€¼\n\npretty_urlsæ”¹å†™ permalink çš„å€¼æ¥ç¾åŒ– URL\n\npretty_urls.trailing_indexæ˜¯å¦åœ¨æ°¸ä¹…é“¾æ¥ä¸­ä¿ç•™å°¾éƒ¨çš„ index.htmlï¼Œè®¾ç½®ä¸º false æ—¶å»é™¤true\n\npretty_urls.trailing_htmlæ˜¯å¦åœ¨æ°¸ä¹…é“¾æ¥ä¸­ä¿ç•™å°¾éƒ¨çš„ .html, è®¾ç½®ä¸º false æ—¶å»é™¤ (å¯¹å°¾éƒ¨çš„ index.htmlæ— æ•ˆ)true\nç›®å½•\nå‚æ•°æè¿°é»˜è®¤å€¼\n\nsource_dirèµ„æºæ–‡ä»¶å¤¹ï¼Œè¿™ä¸ªæ–‡ä»¶å¤¹ç”¨æ¥å­˜æ”¾å†…å®¹ã€‚source\n\npublic_dirå…¬å…±æ–‡ä»¶å¤¹ï¼Œè¿™ä¸ªæ–‡ä»¶å¤¹ç”¨äºå­˜æ”¾ç”Ÿæˆçš„ç«™ç‚¹æ–‡ä»¶ã€‚public\n\ntag_diræ ‡ç­¾æ–‡ä»¶å¤¹tags\n\narchive_dirå½’æ¡£æ–‡ä»¶å¤¹archives\n\ncategory_diråˆ†ç±»æ–‡ä»¶å¤¹categories\n\ncode_dirInclude code æ–‡ä»¶å¤¹ï¼Œsource_dir ä¸‹çš„å­ç›®å½•downloads/code\n\ni18n_dirå›½é™…åŒ–ï¼ˆi18nï¼‰æ–‡ä»¶å¤¹:lang\n\nskip_renderè·³è¿‡æŒ‡å®šæ–‡ä»¶çš„æ¸²æŸ“ã€‚åŒ¹é…åˆ°çš„æ–‡ä»¶å°†ä¼šè¢«ä¸åšæ”¹åŠ¨åœ°å¤åˆ¶åˆ° public ç›®å½•ä¸­ã€‚æ‚¨å¯ä½¿ç”¨ glob è¡¨è¾¾å¼æ¥åŒ¹é…è·¯å¾„ã€‚\næ–‡ç« \nå‚æ•°æè¿°é»˜è®¤å€¼\n\nnew_post_nameæ–°æ–‡ç« çš„æ–‡ä»¶åç§°:title.md\n\ndefault_layouté¢„è®¾å¸ƒå±€post\n\nauto_spacingåœ¨ä¸­æ–‡å’Œè‹±æ–‡ä¹‹é—´åŠ å…¥ç©ºæ ¼false\n\ntitlecaseæŠŠæ ‡é¢˜è½¬æ¢ä¸º title casefalse\n\nexternal_linkåœ¨æ–°æ ‡ç­¾ä¸­æ‰“å¼€é“¾æ¥true\n\nexternal_link.enableåœ¨æ–°æ ‡ç­¾ä¸­æ‰“å¼€é“¾æ¥true\n\nexternal_link.fieldå¯¹æ•´ä¸ªç½‘ç«™ï¼ˆsiteï¼‰ç”Ÿæ•ˆæˆ–ä»…å¯¹æ–‡ç« ï¼ˆpostï¼‰ç”Ÿæ•ˆsite\n\nexternal_link.excludeéœ€è¦æ’é™¤çš„åŸŸåã€‚ä¸»åŸŸåå’Œå­åŸŸåå¦‚ www éœ€åˆ†åˆ«é…ç½®[]\n\nfilename_caseæŠŠæ–‡ä»¶åç§°è½¬æ¢ä¸º (1) å°å†™æˆ– (2) å¤§å†™0\n\nrender_draftsæ˜¾ç¤ºè‰ç¨¿false\n\npost_asset_folderå¯åŠ¨ Asset æ–‡ä»¶å¤¹false\n\nrelative_linkæŠŠé“¾æ¥æ”¹ä¸ºä¸æ ¹ç›®å½•çš„ç›¸å¯¹ä½å€false\n\nfutureæ˜¾ç¤ºæœªæ¥çš„æ–‡ç« true\n\nhighlightä»£ç å—çš„è®¾ç½®\n\nhighlight.enableå¼€å¯ä»£ç å—é«˜äº®true\n\nhighlight.auto_detectå¦‚æœæœªæŒ‡å®šè¯­è¨€ï¼Œåˆ™å¯ç”¨è‡ªåŠ¨æ£€æµ‹false\n\nhighlight.line_numberæ˜¾ç¤ºè¡Œæ•° Enabling this option will also enable wrap optiontrue\n\nhighlight.tab_replaceç”¨ n ä¸ªç©ºæ ¼æ›¿æ¢ tabsï¼›å¦‚æœå€¼ä¸ºç©ºï¼Œåˆ™ä¸ä¼šæ›¿æ¢ tabs&#39;&#39;\n\nhighlight.wrapWrap the code block in ``true\n\nhighlight.hljsUse the hljs-* prefix for CSS classesfalse\nåˆ†ç±» &amp; æ ‡ç­¾\nå‚æ•°æè¿°é»˜è®¤å€¼\n\ndefault_categoryé»˜è®¤åˆ†ç±»uncategorized\n\ncategory_mapåˆ†ç±»åˆ«å\n\ntag_mapæ ‡ç­¾åˆ«å\næ—¥æœŸ / æ—¶é—´æ ¼å¼Hexo ä½¿ç”¨ Moment.js æ¥è§£æå’Œæ˜¾ç¤ºæ—¶é—´ã€‚\n\nå‚æ•°æè¿°é»˜è®¤å€¼\n\ndate_formatæ—¥æœŸæ ¼å¼YYYY-MM-DD\n\ntime_formatæ—¶é—´æ ¼å¼HH:mm:ss\n\nuse_date_for_updatedå¯ç”¨ä»¥åï¼Œå¦‚æœ Front Matter ä¸­æ²¡æœ‰æŒ‡å®š updatedï¼Œ post.updated å°†ä¼šä½¿ç”¨ date çš„å€¼è€Œä¸æ˜¯æ–‡ä»¶çš„åˆ›å»ºæ—¶é—´ã€‚åœ¨ Git å·¥ä½œæµä¸­è¿™ä¸ªé€‰é¡¹ä¼šå¾ˆæœ‰ç”¨true\nåˆ†é¡µ\nå‚æ•°æè¿°é»˜è®¤å€¼\n\nper_pageæ¯é¡µæ˜¾ç¤ºçš„æ–‡ç« é‡ (0 = å…³é—­åˆ†é¡µåŠŸèƒ½)10\n\npagination_diråˆ†é¡µç›®å½•page\næ‰©å±•\nå‚æ•°æè¿°\n\nthemeå½“å‰ä¸»é¢˜åç§°ã€‚å€¼ä¸ºfalseæ—¶ç¦ç”¨ä¸»é¢˜\n\ntheme_configä¸»é¢˜çš„é…ç½®æ–‡ä»¶ã€‚åœ¨è¿™é‡Œæ”¾ç½®çš„é…ç½®ä¼šè¦†ç›–ä¸»é¢˜ç›®å½•ä¸‹çš„ _config.yml ä¸­çš„é…ç½®\n\ndeployéƒ¨ç½²éƒ¨åˆ†çš„è®¾ç½®\n\nmeta_generatorMeta generator æ ‡ç­¾ã€‚ å€¼ä¸º false æ—¶ Hexo ä¸ä¼šåœ¨å¤´éƒ¨æ’å…¥è¯¥æ ‡ç­¾\nthemesç›®å½•ç»“æ„123456.â”œâ”€â”€ _config.ymlâ”œâ”€â”€ languagesâ”œâ”€â”€ layoutâ”œâ”€â”€ scriptsâ””â”€â”€ source\n\n_config.ymlä¸»é¢˜çš„é…ç½®æ–‡ä»¶ã€‚ä¿®æ”¹æ—¶è‡ªåŠ¨æ›´æ–°ï¼Œæ— éœ€é‡å¯æœåŠ¡å™¨ã€‚\nlanguagesè¯­è¨€æ–‡ä»¶å¤¹\nlayoutå¸ƒå±€æ–‡ä»¶å¤¹ã€‚ç”¨äºå­˜æ”¾ä¸»é¢˜çš„æ¨¡æ¿æ–‡ä»¶ï¼Œå†³å®šäº†ç½‘ç«™å†…å®¹çš„å‘ˆç°æ–¹å¼ï¼ŒHexo å†…å»º Swig æ¨¡æ¿å¼•æ“ï¼Œæ‚¨å¯ä»¥å¦å¤–å®‰è£…æ’ä»¶æ¥è·å¾— EJSã€Haml æˆ– Jade æ”¯æŒï¼ŒHexo æ ¹æ®æ¨¡æ¿æ–‡ä»¶çš„æ‰©å±•åæ¥å†³å®šæ‰€ä½¿ç”¨çš„æ¨¡æ¿å¼•æ“ï¼Œä¾‹å¦‚ï¼š\n12layout.ejs   - ä½¿ç”¨ EJSlayout.swig  - ä½¿ç”¨ Swig\n\nscriptsè„šæœ¬æ–‡ä»¶å¤¹ã€‚åœ¨å¯åŠ¨æ—¶ï¼ŒHexo ä¼šè½½å…¥æ­¤æ–‡ä»¶å¤¹å†…çš„ JavaScript æ–‡ä»¶ï¼Œè¯·å‚è§ æ’ä»¶ ä»¥è·å¾—æ›´å¤šä¿¡æ¯ã€‚\nsourceèµ„æºæ–‡ä»¶å¤¹ï¼Œé™¤äº†æ¨¡æ¿ä»¥å¤–çš„ Assetï¼Œä¾‹å¦‚ CSSã€JavaScript æ–‡ä»¶ç­‰ï¼Œéƒ½åº”è¯¥æ”¾åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ä¸­ã€‚æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹å¼€å¤´åç§°ä¸º _ï¼ˆä¸‹åˆ’çº¿çº¿ï¼‰æˆ–éšè—çš„æ–‡ä»¶ä¼šè¢«å¿½ç•¥ã€‚\nå¦‚æœæ–‡ä»¶å¯ä»¥è¢«æ¸²æŸ“çš„è¯ï¼Œä¼šç»è¿‡è§£æç„¶åå‚¨å­˜åˆ° public æ–‡ä»¶å¤¹ï¼Œå¦åˆ™ä¼šç›´æ¥æ‹·è´åˆ° public æ–‡ä»¶å¤¹ã€‚\næŒ‡ä»¤ç”Ÿæˆæ–‡ä»¶ä½¿ç”¨ Hexo ç”Ÿæˆé™æ€æ–‡ä»¶å¿«é€Ÿè€Œä¸”ç®€å•ã€‚\n1$ hexo generate\n\nç›‘è§†æ–‡ä»¶å˜åŠ¨Hexo èƒ½å¤Ÿç›‘è§†æ–‡ä»¶å˜åŠ¨å¹¶ç«‹å³é‡æ–°ç”Ÿæˆé™æ€æ–‡ä»¶ï¼Œåœ¨ç”Ÿæˆæ—¶ä¼šæ¯”å¯¹æ–‡ä»¶çš„ SHA1 checksumï¼Œåªæœ‰å˜åŠ¨çš„æ–‡ä»¶æ‰ä¼šå†™å…¥ã€‚\n1$ hexo generate --watch\n\nå®Œæˆåéƒ¨ç½²æ‚¨å¯æ‰§è¡Œä¸‹åˆ—çš„å…¶ä¸­ä¸€ä¸ªå‘½ä»¤ï¼Œè®© Hexo åœ¨ç”Ÿæˆå®Œæ¯•åè‡ªåŠ¨éƒ¨ç½²ç½‘ç«™ï¼Œä¸¤ä¸ªå‘½ä»¤çš„ä½œç”¨æ˜¯ç›¸åŒçš„ã€‚\n1$ hexo generate --deploy$ hexo deploy --generate\n\n\nç®€å†™\nä¸Šé¢ä¸¤ä¸ªå‘½ä»¤å¯ä»¥ç®€å†™ä¸º$ hexo g -d$ hexo d -g\n\ninit1`$ hexo init [folder]`\n\nnew1`$ hexo new [layout] &lt;title&gt;`\n\næ–°å»ºä¸€ç¯‡æ–‡ç« ã€‚å¦‚æœæ²¡æœ‰è®¾ç½® layout çš„è¯ï¼Œé»˜è®¤ä½¿ç”¨ _config.yml ä¸­çš„ default_layout å‚æ•°ä»£æ›¿ã€‚å¦‚æœæ ‡é¢˜åŒ…å«ç©ºæ ¼çš„è¯ï¼Œè¯·ä½¿ç”¨å¼•å·æ‹¬èµ·æ¥ã€‚\n1$ hexo new \"post title with whitespace\"\n\n\nå‚æ•°æè¿°\n\n-p, --pathè‡ªå®šä¹‰æ–°æ–‡ç« çš„è·¯å¾„\n\n-r, --replaceå¦‚æœå­˜åœ¨åŒåæ–‡ç« ï¼Œå°†å…¶æ›¿æ¢\n\n-s, --slugæ–‡ç« çš„ Slugï¼Œä½œä¸ºæ–°æ–‡ç« çš„æ–‡ä»¶åå’Œå‘å¸ƒåçš„ URL\né»˜è®¤æƒ…å†µä¸‹ï¼ŒHexo ä¼šä½¿ç”¨æ–‡ç« çš„æ ‡é¢˜æ¥å†³å®šæ–‡ç« æ–‡ä»¶çš„è·¯å¾„ã€‚å¯¹äºç‹¬ç«‹é¡µé¢æ¥è¯´ï¼ŒHexo ä¼šåˆ›å»ºä¸€ä¸ªä»¥æ ‡é¢˜ä¸ºåå­—çš„ç›®å½•ï¼Œå¹¶åœ¨ç›®å½•ä¸­æ”¾ç½®ä¸€ä¸ª index.md æ–‡ä»¶ã€‚ä½ å¯ä»¥ä½¿ç”¨ --path å‚æ•°æ¥è¦†ç›–ä¸Šè¿°è¡Œä¸ºã€è‡ªè¡Œå†³å®šæ–‡ä»¶çš„ç›®å½•ï¼š\n1hexo new page --path about/me \"About me\"\n\nä»¥ä¸Šå‘½ä»¤ä¼šåˆ›å»ºä¸€ä¸ª source/about/me.md æ–‡ä»¶ï¼ŒåŒæ—¶ Front Matter ä¸­çš„ title ä¸º &quot;About me&quot;\næ³¨æ„ï¼title æ˜¯å¿…é¡»æŒ‡å®šçš„ï¼å¦‚æœä½ è¿™ä¹ˆåšå¹¶ä¸èƒ½è¾¾åˆ°ä½ çš„ç›®çš„ï¼š\n1hexo new page --path about/me\n\næ­¤æ—¶ Hexo ä¼šåˆ›å»º source/_posts/about/me.mdï¼ŒåŒæ—¶ me.md çš„ Front Matter ä¸­çš„ title ä¸º &quot;page&quot;ã€‚è¿™æ˜¯å› ä¸ºåœ¨ä¸Šè¿°å‘½ä»¤ä¸­ï¼Œhexo-cli å°† page è§†ä¸ºæŒ‡å®šæ–‡ç« çš„æ ‡é¢˜ã€å¹¶é‡‡ç”¨é»˜è®¤çš„ layoutã€‚\ngenerate1$ hexo generate\n\nç”Ÿæˆé™æ€æ–‡ä»¶ã€‚\n\né€‰é¡¹æè¿°\n\n-d, --deployæ–‡ä»¶ç”Ÿæˆåç«‹å³éƒ¨ç½²ç½‘ç«™\n\n-w, --watchç›‘è§†æ–‡ä»¶å˜åŠ¨\n\n-b, --bailç”Ÿæˆè¿‡ç¨‹ä¸­å¦‚æœå‘ç”Ÿä»»ä½•æœªå¤„ç†çš„å¼‚å¸¸åˆ™æŠ›å‡ºå¼‚å¸¸\n\n-f, --forceå¼ºåˆ¶é‡æ–°ç”Ÿæˆæ–‡ä»¶ Hexo å¼•å…¥äº†å·®åˆ†æœºåˆ¶ï¼Œå¦‚æœ public ç›®å½•å­˜åœ¨ï¼Œé‚£ä¹ˆ hexo g åªä¼šé‡æ–°ç”Ÿæˆæ”¹åŠ¨çš„æ–‡ä»¶ã€‚ ä½¿ç”¨è¯¥å‚æ•°çš„æ•ˆæœæ¥è¿‘ hexo clean &amp;&amp; hexo generate\n\n-c, --concurrencyæœ€å¤§åŒæ—¶ç”Ÿæˆæ–‡ä»¶çš„æ•°é‡ï¼Œé»˜è®¤æ— é™åˆ¶\nè¯¥å‘½ä»¤å¯ä»¥ç®€å†™ä¸º\n1$ hexo g\n\npublish1$ hexo publish [layout] &lt;filename&gt;\n\nå‘è¡¨è‰ç¨¿ã€‚\nserver1$ hexo server\n\nå¯åŠ¨æœåŠ¡å™¨ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œè®¿é—®ç½‘å€ä¸ºï¼š http://localhost:4000/ã€‚\n\né€‰é¡¹æè¿°\n\n-p, --porté‡è®¾ç«¯å£\n\n-s, --staticåªä½¿ç”¨é™æ€æ–‡ä»¶\n\n-l, --logå¯åŠ¨æ—¥è®°è®°å½•ï¼Œä½¿ç”¨è¦†ç›–è®°å½•æ ¼å¼\ndeploy1$ hexo deploy\n\néƒ¨ç½²ç½‘ç«™ã€‚\n\nå‚æ•°æè¿°\n\n-g, --generateéƒ¨ç½²ä¹‹å‰é¢„å…ˆç”Ÿæˆé™æ€æ–‡ä»¶\nè¯¥å‘½ä»¤å¯ä»¥ç®€å†™ä¸ºï¼š\n1$ hexo d\n\nrender1$ hexo render &lt;file1&gt; [file2] ...\n\næ¸²æŸ“æ–‡ä»¶ã€‚\n\nå‚æ•°æè¿°\n\n-o, --outputè®¾ç½®è¾“å‡ºè·¯å¾„\nmigrate1$ hexo migrate &lt;type&gt;\n\nä»å…¶ä»–åšå®¢ç³»ç»Ÿ è¿ç§»å†…å®¹ã€‚\nclean1$ hexo clean\n\næ¸…é™¤ç¼“å­˜æ–‡ä»¶ (db.json) å’Œå·²ç”Ÿæˆçš„é™æ€æ–‡ä»¶ (public)ã€‚\nåœ¨æŸäº›æƒ…å†µï¼ˆå°¤å…¶æ˜¯æ›´æ¢ä¸»é¢˜åï¼‰ï¼Œå¦‚æœå‘ç°æ‚¨å¯¹ç«™ç‚¹çš„æ›´æ”¹æ— è®ºå¦‚ä½•ä¹Ÿä¸ç”Ÿæ•ˆï¼Œæ‚¨å¯èƒ½éœ€è¦è¿è¡Œè¯¥å‘½ä»¤ã€‚\nlist1$ hexo list &lt;type&gt;\n\nåˆ—å‡ºç½‘ç«™èµ„æ–™ã€‚\nè‡ªå®šä¹‰é…ç½®æ–‡ä»¶çš„è·¯å¾„1234567# ä½¿ç”¨ custom.yml ä»£æ›¿é»˜è®¤çš„ _config.yml$ hexo server --config custom.yml# ä½¿ç”¨ custom.yml å’Œ custom2.jsonï¼Œå…¶ä¸­ custom2.json ä¼˜å…ˆçº§æ›´é«˜$ hexo generate --config custom.yml,custom2.json,custom3.yml\n\nè‡ªå®šä¹‰é…ç½®æ–‡ä»¶çš„è·¯å¾„ï¼ŒæŒ‡å®šè¿™ä¸ªå‚æ•°åå°†ä¸å†ä½¿ç”¨é»˜è®¤çš„ _config.ymlã€‚ä½ å¯ä»¥ä½¿ç”¨ä¸€ä¸ª YAML æˆ– JSON æ–‡ä»¶çš„è·¯å¾„ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨é€—å·åˆ†éš”ï¼ˆæ— ç©ºæ ¼ï¼‰çš„å¤šä¸ª YAML æˆ– JSON æ–‡ä»¶çš„è·¯å¾„ã€‚ä¾‹å¦‚ï¼š\n1234567# ä½¿ç”¨ custom.yml ä»£æ›¿é»˜è®¤çš„ _config.yml$ hexo server --config custom.yml# ä½¿ç”¨ custom.yml, custom2.json å’Œ custom3.ymlï¼Œå…¶ä¸­ custom3.yml ä¼˜å…ˆçº§æœ€é«˜ï¼Œå…¶æ¬¡æ˜¯ custom2.json$ hexo generate --config custom.yml,custom2.json,custom3.yml\n\nå½“ä½ æŒ‡å®šäº†å¤šä¸ªé…ç½®æ–‡ä»¶ä»¥åï¼ŒHexo ä¼šæŒ‰é¡ºåºå°†è¿™éƒ¨åˆ†é…ç½®æ–‡ä»¶åˆå¹¶æˆä¸€ä¸ª _multiconfig.ymlã€‚å¦‚æœé‡åˆ°é‡å¤çš„é…ç½®ï¼Œæ’åœ¨åé¢çš„æ–‡ä»¶çš„é…ç½®ä¼šè¦†ç›–æ’åœ¨å‰é¢çš„æ–‡ä»¶çš„é…ç½®ã€‚è¿™ä¸ªåŸåˆ™é€‚ç”¨äºä»»æ„æ•°é‡ã€ä»»æ„æ·±åº¦çš„ YAML å’Œ JSON æ–‡ä»¶ã€‚\noptions$ hexo --safe\n1232. &#96;&#96;&#96;shell   $ hexo --debug\n\n$ hexo --silent\n1234. &#96;&#96;&#96;shell   $ hexo --draft&#96;\n\n```shell$ hexo â€“cwd /path/to/cwd`\n1234## Front-matterFront-matter æ˜¯æ–‡ä»¶æœ€ä¸Šæ–¹ä»¥ &#96;---&#96; åˆ†éš”çš„åŒºåŸŸï¼Œç”¨äºæŒ‡å®šä¸ªåˆ«æ–‡ä»¶çš„å˜é‡ï¼Œä¸¾ä¾‹æ¥è¯´ï¼š\nâ€”title: Hello Worlddate: 2013/7/13 20:46:25â€”\n12345678910111213141516171819202122232425ä»¥ä¸‹æ˜¯é¢„å…ˆå®šä¹‰çš„å‚æ•°ï¼Œæ‚¨å¯åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨è¿™äº›å‚æ•°å€¼å¹¶åŠ ä»¥åˆ©ç”¨ã€‚| å‚æ•°         | æè¿°                                                 | é»˜è®¤å€¼       || :----------- | :--------------------------------------------------- | :----------- || &#96;layout&#96;     | å¸ƒå±€                                                 |              || &#96;title&#96;      | æ ‡é¢˜                                                 | æ–‡ç« çš„æ–‡ä»¶å || &#96;date&#96;       | å»ºç«‹æ—¥æœŸ                                             | æ–‡ä»¶å»ºç«‹æ—¥æœŸ || &#96;updated&#96;    | æ›´æ–°æ—¥æœŸ                                             | æ–‡ä»¶æ›´æ–°æ—¥æœŸ || &#96;comments&#96;   | å¼€å¯æ–‡ç« çš„è¯„è®ºåŠŸèƒ½                                   | true         || &#96;tags&#96;       | æ ‡ç­¾ï¼ˆä¸é€‚ç”¨äºåˆ†é¡µï¼‰                                 |              || &#96;categories&#96; | åˆ†ç±»ï¼ˆä¸é€‚ç”¨äºåˆ†é¡µï¼‰                                 |              || &#96;permalink&#96;  | è¦†ç›–æ–‡ç« ç½‘å€                                         |              || &#96;keywords&#96;   | ä»…ç”¨äº meta æ ‡ç­¾å’Œ Open Graph çš„å…³é”®è¯ï¼ˆä¸æ¨èä½¿ç”¨ï¼‰ |              |### åˆ†ç±»å’Œæ ‡ç­¾åªæœ‰æ–‡ç« æ”¯æŒåˆ†ç±»å’Œæ ‡ç­¾ï¼Œæ‚¨å¯ä»¥åœ¨ Front-matter ä¸­è®¾ç½®ã€‚åœ¨å…¶ä»–ç³»ç»Ÿä¸­ï¼Œåˆ†ç±»å’Œæ ‡ç­¾å¬èµ·æ¥å¾ˆæ¥è¿‘ï¼Œä½†æ˜¯åœ¨ Hexo ä¸­ä¸¤è€…æœ‰ç€æ˜æ˜¾çš„å·®åˆ«ï¼šåˆ†ç±»å…·æœ‰é¡ºåºæ€§å’Œå±‚æ¬¡æ€§ï¼Œä¹Ÿå°±æ˜¯è¯´ &#96;Foo, Bar&#96; ä¸ç­‰äº &#96;Bar, Foo&#96;ï¼›è€Œæ ‡ç­¾æ²¡æœ‰é¡ºåºå’Œå±‚æ¬¡ã€‚&#96;&#96;&#96;yamlcategories:  - Diarytags:  - PS3  - Games\n\n\nåˆ†ç±»æ–¹æ³•çš„åˆ†æ­§\nå¦‚æœæ‚¨æœ‰è¿‡ä½¿ç”¨ WordPress çš„ç»éªŒï¼Œå°±å¾ˆå®¹æ˜“è¯¯è§£ Hexo çš„åˆ†ç±»æ–¹å¼ã€‚WordPress æ”¯æŒå¯¹ä¸€ç¯‡æ–‡ç« è®¾ç½®å¤šä¸ªåˆ†ç±»ï¼Œè€Œä¸”è¿™äº›åˆ†ç±»å¯ä»¥æ˜¯åŒçº§çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯çˆ¶å­åˆ†ç±»ã€‚ä½†æ˜¯ Hexo ä¸æ”¯æŒæŒ‡å®šå¤šä¸ªåŒçº§åˆ†ç±»ã€‚ä¸‹é¢çš„æŒ‡å®šæ–¹æ³•ï¼š\n123categories:  - Diary  - Life\n\nä¼šä½¿åˆ†ç±»Lifeæˆä¸ºDiaryçš„å­åˆ†ç±»ï¼Œè€Œä¸æ˜¯å¹¶åˆ—åˆ†ç±»ã€‚å› æ­¤ï¼Œæœ‰å¿…è¦ä¸ºæ‚¨çš„æ–‡ç« é€‰æ‹©å°½å¯èƒ½å‡†ç¡®çš„åˆ†ç±»ã€‚\nå¦‚æœä½ éœ€è¦ä¸ºæ–‡ç« æ·»åŠ å¤šä¸ªåˆ†ç±»ï¼Œå¯ä»¥å°è¯•ä»¥ä¸‹ list ä¸­çš„æ–¹æ³•ã€‚\n1234categories:  - [Diary, PlayStation]  - [Diary, Games]  - [Life]\n\næ­¤æ—¶è¿™ç¯‡æ–‡ç« åŒæ—¶åŒ…æ‹¬ä¸‰ä¸ªåˆ†ç±»ï¼š PlayStation å’Œ Games åˆ†åˆ«éƒ½æ˜¯çˆ¶åˆ†ç±» Diary çš„å­åˆ†ç±»ï¼ŒåŒæ—¶ Life æ˜¯ä¸€ä¸ªæ²¡æœ‰å­åˆ†ç±»çš„åˆ†ç±»ã€‚\n\nJSON Front-matteré™¤äº† YAML å¤–ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ JSON æ¥ç¼–å†™ Front-matterï¼Œåªè¦å°† --- ä»£æ¢æˆ ;;; å³å¯ã€‚\n123\"title\": \"Hello World\",\"date\": \"2013/7/13 20:46:25\";;;\n\næ ‡ç­¾æ’ä»¶ï¼ˆTag Pluginsï¼‰æ ‡ç­¾æ’ä»¶å’Œ Front-matter ä¸­çš„æ ‡ç­¾ä¸åŒï¼Œå®ƒä»¬æ˜¯ç”¨äºåœ¨æ–‡ç« ä¸­å¿«é€Ÿæ’å…¥ç‰¹å®šå†…å®¹çš„æ’ä»¶ã€‚\nå¼•ç”¨å—åœ¨æ–‡ç« ä¸­æ’å…¥å¼•è¨€ï¼Œå¯åŒ…å«ä½œè€…ã€æ¥æºå’Œæ ‡é¢˜ã€‚\nåˆ«å·ï¼š quote\n123&#123;% blockquote [author[, source]] [link] [source_link_title] %&#125;content&#123;% endblockquote %&#125;\n\næ ·ä¾‹æ²¡æœ‰æä¾›å‚æ•°ï¼Œåˆ™åªè¾“å‡ºæ™®é€šçš„ blockquote\n123&#123;% blockquote %&#125;Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque hendrerit lacus ut purus iaculis feugiat. Sed nec tempor elit, quis aliquam neque. Curabitur sed diam eget dolor fermentum semper at eu lorem.&#123;% endblockquote %&#125;\n\n\nLorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque hendrerit lacus ut purus iaculis feugiat. Sed nec tempor elit, quis aliquam neque. Curabitur sed diam eget dolor fermentum semper at eu lorem.\n\nå¼•ç”¨ä¹¦ä¸Šçš„å¥å­\n123&#123;% blockquote David Levithan, Wide Awake %&#125;Do not just seek happiness for yourself. Seek happiness for all. Through kindness. Through mercy.&#123;% endblockquote %&#125;\n\n\nDo not just seek happiness for yourself. Seek happiness for all. Through kindness. Through mercy.\nDavid LevithanWide Awake\n\nå¼•ç”¨ Twitter\n123&#123;% blockquote @DevDocs https:&#x2F;&#x2F;twitter.com&#x2F;devdocs&#x2F;status&#x2F;356095192085962752 %&#125;NEW: DevDocs now comes with syntax highlighting. http:&#x2F;&#x2F;devdocs.io&#123;% endblockquote %&#125;\n\n\nNEW: DevDocs now comes with syntax highlighting. http://devdocs.io\n@DevDocstwitter.com/devdocs/status/356095192085962752\n\nå¼•ç”¨ç½‘ç»œä¸Šçš„æ–‡ç« \n123&#123;% blockquote Seth Godin http:&#x2F;&#x2F;sethgodin.typepad.com&#x2F;seths_blog&#x2F;2009&#x2F;07&#x2F;welcome-to-island-marketing.html Welcome to Island Marketing %&#125;Every interaction is both precious and an opportunity to delight.&#123;% endblockquote %&#125;\n\n\nEvery interaction is both precious and an opportunity to delight.\nSeth GodinWelcome to Island Marketing\n\nä»£ç å—åœ¨æ–‡ç« ä¸­æ’å…¥ä»£ç ã€‚\nåˆ«åï¼š code\n123&#123;% codeblock [title] [lang:language] [url] [link text] [additional options] %&#125;code snippet&#123;% endcodeblock %&#125;\n\nSpecify additional options in option:value format, e.g. line_number:false first_line:5.\n\nExtra OptionsDescriptionDefault\n\nline_numberShow line numbertrue\n\nhighlightEnable code highlightingtrue\n\nfirst_lineSpecify the first line number1\n\nmarkLine highlight specific line(s), each value separated by a comma. Specify number range using a dash Example: mark:1,4-7,10 will mark line 1, 4 to 7 and 10.\n\nwrapWrap the code block in ``true\næ ·ä¾‹æ™®é€šçš„ä»£ç å—\n12345&#123;% codeblock %&#125;alert(&#39;Hello World!&#39;);&#123;% endcodeblock %&#125;alert(&#39;Hello World!&#39;);\n\næŒ‡å®šè¯­è¨€\n12345&#123;% codeblock lang:objc %&#125;[rectangle setX: 10 y: 10 width: 20 height: 20];&#123;% endcodeblock %&#125;[rectangle setX: 10 y: 10 width: 20 height: 20];\n\né™„åŠ è¯´æ˜\n12345&#123;% codeblock Array.map %&#125;array.map(callback[, thisArg])&#123;% endcodeblock %&#125;Array.maparray.map(callback[, thisArg])\n\né™„åŠ è¯´æ˜å’Œç½‘å€\n12345&#123;% codeblock _.compact http:&#x2F;&#x2F;underscorejs.org&#x2F;#compact Underscore.js %&#125;_.compact([0, 1, false, 2, &#39;&#39;, 3]);&#x3D;&gt; [1, 2, 3]&#123;% endcodeblock %&#125;_.compactUnderscore.js_.compact([0, 1, false, 2, &#39;&#39;, 3]);&#x3D;&gt; [1, 2, 3]\n\nåå¼•å·ä»£ç å—å¦ä¸€ç§å½¢å¼çš„ä»£ç å—ï¼Œä¸åŒçš„æ˜¯å®ƒä½¿ç”¨ä¸‰ä¸ªåå¼•å·æ¥åŒ…è£¹ã€‚\n``` [language] [title] [url] [link text] code snippet ```\nPull Quoteåœ¨æ–‡ç« ä¸­æ’å…¥ Pull quoteã€‚\n123&#123;% pullquote [class] %&#125;content&#123;% endpullquote %&#125;\n\njsFiddleåœ¨æ–‡ç« ä¸­åµŒå…¥ jsFiddleã€‚\n1&#123;% jsfiddle shorttag [tabs] [skin] [width] [height] %&#125;\n\nGiståœ¨æ–‡ç« ä¸­åµŒå…¥ Gistã€‚\n1&#123;% gist gist_id [filename] %&#125;\n\niframeåœ¨æ–‡ç« ä¸­æ’å…¥ iframeã€‚\n1&#123;% iframe url [width] [height] %&#125;\n\nImageåœ¨æ–‡ç« ä¸­æ’å…¥æŒ‡å®šå¤§å°çš„å›¾ç‰‡ã€‚\n1&#123;% img [class names] &#x2F;path&#x2F;to&#x2F;image [width] [height] &#39;&quot;title text&quot; &quot;alt text&quot;&#39; %&#125;\n\nLinkåœ¨æ–‡ç« ä¸­æ’å…¥é“¾æ¥ï¼Œå¹¶è‡ªåŠ¨ç»™å¤–éƒ¨é“¾æ¥æ·»åŠ  target=&quot;_blank&quot; å±æ€§ã€‚\n1&#123;% link text url [external] [title] %&#125;\n\nInclude Codeæ’å…¥ source/downloads/code æ–‡ä»¶å¤¹å†…çš„ä»£ç æ–‡ä»¶ã€‚source/downloads/code ä¸æ˜¯å›ºå®šçš„ï¼Œå–å†³äºä½ åœ¨é…ç½®æ–‡ä»¶ä¸­ code_dir çš„é…ç½®ã€‚\n1&#123;% include_code [title] [lang:language] [from:line] [to:line] path&#x2F;to&#x2F;file %&#125;\n\næ ·ä¾‹åµŒå…¥ test.js æ–‡ä»¶å…¨æ–‡1&#123;% include_code lang:javascript test.js %&#125;\n\nåªåµŒå…¥ç¬¬ 3 è¡Œ1&#123;% include_code lang:javascript from:3 to:3 test.js %&#125;\n\nåµŒå…¥ç¬¬ 5 è¡Œè‡³ç¬¬ 8 è¡Œ1&#123;% include_code lang:javascript from:5 to:8 test.js %&#125;\n\nåµŒå…¥ç¬¬ 5 è¡Œè‡³æ–‡ä»¶ç»“æŸ1&#123;% include_code lang:javascript from:5 test.js %&#125;\n\nåµŒå…¥ç¬¬ 1 è¡Œè‡³ç¬¬ 8 è¡Œ1&#123;% include_code lang:javascript to:8 test.js %&#125;\n\nYoutubeåœ¨æ–‡ç« ä¸­æ’å…¥ Youtube è§†é¢‘ã€‚\n1&#123;% youtube video_id %&#125;\n\nVimeoåœ¨æ–‡ç« ä¸­æ’å…¥ Vimeo è§†é¢‘ã€‚\n1&#123;% vimeo video_id %&#125;\n\nå¼•ç”¨æ–‡ç« å¼•ç”¨å…¶ä»–æ–‡ç« çš„é“¾æ¥ã€‚\n1&#123;% post_path filename %&#125;&#123;% post_link filename [title] [escape] %&#125;\n\nåœ¨ä½¿ç”¨æ­¤æ ‡ç­¾æ—¶å¯ä»¥å¿½ç•¥æ–‡ç« æ–‡ä»¶æ‰€åœ¨çš„è·¯å¾„æˆ–è€…æ–‡ç« çš„æ°¸ä¹…é“¾æ¥ä¿¡æ¯ã€å¦‚è¯­è¨€ã€æ—¥æœŸã€‚\nä¾‹å¦‚ï¼Œåœ¨æ–‡ç« ä¸­ä½¿ç”¨  æ—¶ï¼Œåªéœ€æœ‰ä¸€ä¸ªåä¸º how-to-bake-a-cake.md çš„æ–‡ç« æ–‡ä»¶å³å¯ã€‚å³ä½¿è¿™ä¸ªæ–‡ä»¶ä½äºç«™ç‚¹æ–‡ä»¶å¤¹çš„ source/posts/2015-02-my-family-holiday ç›®å½•ä¸‹ã€æˆ–è€…æ–‡ç« çš„æ°¸ä¹…é“¾æ¥æ˜¯ 2018/en/how-to-bake-a-cakeï¼Œéƒ½æ²¡æœ‰å½±å“ã€‚\né»˜è®¤é“¾æ¥æ–‡å­—æ˜¯æ–‡ç« çš„æ ‡é¢˜ï¼Œä½ ä¹Ÿå¯ä»¥è‡ªå®šä¹‰è¦æ˜¾ç¤ºçš„æ–‡æœ¬ã€‚æ­¤æ—¶ä¸åº”è¯¥ä½¿ç”¨ Markdown è¯­æ³• []()ã€‚\né»˜è®¤å¯¹æ–‡ç« çš„æ ‡é¢˜å’Œè‡ªå®šä¹‰æ ‡é¢˜é‡Œçš„ç‰¹æ®Šå­—ç¬¦è¿›è¡Œè½¬ä¹‰ã€‚å¯ä»¥ä½¿ç”¨escapeé€‰é¡¹ï¼Œç¦æ­¢å¯¹ç‰¹æ®Šå­—ç¬¦è¿›è¡Œè½¬ä¹‰ã€‚\né“¾æ¥ä½¿ç”¨æ–‡ç« çš„æ ‡é¢˜1&#123;% post_link hexo-3-8-released %&#125;\n\nHexo 3.8.0 Released\né“¾æ¥ä½¿ç”¨è‡ªå®šä¹‰æ–‡å­—1&#123;% post_link hexo-3-8-released &#39;é€šå¾€æ–‡ç« çš„é“¾æ¥&#39; %&#125;\n\né€šå¾€æ–‡ç« çš„é“¾æ¥\nå¯¹æ ‡é¢˜çš„ç‰¹æ®Šå­—ç¬¦è¿›è¡Œè½¬ä¹‰1&#123;% post_link hexo-4-released &#39;How to use &lt;b&gt; tag in title&#39; %&#125;\n\nHow to use  tag in title\nç¦æ­¢å¯¹æ ‡é¢˜çš„ç‰¹æ®Šå­—ç¬¦è¿›è¡Œè½¬ä¹‰1&#123;% post_link hexo-4-released &#39;&lt;b&gt;bold&lt;&#x2F;b&gt; custom title&#39; false %&#125;\n\nbold custom title\nå¼•ç”¨èµ„æºå¼•ç”¨æ–‡ç« çš„èµ„æºã€‚\n1&#123;% asset_path filename %&#125;&#123;% asset_img filename [title] %&#125;&#123;% asset_link filename [title] [escape] %&#125;\n\nRawå¦‚æœæ‚¨æƒ³åœ¨æ–‡ç« ä¸­æ’å…¥ Swig æ ‡ç­¾ï¼Œå¯ä»¥å°è¯•ä½¿ç”¨ Raw æ ‡ç­¾ï¼Œä»¥å…å‘ç”Ÿè§£æå¼‚å¸¸ã€‚\n1&#123;% raw %&#125;content&#123;% endraw %&#125;\n\næ–‡ç« æ‘˜è¦å’Œæˆªæ–­åœ¨æ–‡ç« ä¸­ä½¿ç”¨ &lt;!-- more --&gt;ï¼Œé‚£ä¹ˆ &lt;!-- more --&gt; ä¹‹å‰çš„æ–‡å­—å°†ä¼šè¢«è§†ä¸ºæ‘˜è¦ã€‚é¦–é¡µä¸­å°†åªå‡ºç°è¿™éƒ¨åˆ†æ–‡å­—ï¼ŒåŒæ—¶è¿™éƒ¨åˆ†æ–‡å­—ä¹Ÿä¼šå‡ºç°åœ¨æ­£æ–‡ä¹‹ä¸­ã€‚\nä¾‹å¦‚ï¼š\n1Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.&lt;!-- more --&gt;Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\n\né¦–é¡µä¸­å°†åªä¼šå‡ºç°\n1Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.\n\næ­£æ–‡ä¸­åˆ™ä¼šå‡ºç°\n1Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\n\næ³¨æ„ï¼Œæ‘˜è¦å¯èƒ½ä¼šè¢« Front Matter ä¸­çš„ excerpt è¦†ç›–ã€‚\nè‡ªå®šä¹‰æ°¸ä¹…é“¾æ¥ï¼ˆPermalinksï¼‰æ‚¨å¯ä»¥åœ¨ _config.yml é…ç½®ä¸­è°ƒæ•´ç½‘ç«™çš„æ°¸ä¹…é“¾æ¥æˆ–è€…åœ¨æ¯ç¯‡æ–‡ç« çš„ Front-matter ä¸­æŒ‡å®šã€‚\nå˜é‡é™¤äº†ä¸‹åˆ—å˜é‡å¤–ï¼Œæ‚¨è¿˜å¯ä½¿ç”¨ Front-matter ä¸­çš„æ‰€æœ‰å±æ€§ã€‚\n\nå˜é‡æè¿°\n\n:yearæ–‡ç« çš„å‘è¡¨å¹´ä»½ï¼ˆ4 ä½æ•°ï¼‰\n\n:monthæ–‡ç« çš„å‘è¡¨æœˆä»½ï¼ˆ2 ä½æ•°ï¼‰\n\n:i_monthæ–‡ç« çš„å‘è¡¨æœˆä»½ï¼ˆå»æ‰å¼€å¤´çš„é›¶ï¼‰\n\n:dayæ–‡ç« çš„å‘è¡¨æ—¥æœŸ (2 ä½æ•°)\n\n:i_dayæ–‡ç« çš„å‘è¡¨æ—¥æœŸï¼ˆå»æ‰å¼€å¤´çš„é›¶ï¼‰\n\n:houræ–‡ç« å‘è¡¨æ—¶çš„å°æ—¶ (2 ä½æ•°)\n\n:minuteæ–‡ç« å‘è¡¨æ—¶çš„åˆ†é’Ÿ (2 ä½æ•°)\n\n:titleæ–‡ä»¶åç§°\n\n:post_titleæ–‡ç« æ ‡é¢˜\n\n:idæ–‡ç«  ID (not persistent across cache reset)\n\n:categoryåˆ†ç±»ã€‚å¦‚æœæ–‡ç« æ²¡æœ‰åˆ†ç±»ï¼Œåˆ™æ˜¯ default_category é…ç½®ä¿¡æ¯ã€‚\næ‚¨å¯åœ¨ permalink_defaults å‚æ•°ä¸‹è°ƒæ•´æ°¸ä¹…é“¾æ¥ä¸­å„å˜é‡çš„é»˜è®¤å€¼ï¼š\n12permalink_defaults:   lang: en\n\nç¤ºä¾‹å‡è®¾ source/_posts æ–‡ä»¶å¤¹ä¸­æœ‰ä¸ª hello-world.mdï¼ŒåŒ…å«ä»¥ä¸‹å†…å®¹ï¼š\n12345title: Hello Worlddate: 2013-07-14 17:01:34categories:  - foo  - bar\n\n\nå‚æ•°ç»“æœ\n\n:year/:month/:day/:title/2013/07/14/hello-world/\n\n:year-:month-:day-:title.html2013-07-14-hello-world.html\n\n:category/:title/foo/bar/hello-world/\nå¤šè¯­ç§æ”¯æŒè‹¥è¦å»ºç«‹ä¸€ä¸ªå¤šè¯­ç§çš„ç½‘ç«™ï¼Œæ‚¨å¯ä¿®æ”¹ new_post_name å’Œ permalink å‚æ•°ï¼Œå¦‚ä¸‹ï¼š\n12new_post_name: :lang/:title.mdpermalink: :lang/:title/\n\nå½“æ‚¨å»ºç«‹æ–°æ–‡ç« æ—¶ï¼Œæ–‡ç« ä¼šè¢«å‚¨å­˜åˆ°ï¼š\n12$ hexo new \"Hello World\" --lang tw# =&gt; source/_posts/tw/Hello-World.md\n\nè€Œç½‘å€ä¼šæ˜¯ï¼š\n1http:&#x2F;&#x2F;localhost:4000&#x2F;tw&#x2F;hello-world&#x2F;\n\næ¨¡ç‰ˆæ¨¡æ¿å†³å®šäº†ç½‘ç«™å†…å®¹çš„å‘ˆç°æ–¹å¼ï¼Œæ¯ä¸ªä¸»é¢˜è‡³å°‘éƒ½åº”åŒ…å«ä¸€ä¸ª index æ¨¡æ¿ï¼Œä»¥ä¸‹æ˜¯å„é¡µé¢ç›¸å¯¹åº”çš„æ¨¡æ¿åç§°ï¼š\n\næ¨¡æ¿ç”¨é€”å›é€€\n\nindexé¦–é¡µ\n\npostæ–‡ç« index\n\npageåˆ†é¡µindex\n\narchiveå½’æ¡£index\n\ncategoryåˆ†ç±»å½’æ¡£archive\n\ntagæ ‡ç­¾å½’æ¡£archive\nå¸ƒå±€ï¼ˆLayoutï¼‰å¦‚æœé¡µé¢ç»“æ„ç±»ä¼¼ï¼Œä¾‹å¦‚ä¸¤ä¸ªæ¨¡æ¿éƒ½æœ‰é¡µé¦–ï¼ˆHeaderï¼‰å’Œé¡µè„šï¼ˆFooterï¼‰ï¼Œæ‚¨å¯è€ƒè™‘é€šè¿‡ã€Œå¸ƒå±€ã€è®©ä¸¤ä¸ªæ¨¡æ¿å…±äº«ç›¸åŒçš„ç»“æ„ã€‚ä¸€ä¸ªå¸ƒå±€æ–‡ä»¶å¿…é¡»è¦èƒ½æ˜¾ç¤º body å˜é‡çš„å†…å®¹ï¼Œå¦‚æ­¤ä¸€æ¥æ¨¡æ¿çš„å†…å®¹æ‰ä¼šè¢«æ˜¾ç¤ºï¼Œä¸¾ä¾‹æ¥è¯´ï¼š\n12345678index.ejsindexlayout.ejs&lt;!DOCTYPE html&gt;&lt;html&gt;   &lt;body&gt;&lt;%- body %&gt;&lt;&#x2F;body&gt;&lt;&#x2F;html&gt;\n\nç”Ÿæˆï¼š\n1234&lt;!DOCTYPE html&gt;&lt;html&gt;    &lt;body&gt;index&lt;&#x2F;body&gt;&lt;&#x2F;html&gt;\n\næ¯ä¸ªæ¨¡æ¿éƒ½é»˜è®¤ä½¿ç”¨ layout å¸ƒå±€ï¼Œæ‚¨å¯åœ¨ front-matter æŒ‡å®šå…¶ä»–å¸ƒå±€ï¼Œæˆ–æ˜¯è®¾ä¸º false æ¥å…³é—­å¸ƒå±€åŠŸèƒ½ï¼Œæ‚¨ç”šè‡³å¯åœ¨å¸ƒå±€ä¸­å†ä½¿ç”¨å…¶ä»–å¸ƒå±€æ¥å»ºç«‹åµŒå¥—å¸ƒå±€ã€‚\nå±€éƒ¨æ¨¡ç‰ˆï¼ˆPartialï¼‰å±€éƒ¨æ¨¡æ¿è®©æ‚¨åœ¨ä¸åŒæ¨¡æ¿ä¹‹é—´å…±äº«ç›¸åŒçš„ç»„ä»¶ï¼Œä¾‹å¦‚é¡µé¦–ï¼ˆHeaderï¼‰ã€é¡µè„šï¼ˆFooterï¼‰æˆ–ä¾§è¾¹æ ï¼ˆSidebarï¼‰ç­‰ï¼Œå¯åˆ©ç”¨å±€éƒ¨æ¨¡æ¿åŠŸèƒ½åˆ†å‰²ä¸ºä¸ªåˆ«æ–‡ä»¶ï¼Œè®©ç»´æŠ¤æ›´åŠ ä¾¿åˆ©ã€‚ä¸¾ä¾‹æ¥è¯´ï¼š\n123456partial&#x2F;header.ejs&lt;h1 id&#x3D;&quot;logo&quot;&gt;&lt;%&#x3D; config.title %&gt;&lt;&#x2F;h1&gt;index.ejs&lt;%- partial(&#39;partial&#x2F;header&#39;) %&gt;&lt;div id&#x3D;&quot;content&quot;&gt;Home page&lt;&#x2F;div&gt;\n\nç”Ÿæˆï¼š\n12&lt;h1 id&#x3D;&quot;logo&quot;&gt;My Site&lt;&#x2F;h1&gt;&lt;div id&#x3D;&quot;content&quot;&gt;Home page&lt;&#x2F;div&gt;\n\nå±€éƒ¨å˜é‡æ‚¨å¯ä»¥åœ¨å±€éƒ¨æ¨¡æ¿ä¸­æŒ‡å®šå±€éƒ¨å˜é‡å¹¶ä½¿ç”¨ã€‚\n123456partial&#x2F;header.ejs&lt;h1 id&#x3D;&quot;logo&quot;&gt;&lt;%&#x3D; title %&gt;&lt;&#x2F;h1&gt;index.ejs&lt;%- partial(&#39;partial&#x2F;header&#39;, &#123;title: &#39;Hello World&#39;&#125;) %&gt;&lt;div id&#x3D;&quot;content&quot;&gt;Home page&lt;&#x2F;div&gt;\n\nç”Ÿæˆï¼š\n12&lt;h1 id&#x3D;&quot;logo&quot;&gt;Hello World&lt;&#x2F;h1&gt;&lt;div id&#x3D;&quot;content&quot;&gt;Home page&lt;&#x2F;div&gt;\n\nä¼˜åŒ–å¦‚æœæ‚¨çš„ä¸»é¢˜å¤ªè¿‡äºå¤æ‚ï¼Œæˆ–æ˜¯éœ€è¦ç”Ÿæˆçš„æ–‡ä»¶é‡å¤ªè¿‡äºåºå¤§ï¼Œå¯èƒ½ä¼šå¤§å¹…é™ä½æ€§èƒ½ï¼Œé™¤äº†ç®€åŒ–ä¸»é¢˜å¤–ï¼Œæ‚¨å¯ä»¥è€ƒè™‘ Hexo 2.7 æ–°å¢çš„å±€éƒ¨ç¼“å­˜ï¼ˆFragment Cachingï¼‰ åŠŸèƒ½ã€‚\næœ¬åŠŸèƒ½å€Ÿé‰´äº Ruby on Railsï¼Œå®ƒå‚¨å­˜å±€éƒ¨å†…å®¹ï¼Œä¸‹æ¬¡ä¾¿èƒ½ç›´æ¥ä½¿ç”¨ç¼“å­˜å†…å®¹ï¼Œå¯ä»¥å‡å°‘æ–‡ä»¶å¤¹æŸ¥è¯¢å¹¶ä½¿ç”Ÿæˆé€Ÿåº¦æ›´å¿«ã€‚\nå®ƒå¯ç”¨äºé¡µé¦–ã€é¡µè„šã€ä¾§è¾¹æ ç­‰æ–‡ä»¶ä¸å¸¸å˜åŠ¨çš„ä½ç½®ï¼Œä¸¾ä¾‹æ¥è¯´ï¼š\n1&lt;%- fragment_cache(&#39;header&#39;, function()&#123;  return &#39;&lt;header&gt;&lt;&#x2F;header&gt;&#39;;&#125;);\n\nå¦‚æœæ‚¨ä½¿ç”¨å±€éƒ¨æ¨¡æ¿çš„è¯ï¼Œå¯ä»¥æ›´ç®€å•ï¼š\n1&lt;%- partial(&#39;header&#39;, &#123;&#125;, &#123;cache: true&#125;);\n\n\nfragment_cache() å°†ä¼šç¼“å­˜ç¬¬ä¸€æ¬¡çš„æ¸²æŸ“ç»“æœï¼Œå¹¶åœ¨ä¹‹åç›´æ¥è¾“å‡ºç¼“å­˜çš„ç»“æœã€‚å› æ­¤åªæœ‰åœ¨ä¸åŒé¡µé¢çš„æ¸²æŸ“ç»“æœéƒ½ç›¸åŒæ—¶æ‰åº”ä½¿ç”¨å±€éƒ¨ç¼“å­˜ã€‚æ¯”å¦‚ï¼Œåœ¨é…ç½®ä¸­å¯ç”¨äº† relative_link åä¸åº”è¯¥ä½¿ç”¨å±€éƒ¨ç¼“å­˜ï¼Œå› ä¸ºç›¸å¯¹é“¾æ¥åœ¨æ¯ä¸ªé¡µé¢å¯èƒ½ä¸åŒã€‚\n\nå˜é‡å…¨å±€å˜é‡\nå˜é‡æè¿°ç±»å‹\n\nsiteç½‘ç«™å˜é‡object; è§ ç½‘ç«™å˜é‡\n\npageé’ˆå¯¹è¯¥é¡µé¢çš„å†…å®¹ä»¥åŠ front-matter ä¸­è‡ªå®šä¹‰çš„å˜é‡ã€‚object; è§ é¡µé¢å˜é‡\n\nconfigç½‘ç«™é…ç½®object (ç«™ç‚¹çš„é…ç½®æ–‡ä»¶)\n\nthemeä¸»é¢˜é…ç½®ã€‚ç»§æ‰¿è‡ªç½‘ç«™é…ç½®ã€‚object (ä¸»é¢˜é…ç½®æ–‡ä»¶)\n\n_ (å•ä¸‹åˆ’çº¿)Lodash å‡½æ•°åº“Lodash æ–‡æ¡£\n\npathå½“å‰é¡µé¢çš„è·¯å¾„ï¼ˆä¸å«æ ¹è·¯å¾„ï¼‰string\n\nurlå½“å‰é¡µé¢çš„å®Œæ•´ç½‘å€string\n\nenvç¯å¢ƒå˜é‡???\nç½‘ç«™å˜é‡\nå˜é‡æè¿°ç±»å‹\n\nsite.postsæ‰€æœ‰æ–‡ç« array of post objects\n\nsite.pagesæ‰€æœ‰åˆ†é¡µarray of page objects\n\nsite.categoriesæ‰€æœ‰åˆ†ç±»objectï¼ŒåŒ…å«äº†ç«™ç‚¹å…¨éƒ¨çš„åˆ†ç±»\n\nsite.tagsæ‰€æœ‰æ ‡ç­¾arrayï¼ŒåŒ…å«äº†ç«™ç‚¹å…¨éƒ¨çš„æ ‡ç­¾\né¡µé¢å˜é‡é¡µé¢ï¼ˆpageï¼‰\nå˜é‡æè¿°ç±»å‹\n\npage.titleé¡µé¢æ ‡é¢˜string\n\npage.dateé¡µé¢å»ºç«‹æ—¥æœŸMoment.js å¯¹è±¡\n\npage.updatedé¡µé¢æ›´æ–°æ—¥æœŸMoment.js å¯¹è±¡\n\npage.commentsç•™è¨€æ˜¯å¦å¼€å¯boolean\n\npage.layoutå¸ƒå±€åç§°string\n\npage.contenté¡µé¢çš„å®Œæ•´å†…å®¹string\n\npage.excerpté¡µé¢æ‘˜è¦string\n\npage.moreé™¤äº†é¡µé¢æ‘˜è¦çš„å…¶ä½™å†…å®¹string\n\npage.sourceé¡µé¢åŸå§‹è·¯å¾„string\n\npage.full_sourceé¡µé¢çš„å®Œæ•´åŸå§‹è·¯å¾„string\n\npage.pathé¡µé¢ç½‘å€ï¼ˆä¸å«æ ¹è·¯å¾„ï¼‰ã€‚æˆ‘ä»¬é€šå¸¸åœ¨ä¸»é¢˜ä¸­ä½¿ç”¨ url_for(page.path)ã€‚string\n\npage.permalinké¡µé¢çš„å®Œæ•´ç½‘å€string\n\npage.prevä¸Šä¸€ä¸ªé¡µé¢ã€‚å¦‚æœæ­¤ä¸ºç¬¬ä¸€ä¸ªé¡µé¢åˆ™ä¸º nullã€‚string or null\n\npage.nextä¸‹ä¸€ä¸ªé¡µé¢ã€‚å¦‚æœæ­¤ä¸ºæœ€åä¸€ä¸ªé¡µé¢åˆ™ä¸º nullã€‚string or null\n\npage.rawæ–‡ç« çš„åŸå§‹å†…å®¹???\n\npage.photosæ–‡ç« çš„ç…§ç‰‡ï¼ˆç”¨äºç›¸ç°¿ï¼‰array\n\npage.linkæ–‡ç« çš„å¤–éƒ¨é“¾æ¥ï¼ˆç”¨äºé“¾æ¥æ–‡ç« ï¼‰string\næ–‡ç«  (post): ä¸ page å¸ƒå±€ç›¸åŒï¼Œä½†æ–°å¢ä»¥ä¸‹å˜é‡ã€‚\n\nå˜é‡æè¿°ç±»å‹\n\npage.publishedå¦‚æœè¯¥æ–‡ç« å·²å‘å¸ƒåˆ™ä¸º trueboolean\n\npage.categoriesè¯¥æ–‡ç« çš„æ‰€æœ‰åˆ†ç±»array of ???\n\npage.tagsè¯¥æ–‡ç« çš„æ‰€æœ‰æ ‡ç­¾array of ???\né¦–é¡µï¼ˆindexï¼‰\n\nå˜é‡æè¿°ç±»å‹\n\npage.per_pageæ¯é¡µæ˜¾ç¤ºçš„æ–‡ç« æ•°é‡number\n\npage.totalæ€»é¡µæ•°number\n\npage.currentç›®å‰é¡µæ•°number\n\npage.current_urlç›®å‰åˆ†é¡µçš„ç½‘å€string\n\npage.postsæœ¬é¡µæ–‡ç«  (Data Model)object\n\npage.prevä¸Šä¸€é¡µçš„é¡µæ•°ã€‚å¦‚æœæ­¤é¡µæ˜¯ç¬¬ä¸€é¡µçš„è¯åˆ™ä¸º 0ã€‚number\n\npage.prev_linkä¸Šä¸€é¡µçš„ç½‘å€ã€‚å¦‚æœæ­¤é¡µæ˜¯ç¬¬ä¸€é¡µçš„è¯åˆ™ä¸º &#39;&#39;ã€‚string\n\npage.nextä¸‹ä¸€é¡µçš„é¡µæ•°ã€‚å¦‚æœæ­¤é¡µæ˜¯æœ€åä¸€é¡µçš„è¯åˆ™ä¸º 0ã€‚number\n\npage.next_linkä¸‹ä¸€é¡µçš„ç½‘å€ã€‚å¦‚æœæ­¤é¡µæ˜¯æœ€åä¸€é¡µçš„è¯åˆ™ä¸º &#39;&#39;ã€‚string\n\npage.pathå½“å‰é¡µé¢çš„è·¯å¾„ï¼ˆä¸å«æ ¹ç›®å½•ï¼‰ã€‚æˆ‘ä»¬é€šå¸¸åœ¨ä¸»é¢˜ä¸­ä½¿ç”¨ url_for(page.path)ã€‚string\nå½’æ¡£ (archive)ï¼šä¸ index å¸ƒå±€ç›¸åŒï¼Œä½†æ–°å¢ä»¥ä¸‹å˜é‡ã€‚\n\nå˜é‡æè¿°ç±»å‹\n\npage.archiveç­‰äº trueboolean\n\npage.yearå¹´ä»½å½’æ¡£ (4ä½)number\n\npage.monthæœˆä»½å½’æ¡£ (æ²¡æœ‰å‰å¯¼é›¶çš„2ä½æ•°)number\nåˆ†ç±» (category)ï¼šä¸ index å¸ƒå±€ç›¸åŒï¼Œä½†æ–°å¢ä»¥ä¸‹å˜é‡ã€‚\n\nå˜é‡æè¿°ç±»å‹\n\npage.categoryåˆ†ç±»åç§°string\næ ‡ç­¾ (tag)ï¼šä¸ index å¸ƒå±€ç›¸åŒï¼Œä½†æ–°å¢ä»¥ä¸‹å˜é‡ã€‚\n\nå˜é‡æè¿°ç±»å‹\n\npage.tagæ ‡ç­¾åç§°string\n","plink":"https://www.hansomezao.com/2020/02/29/note/hexo/"},{"title":"webpack4","date":"2019-12-10T05:39:30.000Z","date_formatted":{"ll":"2019å¹´12æœˆ10æ—¥","L":"2019/12/10","MM-DD":"12-10"},"author":"ç½‘ä¸Šæ”¶é›†,æ¥æºä¸æ˜","updated":"2019-12-10T05:39:30.000Z","content":"å®‰è£…å‰å…ˆnpmåˆå§‹åŒ–\næœ¬åœ°æœåŠ¡\nå¤åˆ¶html\nå¤„ç†css\nå¤„ç†less\næŠ½ç¦»cssæ–‡ä»¶ï¼Œé€šè¿‡linkå¼•å…¥\nå‹ç¼©csså’Œjs\nç»™cssåŠ ä¸Šå…¼å®¹æµè§ˆå™¨çš„å‰ç¼€\nes6 è½¬ es5\nè½¬es7çš„è¯­æ³•å…¶ä»–ä¸å…¼å®¹çš„é«˜çº§è¯­æ³•\n\nè¯­æ³•æ£€æŸ¥ eslint\nå…¨å±€å˜é‡å¼•å…¥æ³•1ï¼š\næ³•2ï¼š\næ³•3. å¦‚ä½•åœ¨æ¯ä¸ªæ¨¡å—ä¸­æ³¨å…¥ï¼š\næ³•4ï¼š\n\nwebpackå›¾ç‰‡æ‰“åŒ…\nå½“å›¾ç‰‡å°äºå¤šå°‘ï¼Œç”¨base64\næ‰“åŒ…æ–‡ä»¶åˆ†ç±»\nå¸Œæœ›è¾“å‡ºçš„æ—¶å€™ï¼Œç»™è¿™äº›css\\imgåŠ ä¸Šå‰ç¼€ï¼Œä¼ åˆ°æœåŠ¡å™¨ä¹Ÿèƒ½è®¿é—®\nå¦‚æœåªå¸Œæœ›å¤„ç†å›¾ç‰‡\næ‰“åŒ…å¤šé¡µåº”ç”¨\né…ç½®source-map\nwatch æ”¹å®Œä»£è¡¨é‡æ–°æ‰“åŒ…å®ä½“\nwebpackçš„å…¶ä»–ä¸‰ä¸ªå°æ’ä»¶\nwebpack è·¨åŸŸ\n1.å¦‚æœåç«¯ç»™çš„è¯·æ±‚æ²¡æœ‰API ã€Œè·¨åŸŸã€\n2.å‰ç«¯åªæƒ³å•çº¯mockæ•°æ® ã€Œè·¨åŸŸã€\n3.æœ‰æœåŠ¡ç«¯ï¼Œä¸ç”¨ä»£ç†, æœåŠ¡ç«¯å¯åŠ¨webpack ã€Œè·¨åŸŸã€\nwebpackè§£æresolve\nä½†æ˜¯æ¯æ¬¡å¼•å…¥éƒ½å¾ˆé•¿ï¼Œå¦‚ä½•ä¼˜é›…å¼•å…¥\nçœç•¥æ‰©å±•å\nå®šä¹‰ç¯å¢ƒå˜é‡\nåŒºåˆ†ä¸¤ä¸ªä¸åŒçš„ç¯å¢ƒ\nwebpack ä¼˜åŒ–\nä¼˜åŒ–ï¼šå½“æŸäº›åŒ…æ˜¯ç‹¬ç«‹çš„ä¸ªä½“æ²¡æœ‰ä¾èµ–\nä¼˜åŒ–ï¼šè§„åˆ™åŒ¹é…è®¾ç½®èŒƒå›´\nä¼˜åŒ–ï¼šå¿½ç•¥ä¾èµ–ä¸­ä¸å¿…è¦çš„è¯­è¨€åŒ…\nåŠ¨æ€é“¾æ¥åº“\nå¤šçº¿ç¨‹æ‰“åŒ…happypack\nwebpack è‡ªå¸¦çš„ä¼˜åŒ–\næŠ½å–å…¬å…±ä»£ç \næ‡’åŠ è½½(å»¶è¿ŸåŠ è½½)\nçƒ­æ›´æ–°(å½“é¡µé¢æ”¹å˜åªæ›´æ–°æ”¹å˜çš„éƒ¨åˆ†ï¼Œä¸é‡æ–°æ‰“åŒ…)\ntapableä»‹ç» - SyncHook\ntapableä»‹ç» - SyncBailHook\ntapableä»‹ç» - SyncWaterfallHook\ntapableä»‹ç» - SyncLoopHook\nAsyncParallelHook ä¸ AsyncParallelBailHookAsyncParallelHook\nAsyncParallelBailHook\n\nå¼‚æ­¥ä¸²è¡Œ â€”â€” AsyncSeriesHook\nå¼‚æ­¥ä¸²è¡Œ â€”â€” AsyncSeriesWaterfallHook\næ‰‹å†™webpack\nwebpackåˆ†æåŠå¤„ç†\nåˆ›å»ºä¾èµ–å…³ç³»\nasté€’å½’è§£æ\nç”Ÿæˆæ‰“åŒ…å·¥å…·\nå¢åŠ loader\nå¢åŠ plugins\nloader\né…ç½®å¤šä¸ªloader\nbabel-loaderå®ç°\nbanner-loaderå®ç°(è‡ªåˆ›)\nå®ç°file-loaderå’Œurl-loader\nless-loaderå’Œcss-loader\ncss-loader\nwebpack ä¸­çš„æ’ä»¶\næ–‡ä»¶åˆ—è¡¨æ’ä»¶\nå†…è”çš„webpackæ’ä»¶\næ‰“åŒ…åè‡ªåŠ¨å‘å¸ƒ\nå®‰è£…å‰å…ˆnpmåˆå§‹åŒ–12npm init -ynpm i webpack webpack-cli -D\n\n\nwebpack.config.js1234567891011let path = require('path')   // ç›¸å¯¹è·¯å¾„å˜ç»å¯¹è·¯å¾„module.exports = &#123;  mode: 'production', // æ¨¡å¼ é»˜è®¤ production development  entry: './src/index',    // å…¥å£  output: &#123;    filename: 'bundle.[hash:8].js',   // hash: 8åªæ˜¾ç¤º8ä½    path: path.resolve(__dirname, 'dist'),    publicPath: ''  // // ç»™æ‰€æœ‰æ‰“åŒ…æ–‡ä»¶å¼•å…¥æ—¶åŠ å‰ç¼€ï¼ŒåŒ…æ‹¬cssï¼Œjsï¼Œimgï¼Œå¦‚æœåªæƒ³å¤„ç†å›¾ç‰‡å¯ä»¥å•ç‹¬åœ¨url-loaderé…ç½®ä¸­åŠ publicPath  &#125;&#125;\næœ¬åœ°æœåŠ¡npm i webpack-dev-server -D\n1234567devServer: &#123;  port: 3000,  progress: true          &#x2F;&#x2F; æ»šåŠ¨æ¡  contentBase: &#39;.&#x2F;build&#39;  &#x2F;&#x2F; èµ·æœåŠ¡çš„åœ°å€  open: true              &#x2F;&#x2F; è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨  compressï¼š true         &#x2F;&#x2F; gzipå‹ç¼©&#125;\n\n\nå¤åˆ¶htmlnpm i html-webpack-plugin -D\n123456789101112let HtmlWebpackPlugin &#x3D; require(&#39;html-webpack-plugin&#39;)plugins: [ &#x2F;&#x2F; æ”¾ç€æ‰€æœ‰webpackæ’ä»¶  new HtmlWebpackPlugin(&#123; &#x2F;&#x2F; ç”¨äºä½¿ç”¨æ¨¡æ¿æ‰“åŒ…æ—¶ç”Ÿæˆindex.htmlæ–‡ä»¶ï¼Œå¹¶ä¸”åœ¨run devæ—¶ä¼šå°†æ¨¡æ¿æ–‡ä»¶ä¹Ÿæ‰“åŒ…åˆ°å†…å­˜ä¸­    template: &#39;.&#x2F;index.html&#39;, &#x2F;&#x2F; æ¨¡æ¿æ–‡ä»¶    filename: &#39;index.html&#39;, &#x2F;&#x2F; æ‰“åŒ…åç”Ÿæˆæ–‡ä»¶    hash: true, &#x2F;&#x2F; æ·»åŠ hashå€¼è§£å†³ç¼“å­˜é—®é¢˜    minify: &#123; &#x2F;&#x2F; å¯¹æ‰“åŒ…çš„htmlæ¨¡æ¿è¿›è¡Œå‹ç¼©      removeAttributeQuotes: true, &#x2F;&#x2F; åˆ é™¤å±æ€§åŒå¼•å·      collapseWhitespace: true &#x2F;&#x2F; æŠ˜å ç©ºè¡Œå˜æˆä¸€è¡Œ    &#125;  &#125;)]\n\nhtml-webpack-plugin#options\nå¤„ç†cssnpm i css-loader style-loader -D\n12345678910111213141516171819202122232425262728&#x2F;&#x2F; css-loader   ä½œç”¨ï¼šç”¨æ¥è§£æ@importè¿™ç§è¯­æ³•&#x2F;&#x2F; style-loader ä½œç”¨ï¼šæŠŠ css æ’å…¥åˆ°headæ ‡ç­¾ä¸­&#x2F;&#x2F; loaderçš„æ‰§è¡Œé¡ºåºï¼š é»˜è®¤æ˜¯ä»å³å‘å·¦ï¼ˆä»ä¸‹å‘ä¸Šï¼‰module: &#123;    &#x2F;&#x2F; æ¨¡å—  rules: [   &#x2F;&#x2F; è§„åˆ™    &#x2F;&#x2F; style-loader æŠŠcssæ’å…¥headæ ‡ç­¾ä¸­    &#x2F;&#x2F; loader åŠŸèƒ½å•ä¸€    &#x2F;&#x2F; å¤šä¸ªloader éœ€è¦ []    &#x2F;&#x2F; é¡ºä¾¿é»˜è®¤ä»å³åˆ°å·¦    &#x2F;&#x2F; ä¹Ÿå¯ä»¥å†™æˆå¯¹è±¡æ–¹å¼    &#123;      test: &#x2F;\\.css$&#x2F;,   &#x2F;&#x2F; css å¤„ç†      &#x2F;&#x2F; use: &#39;css-loader&#39;      &#x2F;&#x2F; use: [&#39;style-loader&#39;, &#39;css-loader&#39;],      use: [        &#x2F;&#x2F; &#123;        &#x2F;&#x2F;     loader: &#39;style-loader&#39;,        &#x2F;&#x2F;     options: &#123;        &#x2F;&#x2F;         insertAt: &#39;top&#39; &#x2F;&#x2F; å°†cssæ ‡ç­¾æ’å…¥æœ€é¡¶å¤´  è¿™æ ·å¯ä»¥è‡ªå®šä¹‰styleä¸è¢«è¦†ç›–        &#x2F;&#x2F;     &#125;        &#x2F;&#x2F; &#125;,        MiniCssExtractPlugin.loader,        &#39;css-loader&#39;, &#x2F;&#x2F; css-loader ç”¨æ¥è§£æ@importè¿™ç§è¯­æ³•,        &#39;postcss-loader&#39;      ]    &#125;  ]&#125;\n\n\nå¤„ç†lessnpm i less-loader\n12345678910111213141516171819&#123;  test: &#x2F;\\.less$&#x2F;,   &#x2F;&#x2F; less å¤„ç†  &#x2F;&#x2F; use: &#39;css-loader&#39;  &#x2F;&#x2F; use: [&#39;style-loader&#39;, &#39;css-loader&#39;],  use: [    &#x2F;&#x2F; &#123;    &#x2F;&#x2F;     loader: &#39;style-loader&#39;,    &#x2F;&#x2F;     options: &#123;    &#x2F;&#x2F;         insertAt: &#39;top&#39; &#x2F;&#x2F; å°†cssæ ‡ç­¾æ’å…¥æœ€é¡¶å¤´  è¿™æ ·å¯ä»¥è‡ªå®šä¹‰styleä¸è¢«è¦†ç›–    &#x2F;&#x2F;     &#125;    &#x2F;&#x2F; &#125;,    MiniCssExtractPlugin.loader,   &#x2F;&#x2F; è¿™æ ·ç›¸å½“äºæŠ½ç¦»æˆä¸€ä¸ªcssæ–‡ä»¶ï¼Œ å¦‚æœå¸Œæœ›æŠ½ç¦»æˆåˆ†åˆ«ä¸åŒçš„css, éœ€è¦å†å¼•å…¥MiniCssExtractPluginï¼Œå†é…ç½®    &#39;css-loader&#39;, &#x2F;&#x2F; css-loader ç”¨æ¥è§£æ@importè¿™ç§è¯­æ³•    &#39;postcss-loader&#39;,    &#39;less-loader&#39; &#x2F;&#x2F; less-loader less -&gt; css    &#x2F;&#x2F; sass node-sass sass-loader    &#x2F;&#x2F; stylus stylus-loader  ]&#125;\n\nless-loader\næŠ½ç¦»cssæ–‡ä»¶ï¼Œé€šè¿‡linkå¼•å…¥yarn add mini-css-extract-plugin -D\nmini-css-extract-plugin\n123456789101112131415161718192021222324252627let MiniCssExtractPlugin &#x3D; require(&#39;mini-css-extract-plugin&#39;)&#x2F;&#x2F; å‹ç¼©cssplugins: [  new MiniCssExtractPlugin(&#123;      filename: &#39;css&#x2F;main.css&#39;  &#125;)]&#123;  test: &#x2F;\\.css$&#x2F;,   &#x2F;&#x2F; css å¤„ç†  &#x2F;&#x2F; use: &#39;css-loader&#39;  &#x2F;&#x2F; use: [&#39;style-loader&#39;, &#39;css-loader&#39;],  use: [    &#x2F;&#x2F; &#123;    &#x2F;&#x2F;     loader: &#39;style-loader&#39;,    &#x2F;&#x2F;     options: &#123;    &#x2F;&#x2F;         insertAt: &#39;top&#39; &#x2F;&#x2F; å°†cssæ ‡ç­¾æ’å…¥æœ€é¡¶å¤´  è¿™æ ·å¯ä»¥è‡ªå®šä¹‰styleä¸è¢«è¦†ç›–    &#x2F;&#x2F;     &#125;    &#x2F;&#x2F; &#125;,    &#x2F;&#x2F; æ­¤æ—¶ä¸éœ€è¦style-loader    MiniCssExtractPlugin.loader,   &#x2F;&#x2F; æŠ½ç¦»    &#39;css-loader&#39;, &#x2F;&#x2F; css-loader ç”¨æ¥è§£æ@importè¿™ç§è¯­æ³•,    &#39;postcss-loader&#39;  ]&#125;\n\næŠ½ç¦»cssæ’ä»¶æ–‡ä»¶æ—¶å¯ä½¿ç”¨optimize-css-assets-webpack-pluginä¼˜åŒ–å‹ç¼©cssä»¥åŠjsæ–‡ä»¶\nå‹ç¼©csså’Œjs12345678910111213141516171819&#x2F;&#x2F; ç”¨äº†&#96;mini-css-extract-plugin&#96;æŠ½ç¦»cssä¸ºlinkéœ€ä½¿ç”¨&#96;optimize-css-assets-webpack-plugin&#96;è¿›è¡Œå‹ç¼©css,ä½¿ç”¨æ­¤æ–¹æ³•å‹ç¼©äº†csséœ€è¦&#96;uglifyjs-webpack-plugin&#96;å‹ç¼©jsconst OptimizeCSSAssetsPlugin &#x3D; require(&quot;optimize-css-assets-webpack-plugin&quot;)const UglifyJsPlugin &#x3D; require(&quot;uglifyjs-webpack-plugin&quot;)module.exports &#x3D; &#123;  optimization: &#123;              &#x2F;&#x2F; ä¼˜åŒ–é¡¹    minimizer: [      new UglifyJsPlugin(&#123;     &#x2F;&#x2F; ä¼˜åŒ–js        cache: true,           &#x2F;&#x2F; æ˜¯å¦ç¼“å­˜        parallel: true,        &#x2F;&#x2F; æ˜¯å¦å¹¶å‘æ‰“åŒ…        &#x2F;&#x2F; sourceMap: true     &#x2F;&#x2F; æºç æ˜ å°„ set to true if you want JS source maps      &#125;),      new OptimizeCSSAssetsPlugin(&#123;&#125;)    &#x2F;&#x2F; css çš„ä¼˜åŒ–    ]  &#125;,  mode: &#39;production&#39;,  entry: &#39;&#39;,  output: &#123;&#125;,&#125;\n\nç»™cssåŠ ä¸Šå…¼å®¹æµè§ˆå™¨çš„å‰ç¼€yarn add postcss-loader autoprefixer -D\n12345678910111213141516171819202122232425262728293031323334353637&#x2F;&#x2F; css&#123;  test: &#x2F;\\.css$&#x2F;,   &#x2F;&#x2F; css å¤„ç†  &#x2F;&#x2F; use: &#39;css-loader&#39;  &#x2F;&#x2F; use: [&#39;style-loader&#39;, &#39;css-loader&#39;],  use: [    &#x2F;&#x2F; &#123;    &#x2F;&#x2F;     loader: &#39;style-loader&#39;,    &#x2F;&#x2F;     options: &#123;    &#x2F;&#x2F;         insertAt: &#39;top&#39; &#x2F;&#x2F; å°†cssæ ‡ç­¾æ’å…¥æœ€é¡¶å¤´  è¿™æ ·å¯ä»¥è‡ªå®šä¹‰styleä¸è¢«è¦†ç›–    &#x2F;&#x2F;     &#125;    &#x2F;&#x2F; &#125;,    MiniCssExtractPlugin.loader,    &#39;css-loader&#39;, &#x2F;&#x2F; css-loader ç”¨æ¥è§£æ@importè¿™ç§è¯­æ³•,    &#39;postcss-loader&#39;  ]&#125;&#x2F;&#x2F; less&#123;  test: &#x2F;\\.less$&#x2F;,   &#x2F;&#x2F; less å¤„ç†  &#x2F;&#x2F; use: &#39;css-loader&#39;  &#x2F;&#x2F; use: [&#39;style-loader&#39;, &#39;css-loader&#39;],  use: [    &#x2F;&#x2F; &#123;    &#x2F;&#x2F;     loader: &#39;style-loader&#39;,    &#x2F;&#x2F;     options: &#123;    &#x2F;&#x2F;         insertAt: &#39;top&#39; &#x2F;&#x2F; å°†cssæ ‡ç­¾æ’å…¥æœ€é¡¶å¤´  è¿™æ ·å¯ä»¥è‡ªå®šä¹‰styleä¸è¢«è¦†ç›–    &#x2F;&#x2F;     &#125;    &#x2F;&#x2F; &#125;,    MiniCssExtractPlugin.loader,   &#x2F;&#x2F; è¿™æ ·ç›¸å½“äºæŠ½ç¦»æˆä¸€ä¸ªcssæ–‡ä»¶ï¼Œ å¦‚æœå¸Œæœ›æŠ½ç¦»æˆåˆ†åˆ«ä¸åŒçš„css, éœ€è¦å†å¼•å…¥MiniCssExtractPluginï¼Œå†é…ç½®    &#39;css-loader&#39;, &#x2F;&#x2F; css-loader ç”¨æ¥è§£æ@importè¿™ç§è¯­æ³•    &#39;postcss-loader&#39;,    &#39;less-loader&#39; &#x2F;&#x2F; less-loader less -&gt; css    &#x2F;&#x2F; sass node-sass sass-loader    &#x2F;&#x2F; stylus stylus-loader  ]&#125;,\n\npostcss éœ€è¦é…ç½®æ–‡æ¡£   postcss.config1.js\npostcss-loader\n12345module.exports &#x3D; &#123;  plugins: [    require(&#39;autoprefixer&#39;)  ]&#125;\n\nes6 è½¬ es5npm i babel-loader @babel/core  @babel/preset-env -D\n1234567891011121314151617181920212223module.exports &#x3D; &#123;  module: &#123;    rules: [      &#123;        test: &#x2F;\\.js$&#x2F;,        use: &#123;          loader: &#39;babel-loader&#39;,          options: &#123;            presets: [ &#x2F;&#x2F;é¢„è®¾              &#39;@babel&#x2F;preset-env&#39;             ],            plugins:[              &#x2F;&#x2F; è½¬es7çš„è¯­æ³•              [&quot;@babel&#x2F;plugin-proposal-decorators&quot;, &#123; &quot;legacy&quot;: true &#125;],              [&quot;@babel&#x2F;plugin-proposal-class-properties&quot;, &#123; &quot;loose&quot; : true &#125;]            ]          &#125;        &#125;,        exclude: &#x2F;node_modules&#x2F;      &#125;    ]  &#125;&#125;\n\n\nè½¬es7çš„è¯­æ³•12345&#x2F;&#x2F; è½¬classnpm i @babel&#x2F;plugin-proposal-class-properties -D&#x2F;&#x2F; è½¬è£…é¥°å™¨npm i @babel&#x2F;plugin-proposal-decorators -D\n\né…ç½®å¦‚ä¸Š\nå…¶ä»–ä¸å…¼å®¹çš„é«˜çº§è¯­æ³•1ä½¿ç”¨ @babel&#x2F;polyfill\n\nè¯­æ³•æ£€æŸ¥ eslintnpm i eslint eslint-loader -S\næ ¹ç›®å½•æ·»åŠ  .eslintrc.json é…ç½®æ–‡ä»¶\n123456789101112131415161718192021222324252627module.exports &#x3D; &#123;  module: &#123;    rules: [      &#123;        test: &#x2F;\\.js$&#x2F;,        use: &#123;          loader: &#39;eslint-loader&#39;,          options: &#123;            enforce: &#39;pre&#39;  &#x2F;&#x2F; previousä¼˜å…ˆæ‰§è¡Œ  post-æ™®é€šloaderä¹‹åæ‰§è¡Œ          &#125;        &#125;      &#125;,      &#123;        test: &#x2F;\\.js$&#x2F;,      &#x2F;&#x2F; mormal æ™®é€šçš„loader        use: &#123;          loader: &#39;babel-loader&#39;,          options: &#123;            presets: [ &#x2F;&#x2F;é¢„è®¾              &#39;@babel&#x2F;preset-env&#39;             ]          &#125;        &#125;,        exclude: &#x2F;node_modules&#x2F;      &#125;    ]  &#125;&#125;\n\nå…¨å±€å˜é‡å¼•å…¥jqueryçš„å¼•å…¥\n1npm i jquery -S\n\n12345let webpack &#x3D; require(&#39;webpack&#39;)new webpack.ProvidePlugin(&#123;  $: &#39;jquery&#39;&#125;)\n\nå…¶ä»–æƒ…å†µ\næš´éœ²å…¨å±€\nnpm i expose-loader -D æš´éœ²å…¨å±€çš„loader\næ³•1ï¼šå¯ä»¥åœ¨jsä¸­ import $ from &#39;expose-loader?$!jquery&#39;   // å…¨å±€æš´éœ²jqueryä¸º$ç¬¦å·\nå¯ä»¥è°ƒç”¨window.$\næ³•2ï¼šä¹Ÿå¯åœ¨webpack.config.js ä¸­é…ç½® rules\n12345678910module.exports &#x3D; &#123;  module: &#123;    rules: [      &#123;        test: require.resolve(&#39;jquery&#39;),        use: &#39;expose-loader?$&#39;      &#125;    ]  &#125;&#125;\nä»¥ååœ¨.jsæ–‡ä»¶ä¸­å¼•å…¥\n1import $ from &#39;jquery&#39;\n\næ³•3. å¦‚ä½•åœ¨æ¯ä¸ªæ¨¡å—ä¸­æ³¨å…¥ï¼š1234567891011let webpack &#x3D; require(&#39;webpack&#39;)module.exports &#x3D; &#123;  plugins: [    new webpack.ProvidePlugin(&#123;      $: &#39;jquery&#39;    &#125;)  ]&#125;ä¹‹åä»£ç å†…ç›´æ¥ä½¿ç”¨ $\næ³•4ï¼šåœ¨index.htmlä¸­é€šè¿‡scriptæ ‡ç­¾å¼•å…¥jquery, ä½†æ˜¯åœ¨jsä¸­ï¼Œç”¨importä¼šé‡æ–°æ‰“åŒ…jquery,å¦‚ä½•é¿å…\nä»è¾“å‡ºçš„bundle ä¸­æ’é™¤ä¾èµ–\n12345module.exports &#x3D; &#123;  externals: &#123; &#x2F;&#x2F; å‘ŠçŸ¥webpackæ˜¯å¤–éƒ¨å¼•å…¥çš„ï¼Œä¸éœ€è¦æ‰“åŒ…    jquery: &#39;jQuery&#39;  &#125;&#125;\n\næ­¤æ—¶åœ¨index.jsä¸Š\n123import $ from &#39;jquery&#39;console.log($)\n\nwebpackå›¾ç‰‡æ‰“åŒ…jsä¸­åˆ›å»º\ncssä¸­å¼•å…¥\n&lt;img src=&quot;&quot;&gt;\nyarn add file-loader -D\né€‚åˆä¸€äºŒæƒ…å†µ\n12345678910module.export&#x3D;&#123;  module: &#123;    rules: [      &#123;        test: &#x2F;\\.(png|jpg|gif)$&#x2F;,        use: &#39;file-loader&#39;      &#125;    ]  &#125;&#125;\n\né»˜è®¤ä¼šå†…éƒ¨ç”Ÿæˆä¸€å¼ å›¾ç‰‡åˆ°build,ç”Ÿæˆå›¾ç‰‡çš„è·¯å¾„è¿”å›å›æ¥\nç¬¬ä¸€ç§æƒ…å†µ: å›¾ç‰‡åœ°å€è¦importå¼•å…¥ï¼Œç›´æ¥å†™å›¾ç‰‡çš„åœ°å€ï¼Œä¼šé»˜è®¤ä¸ºå­—ç¬¦ä¸²\n12345import logo from &#39;.&#x2F;logo.png&#39;let image &#x3D; new Image()image.src &#x3D; logodocument.body.appendChild(image)\n\nç¬¬äºŒç§æƒ…å†µ: css-loaderä¼šå°†cssé‡Œé¢çš„å›¾ç‰‡è½¬ä¸ºrequireçš„æ ¼å¼\n123div &#123;  background: url(&quot;.&#x2F;logo.png&quot;);&#125;\n\nç¬¬ä¸‰ç§æƒ…å†µ: è§£æhtmlä¸­çš„image\nyarn add html-withimg-loader -D\n1234&#123;  test: &#x2F;\\.html$&#x2F;,  use: &#39;html-withimg-loader&#39;&#125;\n\nå½“å›¾ç‰‡å°äºå¤šå°‘ï¼Œç”¨base64yarn add url-loader -D\nå¦‚æœè¿‡å¤§ï¼Œæ‰ç”¨file-loader\n123456789101112&#123;  test: &#x2F;\\.(png|jpg|gif)$&#x2F;,  &#x2F;&#x2F; å½“å›¾ç‰‡å°äºå¤šå°‘ï¼Œç”¨base64,å¦åˆ™ç”¨file-loaderäº§ç”ŸçœŸå®çš„å›¾ç‰‡  use: &#123;    loader: &#39;url-loader&#39;,    options: &#123;      limit: 200 * 1024,          &#x2F;&#x2F; å°äº200kå˜æˆbase64      &#x2F;&#x2F; outputPath: &#39;&#x2F;img&#x2F;&#39;,     &#x2F;&#x2F; æ‰“åŒ…åè¾“å‡ºåœ°å€      &#x2F;&#x2F; publicPath: &#39;&#39;           &#x2F;&#x2F; ç»™èµ„æºåŠ ä¸ŠåŸŸåè·¯å¾„    &#125;  &#125;&#125;\n\næ‰“åŒ…æ–‡ä»¶åˆ†ç±»1.å›¾ç‰‡:\n1234567891011&#123;  test: &#x2F;\\.(png|jpg|gif)$&#x2F;,  &#x2F;&#x2F; å½“å›¾ç‰‡å°äºå¤šå°‘ï¼Œç”¨base64,å¦åˆ™ç”¨file-loaderäº§ç”ŸçœŸå®çš„å›¾ç‰‡  use: &#123;    loader: &#39;url-loader&#39;,    options: &#123;      limit: 1,  &#x2F;&#x2F; 200k 200 * 1024      outputPath: &#39;img&#x2F;&#39;   &#x2F;&#x2F; æ‰“åŒ…åè¾“å‡ºåœ°å€ åœ¨dist&#x2F;img    &#125;  &#125;&#125;,\n\n2.css:\n12345plugins: [  new MiniCssExtractPlugin(&#123;    filename: &#39;css&#x2F;main.css&#39;  &#125;),]\n\nå¸Œæœ›è¾“å‡ºçš„æ—¶å€™ï¼Œç»™è¿™äº›css\\imgåŠ ä¸Šå‰ç¼€ï¼Œä¼ åˆ°æœåŠ¡å™¨ä¹Ÿèƒ½è®¿é—®12345output: &#123;  filename: &#39;bundle.[hash:8].js&#39;,   &#x2F;&#x2F; hash: 8åªæ˜¾ç¤º8ä½  path: path.resolve(__dirname, &#39;dist&#39;),  publicPath: &#39;http:&#x2F;&#x2F;www.mayufo.cn&#39;  &#x2F;&#x2F; ç»™é™æ€èµ„æºç»Ÿä¸€åŠ &#125;,\n\n\nå¦‚æœåªå¸Œæœ›å¤„ç†å›¾ç‰‡123456789101112&#123;  test: &#x2F;\\.(png|jpg|gif)$&#x2F;,  &#x2F;&#x2F; å½“å›¾ç‰‡å°äºå¤šå°‘ï¼Œç”¨base64,å¦åˆ™ç”¨file-loaderäº§ç”ŸçœŸå®çš„å›¾ç‰‡  use: &#123;    loader: &#39;url-loader&#39;,    options: &#123;      limit: 1,  &#x2F;&#x2F; 200k 200 * 1024      outputPath: &#39;&#x2F;img&#x2F;&#39;,   &#x2F;&#x2F; æ‰“åŒ…åè¾“å‡ºåœ°å€      publicPath: &#39;http:&#x2F;&#x2F;www.mayufo.cn&#39;    &#125;  &#125;&#125;\n\næ‰“åŒ…å¤šé¡µåº”ç”¨123456789101112131415161718192021222324252627&#x2F;&#x2F; å¤šå…¥å£let path &#x3D; require(&#39;path&#39;)let HtmlWebpackPlugin &#x3D; require(&#39;html-webpack-plugin&#39;)module.exports &#x3D; &#123;  mode: &#39;development&#39;,  entry: &#123;    home: &#39;.&#x2F;src&#x2F;index.js&#39;,    other: &#39;.&#x2F;src&#x2F;other.js&#39;  &#125;,  output: &#123;    filename: &quot;[name].js&quot;,    path: path.resolve(__dirname, &#39;dist2&#39;)  &#125;,  plugins: [    new HtmlWebpackPlugin(&#123;      template: &#39;.&#x2F;index.html&#39;,      filename: &#39;home.html&#39;,      chunks: [&#39;home&#39;]    &#125;),    new HtmlWebpackPlugin(&#123;      template: &#39;.&#x2F;index.html&#39;,      filename: &#39;other.html&#39;,      chunks: [&#39;other&#39;, &#39;home&#39;]   &#x2F;&#x2F; other.html é‡Œé¢æœ‰ other.js &amp; home.js    &#125;),  ]&#125;\n\né…ç½®source-mapyarn add @babel/core  @babel/preset-env babel-loader  webpack-dev-server -D\n123module.exports &#x3D; &#123;  devtool: &#39;source-map&#39; &#x2F;&#x2F; å¢åŠ æ˜ å°„æ–‡ä»¶è°ƒè¯•æºä»£ç &#125;\næºç æ˜ å°„ ä¼šæ ‡è¯†é”™è¯¯çš„ä»£ç  æ‰“åŒ…åç”Ÿæˆç‹¬ç«‹çš„æ–‡ä»¶ å¤§è€Œå…¨ ã€Œsource-mapã€\nä¸ä¼šé™ˆèƒœå•ç‹¬çš„æ–‡ä»¶ ä½†æ˜¯å¯ä»¥æ˜¾ç¤ºè¡Œå’Œåˆ—  ã€Œeval-source-mapã€\nä¸ä¼šäº§ç”Ÿåˆ—æœ‰è¡Œï¼Œäº§ç”Ÿå•ç‹¬çš„æ˜ å°„æ–‡ä»¶  ã€Œcheap-module-source-mapã€\nä¸ä¼šäº§ç”Ÿæ–‡ä»¶ é›†æˆåœ¨æ‰“åŒ…åçš„æ–‡ä»¶ä¸­ ä¸ä¼šäº§ç”Ÿåˆ—æœ‰è¡Œ ã€Œcheap-module-eval-source-mapã€\nwatch æ”¹å®Œä»£è¡¨é‡æ–°æ‰“åŒ…å®ä½“12345678module.exports &#x3D; &#123;  watch: true,  watchOptions: &#123;    poll: 1000,              &#x2F;&#x2F; æ¯ç§’ç›‘å¬1000æ¬¡    aggregateTimeout: 300,   &#x2F;&#x2F; é˜²æŠ–ï¼Œå½“ç¬¬ä¸€ä¸ªæ–‡ä»¶æ›´æ”¹ï¼Œä¼šåœ¨é‡æ–°æ„å»ºå‰å¢åŠ å»¶è¿Ÿ    ignored: &#x2F;node_modules&#x2F;  &#x2F;&#x2F; å¯¹äºæŸäº›ç³»ç»Ÿï¼Œç›‘å¬å¤§é‡æ–‡ä»¶ç³»ç»Ÿä¼šå¯¼è‡´å¤§é‡çš„ CPU æˆ–å†…å­˜å ç”¨ã€‚è¿™ä¸ªé€‰é¡¹å¯ä»¥æ’é™¤ä¸€äº›å·¨å¤§çš„æ–‡ä»¶å¤¹ï¼Œ  &#125;,&#125;\n\n\nwebpackçš„å…¶ä»–ä¸‰ä¸ªå°æ’ä»¶cleanWebpackPlugin\næ¯æ¬¡æ‰“åŒ…ä¹‹å‰åˆ æ‰distç›®å½•yarn add clean-webpack-plugin -D\nclean-webpack-plugin\n12345678910const CleanWebpackPlugin &#x3D; require(&#39;clean-webpack-plugin&#39;);module.exports &#x3D; &#123;  output: &#123;    path: path.resolve(process.cwd(), &#39;dist&#39;),  &#125;,  plugins: [    new CleanWebpackPlugin(&#39;.&#x2F;dist&#39;)  ]&#125;\n\ncopyWebpackPlugin\nä¸€äº›é™æ€èµ„æºä¹Ÿå¸Œæœ›æ‹·è´çš„distä¸­\nyarn add copy-webpack-plugin -D\n123456789const CopyWebpackPlugin &#x3D; require(&#39;copy-webpack-plugin&#39;)module.exports &#x3D; &#123;  plugins: [    new CopyWebpackPlugin([      &#123;from: &#39;doc&#39;, to: &#39;.&#x2F;dist&#39;&#125;    ])  ]&#125;\n\nbannerPluginå†…ç½®æ¨¡å—\nç‰ˆæƒå£°æ˜\n12345const webpack &#x3D; require(&#39;webpack&#39;);new webpack.BannerPlugin(&#39;hello world&#39;)&#x2F;&#x2F; ornew webpack.BannerPlugin(&#123; banner: &#39;hello world&#39;&#125;)\n\nwebpack è·¨åŸŸè®¾ç½®ä¸€ä¸ªæœåŠ¡,ç”±äºwebpack-dev-serverå†…å«express\nexpress\nserver.js\n1234567891011&#x2F;&#x2F; expresslet express &#x3D; require(&#39;express&#39;)let app &#x3D; express();app.get(&#39;&#x2F;api&#x2F;user&#39;, (res) &#x3D;&gt; &#123;  res.json(&#123;name: &#39;mayufo&#39;&#125;)&#125;)app.listen(3000)   &#x2F;&#x2F; æœåŠ¡ç«¯å£åœ¨3000\n\nå†™å®Œåè®°å¾—node server.js\nè®¿é—® http://localhost:3000/api/user å¯è§å†…å®¹\nindex.js\n1234567891011&#x2F;&#x2F; å‘é€ä¸€ä¸ªè¯·æ±‚let xhr &#x3D; new XMLHttpRequest();&#x2F;&#x2F; é»˜è®¤è®¿é—® http:&#x2F;&#x2F;localhost:8080  webpack-dev-server çš„æœåŠ¡ å†è½¬å‘ç»™3000xhr.open(&#39;GET&#39;, &#39;&#x2F;api&#x2F;user&#39;, true);xhr.onload &#x3D; function () &#123;  console.log(xhr.response)&#125;xhr.send();\n\n\nwebpack.config.js\n1234567module.exports &#x3D; &#123;  devServer: &#123;    proxy: &#123;      &#39;&#x2F;api&#39;: &#39;http:&#x2F;&#x2F;localhost:3000&#39;    &#125;  &#125;,&#125;\n\n1.å¦‚æœåç«¯ç»™çš„è¯·æ±‚æ²¡æœ‰API ã€Œè·¨åŸŸã€123456789101112&#x2F;&#x2F; expresslet express &#x3D; require(&#39;express&#39;)let app &#x3D; express();app.get(&#39;&#x2F;user&#39;, (res) &#x3D;&gt; &#123;  res.json(&#123;name: &#39;mayufo&#39;&#125;)&#125;)app.listen(3000)   &#x2F;&#x2F; æœåŠ¡ç«¯å£åœ¨3000\n\n\nè¯·æ±‚å·²apiå¼€å¤´, è½¬å‘çš„æ—¶å€™å†åˆ æ‰api\n12345678devServer: &#123;  proxy: &#123;    &#39;&#x2F;api&#39;: &#123;      target: &#39;http:&#x2F;&#x2F;localhost:3000&#39;,      pathRewrite: &#123;&#39;^&#x2F;api&#39;: &#39;&#39;&#125;    &#125;  &#125;&#125;\n\n2.å‰ç«¯åªæƒ³å•çº¯mockæ•°æ® ã€Œè·¨åŸŸã€12345678910111213141516devServer: &#123;  &#x2F;&#x2F; proxy: &#123;  &#x2F;&#x2F;     &#39;&#x2F;api&#39;: &#39;http:&#x2F;&#x2F;localhost:3000&#39; &#x2F;&#x2F; é…ç½®ä¸€ä¸ªä»£ç†  &#x2F;&#x2F; &#125;  &#x2F;&#x2F;   proxy: &#123;   &#x2F;&#x2F; é‡å†™æ–¹å¼ æŠŠè¯·æ±‚ä»£ç†åˆ°express ä¸Š  &#x2F;&#x2F;       &#39;&#x2F;api&#39;: &#123;  &#x2F;&#x2F;           target: &#39;http:&#x2F;&#x2F;localhost:3000&#39;,  &#x2F;&#x2F;           pathRewrite: &#123;&#39;^&#x2F;api&#39;: &#39;&#39;&#125;  &#x2F;&#x2F;       &#125;  &#x2F;&#x2F;   &#125;  before: function (app) &#123;  &#x2F;&#x2F; å‹¾å­    app.get(&#39;&#x2F;api&#x2F;user&#39;, (req, res) &#x3D;&gt; &#123;      res.json(&#123;name: &#39;tigerHee&#39;&#125;)    &#125;)  &#125;&#125;,\n\n3.æœ‰æœåŠ¡ç«¯ï¼Œä¸ç”¨ä»£ç†, æœåŠ¡ç«¯å¯åŠ¨webpack ã€Œè·¨åŸŸã€server.jsä¸­å¯åŠ¨webpack\nyarn add webpack-dev-middleware -D\nserver.js\n123456789101112131415161718192021222324&#x2F;&#x2F; expresslet express &#x3D; require(&#39;express&#39;)let webpack &#x3D; require(&#39;webpack&#39;)let app &#x3D; express();&#x2F;&#x2F; ä¸­é—´ä»¶let middle &#x3D; require(&#39;webpack-dev-middleware&#39;)let config &#x3D; require(&#39;.&#x2F;webpack.config&#39;)let compiler &#x3D; webpack(config)app.use(middle(compiler))app.get(&#39;&#x2F;user&#39;, (req, res) &#x3D;&gt; &#123;  res.json(&#123;name: &#39;mayufo&#39;&#125;)&#125;)app.listen(3000)\n\nwebpackè§£æresolveä»¥bootstrapä¸ºä¾‹\n1npm install bootstrap  -D\n\nindex.js\n1import &#39;bootstrap&#x2F;dist&#x2F;css&#x2F;bootstrap.css&#39;\n\næŠ¥é”™\n12345678910ERROR in .&#x2F;node_modules&#x2F;bootstrap&#x2F;dist&#x2F;css&#x2F;bootstrap.css 7:0Module parse failed: Unexpected token (7:0)You may need an appropriate loader to handle this file type.|  * Licensed under MIT (https:&#x2F;&#x2F;github.com&#x2F;twbs&#x2F;bootstrap&#x2F;blob&#x2F;master&#x2F;LICENSE)|  *&#x2F;&gt; :root &#123;|   --blue: #007bff;|   --indigo: #6610f2; @ .&#x2F;src&#x2F;index.js 22:0-42 @ multi (webpack)-dev-server&#x2F;client?http:&#x2F;&#x2F;localhost:8081 .&#x2F;src&#x2F;index.js\n\nè¿™æ˜¯å› ä¸ºbootstrap 4.0çš„csså¼•å…¥äº†æ–°çš„ç‰¹æ€§ï¼ŒCSS Variables\nå®‰è£…npm install postcss-custom-properties --save-dev\né…ç½®webpack.config.js\n1234567891011&#123;  test: &#x2F;\\.css$&#x2F;,  use: [&#39;style-loader&#39;, &#39;css-loader&#39;, &#123;    loader: &#39;postcss-loader&#39;,    options: &#123;      plugins: (loader) &#x3D;&gt; [        require(&quot;postcss-custom-properties&quot;)      ]    &#125;  &#125;]&#125;\n\nä½†æ˜¯æ¯æ¬¡å¼•å…¥éƒ½å¾ˆé•¿ï¼Œå¦‚ä½•ä¼˜é›…å¼•å…¥1234567resolve: &#123;  &#x2F;&#x2F; åœ¨å½“å‰ç›®å½•æŸ¥æ‰¾  modules: [path.resolve(&#39;node_modules&#39;)],  alias: &#123;      &#39;bootstrapCss&#39;: &#39;bootstrap&#x2F;dist&#x2F;css&#x2F;bootstrap.css&#39;  &#125;&#125;,\n\n1import &#39;bootstrapCss&#39;  &#x2F;&#x2F; åœ¨node_modulesæŸ¥æ‰¾\n\nçœç•¥æ‰©å±•åextensions:\n12345678910resolve: &#123;  &#x2F;&#x2F; åœ¨å½“å‰ç›®å½•æŸ¥æ‰¾  modules: [path.resolve(&#39;node_modules&#39;)],  &#x2F;&#x2F; alias: &#123;  &#x2F;&#x2F;   &#39;bootstrapCss&#39;: &#39;bootstrap&#x2F;dist&#x2F;css&#x2F;bootstrap.css&#39;  &#x2F;&#x2F; &#125;,  mainFields: [&#39;style&#39;, &#39;main&#39;],   &#x2F;&#x2F; å…ˆç”¨bootstrapä¸­åœ¨packageä¸­çš„style,æ²¡æœ‰åœ¨ç”¨main  &#x2F;&#x2F; mainFiles: []  &#x2F;&#x2F; å…¥å£æ–‡ä»¶çš„åå­— é»˜è®¤index  extensions: [&#39;.js&#39;, &#39;.css&#39;, &#39;.json&#39;]  &#x2F;&#x2F; å½“æ²¡æœ‰æ‹“å±•å‘½çš„æ—¶å€™ï¼Œå…ˆé»˜è®¤jsã€æ¬¡ä¹‹cssã€å†æ¬¡ä¹‹json&#125;,\n\nå®šä¹‰ç¯å¢ƒå˜é‡DefinePlugin å…è®¸åˆ›å»ºä¸€ä¸ªåœ¨ç¼–è¯‘æ—¶å¯ä»¥é…ç½®çš„å…¨å±€å¸¸é‡ã€‚è¿™å¯èƒ½ä¼šå¯¹å¼€å‘æ¨¡å¼å’Œç”Ÿäº§æ¨¡å¼çš„æ„å»ºå…è®¸ä¸åŒçš„è¡Œä¸ºéå¸¸æœ‰ç”¨ã€‚\n12345678let url &#x3D; &#39;&#39;if (DEV &#x3D;&#x3D;&#x3D; &#39;dev&#39;) &#123;  &#x2F;&#x2F; å¼€å‘ç¯å¢ƒ  url &#x3D; &#39;http:&#x2F;&#x2F;localhost:3000&#39;&#125; else &#123;  &#x2F;&#x2F; ç”Ÿæˆç¯å¢ƒ  url &#x3D; &#39;http:&#x2F;&#x2F;www.mayufo.cn&#39;&#125;\n\nwebpack.config.js\n123456new webpack.DefinePlugin(&#123;  &#x2F;&#x2F; DEV: &#39;&quot;production&quot;&#39;,  DEV: JSON.stringify(&#39;production&#39;),  FLAG: &#39;true&#39;,   &#x2F;&#x2F; å¸ƒå°”  EXPRESSION: &#39;1 + 1&#39;   &#x2F;&#x2F; å­—ç¬¦ä¸² å¦‚æœå¸Œæœ›æ˜¯å­—ç¬¦ä¸² JSON.stringify(&#39;1 + 1&#39;)&#125;)\n\nåŒºåˆ†ä¸¤ä¸ªä¸åŒçš„ç¯å¢ƒåˆ†åˆ«é…ç½®ä¸åŒçš„ç¯å¢ƒ\nwebpack.base4.js   åŸºç¡€é…ç½®\nwebpack.dev4.js    å¼€å‘ç¯å¢ƒ\nwebpack.prod4.js   ç”Ÿäº§ç¯å¢ƒ\nyarn add webpack-merge -D\nnpm run build -- -- config webpack.dev4.jsnpm run build -- -- config webpack.build.js\nå®˜æ–¹æ–‡æ¡£\nwebpack.base4.js\n123456789101112131415161718192021222324252627282930313233343536373839404142434445let path &#x3D; require(&#39;path&#39;)let HtmlWebpackPlugin &#x3D; require(&#39;html-webpack-plugin&#39;)let CleanWebpackPlugin &#x3D; require(&#39;clean-webpack-plugin&#39;)module.exports &#x3D; &#123;  entry: &#123;    home: &#39;.&#x2F;src&#x2F;index.js&#39;  &#125;,  output: &#123;    filename: &quot;[name].js&quot;,    path: path.resolve(process.cwd(), &#39;dist3&#39;)  &#125;,  module: &#123;    rules: [      &#123;        test: &#x2F;\\.js$&#x2F;,        use: &#123;          loader: &#39;babel-loader&#39;,          options: &#123;            presets: [              &#39;@babel&#x2F;preset-env&#39;            ]          &#125;        &#125;      &#125;,      &#123;        test: &#x2F;\\.css$&#x2F;,        use: [&#39;style-loader&#39;, &#39;css-loader&#39;, &#123;          loader: &#39;postcss-loader&#39;,          options: &#123;            plugins: (loader) &#x3D;&gt; [              require(&quot;postcss-custom-properties&quot;)            ]          &#125;        &#125;]      &#125;    ]  &#125;,  plugins: [    new HtmlWebpackPlugin(&#123;      template: &#39;.&#x2F;src&#x2F;index.html&#39;,      filename: &#39;index.html&#39;    &#125;)  ]&#125;\n\nwebpack.dev4.js\n12345678let merge &#x3D; require(&#39;webpack-merge&#39;)let base &#x3D; require(&#39;.&#x2F;webpack.base4.js&#39;)module.exports &#x3D; merge(base, &#123;  mode: &#39;development&#39;,  devServer: &#123;&#125;,  devtool: &#39;source-map&#39;&#125;)\n\nwebpack.prod4.js\n123456let merge &#x3D; require(&#39;webpack-merge&#39;)let base &#x3D; require(&#39;.&#x2F;webpack.base4.js&#39;)module.exports &#x3D; merge(base, &#123;  mode: &#39;production&#39;&#125;)\n\npackage.json\n1234&quot;scripts&quot;: &#123;  &quot;build&quot;: &quot;webpack  --config webpack.prod4.js&quot;,  &quot;dev&quot;: &quot;webpack-dev-server --config webpack.dev4.js&quot;&#125;,\n\n\nwebpack ä¼˜åŒ–yarn add webpack webpack-cli html-webpack-plugin @babel/core babel-loader @babel/preset-env @babel/preset-react -D\nwebpack.config.js\n12345678910111213141516171819202122232425262728293031323334let path &#x3D; require(&#39;path&#39;)let HtmlWebpackPlugin &#x3D; require(&#39;html-webpack-plugin&#39;)module.exports &#x3D; &#123;  mode: &#39;development&#39;,  entry: &#39;.&#x2F;src&#x2F;index.js&#39;,  output: &#123;    filename: &#39;main.js&#39;,    path: path.resolve(__dirname, &#39;dist&#39;)  &#125;,  module: &#123;    rules: [      &#123;        test: &#x2F;\\.js$&#x2F;,        use: &#123;          loader: &#39;babel-loader&#39;,          options: &#123;            presets: [              &#39;@babel&#x2F;preset-env&#39;,              &#39;@babel&#x2F;preset-react&#39;            ]          &#125;        &#125;      &#125;,    ]  &#125;,  plugins: [    new HtmlWebpackPlugin(&#123;      template: &#39;.&#x2F;src&#x2F;index.html&#39;,      filename: &#39;index.html&#39;    &#125;),  ]&#125;\nä¼˜åŒ–ï¼šå½“æŸäº›åŒ…æ˜¯ç‹¬ç«‹çš„ä¸ªä½“æ²¡æœ‰ä¾èµ–ä»¥jqueryä¸ºä¾‹ï¼Œyarn add jquery -D,å®ƒæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„åŒ…æ²¡æœ‰ä¾èµ–ï¼Œå¯ä»¥åœ¨webpacké…ç½®ä¸­ï¼Œé…ç½®å®ƒä¸å†æŸ¥æ‰¾ä¾èµ–\n1234567891011121314151617module: &#123;    noParse: &#x2F;jquery&#x2F;, &#x2F;&#x2F; ä¸ç”¨è§£ææŸäº›åŒ…çš„ä¾èµ–    rules: [      &#123;        test: &#x2F;\\.js$&#x2F;,        use: &#123;          loader: &#39;babel-loader&#39;,          options: &#123;            presets: [              &#39;@babel&#x2F;preset-env&#39;,              &#39;@babel&#x2F;preset-react&#39;            ]          &#125;        &#125;      &#125;,  ]&#125;\nè¿è¡Œnpx webpack\nä»2057ms  -&gt; 1946 ms\nä¼˜åŒ–ï¼šè§„åˆ™åŒ¹é…è®¾ç½®èŒƒå›´123456789101112131415rules: [  &#123;    test: &#x2F;\\.js$&#x2F;,    exclude: &#39;&#x2F;node_modules&#x2F;&#39;,   &#x2F;&#x2F; æ’é™¤    include: path.resolve(&#39;src&#39;),  &#x2F;&#x2F; åœ¨è¿™ä¸ªèŒƒå›´å†…    use: &#123;      loader: &#39;babel-loader&#39;,      options: &#123;        presets: [          &#39;@babel&#x2F;preset-env&#39;,          &#39;@babel&#x2F;preset-react&#39;        ]      &#125;    &#125;  &#125;\n\nå°½é‡å®ç”¨include,ä¸ä½¿ç”¨exclude,ä½¿ç”¨ç»å¯¹è·¯å¾„\nä¼˜åŒ–ï¼šå¿½ç•¥ä¾èµ–ä¸­ä¸å¿…è¦çš„è¯­è¨€åŒ…yarn add moment webpack-dev-server -D\nå¿½ç•¥æ‰momentçš„å…¶ä»–è¯­è¨€åŒ…\n12345let webpack &#x3D; require(&#39;webpack&#39;)plugins: [    new webpack.IgnorePlugin(&#x2F;\\.\\&#x2F;locale&#x2F;, &#x2F;moment&#x2F;)]\n\nindex.js\n1234import moment from &#39;moment&#39;let r &#x3D; moment().endOf(&#39;day&#39;).fromNow()  &#x2F;&#x2F; è·ç¦»ç°åœ¨å¤šå°‘å¤©console.log(r);\n\n\nä» 1.2MB åˆ°  800kb\nåŠ¨æ€é“¾æ¥åº“yarn add react react-dom\næ­£å¸¸ä½¿ç”¨\nwebpack.config.js\n1234567891011121314&#123;  test: &#x2F;\\.js$&#x2F;,  exclude: &#39;&#x2F;node_modules&#x2F;&#39;,  include: path.resolve(&#39;src&#39;),  use: &#123;    loader: &#39;babel-loader&#39;,    options: &#123;      presets: [        &#39;@babel&#x2F;preset-env&#39;,        &#39;@babel&#x2F;preset-react&#39;      ]    &#125;  &#125;&#125;\n\nindex.js\n123456import React from &#39;react&#39;import &#123;render&#125; from &#39;react-dom&#39;render(&lt;h1&gt;111111&lt;&#x2F;h1&gt;, window.root)\n\nindex.html\n1&lt;div id&#x3D;&quot;root&quot;&gt;&lt;&#x2F;div&gt;\n\nç‹¬ç«‹çš„å°†react react-dom æ‰“åŒ…å¥½, æ‰“åŒ…å¥½å†å¼•ç”¨ï¼Œä»è€Œå‡å°‘webpackæ¯æ¬¡éƒ½è¦æ‰“åŒ…react\nåˆ›å»ºwebpack.config.react.js\n12345678910111213141516171819202122let path &#x3D; require(&#39;path&#39;)let webpack &#x3D; require(&#39;webpack&#39;)module.exports &#x3D; &#123;  mode: &#39;development&#39;,  entry: &#123;    &#x2F;&#x2F; test: &#39;.&#x2F;src&#x2F;test.js&#39;    react: [&#39;react&#39;, &#39;react-dom&#39;]  &#125;,  output: &#123;    filename: &#39;_dll_[name].js&#39;,  &#x2F;&#x2F; äº§ç”Ÿçš„æ–‡ä»¶å    path: path.resolve(__dirname, &#39;dist&#39;),    library: &#39;_dll_[name]&#39;,     &#x2F;&#x2F; ç»™è¾“å‡ºçš„ç»“æœåŠ ä¸ªåå­—    &#x2F;&#x2F; libraryTarget: &#39;var&#39;   &#x2F;&#x2F; é…ç½®å¦‚ä½•æš´éœ² library    &#x2F;&#x2F; commonjs ç»“æœæ”¾åœ¨exportå±æ€§ä¸Šï¼Œ umdç»Ÿä¸€èµ„æºæ¨¡å—, é»˜è®¤æ˜¯var  &#125;,  plugins: [    new webpack.DllPlugin(&#123;      name: &#39;_dll_[name]&#39;,   &#x2F;&#x2F; name &#x3D;&#x3D;&#x3D; library      path: path.resolve(__dirname, &#39;dist&#39;, &#39;manifest.json&#39;)  &#x2F;&#x2F; manifest.json å®šä¹‰äº†å„ä¸ªæ¨¡å—çš„è·¯å¾„    &#125;)  ]&#125;\n\nlibraryTarget\nmanifest.jsonå°±æ˜¯ä¸€ä¸ªä»»åŠ¡æ¸…å•oråŠ¨æ€é“¾æ¥åº“ï¼Œåœ¨è¿™ä¸ªæ¸…å•é‡Œé¢æŸ¥æ‰¾react\nnpx webpack --config webpack.config.react.js\nåœ¨index.htmlå¢åŠ å¼•ç”¨\n1234&lt;body&gt;&lt;div id&#x3D;&quot;root&quot;&gt;&lt;&#x2F;div&gt;&lt;script src&#x3D;&quot;&#x2F;_dll_react.js&quot;&gt;&lt;&#x2F;script&gt;&lt;&#x2F;body&gt;\n\nåœ¨webpack.config.js ä¸­é…ç½®ï¼Œç°åœ¨åŠ¨æ€é“¾æ¥åº“manifest.jsonä¸­æŸ¥æ‰¾,å¦‚æœæ²¡æœ‰å†æ‰“åŒ…react\n12345plugins: [  new webpack.DllReferencePlugin(&#123;    manifest: path.resolve(__dirname, &#39;dist&#39;, &#39;manifest.json&#39;)  &#125;)]\n\nDLLPlugin å’Œ DLLReferencePlugin\nnpm run build\næ‰“åŒ…åçš„bunle.jsæ–‡ä»¶å˜å°\nnpm run dev\nå¯ä»¥ç†è§£ä¸ºå…ˆæŠŠreactæ‰“åŒ…ï¼Œåé¢æ¯æ¬¡éƒ½ç›´æ¥ä½¿ç”¨reactæ‰“åŒ…åçš„ç»“æœ\nå¤šçº¿ç¨‹æ‰“åŒ…happypackyarn add happypack\nwebpack.config.js\n1234567891011121314151617181920212223242526let Happypack &#x3D; require(&#39;happypack&#39;)rules: [  &#123;    test: &#x2F;\\.js$&#x2F;,    exclude: &#39;&#x2F;node_modules&#x2F;&#39;,    include: path.resolve(&#39;src&#39;),    use: &#39;happypack&#x2F;loader?id&#x3D;js&#39;  &#125;,]plugins: [  new Happypack(&#123;    id: &#39;js&#39;,    use: [&#123;      loader: &#39;babel-loader&#39;,      options: &#123;        presets: [          &#39;@babel&#x2F;preset-env&#39;,          &#39;@babel&#x2F;preset-react&#39;        ]      &#125;    &#125;]  &#125;)]\n\njså¯ç”¨å¤šçº¿ç¨‹ï¼Œç”±äºå¯ç”¨å¤šçº¿ç¨‹ä¹Ÿä¼šæµªè´¹æ—¶é—´ï¼Œå› æ­¤å½“é¡¹ç›®æ¯”è¾ƒå¤§çš„æ—¶å€™å¯ç”¨æ•ˆæœæ›´å¥½\ncsså¯ç”¨å¤šçº¿ç¨‹\n12345678910&#123;  test: &#x2F;\\.css$&#x2F;,  use: &#39;happypack&#x2F;loader?id&#x3D;css&#39;&#125;new Happypack(&#123;  id: &#39;css&#39;,  use: [&#39;style-loader&#39;, &#39;css-loader&#39;]&#125;),\n\nwebpack è‡ªå¸¦çš„ä¼˜åŒ–test.js\n1234567891011let sum &#x3D; (a, b) &#x3D;&gt; &#123;  return a + b + &#39;sum&#39;&#125;let minus &#x3D; (a, b) &#x3D;&gt; &#123;  return a - b + &#39;minus&#39;;&#125;export default &#123;  sum, minus&#125;\n\nä½¿ç”¨import \nindex.js\n123import calc from &#39;.&#x2F;test&#39;console.log(calc.sum(1, 2));\n\n\nimportåœ¨ç”Ÿäº§ç¯å¢ƒä¸‹ä¼šè‡ªåŠ¨å»é™¤æ²¡æœ‰ç”¨çš„ä»£ç minusï¼Œè¿™å«tree-shakingï¼Œå°†æ²¡æœ‰ç”¨çš„ä»£ç è‡ªåŠ¨åˆ é™¤æ‰\nindex.js\n123let calc &#x3D; require(&#39;.&#x2F;test&#39;)console.log(calc);   &#x2F;&#x2F; es 6å¯¼å‡ºï¼Œæ˜¯ä¸€ä¸ªdefaultçš„å¯¹è±¡console.log(calc.default.sum(1, 2));\n\nrequireå¼•å…¥es6 æ¨¡å—ä¼šæŠŠç»“æœæ”¾åœ¨defaultä¸Š,æ‰“åŒ…buildåå¹¶ä¸ä¼šæŠŠå¤šä½™minusä»£ç åˆ é™¤æ‰ï¼Œä¸æ”¯æŒtree-shaking\nä½œç”¨åŸŸçš„æå‡\nindex.js\n123456let a &#x3D; 1let b &#x3D; 2let c &#x3D; 3let d &#x3D; a + b + cconsole.log(d, &#39;---------&#39;);\næ‰“åŒ…å‡ºæ¥çš„æ–‡ä»¶\n1console.log(r.default.sum(1,2));console.log(6,&quot;---------&quot;)\n\nåœ¨webpackä¸­å¯ä»¥çœç•¥ä¸€äº›å¯ä»¥ç®€åŒ–çš„ä»£ç \næŠ½å–å…¬å…±ä»£ç æŠ½ç¦»è‡ªæœ‰æ¨¡å—\nwebpack.config.js\n12345678910111213module.exports &#x3D; &#123;  optimization: &#123;    splitChunks: &#123;             &#x2F;&#x2F; åˆ†å‰²ä»£ç å—ï¼Œé’ˆå¯¹å¤šå…¥å£      cacheGroups: &#123;           &#x2F;&#x2F; ç¼“å­˜ç»„        common: &#123;              &#x2F;&#x2F; å…¬å…±æ¨¡å—          minSize: 0,          &#x2F;&#x2F; å¤§äºå¤šå°‘æŠ½ç¦»          minChunks: 2,        &#x2F;&#x2F; ä½¿ç”¨å¤šå°‘æ¬¡ä»¥ä¸ŠæŠ½ç¦»æŠ½ç¦»          chunks: &#39;initial&#39;    &#x2F;&#x2F; ä»ä»€ä¹ˆåœ°æ–¹å¼€å§‹, ä»å…¥å£å¼€å§‹        &#125;      &#125;    &#125;  &#125;,&#125;\nSplitChunksPlugin\nåˆ†åˆ«æœ‰a.jså’Œb.js, index.jså’Œother.jsåˆ†åˆ«å¼•å…¥aå’Œbä¸¤ä¸ªjs\nindex.js\n1234import &#39;.&#x2F;a&#39;import &#39;.&#x2F;b&#39;console.log(&#39;index.js&#39;);\n\nother.js\n1234import &#39;.&#x2F;a&#39;import &#39;.&#x2F;b&#39;console.log(&#39;other.js&#39;);\n\nwebpack.config.js\n12345678910111213module.exports &#x3D; &#123;  optimization: &#123;    splitChunks: &#123;             &#x2F;&#x2F; åˆ†å‰²ä»£ç å—ï¼Œé’ˆå¯¹å¤šå…¥å£      cacheGroups: &#123;           &#x2F;&#x2F; ç¼“å­˜ç»„        common: &#123;              &#x2F;&#x2F; å…¬å…±æ¨¡å—          minSize: 0,          &#x2F;&#x2F; å¤§äºå¤šå°‘æŠ½ç¦»          minChunks: 2,        &#x2F;&#x2F; ä½¿ç”¨å¤šå°‘æ¬¡ä»¥ä¸ŠæŠ½ç¦»æŠ½ç¦»          chunks: &#39;initial&#39;    &#x2F;&#x2F; ä»ä»€ä¹ˆåœ°æ–¹å¼€å§‹, ä»å…¥å£å¼€å§‹        &#125;      &#125;    &#125;  &#125;,&#125;\n\næŠ½ç¦»ç¬¬ä¸‰æ–¹æ¨¡å—\næ¯”å¦‚jquery\nindex.js å’Œ other.jsåˆ†åˆ«å¼•å…¥\n123import $ from &#39;jquery&#39;console.log($);\n\nä¿®æ”¹webpack.config.jsé…ç½®ï¼š\n123456789101112131415161718optimization: &#123;  splitChunks: &#123;              &#x2F;&#x2F; åˆ†å‰²ä»£ç å—ï¼Œé’ˆå¯¹å¤šå…¥å£    cacheGroups: &#123;            &#x2F;&#x2F; ç¼“å­˜ç»„      common: &#123;               &#x2F;&#x2F; å…¬å…±æ¨¡å—        minSize: 0,           &#x2F;&#x2F; å¤§äºå¤šå°‘æŠ½ç¦»        minChunks: 2,         &#x2F;&#x2F; ä½¿ç”¨å¤šå°‘æ¬¡ä»¥ä¸ŠæŠ½ç¦»æŠ½ç¦»        chunks: &#39;initial&#39;     &#x2F;&#x2F; ä»ä»€ä¹ˆåœ°æ–¹å¼€å§‹,åˆšå¼€å§‹      &#125;,      vendor: &#123;        priority: 1,          &#x2F;&#x2F; å¢åŠ æƒé‡, (å…ˆæŠ½ç¦»ç¬¬ä¸‰æ–¹)        test: &#x2F;node_modules&#x2F;, &#x2F;&#x2F; æŠŠæ­¤ç›®å½•ä¸‹çš„æŠ½ç¦»        minSize: 0,           &#x2F;&#x2F; å¤§äºå¤šå°‘æŠ½ç¦»        minChunks: 2,         &#x2F;&#x2F; ä½¿ç”¨å¤šå°‘æ¬¡ä»¥ä¸ŠæŠ½ç¦»æŠ½ç¦»        chunks: &#39;initial&#39;     &#x2F;&#x2F; ä»ä»€ä¹ˆåœ°æ–¹å¼€å§‹,åˆšå¼€å§‹      &#125;    &#125;  &#125;,&#125;,\n\næ‡’åŠ è½½(å»¶è¿ŸåŠ è½½)yarn add @babel/plugin-syntax-dynamic-import  -D\nsource.js\n1export default &#39;mayufo&#39;\n\nindex.js\n12345678910let button &#x3D; document.createElement(&#39;button&#39;)button.innerHTML &#x3D; &#39;hello&#39;button.addEventListener(&#39;click&#39;, function () &#123;  console.log(&#39;click&#39;)  &#x2F;&#x2F; es6è‰æ¡ˆä¸­çš„è¯­æ³•ï¼Œjsonpå®ç°åŠ¨æ€åŠ è½½æ–‡ä»¶  import(&#39;.&#x2F;source.js&#39;).then(data &#x3D;&gt; &#123;    console.log(data.default)  &#125;)&#125;)document.body.appendChild(button)\n\nwebpack.config.js\n1234567891011121314151617&#123;  test: &#x2F;\\.js$&#x2F;,  exclude: &#39;&#x2F;node_modules&#x2F;&#39;,  include: path.resolve(&#39;src&#39;),  use: [&#123;    loader: &#39;babel-loader&#39;,    options: &#123;      presets: [        &#39;@babel&#x2F;preset-env&#39;,        &#39;@babel&#x2F;preset-react&#39;      ],      plugins: [        &#39;@babel&#x2F;plugin-syntax-dynamic-import&#39;      ]    &#125;  &#125;]&#125;\n\nçƒ­æ›´æ–°(å½“é¡µé¢æ”¹å˜åªæ›´æ–°æ”¹å˜çš„éƒ¨åˆ†ï¼Œä¸é‡æ–°æ‰“åŒ…)webpack.config.js\n12345678plugins: [  new HtmlWebpackPlugin(&#123;    template: &#39;.&#x2F;src&#x2F;index.html&#39;,    filename: &#39;index.html&#39;  &#125;),  new webpack.NameModulesPlugin(),          &#x2F;&#x2F; æ‰“å°æ›´æ–°çš„æ¨¡å—è·¯å¾„  new webpack.HotModuleReplacementPlugin()  &#x2F;&#x2F; çƒ­æ›´æ–°æ’ä»¶]\n\nindex.js\n123456789101112import str from &#39;.&#x2F;source&#39;console.log(str);if (module.hot) &#123;  module.hot.accept(&#39;.&#x2F;source&#39;, () &#x3D;&gt; &#123;    console.log(&#39;æ–‡ä»¶æ›´æ–°äº†&#39;);    require(&#39;.&#x2F;source&#39;)    console.log(str);  &#125;)&#125;\n\ntapableä»‹ç» - SyncHooktapable\nwebpackæœ¬è´¨ä¸Šæ˜¯ä¸€ç§äº‹ä»¶æµçš„æœºåˆ¶ï¼Œå®ƒçš„å·¥ä½œæµç¨‹å°±æ˜¯å°†å„ä¸ªæ’ä»¶ä¸²è”èµ·æ¥ï¼Œè€Œå®ç°è¿™ä¸€åˆ‡çš„æ ¸å¿ƒå°±æ˜¯Tapableï¼Œwebpackä¸­æœ€æ ¸å¿ƒçš„è´Ÿè´£ç¼–è¯‘çš„Compilerå’Œè´Ÿè´£åˆ›å»ºbundlesçš„Compilationéƒ½æ˜¯Tapableçš„å®ä¾‹ã€‚\nSyncHook ä¸å…³å¿ƒç›‘å¬å‡½æ•°çš„è¿”å›å€¼\nyarn add tabable\n1.use.js\n12345678910111213141516171819202122232425262728let &#123;SyncHook&#125; &#x3D; require(&#39;tapable&#39;)   &#x2F;&#x2F; ç»“æ„åŒæ­¥å‹¾å­class Lesson &#123;  constructor () &#123;    this.hooks &#x3D; &#123;      &#x2F;&#x2F; è®¢é˜…å‹¾å­      arch: new SyncHook([&#39;name&#39;]),    &#125;  &#125;  start () &#123;    this.hooks.arch.call(&#39;may&#39;)  &#125;  tap () &#123;   &#x2F;&#x2F;  æ³¨å†Œç›‘å¬å‡½æ•°    this.hooks.arch.tap(&#39;node&#39;, function (name) &#123;      console.log(&#39;node&#39;, name)    &#125;)    this.hooks.arch.tap(&#39;react&#39;, function (name) &#123;      console.log(&#39;react&#39;, name)    &#125;)  &#125;&#125;let l &#x3D; new Lesson()l.tap();  &#x2F;&#x2F;æ³¨å†Œä¸¤ä¸ªå‡½æ•°l.start() &#x2F;&#x2F; å¯åŠ¨å‹¾å­\n\n1.theory.js\n12345678910111213141516171819202122232425class SyncHook &#123;  &#x2F;&#x2F; å‹¾å­æ˜¯åŒæ­¥çš„  constructor(args) &#123;  &#x2F;&#x2F; args &#x3D;&gt; [&#39;name&#39;]    this.tasks &#x3D; []  &#125;  tap (name, task) &#123;    this.tasks.push(task)  &#125;  call (...args) &#123;    this.tasks.forEach((task) &#x3D;&gt; task(...args))  &#125;&#125;let hook &#x3D; new SyncHook([&#39;name&#39;])hook.tap(&#39;react&#39;, function (name) &#123;  console.log(&#39;react&#39;, name);&#125;)hook.tap(&#39;node&#39;, function (name) &#123;  console.log(&#39;node&#39;, name);&#125;)hook.call(&#39;jw&#39;)\n\n\ntapableä»‹ç» - SyncBailHookSyncBailHookä¸ºå‹¾å­åŠ äº†ä¸ªä¿é™©ï¼Œå½“returnè¿”å›ä¸æ˜¯undefineå°±ä¼šåœæ­¢\n2.use.js\n12345678910111213141516171819202122232425262728293031let &#123;SyncBailHook&#125; &#x3D; require(&#39;tapable&#39;)   &#x2F;&#x2F; è§£æ„åŒæ­¥å‹¾å­class Lesson &#123;  constructor () &#123;    this.hooks &#x3D; &#123;      &#x2F;&#x2F; è®¢é˜…å‹¾å­      arch: new SyncBailHook([&#39;name&#39;]),    &#125;  &#125;  start () &#123;    &#x2F;&#x2F; å‘å¸ƒ    this.hooks.arch.call(&#39;may&#39;)  &#125;  tap () &#123;   &#x2F;&#x2F;  æ³¨å†Œç›‘å¬å‡½æ•°,è®¢é˜…    this.hooks.arch.tap(&#39;node&#39;, function (name) &#123;      console.log(&#39;node&#39;, name)      return &#39;åœæ­¢å­¦ä¹ &#39;  &#x2F;&#x2F; ä¼šåœæ­¢      &#x2F;&#x2F; return undefined    &#125;)    this.hooks.arch.tap(&#39;react&#39;, function (name) &#123;      console.log(&#39;react&#39;, name)    &#125;)  &#125;&#125;let l &#x3D; new Lesson()l.tap();  &#x2F;&#x2F;æ³¨å†Œä¸¤ä¸ªå‡½æ•°l.start() &#x2F;&#x2F; å¯åŠ¨å‹¾å­\n\n2.theory.js\n12345678910111213141516171819202122232425262728293031class SyncBailHook &#123;  &#x2F;&#x2F; å‹¾å­æ˜¯åŒæ­¥çš„    constructor(args) &#123;  &#x2F;&#x2F; args &#x3D;&gt; [&#39;name&#39;]        this.tasks &#x3D; []    &#125;    tap (name, task) &#123;        this.tasks.push(task)    &#125;    call (...args) &#123;        let ret;   &#x2F;&#x2F; å½“å‰å‡½æ•°çš„è¿”å›å€¼        let index &#x3D; 0; &#x2F;&#x2F; å½“å‰è¦æ‰§è¡Œçš„ç¬¬ä¸€ä¸ª        do &#123;            ret &#x3D; this.tasks[index](...args)        &#125; while (ret &#x3D;&#x3D;&#x3D; undefined  &amp;&amp; index &lt; this.tasks.length)    &#125;&#125;let hook &#x3D; new SyncBailHook([&#39;name&#39;])hook.tap(&#39;react&#39;, function (name) &#123;    console.log(&#39;react&#39;, name);    return &#39;åœæ­¢å­¦ä¹ &#39;    &#x2F;&#x2F; return undefined&#125;)hook.tap(&#39;node&#39;, function (name) &#123;    console.log(&#39;node&#39;, name);&#125;)hook.call(&#39;jw&#39;)\n\ntapableä»‹ç» - SyncWaterfallHookSyncWaterfallHookä¸Šä¸€ä¸ªç›‘å¬å‡½æ•°çš„è¿”å›å€¼å¯ä»¥ä¼ ç»™ä¸‹ä¸€ä¸ªç›‘å¬å‡½æ•°\n3.use.js\n1234567891011121314151617181920212223242526272829303132let &#123;SyncWaterfallHook&#125; &#x3D; require(&#39;tapable&#39;)   &#x2F;&#x2F; è§£æ„åŒæ­¥å‹¾å­&#x2F;&#x2F; waterfall ç€‘å¸ƒclass Lesson &#123;    constructor () &#123;        this.hooks &#x3D; &#123;            &#x2F;&#x2F; è®¢é˜…å‹¾å­            arch: new SyncWaterfallHook([&#39;name&#39;]),        &#125;    &#125;    start () &#123;        &#x2F;&#x2F; å‘å¸ƒ        this.hooks.arch.call(&#39;may&#39;)    &#125;    tap () &#123;   &#x2F;&#x2F;  æ³¨å†Œç›‘å¬å‡½æ•°,è®¢é˜…        this.hooks.arch.tap(&#39;node&#39;, function (name) &#123;            console.log(&#39;node&#39;, name)            return &#39;å­¦çš„ä¸é”™&#39;        &#125;)        this.hooks.arch.tap(&#39;react&#39;, function (name) &#123;            console.log(&#39;react&#39;, name)        &#125;)    &#125;&#125;let l &#x3D; new Lesson()l.tap();  &#x2F;&#x2F;æ³¨å†Œä¸¤ä¸ªå‡½æ•°l.start() &#x2F;&#x2F; å¯åŠ¨å‹¾å­\n\n3.theory.js\n1234567891011121314151617181920212223242526272829303132333435363738class SyncWaterfallHook &#123;  &#x2F;&#x2F; å‹¾å­æ˜¯åŒæ­¥çš„ - ç€‘å¸ƒ    constructor(args) &#123;  &#x2F;&#x2F; args &#x3D;&gt; [&#39;name&#39;]        this.tasks &#x3D; []    &#125;    tap (name, task) &#123;        this.tasks.push(task)    &#125;    call (...args) &#123;        let [first, ...others] &#x3D; this.tasks;        let ret &#x3D; first(...args)        others.reduce((a, b) &#x3D;&gt; &#123;            return b(a);        &#125;, ret);    &#125;&#125;let hook &#x3D; new SyncWaterfallHook([&#39;name&#39;])hook.tap(&#39;react&#39;, function (name) &#123;    console.log(&#39;react&#39;, name);    return &#39;react Ok&#39;    &#x2F;&#x2F; return undefined&#125;)hook.tap(&#39;node&#39;, function (name) &#123;    console.log(&#39;node&#39;, name);    return &#39;node Ok&#39;&#125;)hook.tap(&#39;webpack&#39;, function (data) &#123;    console.log(&#39;webpack&#39;, data);&#125;)hook.call(&#39;jw&#39;)\n\ntapableä»‹ç» - SyncLoopHookSyncLoopHookå½“ç›‘å¬å‡½æ•°è¢«è§¦å‘çš„æ—¶å€™ï¼Œå¦‚æœè¯¥ç›‘å¬å‡½æ•°è¿”å›trueæ—¶åˆ™è¿™ä¸ªç›‘å¬å‡½æ•°ä¼šåå¤æ‰§è¡Œï¼Œå¦‚æœè¿”å› undefined åˆ™è¡¨ç¤ºé€€å‡ºå¾ªç¯\n4.use.js\n123456789101112131415161718192021222324252627282930313233let &#123;SyncLoopHook&#125; &#x3D; require(&#39;tapable&#39;)   &#x2F;&#x2F; è§£æ„åŒæ­¥å‹¾å­&#x2F;&#x2F; ä¸è¿”å›undefined ä¼šå¤šæ¬¡æ‰§è¡Œclass Lesson &#123;    constructor () &#123;        this.index &#x3D; 0        this.hooks &#x3D; &#123;            &#x2F;&#x2F; è®¢é˜…å‹¾å­            arch: new SyncLoopHook([&#39;name&#39;]),        &#125;    &#125;    start () &#123;        &#x2F;&#x2F; å‘å¸ƒ        this.hooks.arch.call(&#39;may&#39;)    &#125;    tap () &#123;   &#x2F;&#x2F;  æ³¨å†Œç›‘å¬å‡½æ•°,è®¢é˜…        this.hooks.arch.tap(&#39;node&#39;,  (name) &#x3D;&gt; &#123;            console.log(&#39;node&#39;, name)            return ++this.index &#x3D;&#x3D;&#x3D; 3 ? undefined : &#39;ç»§ç»­å­¦&#39;        &#125;)        this.hooks.arch.tap(&#39;react&#39;,  (name) &#x3D;&gt; &#123;            console.log(&#39;react&#39;, name)        &#125;)    &#125;&#125;let l &#x3D; new Lesson()l.tap();  &#x2F;&#x2F;æ³¨å†Œä¸¤ä¸ªå‡½æ•°l.start() &#x2F;&#x2F; å¯åŠ¨å‹¾å­\n\n4.theory.js\n123456789101112131415161718192021222324252627282930313233343536class SyncLoopHook &#123;  &#x2F;&#x2F; å‹¾å­æ˜¯åŒæ­¥çš„ - ç€‘å¸ƒ    constructor(args) &#123;  &#x2F;&#x2F; args &#x3D;&gt; [&#39;name&#39;]        this.tasks &#x3D; []    &#125;    tap (name, task) &#123;        this.tasks.push(task)    &#125;    call (...args) &#123;        this.tasks.forEach(task &#x3D;&gt; &#123;            let ret            do &#123;                ret &#x3D; task(...args);            &#125; while(ret !&#x3D;&#x3D; undefined)        &#125;)    &#125;&#125;let hook &#x3D; new SyncLoopHook([&#39;name&#39;])let total &#x3D; 0hook.tap(&#39;react&#39;, function (name) &#123;    console.log(&#39;react&#39;, name);    return ++total &#x3D;&#x3D;&#x3D; 3 ? undefined: &#39;ç»§ç»­å­¦&#39;&#125;)hook.tap(&#39;node&#39;, function (name) &#123;    console.log(&#39;node&#39;, name);&#125;)hook.tap(&#39;webpack&#39;, function (data) &#123;    console.log(&#39;webpack&#39;, data);&#125;)hook.call(&#39;jw&#39;)\n\n\nAsyncParallelHook ä¸ AsyncParallelBailHookå¼‚æ­¥çš„å‹¾å­åˆ†ä¸¤ç§ä¸²è¡Œå’Œå¹¶è¡Œ\nå¹¶è¡Œç­‰å¾…æ‰€æœ‰å¹¶å‘çš„å¼‚æ­¥äº‹ä»¶æ‰§è¡Œåæ‰§è¡Œå›è°ƒ\næ³¨å†Œçš„ä¸‰ç§æ–¹æ³•\nå¼‚æ­¥çš„æ³¨å†Œæ–¹æ³•tap\nå¼‚æ­¥çš„æ³¨å†Œæ–¹æ³•tapAsyncï¼Œ è¿˜æœ‰ä¸ªå›è°ƒå‚æ•°\ntopPromise,æ³¨å†Œpromise\nè°ƒç”¨çš„ä¸‰ç§\ncall (åŒæ­¥)\ncallAsync ï¼ˆå¼‚æ­¥ï¼‰\npromise ï¼ˆå¼‚æ­¥ï¼‰\nè¿™é‡Œä»‹ç»çš„æ˜¯å¼‚æ­¥å¹¶è¡Œçš„\nAsyncParallelHookä¸å…³å¿ƒç›‘å¬å‡½æ•°çš„è¿”å›å€¼ã€‚\n5.use.js\n1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465let &#123;AsyncParallelHook&#125; &#x3D; require(&#39;tapable&#39;)   &#x2F;&#x2F; è§£æ„åŒæ­¥å‹¾å­&#x2F;&#x2F; ä¸è¿”å›undefined ä¼šå¤šæ¬¡æ‰§è¡Œclass Lesson &#123;    constructor() &#123;        this.index &#x3D; 0        this.hooks &#x3D; &#123;            &#x2F;&#x2F; è®¢é˜…å‹¾å­            arch: new AsyncParallelHook([&#39;name&#39;]),        &#125;    &#125;    start() &#123;        &#x2F;&#x2F; å‘å¸ƒcallAsync        &#x2F;&#x2F; this.hooks.arch.callAsync(&#39;may&#39;, function () &#123;        &#x2F;&#x2F;     console.log(&#39;end&#39;);        &#x2F;&#x2F; &#125;)        &#x2F;&#x2F; å¦ä¸€ç§å‘å¸ƒpromise        this.hooks.arch.promise(&#39;may&#39;).then(function () &#123;                console.log(&#39;end&#39;);            &#125;        )    &#125;    tap() &#123;   &#x2F;&#x2F;  æ³¨å†Œç›‘å¬å‡½æ•°,è®¢é˜…        &#x2F;&#x2F; æ³¨å†ŒtapAsync        &#x2F;&#x2F; this.hooks.arch.tapAsync(&#39;node&#39;,  (name, callback) &#x3D;&gt; &#123;        &#x2F;&#x2F;     setTimeout(() &#x3D;&gt; &#123;        &#x2F;&#x2F;         console.log(&#39;node&#39;, name)        &#x2F;&#x2F;         callback()        &#x2F;&#x2F;     &#125;, 1000)        &#x2F;&#x2F; &#125;)        &#x2F;&#x2F; this.hooks.arch.tapAsync(&#39;react&#39;,  (name, callback) &#x3D;&gt; &#123;        &#x2F;&#x2F;     setTimeout(() &#x3D;&gt; &#123;        &#x2F;&#x2F;         console.log(&#39;react&#39;, name)        &#x2F;&#x2F;         callback()        &#x2F;&#x2F;     &#125;, 1000)        &#x2F;&#x2F; &#125;)        &#x2F;&#x2F; å¦ä¸€ç§è®¢é˜… tapPromise        this.hooks.arch.tapPromise(&#39;node&#39;, (name) &#x3D;&gt; &#123;            return new Promise((resolve, reject) &#x3D;&gt; &#123;                setTimeout(() &#x3D;&gt; &#123;                    console.log(&#39;node&#39;, name)                    resolve()                &#125;, 1000)            &#125;)        &#125;)        this.hooks.arch.tapPromise(&#39;react&#39;, (name) &#x3D;&gt; &#123;            return new Promise((resolve, reject) &#x3D;&gt; &#123;                setTimeout(() &#x3D;&gt; &#123;                    console.log(&#39;react&#39;, name)                    resolve()                &#125;, 1000)            &#125;)        &#125;)    &#125;&#125;let l &#x3D; new Lesson()l.tap();  &#x2F;&#x2F;æ³¨å†Œä¸¤ä¸ªå‡½æ•°l.start() &#x2F;&#x2F; å¯åŠ¨å‹¾å­\n\n\n5.theory.js\n12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485class AsyncParallelHook &#123;  &#x2F;&#x2F; å‹¾å­æ˜¯åŒæ­¥çš„ - ç€‘å¸ƒ    constructor(args) &#123;  &#x2F;&#x2F; args &#x3D;&gt; [&#39;name&#39;]        this.tasks &#x3D; []    &#125;    tapAsync(name, task) &#123;        this.tasks.push(task)    &#125;    tapPromise(name, task) &#123;        this.tasks.push(task)    &#125;    callAsync(...args) &#123;        let finalCallback &#x3D; args.pop()   &#x2F;&#x2F; æ‹¿å‡ºæœ€ç»ˆçš„å‡½æ•°        let index &#x3D; 0        let done &#x3D; () &#x3D;&gt; &#123;   &#x2F;&#x2F; ç±»ä¼¼promise.allçš„å®ç°            index++;            if (index &#x3D;&#x3D;&#x3D; this.tasks.length) &#123;                finalCallback();            &#125;        &#125;        this.tasks.forEach(task &#x3D;&gt; &#123;            task(...args, done) &#x2F;&#x2F; è¿™é‡Œçš„args å·²ç»æŠŠæœ€åä¸€ä¸ªå‚æ•°åˆ æ‰        &#125;)    &#125;    promise(...args) &#123;        let tasks &#x3D; this.tasks.map(task &#x3D;&gt; task(...args))        return Promise.all(tasks)    &#125;&#125;let hook &#x3D; new AsyncParallelHook([&#39;name&#39;])&#x2F;&#x2F; hook.tapAsync(&#39;react&#39;, function (name, callback) &#123;&#x2F;&#x2F;     setTimeout(() &#x3D;&gt; &#123;&#x2F;&#x2F;         console.log(&#39;react&#39;, name);&#x2F;&#x2F;         callback()&#x2F;&#x2F;     &#125;, 1000)&#x2F;&#x2F; &#125;)&#x2F;&#x2F;&#x2F;&#x2F; hook.tapAsync(&#39;node&#39;, function (name, callback) &#123;&#x2F;&#x2F;     setTimeout(() &#x3D;&gt; &#123;&#x2F;&#x2F;         console.log(&#39;node&#39;, name);&#x2F;&#x2F;         callback()&#x2F;&#x2F;     &#125;, 1000)&#x2F;&#x2F; &#125;)&#x2F;&#x2F; hook.tapAsync(&#39;webpack&#39;, function (name, callback) &#123;&#x2F;&#x2F;     setTimeout(() &#x3D;&gt; &#123;&#x2F;&#x2F;         console.log(&#39;webpack&#39;, name);&#x2F;&#x2F;         callback()&#x2F;&#x2F;     &#125;, 1000)&#x2F;&#x2F; &#125;)hook.tapPromise(&#39;react&#39;, function (name, callback) &#123;    return new Promise((resolve, reject) &#x3D;&gt; &#123;        setTimeout(() &#x3D;&gt; &#123;            console.log(&#39;react&#39;, name);            resolve()        &#125;, 1000)    &#125;)&#125;)hook.tapPromise(&#39;node&#39;, function (name, callback) &#123;    return new Promise((resolve, reject) &#x3D;&gt; &#123;        setTimeout(() &#x3D;&gt; &#123;            console.log(&#39;node&#39;, name);            resolve()        &#125;, 1000)    &#125;)&#125;)&#x2F;&#x2F;&#x2F;&#x2F; hook.callAsync(&#39;jw&#39;, function () &#123;&#x2F;&#x2F;     console.log(&#39;end&#39;);&#x2F;&#x2F; &#125;)hook.promise(&#39;jw&#39;).then(function () &#123;    console.log(&#39;end&#39;);&#125;)\n\n\nAsyncParallelBailHookåªè¦ç›‘å¬å‡½æ•°çš„è¿”å›å€¼ä¸ä¸º nullï¼Œå°±ä¼šå¿½ç•¥åé¢çš„ç›‘å¬å‡½æ•°æ‰§è¡Œï¼Œç›´æ¥è·³è·ƒåˆ°callAsyncç­‰è§¦å‘å‡½æ•°ç»‘å®šçš„å›è°ƒå‡½æ•°ï¼Œç„¶åæ‰§è¡Œè¿™ä¸ªè¢«ç»‘å®šçš„å›è°ƒå‡½æ•°ã€‚\nä½¿ç”¨å’ŒåŸç†ä¸SyncBailHookç›¸ä¼¼\nå¼‚æ­¥ä¸²è¡Œ â€”â€” AsyncSeriesHookä¸²è¡Œone by one\n6.use.js\n123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263let &#123;AsyncSeriesHook&#125; &#x3D; require(&#39;tapable&#39;)   &#x2F;&#x2F; è§£æ„åŒæ­¥å‹¾å­class Lesson &#123;    constructor() &#123;        this.index &#x3D; 0        this.hooks &#x3D; &#123;            &#x2F;&#x2F; è®¢é˜…å‹¾å­            arch: new AsyncSeriesHook([&#39;name&#39;]),        &#125;    &#125;    start() &#123;        &#x2F;&#x2F; å‘å¸ƒ        &#x2F;&#x2F; this.hooks.arch.callAsync(&#39;may&#39;, function () &#123;        &#x2F;&#x2F;     console.log(&#39;end&#39;);        &#x2F;&#x2F; &#125;)        &#x2F;&#x2F; å¦ä¸€ç§å‘å¸ƒ        this.hooks.arch.promise(&#39;may&#39;).then(function () &#123;                console.log(&#39;end&#39;);            &#125;        )    &#125;    tap() &#123;   &#x2F;&#x2F;  æ³¨å†Œç›‘å¬å‡½æ•°,è®¢é˜…        &#x2F;&#x2F; this.hooks.arch.tapAsync(&#39;node&#39;,  (name, callback) &#x3D;&gt; &#123;        &#x2F;&#x2F;     setTimeout(() &#x3D;&gt; &#123;        &#x2F;&#x2F;         console.log(&#39;node&#39;, name)        &#x2F;&#x2F;         callback()        &#x2F;&#x2F;     &#125;, 1000)        &#x2F;&#x2F; &#125;)        &#x2F;&#x2F; this.hooks.arch.tapAsync(&#39;react&#39;,  (name, callback) &#x3D;&gt; &#123;        &#x2F;&#x2F;     setTimeout(() &#x3D;&gt; &#123;        &#x2F;&#x2F;         console.log(&#39;react&#39;, name)        &#x2F;&#x2F;         callback()        &#x2F;&#x2F;     &#125;, 1000)        &#x2F;&#x2F; &#125;)        &#x2F;&#x2F; å¦ä¸€ç§è®¢é˜…        this.hooks.arch.tapPromise(&#39;node&#39;, (name) &#x3D;&gt; &#123;            return new Promise((resolve, reject) &#x3D;&gt; &#123;                setTimeout(() &#x3D;&gt; &#123;                    console.log(&#39;node&#39;, name)                    resolve()                &#125;, 1000)            &#125;)        &#125;)        this.hooks.arch.tapPromise(&#39;react&#39;, (name) &#x3D;&gt; &#123;            return new Promise((resolve, reject) &#x3D;&gt; &#123;                setTimeout(() &#x3D;&gt; &#123;                    console.log(&#39;react&#39;, name)                    resolve()                &#125;, 1000)            &#125;)        &#125;)    &#125;&#125;let l &#x3D; new Lesson()l.tap();  &#x2F;&#x2F;æ³¨å†Œä¸¤ä¸ªå‡½æ•°l.start(); &#x2F;&#x2F; å¯åŠ¨å‹¾å­\n\n6.theory.js\n123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687class AsyncSeriesHook &#123;  &#x2F;&#x2F;    constructor(args) &#123;  &#x2F;&#x2F; args &#x3D;&gt; [&#39;name&#39;]        this.tasks &#x3D; []    &#125;    tapAsync(name, task) &#123;        this.tasks.push(task)    &#125;    tapPromise(name, task) &#123;        this.tasks.push(task)    &#125;    callAsync(...args) &#123;        let finalCallback &#x3D; args.pop()        let index &#x3D; 0;        let next &#x3D; () &#x3D;&gt; &#123;            if (this.tasks.length &#x3D;&#x3D;&#x3D; index) return finalCallback();            let task &#x3D; this.tasks[index++];            task(...args, next);        &#125;        next();    &#125;    promise(...args) &#123;        &#x2F;&#x2F; å°†promiseä¸²è”èµ·æ¥        let [first, ...other] &#x3D; this.tasks        return other.reduce((p, n) &#x3D;&gt; &#123;             return p.then(() &#x3D;&gt; n (...args))        &#125;, first(...args))    &#125;&#125;let hook &#x3D; new AsyncSeriesHook([&#39;name&#39;])&#x2F;&#x2F; hook.tapAsync(&#39;react&#39;, function (name, callback) &#123;&#x2F;&#x2F;     setTimeout(() &#x3D;&gt; &#123;&#x2F;&#x2F;         console.log(&#39;react&#39;, name);&#x2F;&#x2F;         callback()&#x2F;&#x2F;     &#125;, 1000)&#x2F;&#x2F; &#125;)&#x2F;&#x2F;&#x2F;&#x2F; hook.tapAsync(&#39;node&#39;, function (name, callback) &#123;&#x2F;&#x2F;     setTimeout(() &#x3D;&gt; &#123;&#x2F;&#x2F;         console.log(&#39;node&#39;, name);&#x2F;&#x2F;         callback()&#x2F;&#x2F;     &#125;, 1000)&#x2F;&#x2F; &#125;)&#x2F;&#x2F;&#x2F;&#x2F; hook.tapAsync(&#39;webpack&#39;, function (name, callback) &#123;&#x2F;&#x2F;     setTimeout(() &#x3D;&gt; &#123;&#x2F;&#x2F;         console.log(&#39;webpack&#39;, name);&#x2F;&#x2F;         callback()&#x2F;&#x2F;     &#125;, 1000)&#x2F;&#x2F; &#125;)hook.tapPromise(&#39;react&#39;, function (name, callback) &#123;    return new Promise((resolve, reject) &#x3D;&gt; &#123;        setTimeout(() &#x3D;&gt; &#123;            console.log(&#39;react&#39;, name);            resolve()        &#125;, 1000)    &#125;)&#125;)hook.tapPromise(&#39;node&#39;, function (name, callback) &#123;    return new Promise((resolve, reject) &#x3D;&gt; &#123;        setTimeout(() &#x3D;&gt; &#123;            console.log(&#39;node&#39;, name);            resolve()        &#125;, 1000)    &#125;)&#125;)&#x2F;&#x2F; hook.callAsync(&#39;jw&#39;, function () &#123;&#x2F;&#x2F;     console.log(&#39;end&#39;);&#x2F;&#x2F; &#125;)hook.promise(&#39;jw&#39;).then(function () &#123;    console.log(&#39;end&#39;);&#125;)\n\nå¼‚æ­¥ä¸²è¡Œ â€”â€” AsyncSeriesWaterfallHookä¸Šä¸€ä¸ªç›‘å¬å‡½æ•°çš„ä¸­çš„callback(err, data)çš„ç¬¬äºŒä¸ªå‚æ•°,å¯ä»¥ä½œä¸ºä¸‹ä¸€ä¸ªç›‘å¬å‡½æ•°çš„å‚æ•°\n7.use.js\n1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465let &#123;AsyncSeriesWaterfallHook&#125; &#x3D; require(&#39;tapable&#39;)   &#x2F;&#x2F; è§£æ„åŒæ­¥å‹¾å­class Lesson &#123;    constructor() &#123;        this.index &#x3D; 0        this.hooks &#x3D; &#123;            &#x2F;&#x2F; è®¢é˜…å‹¾å­            arch: new AsyncSeriesWaterfallHook([&#39;name&#39;]),        &#125;    &#125;    start() &#123;        &#x2F;&#x2F; å‘å¸ƒ        this.hooks.arch.callAsync(&#39;may&#39;, function () &#123;            console.log(&#39;end&#39;);        &#125;)        &#x2F;&#x2F; å¦ä¸€ç§å‘å¸ƒ        &#x2F;&#x2F; this.hooks.arch.promise(&#39;may&#39;).then(function () &#123;        &#x2F;&#x2F;         console.log(&#39;end&#39;);        &#x2F;&#x2F;     &#125;        &#x2F;&#x2F; )    &#125;    tap() &#123;   &#x2F;&#x2F;  æ³¨å†Œç›‘å¬å‡½æ•°,è®¢é˜…        this.hooks.arch.tapAsync(&#39;node&#39;,  (name, callback) &#x3D;&gt; &#123;            setTimeout(() &#x3D;&gt; &#123;                console.log(&#39;node&#39;, name)                &#x2F;&#x2F; callback(null, &#39;result&#39;)                callback(&#39;error&#39;, &#39;result&#39;)   &#x2F;&#x2F; å¦‚æœæ”¾error, ä¼šè·³è¿‡ç›´æ¥åé¢çš„å‹¾å­ï¼Œç›´æ¥èµ°åˆ°æœ€ç»ˆçš„            &#125;, 1000)        &#125;)        this.hooks.arch.tapAsync(&#39;react&#39;,  (name, callback) &#x3D;&gt; &#123;            setTimeout(() &#x3D;&gt; &#123;                console.log(&#39;react&#39;, name)                callback()            &#125;, 1000)        &#125;)        &#x2F;&#x2F; å¦ä¸€ç§è®¢é˜…        &#x2F;&#x2F; this.hooks.arch.tapPromise(&#39;node&#39;, (name) &#x3D;&gt; &#123;        &#x2F;&#x2F;     return new Promise((resolve, reject) &#x3D;&gt; &#123;        &#x2F;&#x2F;         setTimeout(() &#x3D;&gt; &#123;        &#x2F;&#x2F;             console.log(&#39;node&#39;, name)        &#x2F;&#x2F;             resolve()        &#x2F;&#x2F;         &#125;, 1000)        &#x2F;&#x2F;     &#125;)        &#x2F;&#x2F; &#125;)        &#x2F;&#x2F; this.hooks.arch.tapPromise(&#39;react&#39;, (name) &#x3D;&gt; &#123;        &#x2F;&#x2F;     return new Promise((resolve, reject) &#x3D;&gt; &#123;        &#x2F;&#x2F;         setTimeout(() &#x3D;&gt; &#123;        &#x2F;&#x2F;             console.log(&#39;react&#39;, name)        &#x2F;&#x2F;             resolve()        &#x2F;&#x2F;         &#125;, 1000)        &#x2F;&#x2F;     &#125;)        &#x2F;&#x2F; &#125;)    &#125;&#125;let l &#x3D; new Lesson()l.tap();  &#x2F;&#x2F;æ³¨å†Œä¸¤ä¸ªå‡½æ•°l.start(); &#x2F;&#x2F; å¯åŠ¨å‹¾å­\n\n7.theory.js\n1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192class AsyncSeriesWaterfallHook &#123;  &#x2F;&#x2F;    constructor(args) &#123;  &#x2F;&#x2F; args &#x3D;&gt; [&#39;name&#39;]        this.tasks &#x3D; []    &#125;    tapAsync(name, task) &#123;        this.tasks.push(task)    &#125;    tapPromise(name, task) &#123;        this.tasks.push(task)    &#125;    callAsync(...args) &#123;        let finalCallback &#x3D; args.pop()        let index &#x3D; 0;        let next &#x3D; (err, data) &#x3D;&gt; &#123;            let task &#x3D; this.tasks[index]            if(!task) return finalCallback();            if (index &#x3D;&#x3D;&#x3D; 0) &#123;                &#x2F;&#x2F; æ‰§è¡Œçš„ç¬¬ä¸€ä¸ª                task(...args, next)            &#125; else &#123;                task(data, next)            &#125;            index ++        &#125;        next();    &#125;    promise(...args) &#123;        &#x2F;&#x2F; å°†promiseä¸²è”èµ·æ¥        let [first, ...other] &#x3D; this.tasks        return other.reduce((p, n) &#x3D;&gt; &#123;             return p.then((data) &#x3D;&gt; n(data))        &#125;, first(...args))    &#125;&#125;let hook &#x3D; new AsyncSeriesWaterfallHook([&#39;name&#39;])&#x2F;&#x2F; hook.tapAsync(&#39;react&#39;, function (name, callback) &#123;&#x2F;&#x2F;     setTimeout(() &#x3D;&gt; &#123;&#x2F;&#x2F;         console.log(&#39;react&#39;, name);&#x2F;&#x2F;         callback(null, &#39;ç»“æœ1&#39;)&#x2F;&#x2F;     &#125;, 1000)&#x2F;&#x2F; &#125;)&#x2F;&#x2F;&#x2F;&#x2F; hook.tapAsync(&#39;node&#39;, function (name, callback) &#123;&#x2F;&#x2F;     setTimeout(() &#x3D;&gt; &#123;&#x2F;&#x2F;         console.log(&#39;node&#39;, name);&#x2F;&#x2F;         callback(null, &#39;ç»“æœ2&#39;)&#x2F;&#x2F;     &#125;, 1000)&#x2F;&#x2F; &#125;)&#x2F;&#x2F;&#x2F;&#x2F; hook.tapAsync(&#39;webpack&#39;, function (name, callback) &#123;&#x2F;&#x2F;     setTimeout(() &#x3D;&gt; &#123;&#x2F;&#x2F;         console.log(&#39;webpack&#39;, name);&#x2F;&#x2F;         callback()&#x2F;&#x2F;     &#125;, 1000)&#x2F;&#x2F; &#125;)&#x2F;&#x2F;hook.tapPromise(&#39;react&#39;, function (name, callback) &#123;    return new Promise((resolve, reject) &#x3D;&gt; &#123;        setTimeout(() &#x3D;&gt; &#123;            console.log(&#39;react&#39;, name);            resolve(&#39;result&#39;)        &#125;, 1000)    &#125;)&#125;)hook.tapPromise(&#39;node&#39;, function (name, callback) &#123;    return new Promise((resolve, reject) &#x3D;&gt; &#123;        setTimeout(() &#x3D;&gt; &#123;            console.log(&#39;node&#39;, name);            resolve()        &#125;, 1000)    &#125;)&#125;)&#x2F;&#x2F;&#x2F;&#x2F;&#x2F;&#x2F; hook.callAsync(&#39;jw&#39;, function () &#123;&#x2F;&#x2F;     console.log(&#39;end&#39;);&#x2F;&#x2F; &#125;)hook.promise(&#39;jw&#39;).then(function () &#123;    console.log(&#39;end&#39;);&#125;)\n\n\næ‰‹å†™webpackå¯¹åº”çš„may-packé¡¹ç›®\nyarn add webpack webpack-cli -D\nwebpack.config.js\n12345678910let path &#x3D; require(&#39;path&#39;)module.exports &#x3D; &#123;    mode: &#39;development&#39;,    entry: &#39;.&#x2F;src&#x2F;index.js&#39;,    output: &#123;        filename: &#39;bundle.js&#39;,        path: path.resolve(__dirname, &#39;dist&#39;)    &#125;&#125;\n\nnpx webpack\nç”Ÿæˆæ–‡ä»¶bundle.js\n12345678910111213141516171819202122232425262728293031323334353637383940(function (modules) &#123;    var installedModules &#x3D; &#123;&#125;;    function __webpack_require__(moduleId) &#123;        if (installedModules[moduleId]) &#123;            return installedModules[moduleId].exports;        &#125;        var module &#x3D; installedModules[moduleId] &#x3D; &#123;            i: moduleId,            l: false,            exports: &#123;&#125;        &#125;;        modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);        module.l &#x3D; true;        return module.exports;    &#125;    &#x2F;&#x2F; Load entry module and return exports    return __webpack_require__(__webpack_require__.s &#x3D; &quot;.&#x2F;src&#x2F;index.js&quot;);&#125;)(&#123;    &quot;.&#x2F;src&#x2F;a.js&quot;:        (function (module, exports, __webpack_require__) &#123;            eval(&quot;let b &#x3D; __webpack_require__(&#x2F;*! .&#x2F;base&#x2F;b *&#x2F; \\&quot;.&#x2F;src&#x2F;base&#x2F;b.js\\&quot;)\\n\\nmodule.exports &#x3D; &#39;a&#39;+ b\\n\\n\\n\\n&#x2F;&#x2F;# sourceURL&#x3D;webpack:&#x2F;&#x2F;&#x2F;.&#x2F;src&#x2F;a.js?&quot;);        &#125;),    &quot;.&#x2F;src&#x2F;base&#x2F;b.js&quot;:        (function (module, exports) &#123;            eval(&quot;module.exports &#x3D; &#39;b&#39;\\n\\n\\n&#x2F;&#x2F;# sourceURL&#x3D;webpack:&#x2F;&#x2F;&#x2F;.&#x2F;src&#x2F;base&#x2F;b.js?&quot;);        &#125;),    &quot;.&#x2F;src&#x2F;index.js&quot;:        (function (module, exports, __webpack_require__) &#123;            eval(&quot; let str &#x3D; __webpack_require__(&#x2F;*! .&#x2F;a.js *&#x2F; \\&quot;.&#x2F;src&#x2F;a.js\\&quot;)\\n\\n console.log(str);\\n\\n\\n&#x2F;&#x2F;# sourceURL&#x3D;webpack:&#x2F;&#x2F;&#x2F;.&#x2F;src&#x2F;index.js?&quot;);        &#125;)&#125;);\n\næ–°å»ºé¡¹ç›®ç”¨äºè‡ªå·±çš„webpack,è¿™é‡Œå«may-pack\nyarn init\nå¦‚æœåœ¨nodeé‡Œæƒ³æ‰§è¡Œå‘½ä»¤ï¼Œåˆ›å»ºbinæ–‡ä»¶,å†åˆ›å»ºmay-pack.js\né…ç½®package.json\n123456789&#123;  &quot;name&quot;: &quot;may-pack&quot;,  &quot;version&quot;: &quot;1.0.0&quot;,  &quot;main&quot;: &quot;index.js&quot;,  &quot;license&quot;: &quot;MIT&quot;,  &quot;bin&quot;: &#123;    &quot;may-pack&quot;: &quot;.&#x2F;bin&#x2F;may-pack.js&quot;  &#125;&#125;\n\nmay-pack.js\n12345#!  &#x2F;usr&#x2F;bin&#x2F;env node &#x2F;&#x2F; nodeç¯å¢ƒconsole.log(&#39;start&#39;);\nè¿è¡Œnpm linkå°†npm æ¨¡å—é“¾æ¥åˆ°å¯¹åº”çš„è¿è¡Œé¡¹ç›®ä¸­å»ï¼Œæ–¹ä¾¿åœ°å¯¹æ¨¡å—è¿›è¡Œè°ƒè¯•å’Œæµ‹è¯•\nåœ¨æƒ³è¿è¡Œmay-packçš„é¡¹ç›®ä¸­è¿è¡Œï¼Œnpm link may-pack å¾—åˆ° start\nwebpackåˆ†æåŠå¤„ç†may-pack.js\n123456789101112131415161718#!  &#x2F;usr&#x2F;bin&#x2F;env node&#x2F;&#x2F; nodeç¯å¢ƒconsole.log(&#39;start&#39;);let path &#x3D; require(&#39;path&#39;)&#x2F;&#x2F; æ‹¿åˆ°é…ç½®æ–‡ä»¶webpack.config.jslet config &#x3D; require(path.resolve(&#39;webpack.config.js&#39;));let Compiler &#x3D; require(&#39;..&#x2F;lib&#x2F;Compiler.js&#39;);let compiler &#x3D; new Compiler(config);&#x2F;&#x2F; æ ‡è¯†è¿è¡Œç¼–è¯‘compiler.run()\n\nåˆ›å»ºlibæ–‡ä»¶Compiler.js\n1234567891011121314151617181920212223242526272829303132333435let path &#x3D; require(&#39;path&#39;)let fs &#x3D; require(&#39;fs&#39;)class Compiler &#123;    constructor(config) &#123;        &#x2F;&#x2F; entry  output        this.config &#x3D; config        &#x2F;&#x2F; éœ€è¦ä¿å­˜å…¥å£æ–‡ä»¶çš„è·¯å¾„        this.entryId &#x3D; &#39;&#39;;   &#x2F;&#x2F; &#39;.&#x2F;src&#x2F;index.js&#39;        &#x2F;&#x2F; éœ€è¦ä¿å­˜æ‰€æœ‰çš„æ¨¡å—ä¾èµ–        this.modules &#x3D; &#123;&#125;;        this.entry &#x3D; config.entry  &#x2F;&#x2F; å…¥å£æ–‡ä»¶        &#x2F;&#x2F; å·¥ä½œç›®å½•        this.root &#x3D; process.cwd(); &#x2F;&#x2F; å½“å‰è¿è¡Œnpxçš„è·¯å¾„    &#125;        &#x2F;&#x2F; æ„å»ºæ¨¡å—    buildModule(modulePath, isEntry) &#123;           &#125;    &#x2F;&#x2F; å‘å°„æ–‡ä»¶    emitFile() &#123;        &#x2F;&#x2F; ç”¨æ•°æ® æ¸²æŸ“æƒ³è¦çš„    &#125;    run() &#123;        &#x2F;&#x2F; æ‰§è¡Œ åˆ›å»ºæ¨¡å—çš„ä¾èµ–å…³ç³»        this.buildModule(path.resolve(this.root, this.entry), true)  &#x2F;&#x2F; path.resolve(this.root, this.entry) å¾—åˆ°å…¥å£æ–‡ä»¶çš„ç»å¯¹è·¯å¾„        &#x2F;&#x2F; å‘å°„æ‰“åŒ…åçš„æ–‡ä»¶        this.emitFile()    &#125;&#125;module.exports &#x3D; Compiler\nä¸»è¦ä¸¤ä¸ªä»»åŠ¡\næ‹¿åˆ°å…¥å£Id\nè§£ææ¨¡å—ï¼Œä¹Ÿå°±æ˜¯å®ç°buildModuleæ–¹æ³•\nåˆ›å»ºä¾èµ–å…³ç³»may-packä¸­Compiler.js\n123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566let path &#x3D; require(&#39;path&#39;)let fs &#x3D; require(&#39;fs&#39;)&#x2F;&#x2F; babylon  ä¸»è¦æŠŠæºç è½¬æˆast Babylon æ˜¯ Babel ä¸­ä½¿ç”¨çš„ JavaScript è§£æå™¨ã€‚&#x2F;&#x2F; @babel&#x2F;traverse å¯¹astè§£æéå†è¯­æ³•æ ‘ è´Ÿè´£æ›¿æ¢ï¼Œåˆ é™¤å’Œæ·»åŠ èŠ‚ç‚¹&#x2F;&#x2F; @babel&#x2F;types ç”¨äºASTèŠ‚ç‚¹çš„Lodash-esqueå®ç”¨ç¨‹åºåº“&#x2F;&#x2F; @babel&#x2F;generator ç»“æœç”Ÿæˆlet babylon &#x3D; require(&#39;babylon&#39;)let traverse &#x3D; require(&#39;@babel&#x2F;traverse&#39;).default;let type &#x3D; require(&#39;@babel&#x2F;types&#39;);let generator &#x3D; require(&#39;@babel&#x2F;generator&#39;).defaultclass Compiler &#123;    constructor(config) &#123;        &#x2F;&#x2F; entry  output        this.config &#x3D; config        &#x2F;&#x2F; éœ€è¦ä¿å­˜å…¥å£æ–‡ä»¶çš„è·¯å¾„        this.entryId &#x3D; &#39;&#39;;   &#x2F;&#x2F; &#39;.&#x2F;src&#x2F;index.js&#39;        &#x2F;&#x2F; éœ€è¦ä¿å­˜æ‰€æœ‰çš„æ¨¡å—ä¾èµ–        this.modules &#x3D; &#123;&#125;;        this.entry &#x3D; config.entry  &#x2F;&#x2F; å…¥å£æ–‡ä»¶        &#x2F;&#x2F; å·¥ä½œç›®å½•        this.root &#x3D; process.cwd(); &#x2F;&#x2F; å½“å‰è¿è¡Œnpxçš„è·¯å¾„    &#125;    &#x2F;&#x2F; æ‹¿åˆ°æ¨¡å—å†…å®¹    getSource (modulePath) &#123;        let content &#x3D; fs.readFileSync(modulePath, &#39;utf8&#39;)        return content    &#125;    parse (source, parentPath) &#123;        console.log(source, parentPath)    &#125;    &#x2F;&#x2F; æ„å»ºæ¨¡å—    buildModule(modulePath, isEntry) &#123;        &#x2F;&#x2F; æ‹¿åˆ°æ¨¡å—å†…å®¹        let source &#x3D; this.getSource(modulePath)  &#x2F;&#x2F; å¾—åˆ°å…¥å£æ–‡ä»¶çš„å†…å®¹        &#x2F;&#x2F; æ¨¡å—id modulePath(éœ€è¦ç›¸å¯¹è·¯å¾„) &#x3D; modulePath(æ¨¡å—è·¯å¾„) - this.root(é¡¹ç›®å·¥ä½œè·¯å¾„)   src&#x2F;index.js        let moduleName &#x3D; &#39;.&#x2F;&#39; + path.relative(this.root, modulePath)        console.log(source, moduleName);  &#x2F;&#x2F; æ‹¿åˆ°ä»£ç  å’Œç›¸å¯¹è·¯å¾„ .&#x2F;src&#x2F;index.js        if (isEntry) &#123;            this.entryId &#x3D; moduleName        &#125;        let &#123;sourceCode, dependencies&#125; &#x3D; this.parse(source, path.dirname(moduleName))   &#x2F;&#x2F; .&#x2F;src        &#x2F;&#x2F; æŠŠç›¸å¯¹è·¯å¾„å’Œæ¨¡å—ä¸­çš„å†…å®¹å¯¹åº”èµ·æ¥        this.modules[moduleName] &#x3D; sourceCode    &#125;    &#x2F;&#x2F; å‘å°„æ–‡ä»¶    emitFile() &#123;        &#x2F;&#x2F; ç”¨æ•°æ® æ¸²æŸ“æƒ³è¦çš„    &#125;    run() &#123;        &#x2F;&#x2F; æ‰§è¡Œ åˆ›å»ºæ¨¡å—çš„ä¾èµ–å…³ç³»        this.buildModule(path.resolve(this.root, this.entry), true)  &#x2F;&#x2F; path.resolve(this.root, this.entry) å¾—åˆ°å…¥å£æ–‡ä»¶çš„ç»å¯¹è·¯å¾„        console.log(this.modules, this.entryId);        &#x2F;&#x2F; å‘å°„æ‰“åŒ…åçš„æ–‡ä»¶        this.emitFile()    &#125;&#125;module.exports &#x3D; Compiler\n\nasté€’å½’è§£æparseæ–¹æ³•ä¸»è¦é è§£æè¯­æ³•æ ‘æ¥è¿›è¡Œè½¬ä¹‰babylon  ä¸»è¦æŠŠæºç è½¬æˆast Babylon æ˜¯ Babel ä¸­ä½¿ç”¨çš„ JavaScript è§£æå™¨ã€‚@babel/traverse å¯¹astè§£æéå†è¯­æ³•æ ‘ è´Ÿè´£æ›¿æ¢ï¼Œåˆ é™¤å’Œæ·»åŠ èŠ‚ç‚¹@babel/types ç”¨äºASTèŠ‚ç‚¹çš„Lodash-esqueå®ç”¨ç¨‹åºåº“@babel/generator ç»“æœç”Ÿæˆ\nyarn add babylon @babel/traverse @babel/types @babel/generator\nmay-packä¸­Compiler.js\n12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788let path &#x3D; require(&#39;path&#39;)let fs &#x3D; require(&#39;fs&#39;)&#x2F;&#x2F; babylon  ä¸»è¦æŠŠæºç è½¬æˆast Babylon æ˜¯ Babel ä¸­ä½¿ç”¨çš„ JavaScript è§£æå™¨ã€‚&#x2F;&#x2F; @babel&#x2F;traverse å¯¹astè§£æéå†è¯­æ³•æ ‘ è´Ÿè´£æ›¿æ¢ï¼Œåˆ é™¤å’Œæ·»åŠ èŠ‚ç‚¹&#x2F;&#x2F; @babel&#x2F;types ç”¨äºASTèŠ‚ç‚¹çš„Lodash-esqueå®ç”¨ç¨‹åºåº“&#x2F;&#x2F; @babel&#x2F;generator ç»“æœç”Ÿæˆlet babylon &#x3D; require(&#39;babylon&#39;)let traverse &#x3D; require(&#39;@babel&#x2F;traverse&#39;).default;let type &#x3D; require(&#39;@babel&#x2F;types&#39;);let generator &#x3D; require(&#39;@babel&#x2F;generator&#39;).defaultclass Compiler &#123;    constructor(config) &#123;        &#x2F;&#x2F; entry  output        this.config &#x3D; config        &#x2F;&#x2F; éœ€è¦ä¿å­˜å…¥å£æ–‡ä»¶çš„è·¯å¾„        this.entryId &#x3D; &#39;&#39;;   &#x2F;&#x2F; &#39;.&#x2F;src&#x2F;index.js&#39;        &#x2F;&#x2F; éœ€è¦ä¿å­˜æ‰€æœ‰çš„æ¨¡å—ä¾èµ–        this.modules &#x3D; &#123;&#125;;        this.entry &#x3D; config.entry  &#x2F;&#x2F; å…¥å£æ–‡ä»¶        &#x2F;&#x2F; å·¥ä½œç›®å½•        this.root &#x3D; process.cwd(); &#x2F;&#x2F; å½“å‰è¿è¡Œnpxçš„è·¯å¾„    &#125;    &#x2F;&#x2F; æ‹¿åˆ°æ¨¡å—å†…å®¹    getSource (modulePath) &#123;        let content &#x3D; fs.readFileSync(modulePath, &#39;utf8&#39;)        return content    &#125;    parse (source, parentPath) &#123;        &#x2F;&#x2F; ASTè§£æè¯­æ³•æ ‘        let ast &#x3D; babylon.parse(source)        let dependencies &#x3D; []; &#x2F;&#x2F; ä¾èµ–çš„æ•°ç»„        &#x2F;&#x2F; https:&#x2F;&#x2F;astexplorer.net&#x2F;        traverse(ast, &#123;            &#x2F;&#x2F; è°ƒç”¨è¡¨è¾¾å¼            CallExpression(p) &#123;                let node &#x3D; p.node; &#x2F;&#x2F;å¯¹åº”çš„èŠ‚ç‚¹                if(node.callee.name &#x3D;&#x3D;&#x3D; &#39;require&#39;) &#123;                   node.callee.name &#x3D; &#39;__webpack_require__&#39;                    let moduledName &#x3D; node.arguments[0].value   &#x2F;&#x2F; å–åˆ°æ¨¡å—çš„å¼•ç”¨åå­—                    moduledName &#x3D; moduledName + (path.extname(moduledName) ? &#39;&#39;: &#39;.js&#39;);  &#x2F;&#x2F; .&#x2F;a.js                    moduledName &#x3D; &#39;.&#x2F;&#39; + path.join(parentPath, moduledName)  &#x2F;&#x2F; &#39;.&#x2F;src&#x2F;a.js&#39;                    dependencies.push(moduledName)                    node.arguments &#x3D; [type.stringLiteral(moduledName)] &#x2F;&#x2F; æ”¹æ‰æºç                 &#125;            &#125;        &#125;)        let sourceCode &#x3D; generator(ast).code        return &#123; sourceCode, dependencies &#125;    &#125;    &#x2F;&#x2F; æ„å»ºæ¨¡å—    buildModule(modulePath, isEntry) &#123;        &#x2F;&#x2F; æ‹¿åˆ°æ¨¡å—å†…å®¹        let source &#x3D; this.getSource(modulePath)  &#x2F;&#x2F; å¾—åˆ°å…¥å£æ–‡ä»¶çš„å†…å®¹        &#x2F;&#x2F; æ¨¡å—id modulePath(éœ€è¦ç›¸å¯¹è·¯å¾„) &#x3D; modulePath(æ¨¡å—è·¯å¾„) - this.root(é¡¹ç›®å·¥ä½œè·¯å¾„)   src&#x2F;index.js        let moduleName &#x3D; &#39;.&#x2F;&#39; + path.relative(this.root, modulePath)        &#x2F;&#x2F; console.log(source, moduleName);  &#x2F;&#x2F; æ‹¿åˆ°ä»£ç  å’Œç›¸å¯¹è·¯å¾„ .&#x2F;src&#x2F;index.js        if (isEntry) &#123;            this.entryId &#x3D; moduleName        &#125;        &#x2F;&#x2F; è§£ææŠŠsourceæºç è¿›è¡Œæ”¹é€ ï¼Œ è¿”å›ä¸€ä¸ªä¾èµ–åˆ—è¡¨        let &#123;sourceCode, dependencies&#125; &#x3D; this.parse(source, path.dirname(moduleName))   &#x2F;&#x2F; .&#x2F;src        &#x2F;&#x2F; æŠŠç›¸å¯¹è·¯å¾„å’Œæ¨¡å—ä¸­çš„å†…å®¹å¯¹åº”èµ·æ¥        this.modules[moduleName] &#x3D; sourceCode        dependencies.forEach(dep &#x3D;&gt; &#123;  &#x2F;&#x2F; é™„æ¨¡å—çš„åŠ è½½ é€’å½’åŠ è½½            this.buildModule(path.join(this.root, dep), false)        &#125;)    &#125;    &#x2F;&#x2F; å‘å°„æ–‡ä»¶    emitFile() &#123;        &#x2F;&#x2F; ç”¨æ•°æ® æ¸²æŸ“æƒ³è¦çš„    &#125;    run() &#123;        &#x2F;&#x2F; æ‰§è¡Œ åˆ›å»ºæ¨¡å—çš„ä¾èµ–å…³ç³»        this.buildModule(path.resolve(this.root, this.entry), true)  &#x2F;&#x2F; path.resolve(this.root, this.entry) å¾—åˆ°å…¥å£æ–‡ä»¶çš„ç»å¯¹è·¯å¾„        console.log(this.modules, this.entryId);        &#x2F;&#x2F; å‘å°„æ‰“åŒ…åçš„æ–‡ä»¶        this.emitFile()    &#125;&#125;module.exports &#x3D; Compiler\n\nç”Ÿæˆæ‰“åŒ…å·¥å…·ä½¿ç”¨ejsæ¨¡æ¿\nmay-packä¸­main.ejs\n1234567891011121314151617181920212223242526272829303132(function (modules) &#123;var installedModules &#x3D; &#123;&#125;;function __webpack_require__(moduleId) &#123;if (installedModules[moduleId]) &#123;return installedModules[moduleId].exports;&#125;var module &#x3D; installedModules[moduleId] &#x3D; &#123;i: moduleId,l: false,exports: &#123;&#125;&#125;;modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);module.l &#x3D; true;return module.exports;&#125;&#x2F;&#x2F; Load entry module and return exportsreturn __webpack_require__(__webpack_require__.s &#x3D; &quot;&lt;%-entryId %&gt;&quot;);&#125;)(&#123;&lt;% for(let key in modules)&#123; %&gt;    &quot;&lt;%- key %&gt;&quot;:    (function (module, exports,__webpack_require__) &#123;eval(&#96;&lt;%-modules[key] %&gt;&#96;);&#125;),&lt;% &#125; %&gt;&#125;);\n\nejså…¥é—¨\nyarn add ejs\nmay-packä¸­Compiler.js\n1let ejs &#x3D; require(&#39;ejs&#39;)\n\n123456789101112&#x2F;&#x2F; å‘å°„æ–‡ä»¶    emitFile() &#123;        &#x2F;&#x2F; ç”¨æ•°æ® æ¸²æŸ“æƒ³è¦çš„        &#x2F;&#x2F; è¾“å‡ºåˆ°é‚£ä¸ªç›®å½•ä¸‹        let main &#x3D; path.join(this.config.output.path, this.config.output.filename)        let templateStr &#x3D; this.getSource(path.join(__dirname, &#39;main.ejs&#39;))        let code &#x3D; ejs.render(templateStr, &#123; entryId: this.entryId, modules: this.modules&#125;)        this.assets &#x3D; &#123;&#125;        &#x2F;&#x2F; è·¯å¾„å¯¹åº”çš„ä»£ç         this.assets[main] &#x3D; code        fs.writeFileSync(main, this.assets[main])    &#125;\n\nåœ¨webpack-trainingé¡¹ç›®ä¸­è¿è¡Œnpx may-pack, å¾—åˆ°bundle.js,è¿è¡Œå¾—åˆ°ç»“æœ\nå¢åŠ loaderåˆ›å»ºloaderæ–‡ä»¶å¤¹ï¼Œåˆ›å»ºless-loader1.jså’Œstyle-loader1.js\nyarn add less\nlessä½¿ç”¨\nless-loader1.js\n12345678910111213&#x2F;&#x2F; å°†lessè½¬ä¸ºcsslet less &#x3D; require(&#39;less&#39;)function loader(source) &#123;    let css &#x3D; &#39;&#39;    less.render(source, function (err, output) &#123;        css &#x3D; output.css    &#125;)    css &#x3D; css.replace(&#x2F;\\n&#x2F;g, &#39;\\\\n&#39;);    return css&#125;module.exports &#x3D; loader\n\nstyle-loader1.js\n1234567891011121314&#x2F;&#x2F; å°†cssæ’å…¥åˆ°htmlå¤´éƒ¨function loader(source) &#123;    console.log(111);    let style &#x3D; &#96;    let style &#x3D; document.createElement(&#39;style&#39;)    style.innerHTML &#x3D; $&#123;JSON.stringify(source)&#125;    document.head.appendChild(style)   &#96;    return style&#125;module.exports &#x3D; loader&#x2F;&#x2F; JSON.stringify(source) å¯ä»¥å°†ä»£ç è½¬ä¸ºä¸€è¡Œ\n\nwebpack.config.js\n123456789101112131415161718192021let path &#x3D; require(&#39;path&#39;)module.exports &#x3D; &#123;    mode: &#39;development&#39;,    entry: &#39;.&#x2F;src&#x2F;index.js&#39;,    output: &#123;        filename: &#39;bundle.js&#39;,        path: path.resolve(__dirname, &#39;dist&#39;)    &#125;,    module: &#123;        rules: [            &#123;                test: &#x2F;\\.less$&#x2F;,                use: [                    path.resolve(__dirname, &#39;loader&#39;, &#39;style-loader1&#39;),                    path.resolve(__dirname, &#39;loader&#39;, &#39;less-loader1&#39;)                ]            &#125;        ]    &#125;&#125;\n\nåˆ›å»ºindex.less\n123body &#123;  background: red&#125;\n\nindex.js\n12345let str &#x3D; require(&#39;.&#x2F;a.js&#39;)require(&#39;.&#x2F;index.less&#39;)console.log(str);\n\nmay-packä¸­Compiler.js\n12345678910111213141516171819202122232425262728&#x2F;&#x2F; æ‹¿åˆ°æ¨¡å—å†…å®¹    getSource (modulePath) &#123;        &#x2F;&#x2F; åŒ¹é…å„ç§æ–‡ä»¶çš„è§„åˆ™        let rules&#x3D; this.config.module.rules;   &#x2F;&#x2F; webpack.config.js ä¸­rulesçš„æ•°ç»„        let content &#x3D; fs.readFileSync(modulePath, &#39;utf8&#39;)        for (let i &#x3D; 0; i &lt; rules.length; i++) &#123;            let rule &#x3D; rules[i]            let &#123;test, use&#125; &#x3D; rule            let len &#x3D; use.length - 1            if (test.test(modulePath)) &#123;                &#x2F;&#x2F; console.log(use[len]);                function normalLoader () &#123;                    &#x2F;&#x2F; console.log(use[len--]);                    let loader &#x3D; require(use[len--])                    content &#x3D; loader(content)                    &#x2F;&#x2F; é€’å½’è°ƒç”¨loader å®ç°è½¬åŒ–                    if (len &gt;&#x3D; 0) &#123;                        normalLoader()                    &#125;                &#125;                normalLoader()            &#125;        &#125;        return content    &#125;\n\nè¿è¡Œnpx may-pack\nå¢åŠ pluginsyarn add tapable\nmay-packä¸­Compiler.js\n1234567891011121314151617181920212223242526272829constructor(config) &#123;        &#x2F;&#x2F; entry  output        this.config &#x3D; config        &#x2F;&#x2F; éœ€è¦ä¿å­˜å…¥å£æ–‡ä»¶çš„è·¯å¾„        this.entryId &#x3D; &#39;&#39;;   &#x2F;&#x2F; &#39;.&#x2F;src&#x2F;index.js&#39;        &#x2F;&#x2F; éœ€è¦ä¿å­˜æ‰€æœ‰çš„æ¨¡å—ä¾èµ–        this.modules &#x3D; &#123;&#125;;        this.entry &#x3D; config.entry  &#x2F;&#x2F; å…¥å£æ–‡ä»¶        &#x2F;&#x2F; å·¥ä½œç›®å½•        this.root &#x3D; process.cwd(); &#x2F;&#x2F; å½“å‰è¿è¡Œnpxçš„è·¯å¾„        this.hooks &#x3D; &#123;            entryOption: new SyncHook(),  &#x2F;&#x2F; å…¥å£é€‰é¡¹            compile: new SyncHook(),      &#x2F;&#x2F; ç¼–è¯‘            afterCompile: new SyncHook(),  &#x2F;&#x2F; ç¼–è¯‘å®Œæˆ            afterPlugins: new SyncHook(),   &#x2F;&#x2F; ç¼–è¯‘å®Œæ’ä»¶            run: new SyncHook(),         &#x2F;&#x2F; è¿è¡Œ            emit: new SyncHook(),        &#x2F;&#x2F; å‘å°„            done: new SyncHook()         &#x2F;&#x2F; å®Œæˆ        &#125;        &#x2F;&#x2F; å¦‚æœä¼ é€’äº†pluginså‚æ•°        let plugins &#x3D; this.config.plugins        if (Array.isArray(plugins)) &#123;            plugins.forEach(plugin &#x3D;&gt; &#123;                plugin.apply(this); &#x2F;&#x2F; è¿™é‡Œåªæ˜¯appLyæ–¹æ³•ä¸æ˜¯æ”¹å˜thisæŒ‡å‘            &#125;)        &#125;        this.hooks.afterPlugins.call()    &#125;\n\nåœ¨webpack.config.jsä¸­å†™æ’ä»¶æ–¹æ³•\n12345678910111213141516171819202122232425262728293031323334353637383940414243class P &#123;    apply(compiler) &#123;   &#x2F;&#x2F; è¿™é‡Œåªæ˜¯appLyæ–¹æ³•ä¸æ˜¯æ”¹å˜thisæŒ‡å‘        &#x2F;&#x2F; ç»‘å®š        compiler.hooks.emit.tap(&#39;emit&#39;, function () &#123;            console.log(&#39;emit&#39;);        &#125;)    &#125;&#125;class P1 &#123;    apply(compiler) &#123;   &#x2F;&#x2F; è¿™é‡Œåªæ˜¯appLyæ–¹æ³•ä¸æ˜¯æ”¹å˜thisæŒ‡å‘        &#x2F;&#x2F; ç»‘å®š        compiler.hooks.afterPlugins.tap(&#39;emit&#39;, function () &#123;            console.log(&#39;afterPlugins&#39;);        &#125;)    &#125;&#125;module.exports &#x3D; &#123;    mode: &#39;development&#39;,    entry: &#39;.&#x2F;src&#x2F;index.js&#39;,    output: &#123;        filename: &#39;bundle.js&#39;,        path: path.resolve(__dirname, &#39;dist&#39;)    &#125;,    module: &#123;        rules: [            &#123;                test: &#x2F;\\.less$&#x2F;,                use: [                    path.resolve(__dirname, &#39;loader&#39;, &#39;style-loader&#39;),                    path.resolve(__dirname, &#39;loader&#39;, &#39;less-loader&#39;)                ]            &#125;        ]    &#125;,    plugins: [        new P(),        new P1()    ]&#125;\n\nç„¶ååœ¨å„ä¸ªåœ°æ–¹è°ƒç”¨\nmay-packä¸­may-pack.js\n12345.....&#x2F;&#x2F; è°ƒç”¨compiler.hooks.entryOption.call()&#x2F;&#x2F; æ ‡è¯†è¿è¡Œç¼–è¯‘compiler.run()\n\nmay-packä¸­Compiler.js\n12345678910111213run() &#123;        this.hooks.run.call()        this.hooks.compile.call()        &#x2F;&#x2F; æ‰§è¡Œ åˆ›å»ºæ¨¡å—çš„ä¾èµ–å…³ç³»        this.buildModule(path.resolve(this.root, this.entry), true)  &#x2F;&#x2F; path.resolve(this.root, this.entry) å¾—åˆ°å…¥å£æ–‡ä»¶çš„ç»å¯¹è·¯å¾„        &#x2F;&#x2F; console.log(this.modules, this.entryId);        this.hooks.afterCompile.call()        &#x2F;&#x2F; å‘å°„æ‰“åŒ…åçš„æ–‡ä»¶        this.emitFile()        this.hooks.emit.call()        this.hooks.done.call()    &#125;\n\nè¿è¡Œnpx may-pack\nloaderæ‰‹å†™loader\nwebapck.config.js\n123456789101112131415161718let path &#x3D; require(&#39;path&#39;)module.exports &#x3D; &#123;    mode: &#39;development&#39;,    entry: &#39;.&#x2F;src&#x2F;index&#39;,    output: &#123;        filename: &#39;build.js&#39;,        path: path.resolve(__dirname, &#39;dist&#39;)    &#125;,    module: &#123;        rules: [            &#123;                test: &#x2F;\\.js&#x2F;,                use: &#39;loader1&#39; &#x2F;&#x2F; å¦‚ä½•æ‰¾åˆ°è¿™ä¸ªloader1            &#125;        ]    &#125;,&#125;\n\nåˆ›å»ºloaderæ–‡ä»¶loader1.js\n123456console.log(22);function loader(source) &#123;  &#x2F;&#x2F; loaderçš„å‚æ•°å°±æ˜¯æºä»£ç     return source&#125;module.exports &#x3D; loader\n\n\nwebpack.config.js\n12345678910111213141516171819202122232425262728293031323334let path &#x3D; require(&#39;path&#39;)module.exports &#x3D; &#123;    mode: &#39;development&#39;,    entry: &#39;.&#x2F;src&#x2F;index.js&#39;,    output: &#123;        filename: &#39;build.js&#39;,        path: path.resolve(__dirname, &#39;dist&#39;)    &#125;,    resolveLoader: &#123;      &#x2F;&#x2F; åˆ«å      &#x2F;&#x2F; alias: &#123;      &#x2F;&#x2F;     loader1: path.resolve(__dirname, &#39;loader&#39;, &#39;loader1&#39;)      &#x2F;&#x2F; &#125;        modules: [&#39;node_modules&#39;, path.resolve(__dirname, &#39;loader&#39;)]  &#x2F;&#x2F; å…ˆæ‰¾node_modules, å†å»loaderä¸­å»æ‰¾    &#125;,    module: &#123;        rules: [            &#123;                test: &#x2F;\\.js$&#x2F;,                &#x2F;&#x2F; use: [path.resolve(__dirname, &#39;loader&#39;, &#39;loader1&#39;)]                use: &#39;loader1&#39; &#x2F;&#x2F; å¦‚ä½•æ‰¾åˆ°è¿™ä¸ªloader1            &#125;,            &#x2F;&#x2F; &#123;            &#x2F;&#x2F;     test: &#x2F;\\.less$&#x2F;,            &#x2F;&#x2F;     use: [            &#x2F;&#x2F;         path.resolve(__dirname, &#39;loader&#39;, &#39;style-loader&#39;),            &#x2F;&#x2F;         path.resolve(__dirname, &#39;loader&#39;, &#39;less-loader&#39;)            &#x2F;&#x2F;     ]            &#x2F;&#x2F; &#125;        ]    &#125;,&#125;\nå¦‚ä½•æ‰¾åˆ°è¿™ä¸ªloader1\né€šè¿‡é…åˆ«åalias\né€šè¿‡modules\nnpx webpack\né…ç½®å¤šä¸ªloaderæ•°ç»„æ–¹å¼\nå…ˆåˆ†åˆ«åœ¨loaderæ–‡ä»¶ä¸‹åˆ›å»ºï¼Œloader2.jså’Œloader3.js\n123456function loader(source) &#123;  &#x2F;&#x2F; loaderçš„å‚æ•°å°±æ˜¯æºä»£ç     console.log(&#39;loader2&#39;);  &#x2F;&#x2F; loader3.js ç±»ä¼¼    return source&#125;module.exports &#x3D; loader\n\nwebpack.config.js\n123456rules: [    &#123;        test: &#x2F;\\.js$&#x2F;,        use: [&#39;loader3&#39;, &#39;loader2&#39;, &#39;loader1&#39;]    &#125;,]\n\nè¿è¡Œnpx webpack,åˆ†åˆ«æ‰“å‡º\n123loader1loader2loader3\n\nå¯¹è±¡æ–¹å¼\n1234567891011121314rules: [    &#123;        test: &#x2F;\\.js$&#x2F;,        use: [&#39;loader3&#39;]    &#125;,    &#123;        test: &#x2F;\\.js$&#x2F;,        use: [&#39;loader2&#39;]    &#125;,    &#123;        test: &#x2F;\\.js$&#x2F;,        use: [&#39;loader1&#39;]    &#125;]\n\nè¿è¡Œnpx webpack,åˆ†åˆ«æ‰“å‡º\n123loader1loader2loader3\n\n\n\nloaderçš„é¡ºåº: ä»å³åˆ°å·¦, ä»ä¸‹åˆ°ä¸Š\n\nä¹Ÿå¯ä»¥é€šè¿‡é…ç½®ä¸åŒçš„å‚æ•°æ”¹å˜loaderçš„æ‰§è¡Œé¡ºåºï¼Œpre å‰é¢çš„ï¼Œ poståœ¨åé¢çš„ï¼Œ normalæ­£å¸¸\n1234567891011121314&#123;    test: &#x2F;\\.js$&#x2F;,    use: [&#39;loader1&#39;],    enforce: &quot;pre&quot;&#125;,&#123;    test: &#x2F;\\.js$&#x2F;,    use: [&#39;loader2&#39;]&#125;,&#123;    test: &#x2F;\\.js$&#x2F;,    use: [&#39;loader3&#39;],    enforce: &quot;post&quot;&#125;,\n\nloader å¸¦å‚æ•°æ‰§è¡Œçš„é¡ºåº: pre  -&gt; normal -&gt; inline -&gt; post\ninlineä¸ºè¡Œå†…loader\nåœ¨loaderæ–‡ä»¶ä¸­æ–°å»ºinlin-loader\n123456function loader(source) &#123;  &#x2F;&#x2F; loaderçš„å‚æ•°å°±æ˜¯æºä»£ç     console.log(&#39;inline&#39;);    return source&#125;module.exports &#x3D; loader\n\nsrc/a.js\n1module.exports &#x3D; &#39;may&#39;\n\nsrc/index\n12console.log(&#39;hello&#39;)let srt &#x3D; require(&#39;-!inline-loader!.&#x2F;a&#39;)\n\n-!ç¦ç”¨pre-loaderå’Œ normal-loaderæ¥å¤„ç†äº†\n12345loader1loader2loader3inlineloader3\n\n\n\n!ç¦ç”¨normal-loader\n123456loader1loader2loader3loader1inlineloader3\n\n\n\n!! ç¦ç”¨pre-loaderã€normal-loaderã€post-loader,åªèƒ½è¡Œå†…å¤„ç†\n1234loader1loader2loader3inline\n\nloader é»˜è®¤ç”±ä¸¤éƒ¨åˆ†ç»„æˆpitchå’Œnormal\nuser: [loader3, loader2, loader1]\næ— è¿”å›å€¼: å…ˆæ‰§è¡Œpitchæ–¹æ³•,ä»å·¦åˆ°å³ï¼Œå†è·å–èµ„æº\n12345678    pitch loader - æ— è¿”å›å€¼    pitch   loader3 â†’ loader2 â†’ loader1                                      â†˜                                      èµ„æº                                    â†™normal   loader3 â† loader2 â† loader1\n\næœ‰è¿”å›å€¼: ç›´æ¥è·³è¿‡åç»­æ‰€æœ‰çš„loaderåŒ…æ‹¬è‡ªå·±çš„,è·³åˆ°ä¹‹å‰çš„loader, å¯ç”¨äºé˜»æ–­\nloader\n123456789user: [loader3, loader2, loader1]    pitch loader - æœ‰è¿”å›å€¼    pitch   loader3 â†’ loader2  loader1                       â†™                              æœ‰è¿”å›å€¼               èµ„æº               â†™                      normal  loader3  loader2  loader1\n\nloadeer2.js\n12345678910function loader(source) &#123;  &#x2F;&#x2F; loaderçš„å‚æ•°å°±æ˜¯æºä»£ç     console.log(&#39;loader2&#39;);    return source&#125;loader.pitch &#x3D; function () &#123;    return &#39;111&#39;&#125;module.exports &#x3D; loader\n\nç»“æœ\n1loader3\n\nbabel-loaderå®ç°yarn add @babel/core @babel/preset-env\nwebpack.config.js\n1234567891011&#123;    test: &#39;\\.js$&#x2F;&#39;,    use: &#123;        loader: &#39;babel-loader2&#39;,        options: &#123;            presets: [                &#39;@babel&#x2F;preset-env&#39;            ]        &#125;    &#125;&#125;\n\nåœ¨loaderæ–‡ä»¶åˆ›å»ºbabel-loader2.js(å¦‚æœä½ å·²ç»è£…è¿‡babel-loader)\næ‹¿åˆ°babelçš„å‚æ•°\nyarn add loader-utils\n1234567891011121314151617181920212223&#x2F;&#x2F; éœ€è¦åœ¨webpack.config.jsæ‹¿åˆ°babelçš„é¢„è®¾, é€šè¿‡é¢„è®¾è½¬æ¢æ¨¡å—, å…ˆå¼•å…¥babellet babel &#x3D; require(&#39;@babel&#x2F;core&#39;)&#x2F;&#x2F; æ‹¿åˆ°babelçš„å‚æ•° éœ€è¦å·¥å…· loaderUtilslet loaderUtils &#x3D;require(&#39;loader-utils&#39;)function loader(source) &#123;  &#x2F;&#x2F; loaderçš„å‚æ•°å°±æ˜¯æºä»£ç   è¿™é‡Œçš„thiså°±æ˜¯loaderçš„ä¸Šä¸‹æ–‡    let options &#x3D; loaderUtils.getOptions(this)    console.log(this.resourcePath, 444);   &#x2F;&#x2F; [.&#x2F;src&#x2F;index.js]    let callback &#x3D; this.async(); &#x2F;&#x2F; babelçš„è½¬æ¢æ˜¯å¼‚æ­¥çš„,åŒæ­¥çš„è¿”å›æ˜¯ä¸è¡Œçš„ï¼Œ ä¸èƒ½ç”¨return  åŒæ­¥å°±æ˜¯ç›´æ¥æ‰ç”¨ å¼‚æ­¥ä¼šåœ¨asyncä¸­    babel.transform(source, &#123;        ...options,        sourceMap: true,         &#x2F;&#x2F; æ˜¯å¦è®¾ç½®sourceMap è¿˜éœ€è¦å†webpack.config.js ä¸­é…ç½®  devtool: &#39;source-map&#39;        filename: this.resourcePath.split(&#39;&#x2F;&#39;).pop()   &#x2F;&#x2F;  ç»™ç”Ÿæˆçš„&#96;source-map&#96;æŒ‡å®šåå­—    &#125;, function (err, result) &#123;        callback(err, result.code, result.map)   &#x2F;&#x2F; å¼‚æ­¥ å‚æ•°åˆ†åˆ«æ˜¯ã€Œé”™è¯¯ è½¬åŒ–åçš„ä»£ç  å’Œ sourceMapã€    &#125;)    console.log(options);    &#x2F;&#x2F; return source  å¤±æ•ˆ&#125;module.exports &#x3D; loader\n\n\nindex.js\n12345678910111213class May &#123;    constructor () &#123;        this.name &#x3D; &#39;may&#39;    &#125;    getName () &#123;        return this.name    &#125;&#125;let may &#x3D; new May()console.log(may.getName());\n\nnpx webpack\nbanner-loaderå®ç°(è‡ªåˆ›)ç»™æ‰€æœ‰åŒ¹é…çš„jsåŠ ä¸€ä¸ªæ³¨é‡Š\nwebpack.config.js\n12345678910&#123;    &#x2F;&#x2F; ç»™æ‰€æœ‰åŒ¹é…çš„&#96;js&#96;åŠ ä¸€ä¸ªæ³¨é‡Š    test: &#x2F;\\.js$&#x2F;,    use: &#123;        loader: &#39;banner-loader&#39;,        options: &#123;           text: &#39;may&#39;,           filename: path.resolve(__dirname, &#39;banner.js&#39;)        &#125;    &#125;&#125;\n\nbanner.js\n1äºŒæ¬¡æ˜Ÿçƒä¸­æ¯’\n\n\nåœ¨loaderæ–‡ä»¶åˆ›å»ºbanner-loader.js\nyarn add schema-utils æ ¡éªŒè‡ªå·±å†™çš„loaderæ ¼å¼æ˜¯å¦æ­£ç¡®\nschema-utils\nbanner-loader.js\n1234567891011121314151617181920212223242526272829303132333435&#x2F;&#x2F; æ‹¿åˆ°loaderçš„é…ç½®let loaderUtils &#x3D; require(&#39;loader-utils&#39;)&#x2F;&#x2F; æ ¡éªŒloaderlet validateOptions &#x3D; require(&#39;schema-utils&#39;)&#x2F;&#x2F; è¯»å–æ–‡ä»¶let fs &#x3D; require(&#39;fs&#39;)  &#x2F;&#x2F; å¼‚æ­¥function loader(source) &#123;  &#x2F;&#x2F; loaderçš„å‚æ•°å°±æ˜¯æºä»£ç     let options &#x3D; loaderUtils.getOptions(this)    let callback &#x3D; this.async()  &#x2F;&#x2F; è¯»å–æ–‡ä»¶æ˜¯å¼‚æ­¥    let schema &#x3D; &#123;        type: &#39;object&#39;,        properties: &#123;            text: &#123;                type: &#39;string&#39;            &#125;,            filename: &#123;                type: &#39;string&#39;            &#125;        &#125;    &#125;    validateOptions(schema, options, &#39;banner-loader&#39;)  &#x2F;&#x2F; è‡ªå·±çš„æ ¡éªŒæ ¼å¼ï¼Œ è‡ªå·±çš„å†™çš„é…ç½®ï¼Œ å¯¹åº”çš„loaderåå­—    if (options.filename) &#123;        this.cacheable(false)  &#x2F;&#x2F; ä¸è¦ç¼“å­˜  å¦‚æœæœ‰å¤§é‡è®¡ç®— æ¨èç¼“å­˜        &#x2F;&#x2F; this.cacheable &amp;&amp; this.cacheable()        this.addDependency(options.filename) &#x2F;&#x2F; è‡ªåŠ¨å¢åŠ ä¾èµ–        fs.readFile(options.filename, &#39;utf8&#39;, function (err, data) &#123;            callback(err, &#96;&#x2F;**$&#123;data&#125;**&#x2F;$&#123;source&#125;&#96;)        &#125;)    &#125; else &#123;        callback(null, &#96;&#x2F;**$&#123;options.text&#125;**&#x2F;$&#123;source&#125;&#96;)    &#125;    return source&#125;module.exports &#x3D; loader\n\nä¼˜åŒ–:\nä¿®æ”¹banner.jsçš„å†…å®¹å, webpackè¿›è¡Œç›‘æ§ï¼Œæ‰“åŒ…webapck.config.jsé…ç½®watch: true\nloaderç¼“å­˜\nå®ç°file-loaderå’Œurl-loaderyarn add mime\nå…¶ä¸»è¦ç”¨é€”æ˜¯è®¾ç½®æŸç§æ‰©å±•åçš„æ–‡ä»¶çš„å“åº”ç¨‹åºç±»å‹\nmime\nåˆ›å»ºfile-loader.js1\n123456789101112&#x2F;&#x2F; æ‹¿åˆ°babelçš„å‚æ•° éœ€è¦å·¥å…· loaderUtilslet loaderUtils &#x3D; require(&#39;loader-utils&#39;)function loader(source) &#123;  &#x2F;&#x2F; loaderçš„å‚æ•°å°±æ˜¯æºä»£ç     &#x2F;&#x2F; file-loaderéœ€è¦è¿”å›è·¯å¾„    let filename &#x3D; loaderUtils.interpolateName(this, &#39;[hash].[ext]&#39;, &#123;content: source &#125;)    this.emitFile(filename, source) &#x2F;&#x2F; å‘å°„æ–‡ä»¶    console.log(&#39;loader1&#39;);    return &#96;module.exports&#x3D;&quot;$&#123;filename&#125;&quot;&#96;&#125;loader.raw &#x3D; true &#x2F;&#x2F; äºŒè¿›åˆ¶module.exports &#x3D; loader\n\nåˆ›å»ºurl-loader1.js\n123456789101112131415&#x2F;&#x2F; æ‹¿åˆ°babelçš„å‚æ•° éœ€è¦å·¥å…· loaderUtilslet loaderUtils &#x3D; require(&#39;loader-utils&#39;)let mime &#x3D; require(&#39;mime&#39;)  &#x2F;&#x2F; é€”æ˜¯è®¾ç½®æŸç§æ‰©å±•åçš„æ–‡ä»¶çš„å“åº”ç¨‹åºç±»å‹function loader(source) &#123;  &#x2F;&#x2F; loaderçš„å‚æ•°å°±æ˜¯æºä»£ç     let &#123;limit&#125; &#x3D; loaderUtils.getOptions(this)    console.log(this.resourcePath);    if (limit &amp;&amp; limit &gt; source.length) &#123;        return &#96;module.exports&#x3D;&quot;data:$&#123;mime.getType(this.resourcePath)&#125;;base64,$&#123;source.toString(&#39;base64&#39;)&#125;&quot;&#96;    &#125; else &#123;        return require(&#39;.&#x2F;file-loader1&#39;).call(this, source)    &#125;&#125;loader.raw &#x3D; true &#x2F;&#x2F; äºŒè¿›åˆ¶module.exports &#x3D; loader\n\nwebpack.config.js\n123456789101112&#123;    test: &#x2F;\\.png$&#x2F;,    &#x2F;&#x2F; ç›®çš„æ˜¯æ ¹æ®å›¾ç‰‡ç”Ÿæˆmd5 å‘å°„åˆ°distç›®å½•ä¸‹ï¼Œfile-loader è¿”å›å½“å‰å›¾ç‰‡è·¯å¾„    &#x2F;&#x2F; use: &#39;file-loader&#39;    &#x2F;&#x2F; å¤„ç†è·¯å¾„    use: &#123;        loader: &#39;url-loader1&#39;,        options: &#123;            limit: 200 * 1024        &#125;    &#125;&#125;\n\nindex.jså¼•å…¥å›¾ç‰‡\n12345import p from &#39;.&#x2F;photo.png&#39;let img &#x3D; document.createElement(&#39;img&#39;)img.src &#x3D; pdocument.body.appendChild(img);\n\n\nless-loaderå’Œcss-loaderå…ˆå®‰è£…less\nåˆ†åˆ«åˆ›å»ºstyle-loader2 css-loader2 less-loader2\nstyle-loader1 ä¸ less-loader1 åŒä¹‹å‰çš„\ncss-loaderä¸»è¦ç”¨æ¥å¤„ç†cssä¸­çš„å›¾ç‰‡é“¾æ¥ï¼Œéœ€è¦æŠŠurlè½¬æ¢æˆrequire\nwebpack.config.js\n12345678910111213141516&#123;    test: &#x2F;\\.png$&#x2F;,    &#x2F;&#x2F; ç›®çš„æ˜¯æ ¹æ®å›¾ç‰‡ç”Ÿæˆmd5 å‘å°„åˆ°distç›®å½•ä¸‹ï¼Œfile-loader è¿”å›å½“å‰å›¾ç‰‡è·¯å¾„    &#x2F;&#x2F; use: &#39;file-loader&#39;    &#x2F;&#x2F; å¤„ç†è·¯å¾„    use: &#123;        loader: &#39;url-loader1&#39;,        options: &#123;            limit: 200 * 1024        &#125;    &#125;&#125;,&#123;    test: &#x2F;\\.less$&#x2F;,    use: [&#39;style-loader2&#39;, &#39;css-loader2&#39;, &#39;less-loader2&#39;]&#125;\n\nåˆ›å»ºindex.less\n12345@base: #f938ab;body &#123;  background: @base;  background: url(&quot;.&#x2F;photo.png&quot;);&#125;\n\nless-loader2.js\n123456789101112131415&#x2F;&#x2F; å°†lessè½¬ä¸ºcsslet less &#x3D; require(&#39;less&#39;)function loader(source) &#123;    let css &#x3D; &#39;&#39;    &#x2F;&#x2F; console.log(source, 2222);    less.render(source, function (err, output) &#123;        &#x2F;&#x2F; console.log(output);        css &#x3D; output.css    &#125;)    &#x2F;&#x2F; css &#x3D; css.replace(&#x2F;\\n&#x2F;g, &#39;\\\\n&#39;);    return css&#125;module.exports &#x3D; loader\n\n\ncss-loader2.js\n1234567891011121314151617181920212223242526272829&#x2F;&#x2F; css-loader ç”¨æ¥è§£æ@importè¿™ç§è¯­æ³•,åŒ…æ‹¬cssä¸­å¼•å…¥çš„å›¾ç‰‡function loader(source) &#123;    let reg &#x3D; &#x2F;url\\((.+?)\\)&#x2F;g   &#x2F;&#x2F; åŒ¹é…æ‹¬å·    let pos &#x3D; 0;    let current;    let arr &#x3D; [&#39;let list &#x3D; []&#39;]    while (current &#x3D; reg.exec(source)) &#123;        let [matchUrl, g] &#x3D; current   &#x2F;&#x2F; matchUrl -&gt; &#39;url(&quot;.&#x2F;photo.png&quot;)&#39;, g  -&gt; &#39;&quot;.&#x2F;photo.png&quot;&#39;        &#x2F;&#x2F; console.log(matchUrl, g, 88);        let lastIndex &#x3D; reg.lastIndex - matchUrl.length    &#x2F;&#x2F; æ‹¿åˆ°cssä»å¼€é€šåˆ°åœ°å€é“¾æ¥ä¹‹å‰çš„index        arr.push(&#96;list.push($&#123;JSON.stringify(source.slice(pos, lastIndex))&#125;)&#96;)  &#x2F;&#x2F; æ‹¼å…¥å¼€å§‹å’Œåœ°å€ä¹‹å‰çš„ä»£ç         pos &#x3D; reg.lastIndex        arr.push(&#96;list.push(&#39;url(&#39;+ require($&#123;g&#125;) +&#39;)&#39;)&#96;)    &#x2F;&#x2F; æ‹¼å…¥å›¾ç‰‡åœ°å€    &#125;    arr.push(&#96;list.push($&#123;JSON.stringify(source.slice(pos))&#125;)&#96;)  &#x2F;&#x2F; æ‹¼å…¥åœ°å€åˆ°ç»“å°¾çš„ä»£ç     arr.push(&#96;module.exports &#x3D; list.join(&#39;&#39;)&#96;)    console.log(arr.join(&#39;\\r\\n&#39;));    &#x2F;&#x2F; let list &#x3D; []    &#x2F;&#x2F; list.push(&quot;body &#123;\\\\n  background: #f938ab;\\\\n  background: &quot;)    &#x2F;&#x2F; list.push(&#39;url(&#39;+ require(&quot;.&#x2F;photo.png&quot;) +&#39;)&#39;)    &#x2F;&#x2F; list.push(&quot;;\\\\n&#125;\\\\n&quot;)    &#x2F;&#x2F; module.exports &#x3D; list.join(&#39;&#39;)    return arr.join(&#39;\\r\\n&#39;)&#125;module.exports &#x3D; loader\n\nstyle-loader2.js\n123456789101112131415161718192021222324252627282930let loaderUtils &#x3D; require(&#39;loader-utils&#39;)&#x2F;&#x2F; å°†cssæ’å…¥åˆ°htmlå¤´éƒ¨function loader(source) &#123;    let str &#x3D; &#96;    let style &#x3D; document.createElement(&#39;style&#39;)    style.innerHTML &#x3D; $&#123;JSON.stringify(source)&#125;    document.head.appendChild(style)   &#96;    return str&#125;&#x2F;&#x2F; style-loaderå†™äº†pitch,æœ‰è¿”å›åé¢çš„è·³è¿‡ï¼Œè‡ªå·±çš„å†™ä¸ä¼šèµ°loader.pitch &#x3D; function (remainingRequest) &#123;  &#x2F;&#x2F; å‰©ä½™çš„è¯·æ±‚    console.log(loaderUtils.stringifyRequest(this, &#39;!!&#39; + remainingRequest, 99999999))    &#x2F;&#x2F; è®©style-loader å¤„ç† less-loader å’Œcss-loaderæ‹¼æ¥çš„ç»“æœ    &#x2F;&#x2F; å¾—åˆ° &#x2F;Users&#x2F;liuhuimin&#x2F;work&#x2F;webpack&#x2F;loader&#x2F;css-loader2.js!&#x2F;Users&#x2F;liuhuimin&#x2F;work&#x2F;webpack&#x2F;loader&#x2F;less-loader2.js!&#x2F;Users&#x2F;liuhuimin&#x2F;work&#x2F;webpack&#x2F;src&#x2F;index.less    &#x2F;&#x2F; å‰©ä½™çš„è¯·æ±‚ less-loader!css-loader!.&#x2F;index.less    &#x2F;&#x2F; console.log(remainingRequest, 1223);    &#x2F;&#x2F; requireè¿”å›çš„å°±æ˜¯css-loaderå¤„ç†å¥½çš„ç»“æœrequire(&#39;!!css-loader!less-loader!.&#x2F;index.less&#39;)    let str &#x3D; &#96;    let style &#x3D; document.createElement(&#39;style&#39;)    style.innerHTML &#x3D; require($&#123;loaderUtils.stringifyRequest(this, &#39;!!&#39; + remainingRequest)&#125;)    document.head.appendChild(style)   &#96;    &#x2F;&#x2F; stringifyRequest ç»å¯¹è·¯å¾„è½¬ç›¸å¯¹è·¯å¾„    return str&#125;module.exports &#x3D; loader\n\n\n123456789user: [&#39;style-loader2&#39;, &#39;css-loader2&#39;, &#39;less-loader2&#39;]    pitch loader - æœ‰è¿”å›å€¼    pitch   style-loader2 â†’ css-loader2  less-loader2                       â†™                              æœ‰è¿”å›å€¼               èµ„æº               â†™                      normal  style-loader2  css-loader2  less-loader2\n\nåœ¨style-loader2ä¸­ å¼•ç”¨äº†less-loader css-loader å’Œlessæ–‡ä»¶\nwebpack ä¸­çš„æ’ä»¶yarn add webpack webpack-cil -D\nwebpack.config.js\n12345678910111213141516let path &#x3D; require(&#39;path&#39;)let DonePlugin &#x3D; require(&#39;.&#x2F;plugins&#x2F;DonePlugins&#39;)let AsyncPlugins &#x3D; require(&#39;.&#x2F;plugins&#x2F;AsyncPlugins&#39;)module.exports &#x3D; &#123;    mode: &#39;development&#39;,    entry: &#39;.&#x2F;src&#x2F;index.js&#39;,    output: &#123;        filename: &#39;build.js&#39;,        path: path.resolve(__dirname, &#39;dist&#39;)    &#125;,    plugins: [        new DonePlugin(),    &#x2F;&#x2F; åŒæ­¥        new AsyncPlugins()   &#x2F;&#x2F; å¼‚æ­¥    ]&#125;\n\nnode_modules/webpack/libä¸­æŸ¥çœ‹Compiler.js\nåŒæ­¥plugins/DonePlugins\næ‰“åŒ…å®Œæˆ\n1234567891011class DonePlugins &#123;    apply (compiler) &#123;        console.log(1);        compiler.hooks.done.tap(&#39;DonePlugin&#39;, (stats) &#x3D;&gt; &#123;            console.log(&#39;ç¼–è¯‘å®Œæˆ&#39;);        &#125;)    &#125;&#125;module.exports &#x3D; DonePlugins\n\n\nå¼‚æ­¥plugins/AsyncPlugins\n12345678910111213141516171819202122class AsyncPlugins &#123;    apply (compiler) &#123;        console.log(2);        compiler.hooks.emit.tapAsync(&#39;AsyncPlugin&#39;, (complete, callback) &#x3D;&gt; &#123;            setTimeout(() &#x3D;&gt; &#123;                console.log(&#39;æ–‡ä»¶å‘å°„å‡ºæ¥&#39;);                callback()            &#125;, 1000)        &#125;)        compiler.hooks.emit.tapPromise(&#39;AsyncPlugin&#39;, (complete, callback) &#x3D;&gt; &#123;            return new Promise((resolve, reject) &#x3D;&gt; &#123;                setTimeout(() &#x3D;&gt; &#123;                    console.log(&#39;æ–‡ä»¶å‘å°„å‡ºæ¥ 222&#39;);                    resolve()                &#125;, 1000)            &#125;)        &#125;)    &#125;&#125;module.exports &#x3D; AsyncPlugins\n\næ–‡ä»¶åˆ—è¡¨æ’ä»¶å¸Œæœ›ç”Ÿæˆä¸€ä¸ªæ–‡ä»¶æè¿°æ‰“åŒ…å‡ºæ¥çš„æ–‡ä»¶\nåœ¨pluginsä¸­æ–°å»ºFileListPlugin\n1234567891011121314151617181920212223242526272829class FileListPlugin &#123;    constructor (&#123;filename&#125;) &#123;        this.filename &#x3D; filename    &#125;    apply (compiler) &#123;        &#x2F;&#x2F; æ–‡ä»¶å·²ç»å‡†å¤‡å¥½äº† è¦è¿›è¡Œå‘å°„        &#x2F;&#x2F; emit        compiler.hooks.emit.tap(&#39;FileListPlugin&#39;, (compilation) &#x3D;&gt; &#123;            let assets &#x3D; compilation.assets;            console.log(assets, 55);            let content &#x3D; &#96;## æ–‡ä»¶å  èµ„æºå¤§å°\\r\\n&#96;            &#x2F;&#x2F; [ [bundls.js, &#123;&#125;], [index.html, &#123;&#125;]]            Object.entries(assets).forEach(([filename, stateObj]) &#x3D;&gt; &#123;                content +&#x3D; &#96;- $&#123;filename&#125;    $&#123;stateObj.size()&#125;\\r\\n&#96;            &#125;)            &#x2F;&#x2F; èµ„æºå¯¹è±¡            assets[this.filename] &#x3D; &#123;                source () &#123;                    return content;                &#125;,                size () &#123;                    return content.length                &#125;            &#125;        &#125;)    &#125;&#125;module.exports &#x3D; FileListPlugin\n\n12345678910111213141516171819202122232425let path &#x3D; require(&#39;path&#39;)let DonePlugin &#x3D; require(&#39;.&#x2F;plugins&#x2F;DonePlugins&#39;)let AsyncPlugins &#x3D; require(&#39;.&#x2F;plugins&#x2F;AsyncPlugins&#39;)let HtmlWebpackPlugin &#x3D; require(&#39;html-webpack-plugin&#39;)let FileListPlugin &#x3D; require(&#39;.&#x2F;plugins&#x2F;FileListPlugin&#39;)module.exports &#x3D; &#123;    mode: &#39;development&#39;,    entry: &#39;.&#x2F;src&#x2F;index.js&#39;,    output: &#123;        filename: &#39;build.js&#39;,        path: path.resolve(__dirname, &#39;dist&#39;)    &#125;,    plugins: [        new DonePlugin(),        new AsyncPlugins(),        new HtmlWebpackPlugin(&#123;            template: &#39;.&#x2F;src&#x2F;index.html&#39;,            filename: &#39;index.html&#39;        &#125;),        new FileListPlugin(&#123;            filename: &#39;list.md&#39;        &#125;)    ]&#125;\n\nç”Ÿæˆlist.md\nå†…è”çš„webpackæ’ä»¶æ–°å»ºindex.csså¼•å…¥index.js\nyarn add css-loader mini-css-extract-plugin -D\nå¸Œæœ›æ‰“åŒ…åcssã€jså†…è”åœ¨index.htmlæ–‡ä»¶ä¸­\nåˆ›å»ºpluginsä¸­InlineSourcePlugins.js\nyarn add --dev html-webpack-plugin@next\nHTML Webpack Plugin\nwebpack.config.js\n12345678910111213141516171819202122232425262728293031323334353637383940414243let path &#x3D; require(&#39;path&#39;)let DonePlugin &#x3D; require(&#39;.&#x2F;plugins&#x2F;DonePlugins&#39;)let AsyncPlugins &#x3D; require(&#39;.&#x2F;plugins&#x2F;AsyncPlugins&#39;)let HtmlWebpackPlugin &#x3D; require(&#39;html-webpack-plugin&#39;)let FileListPlugin &#x3D; require(&#39;.&#x2F;plugins&#x2F;FileListPlugin&#39;)let InlineSourcePlugins &#x3D; require(&#39;.&#x2F;plugins&#x2F;InlineSourcePlugins&#39;)let MiniCssExtractPlugin &#x3D; require(&#39;mini-css-extract-plugin&#39;)module.exports &#x3D; &#123;    mode: &#39;production&#39;,    entry: &#39;.&#x2F;src&#x2F;index.js&#39;,    output: &#123;        filename: &#39;bundle.js&#39;,        path: path.resolve(__dirname, &#39;dist&#39;)    &#125;,    module: &#123;        rules: [            &#123;                test: &#x2F;\\.css$&#x2F;,                use: [MiniCssExtractPlugin.loader, &#39;css-loader&#39;]            &#125;        ]    &#125;,    plugins: [        &#x2F;&#x2F; new DonePlugin(),        &#x2F;&#x2F; new AsyncPlugins(),        new HtmlWebpackPlugin(&#123;            template: &#39;.&#x2F;src&#x2F;index.html&#39;,            filename: &#39;index.html&#39;        &#125;),        new MiniCssExtractPlugin(&#123;            filename: &#39;index.css&#39;        &#125;),        new InlineSourcePlugins(&#123;            match: &#x2F;\\.(js|css)&#x2F;        &#125;),        &#x2F;&#x2F; new FileListPlugin(&#123;        &#x2F;&#x2F;     filename: &#39;list.md&#39;        &#x2F;&#x2F; &#125;)    ]&#125;\n\nInlineSourcePlugins.js\n1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768const HtmlWebpackPlugin &#x3D; require(&#39;html-webpack-plugin&#39;)&#x2F;&#x2F; æŠŠå¤–é“¾çš„æ ‡ç­¾ç¼–ç¨‹å†…è”çš„æ ‡ç­¾class InlineSourcePlugins &#123;    constructor(&#123;match&#125;) &#123;        this.reg &#x3D; match  &#x2F;&#x2F; æ­£åˆ™    &#125;    &#x2F;&#x2F; å¤„ç†æŸä¸€ä¸ªæ ‡ç­¾    processTag(tag, compilation) &#123;        let newTag &#x3D; &#123;&#125;        let url &#x3D; &#39;&#39;        if (tag.tagName &#x3D;&#x3D;&#x3D; &#39;link&#39; &amp;&amp; this.reg.test(tag.attributes.href)) &#123;            newTag &#x3D; &#123;                tagName: &#39;style&#39;,                attributes: &#123;type: &#39;text&#x2F;css&#39;&#125;            &#125;            url &#x3D; tag.attributes.href        &#125; else if (tag.tagName &#x3D;&#x3D;&#x3D; &#39;script&#39; &amp;&amp; this.reg.test(tag.attributes.src)) &#123;            newTag &#x3D; &#123;                tagName: &#39;script&#39;,                attributes: &#123;type: &#39;application&#x2F;javascript&#39;&#125;            &#125;            url &#x3D; tag.attributes.src        &#125;        if (url) &#123;            newTag.innerHTML &#x3D; compilation.assets[url].source(); &#x2F;&#x2F; æ–‡ä»¶å†…å®¹æ”¾åˆ°innerHTMLå±æ€§ä¸­            delete compilation.assets[url]   &#x2F;&#x2F; åˆ é™¤åŸæœ‰çš„èµ„æº            return newTag            &#x2F;&#x2F; console.log(compilation.assets[url].source());        &#125;        return tag    &#125;    &#x2F;&#x2F; å¤„ç†å¼•å…¥æ ‡ç­¾çš„æ•°æ®    processTags(data, compilation) &#123;        let headTags &#x3D; []        let bodyTags &#x3D; []        data.headTags.forEach(headTag &#x3D;&gt; &#123;            headTags.push(this.processTag(headTag, compilation))        &#125;)        data.bodyTags.forEach(bodyTag &#x3D;&gt; &#123;            bodyTags.push(this.processTag(bodyTag, compilation))        &#125;)        console.log(&#123;...data, headTags, bodyTags&#125;)        return &#123;...data, headTags, bodyTags&#125;    &#125;    apply(compiler) &#123;        &#x2F;&#x2F; é€šè¿‡webpackPluginæ¥å®ç°  npmæœç´¢  html-webpack-plugin        compiler.hooks.compilation.tap(&#39;InlineSourcePlugins&#39;, (compilation) &#x3D;&gt; &#123;            HtmlWebpackPlugin.getHooks(compilation).alterAssetTagGroups.tapAsync(                &#39;alertPlugin&#39;,                (data, callback) &#x3D;&gt; &#123;                    &#x2F;&#x2F; console.log(&#39;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#39;);                    &#x2F;&#x2F; console.log(data) &#x2F;&#x2F; æ’å…¥htmlæ ‡ç­¾çš„æ•°æ®                    &#x2F;&#x2F; console.log(&#39;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#39;);                    data &#x3D; this.processTags(data, compilation)   &#x2F;&#x2F; compilation.assets èµ„æºçš„é“¾æ¥                    callback(null, data)                &#125;)        &#125;)    &#125;&#125;module.exports &#x3D; InlineSourcePlugins\n\n\næ‰“åŒ…åè‡ªåŠ¨å‘å¸ƒæ‰“åŒ…å¥½çš„æ–‡ä»¶è‡ªåŠ¨ä¸Šä¼ è‡´ä¸ƒç‰›\néœ€è¦è¿™å‡ ä¸ªå‚æ•°\n1234bucket: &#39;&#39;  &#x2F;&#x2F; ä¸ƒç‰›çš„å­˜å‚¨ç©ºé—´domain: &#39;&#39;,accessKey: &#39;&#39;, &#x2F;&#x2F; ä¸ƒç‰›äº‘çš„ä¸¤å¯¹å¯†åŒ™secretKey: &#39;&#39; &#x2F;&#x2F; ä¸ƒç‰›äº‘çš„ä¸¤å¯¹å¯†åŒ™\n\næ³¨å†Œä¸ƒç‰›ï¼Œå¹¶åœ¨å¯¹è±¡å­˜å‚¨é‡Œé¢,æ–°å»ºå­˜å‚¨ç©ºé—´åˆ—è¡¨test,bucket: &#39;test&#39;\nå†…å®¹ç®¡ç†å¤–é“¾æ¥é»˜è®¤åŸŸå domain: &#39;xxxxxxxx&#39;\nå³ä¸Šè§’ä¸ªäººé¢æ¿é‡Œé¢ä¸ªäººä¸­å¿ƒ,å¯†é’¥ç®¡ç†åˆ†åˆ«å¯¹åº”accessKeyå’ŒsecretKey\nè¿›å…¥å¼€å‘è€…ä¸­å¿ƒ -&gt; SDK&amp;å·¥å…· -&gt; å®˜æ–¹SDK -&gt; NodeæœåŠ¡ç«¯æ–‡æ¡£ â€”&gt; æ–‡ä»¶ä¸Šä¼ \nnodeæ–‡ä»¶ä¸Šä¼ \nnpm install qiniu\ncompiler-hooks\nwebpack.config.js\n123456789101112131415plugins: [        new HtmlWebpackPlugin(&#123;            template: &#39;.&#x2F;src&#x2F;index.html&#39;,            filename: &#39;index.html&#39;        &#125;),        new MiniCssExtractPlugin(&#123;            filename: &#39;index.css&#39;        &#125;),        new UploadPlugin(&#123;            bucket: &#39;test&#39;,  &#x2F;&#x2F; ä¸ƒç‰›çš„å­˜å‚¨ç©ºé—´            domain: &#39;poyrjyh1b.bkt.clouddn.com&#39;,            accessKey: &#39;xxxxxx&#39;, &#x2F;&#x2F; ä¸ƒç‰›äº‘çš„ä¸¤å¯¹å¯†åŒ™            secretKey: &#39;yyyyyy&#39; &#x2F;&#x2F; ä¸ƒç‰›äº‘çš„ä¸¤å¯¹å¯†åŒ™        &#125;)    ]\n\nUploadPlugin.js\n1234567891011121314151617181920212223242526272829303132333435363738394041424344454647let qiniu &#x3D; require(&#39;qiniu&#39;)let path &#x3D; require(&#39;path&#39;)class UploadPlugin &#123;    constructor (options &#x3D; &#123;&#125;) &#123;        &#x2F;&#x2F; å‚è€ƒ https:&#x2F;&#x2F;developer.qiniu.com&#x2F;kodo&#x2F;sdk&#x2F;1289&#x2F;nodejs        let &#123; bucket &#x3D; &#39;&#39;, domain &#x3D; &#39;&#39;, accessKey &#x3D; &#39;&#39;, secretKey &#x3D; &#39;&#39;&#125; &#x3D; options        let mac &#x3D; new qiniu.auth.digest.Mac(accessKey, secretKey)        let putPolicy &#x3D; new qiniu.rs.PutPolicy(&#123;            scope: bucket        &#125;);        this.uploadToken &#x3D; putPolicy.uploadToken(mac)        let config &#x3D; new qiniu.conf.Config();        this.formUploader &#x3D; new qiniu.form_up.FormUploader(config)        this.putExtra &#x3D; new qiniu.form_up.PutExtra()    &#125;    apply (compiler) &#123;        compiler.hooks.afterEmit.tapPromise(&#39;UploadPlugin&#39;, (complication) &#x3D;&gt; &#123;            let assets &#x3D; complication.assets            let promise &#x3D; []            Object.keys(assets).forEach(filename &#x3D;&gt; &#123;                promise.push(this.upload(filename))            &#125;)            return Promise.all(promise)        &#125;)    &#125;    upload (filename) &#123;        return new Promise((resolve, reject) &#x3D;&gt; &#123;            let localFile &#x3D; path.resolve(__dirname, &#39;..&#x2F;dist&#39;, filename)            this.formUploader.putFile(this.uploadToken, filename, localFile, this.putExtra, function(respErr,                                                                                 respBody, respInfo) &#123;                if (respErr) &#123;                    reject(respErr)                &#125;                if (respInfo.statusCode &#x3D;&#x3D; 200) &#123;                    resolve(respBody)                &#125; else &#123;                    console.log(respInfo.statusCode)                    console.log(respBody)                &#125;            &#125;);        &#125;)    &#125;&#125;module.exports &#x3D; UploadPlugin\n","plink":"https://www.hansomezao.com/2019/12/10/note/webpack4/"},{"title":"02.react-advance","date":"2019-12-10T05:39:02.000Z","date_formatted":{"ll":"2019å¹´12æœˆ10æ—¥","L":"2019/12/10","MM-DD":"12-10"},"author":"zao","updated":"2019-12-10T05:39:02.000Z","content":"react è¿›é˜¶æ‡’åŠ è½½React.lazyå‡½æ•°èƒ½è®©ä½ åƒæ¸²æŸ“å¸¸è§„ç»„ä»¶ä¸€æ ·å¤„ç†åŠ¨æ€å¼•å…¥ï¼ˆçš„ç»„ä»¶ï¼‰ã€‚SuspenseåŠ è½½æŒ‡ç¤ºå™¨ä¸ºç»„ä»¶åšä¼˜é›…é™çº§ã€‚fallbackå±æ€§æ¥å—ä»»ä½•åœ¨ç»„ä»¶åŠ è½½è¿‡ç¨‹ä¸­ä½ æƒ³å±•ç¤ºçš„ React å…ƒç´ ã€‚\n1234567891011const OtherComponent &#x3D; React.lazy(() &#x3D;&gt; import(&#39;.&#x2F;OtherComponent&#39;));function MyComponent() &#123;  return (    &lt;div&gt;      &lt;Suspense fallback&#x3D;&#123;&lt;div&gt;Loading...&lt;&#x2F;div&gt;&#125;&gt;        &lt;OtherComponent &#x2F;&gt;      &lt;&#x2F;Suspense&gt;    &lt;&#x2F;div&gt;  );&#125;\n\nContextContextæä¾›äº†ä¸€ä¸ªæ— éœ€ä¸ºæ¯å±‚ç»„ä»¶æ‰‹åŠ¨æ·»åŠ  propsï¼Œå°±èƒ½åœ¨ç»„ä»¶æ ‘é—´è¿›è¡Œæ•°æ®ä¼ é€’çš„æ–¹æ³•ï¼Œè®¾è®¡ç›®çš„æ˜¯ä¸ºäº†å…±äº«é‚£äº›å¯¹äºä¸€ä¸ªç»„ä»¶æ ‘è€Œè¨€æ˜¯â€œå…¨å±€â€çš„æ•°æ®ã€‚\n1234567891011121314151617181920212223242526272829303132333435&#x2F;&#x2F; Context å¯ä»¥è®©æˆ‘ä»¬æ— é¡»æ˜ç¡®åœ°ä¼ éæ¯ä¸€ä¸ªç»„ä»¶ï¼Œå°±èƒ½å°†å€¼æ·±å…¥ä¼ é€’è¿›ç»„ä»¶æ ‘ã€‚&#x2F;&#x2F; ä¸ºå½“å‰çš„ theme åˆ›å»ºä¸€ä¸ª contextï¼ˆâ€œlightâ€ä¸ºé»˜è®¤å€¼ï¼‰ã€‚const ThemeContext &#x3D; React.createContext(&#39;light&#39;);class App extends React.Component &#123;  render() &#123;    &#x2F;&#x2F; ä½¿ç”¨ä¸€ä¸ª Provider æ¥å°†å½“å‰çš„ theme ä¼ é€’ç»™ä»¥ä¸‹çš„ç»„ä»¶æ ‘ã€‚    &#x2F;&#x2F; æ— è®ºå¤šæ·±ï¼Œä»»ä½•ç»„ä»¶éƒ½èƒ½è¯»å–è¿™ä¸ªå€¼ã€‚    &#x2F;&#x2F; åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°† â€œdarkâ€ ä½œä¸ºå½“å‰çš„å€¼ä¼ é€’ä¸‹å»ã€‚    return (      &lt;ThemeContext.Provider value&#x3D;&quot;dark&quot;&gt;        &lt;Toolbar &#x2F;&gt;      &lt;&#x2F;ThemeContext.Provider&gt;    );  &#125;&#125;&#x2F;&#x2F; ä¸­é—´çš„ç»„ä»¶å†ä¹Ÿä¸å¿…æŒ‡æ˜å¾€ä¸‹ä¼ é€’ theme äº†ã€‚function Toolbar(props) &#123;  return (    &lt;div&gt;      &lt;ThemedButton &#x2F;&gt;    &lt;&#x2F;div&gt;  );&#125;class ThemedButton extends React.Component &#123;  &#x2F;&#x2F; æŒ‡å®š contextType è¯»å–å½“å‰çš„ theme contextã€‚  &#x2F;&#x2F; React ä¼šå¾€ä¸Šæ‰¾åˆ°æœ€è¿‘çš„ theme Providerï¼Œç„¶åä½¿ç”¨å®ƒçš„å€¼ã€‚  &#x2F;&#x2F; åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå½“å‰çš„ theme å€¼ä¸º â€œdarkâ€ã€‚  static contextType &#x3D; ThemeContext;  render() &#123;    return &lt;Button theme&#x3D;&#123;this.context&#125; &#x2F;&gt;;  &#125;&#125;\nè¯·è°¨æ…ä½¿ç”¨ï¼Œå› ä¸ºè¿™ä¼šä½¿å¾—ç»„ä»¶çš„å¤ç”¨æ€§å˜å·®ã€‚\nAPI:React.createContextï¼šåˆ›å»ºä¸€ä¸ª Context å¯¹è±¡ã€‚å½“ React æ¸²æŸ“ä¸€ä¸ªè®¢é˜…äº†è¿™ä¸ª Context å¯¹è±¡çš„ç»„ä»¶ï¼Œè¿™ä¸ªç»„ä»¶ä¼šä»ç»„ä»¶æ ‘ä¸­ç¦»è‡ªèº«æœ€è¿‘çš„é‚£ä¸ªåŒ¹é…çš„ Provider ä¸­è¯»å–åˆ°å½“å‰çš„ context å€¼ã€‚åªæœ‰å½“ç»„ä»¶æ‰€å¤„çš„æ ‘ä¸­æ²¡æœ‰åŒ¹é…åˆ° Provider æ—¶ï¼Œå…¶ defaultValue å‚æ•°æ‰ä¼šç”Ÿæ•ˆã€‚\nContext.Providerï¼šæ¯ä¸ª Context å¯¹è±¡éƒ½ä¼šè¿”å›ä¸€ä¸ª Provider React ç»„ä»¶ï¼Œå®ƒå…è®¸æ¶ˆè´¹ç»„ä»¶è®¢é˜… context çš„å˜åŒ–ã€‚å½“ Provider çš„ value å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå®ƒå†…éƒ¨çš„æ‰€æœ‰æ¶ˆè´¹ç»„ä»¶éƒ½ä¼šé‡æ–°æ¸²æŸ“ã€‚\nClass.contextTypeï¼šæŒ‚è½½åœ¨ class ä¸Šçš„ contextType å±æ€§ä¼šè¢«é‡èµ‹å€¼ä¸ºä¸€ä¸ªç”± React.createContext() åˆ›å»ºçš„ Context å¯¹è±¡ã€‚è¿™èƒ½è®©ä½ ä½¿ç”¨ this.context æ¥æ¶ˆè´¹æœ€è¿‘ Context ä¸Šçš„é‚£ä¸ªå€¼ã€‚ä½ å¯ä»¥åœ¨ä»»ä½•ç”Ÿå‘½å‘¨æœŸä¸­è®¿é—®åˆ°å®ƒï¼ŒåŒ…æ‹¬ render å‡½æ•°ä¸­ã€‚\nContext.Consumerï¼šè¿™é‡Œï¼ŒReact ç»„ä»¶ä¹Ÿå¯ä»¥è®¢é˜…åˆ° context å˜æ›´ã€‚è¿™èƒ½è®©ä½ åœ¨å‡½æ•°å¼ç»„ä»¶ä¸­å®Œæˆè®¢é˜… contextã€‚\nRefsRefs æä¾›äº†ä¸€ç§æ–¹å¼ï¼Œå…è®¸æˆ‘ä»¬è®¿é—® DOM èŠ‚ç‚¹æˆ–åœ¨ render æ–¹æ³•ä¸­åˆ›å»ºçš„ React å…ƒç´ ã€‚ä¸èƒ½åœ¨å‡½æ•°ç»„ä»¶ä¸Šä½¿ç”¨ ref å±æ€§ï¼Œå› ä¸ºä»–ä»¬æ²¡æœ‰å®ä¾‹ï¼Œå¯ä»¥åœ¨å‡½æ•°ç»„ä»¶å†…éƒ¨ä½¿ç”¨ ref å±æ€§ã€‚\né€‚åˆä½¿ç”¨ refs çš„æƒ…å†µï¼š\nç®¡ç†ç„¦ç‚¹ï¼Œæ–‡æœ¬é€‰æ‹©æˆ–åª’ä½“æ’­æ”¾ã€‚\nè§¦å‘å¼ºåˆ¶åŠ¨ç”»ã€‚\né›†æˆç¬¬ä¸‰æ–¹ DOM åº“ã€‚\nä½¿ç”¨æ–¹æ³•ï¼š\nåˆ›å»º Refs\nRefs æ˜¯ä½¿ç”¨ React.createRef() åˆ›å»ºçš„ï¼Œå¹¶é€šè¿‡ ref å±æ€§é™„åŠ åˆ° React å…ƒç´ ã€‚123456789class MyComponent extends React.Component &#123;  constructor(props) &#123;    super(props);    this.myRef &#x3D; React.createRef();  &#125;  render() &#123;    return &lt;div ref&#x3D;&#123;this.myRef&#125; &#x2F;&gt;;  &#125;&#125;\n\n\nè®¿é—® Refs\nåœ¨ ref çš„ current å±æ€§ä¸­è¢«è®¿é—®1const node &#x3D; this.myRef.current;\n\n\n\nRefs è½¬å‘Ref è½¬å‘æ˜¯ä¸€é¡¹å°† ref è‡ªåŠ¨åœ°é€šè¿‡ç»„ä»¶ä¼ é€’åˆ°å…¶ä¸€å­ç»„ä»¶çš„æŠ€å·§ã€‚å­ç»„ä»¶ä½¿ç”¨React.forwardRefæ¥æ”¶refã€‚å¯ç”¨äºHocå¤„ç†refã€‚\n123456789const FancyButton &#x3D; React.forwardRef((props, ref) &#x3D;&gt; (  &lt;button ref&#x3D;&#123;ref&#125; className&#x3D;&quot;FancyButton&quot;&gt;    &#123;props.children&#125;  &lt;&#x2F;button&gt;));&#x2F;&#x2F; ä½ å¯ä»¥ç›´æ¥è·å– DOM button çš„ refï¼šconst ref &#x3D; React.createRef();&lt;FancyButton ref&#x3D;&#123;ref&#125;&gt;Click me!&lt;&#x2F;FancyButton&gt;;\nä¸Šä¾‹ä¸­ï¼ŒFancyButton ä½¿ç”¨ React.forwardRef æ¥è·å–ä¼ é€’ç»™å®ƒçš„ refï¼Œç„¶åè½¬å‘åˆ°å®ƒæ¸²æŸ“çš„ DOM buttonã€‚è¿™æ ·ï¼Œä½¿ç”¨ FancyButton çš„ç»„ä»¶å¯ä»¥è·å–åº•å±‚ DOM èŠ‚ç‚¹ button çš„ ref ï¼Œå¹¶åœ¨å¿…è¦æ—¶è®¿é—®ï¼Œå°±åƒå…¶ç›´æ¥ä½¿ç”¨ DOM button ä¸€æ ·ã€‚\nFragmentsFragments å…è®¸ä½ å°†å­åˆ—è¡¨åˆ†ç»„ï¼Œè€Œæ— éœ€å‘ DOM æ·»åŠ é¢å¤–èŠ‚ç‚¹ã€‚key æ˜¯å”¯ä¸€å¯ä»¥ä¼ é€’ç»™ Fragment çš„å±æ€§\n123456789render() &#123;  return (    &lt;React.Fragment&gt;      &lt;ChildA &#x2F;&gt;      &lt;ChildB &#x2F;&gt;      &lt;ChildC &#x2F;&gt;    &lt;&#x2F;React.Fragment&gt;  );&#125;\n&lt;React.Fragment&gt;&lt;/React.Fragment&gt;å¯ç®€å†™ä¸º&lt;&gt;&lt;/&gt;\né«˜é˜¶ç»„ä»¶ï¼ˆHOCï¼‰HOCæ˜¯å‚æ•°ä¸ºç»„ä»¶ï¼Œè¿”å›å€¼ä¸ºæ–°ç»„ä»¶çš„å‡½æ•°ã€‚\nHOC ä¸ä¼šä¿®æ”¹ä¼ å…¥çš„ç»„ä»¶ï¼Œä¹Ÿä¸ä¼šä½¿ç”¨ç»§æ‰¿æ¥å¤åˆ¶å…¶è¡Œä¸ºã€‚ç›¸åï¼ŒHOC é€šè¿‡å°†ç»„ä»¶åŒ…è£…åœ¨å®¹å™¨ç»„ä»¶ä¸­æ¥ç»„æˆæ–°ç»„ä»¶ã€‚HOC æ˜¯çº¯å‡½æ•°ï¼Œæ²¡æœ‰å‰¯ä½œç”¨ã€‚\nç¤ºä¾‹ï¼š\n12345678910111213141516171819202122232425262728293031323334&#x2F;&#x2F; æ­¤å‡½æ•°æ¥æ”¶ä¸€ä¸ªç»„ä»¶...function withSubscription(WrappedComponent, selectData) &#123;  &#x2F;&#x2F; ...å¹¶è¿”å›å¦ä¸€ä¸ªç»„ä»¶...  return class extends React.Component &#123;    constructor(props) &#123;      super(props);      this.handleChange &#x3D; this.handleChange.bind(this);      this.state &#x3D; &#123;        data: selectData(DataSource, props)      &#125;;    &#125;    componentDidMount() &#123;      &#x2F;&#x2F; ...è´Ÿè´£è®¢é˜…ç›¸å…³çš„æ“ä½œ...      DataSource.addChangeListener(this.handleChange);    &#125;    componentWillUnmount() &#123;      DataSource.removeChangeListener(this.handleChange);    &#125;    handleChange() &#123;      this.setState(&#123;        data: selectData(DataSource, this.props)      &#125;);    &#125;    render() &#123;      &#x2F;&#x2F; ... å¹¶ä½¿ç”¨æ–°æ•°æ®æ¸²æŸ“è¢«åŒ…è£…çš„ç»„ä»¶!      &#x2F;&#x2F; è¯·æ³¨æ„ï¼Œæˆ‘ä»¬å¯èƒ½è¿˜ä¼šä¼ é€’å…¶ä»–å±æ€§      return &lt;WrappedComponent data&#x3D;&#123;this.state.data&#125; &#123;...this.props&#125; &#x2F;&gt;;    &#125;  &#125;;&#125;\nä¸Šä¾‹ä¸­classç»„ä»¶ä¸ºHOCçš„å®¹å™¨ç»„ä»¶ï¼Œå®¹å™¨ç»„ä»¶æ‹…ä»»åˆ†ç¦»å°†é«˜å±‚å’Œä½å±‚å…³æ³¨çš„è´£ä»»ï¼Œç”±å®¹å™¨ç®¡ç†è®¢é˜…å’ŒçŠ¶æ€ï¼Œå¹¶å°† prop ä¼ é€’ç»™å¤„ç†æ¸²æŸ“ UIã€‚HOC ä½¿ç”¨å®¹å™¨ä½œä¸ºå…¶å®ç°çš„ä¸€éƒ¨åˆ†ï¼Œä½ å¯ä»¥å°† HOC è§†ä¸ºå‚æ•°åŒ–å®¹å™¨ç»„ä»¶ã€‚\næ³¨æ„äº‹é¡¹ï¼š\nä¸è¦åœ¨ render æ–¹æ³•ä¸­ä½¿ç”¨ HOCã€‚\nåœ¨renderä¸­ä½¿ç”¨ä¼šå¯¼è‡´diff ç®—æ³•åœ¨å¯¹æ¯”ç»„ä»¶å˜åŒ–æ—¶æ¯æ¬¡æ£€æµ‹éƒ½ä¸ä¸€æ ·ï¼Œæ¯æ¬¡æ¸²æŸ“éƒ½ä¼šè¿›è¡Œå¸è½½ï¼Œå’Œé‡æ–°æŒ‚è½½çš„æ“ä½œï¼Œè¿™ä¸ä»…ä»…æ˜¯æ€§èƒ½é—®é¢˜ - é‡æ–°æŒ‚è½½ç»„ä»¶ä¼šå¯¼è‡´è¯¥ç»„ä»¶åŠå…¶æ‰€æœ‰å­ç»„ä»¶çš„çŠ¶æ€ä¸¢å¤±ã€‚\n\nåŠ¡å¿…å¤åˆ¶é™æ€æ–¹æ³•åˆ°å®¹å™¨ç»„ä»¶ä¸Šã€‚\nå¯ä»¥ä½¿ç”¨hoist-non-react-staticsè‡ªåŠ¨æ‹·è´æ‰€æœ‰é React é™æ€æ–¹æ³•\n  123456import hoistNonReactStatic from &#39;hoist-non-react-statics&#39;;function enhance(WrappedComponent) &#123;  class Enhance extends React.Component &#123;&#x2F;*...*&#x2F;&#125;  hoistNonReactStatic(Enhance, WrappedComponent);  return Enhance;&#125;\n\nRefs ä¸ä¼šè¢«ä¼ é€’ã€‚\nå¯ç”¨è¿‡Refs è½¬å‘è§£å†³\n\nå¸¸è§çš„HOC:reduxçš„ connect\nReact.PureComponentå¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥ä½¿ç”¨ React.PureComponent æ¥ä»£æ›¿æ‰‹å†™ shouldComponentUpdateã€‚åªæœ‰å½“æ£€æµ‹æ•°æ®æ˜¯æ•°ç»„æˆ–å¯¹è±¡æ—¶ï¼Œç”±äºæµ…æ‹·è´çš„é—®é¢˜ä¼šå¯¼è‡´æ¯”è¾ƒå‡ºç°åå·®ä¸èƒ½ä½¿ç”¨ï¼Œæ­¤æ—¶ä½¿ç”¨æ·±æ‹·è´ä»å¯ç»§ç»­ä½¿ç”¨ã€‚\nå¦‚ä»¥ä¸‹ä»£ç ï¼š\n1234567891011121314151617181920212223242526class CounterButton extends React.Component &#123;  constructor(props) &#123;    super(props);    this.state &#x3D; &#123;count: 1&#125;;  &#125;  shouldComponentUpdate(nextProps, nextState) &#123;    if (this.props.color !&#x3D;&#x3D; nextProps.color) &#123;      return true;    &#125;    if (this.state.count !&#x3D;&#x3D; nextState.count) &#123;      return true;    &#125;    return false;  &#125;  render() &#123;    return (      &lt;button        color&#x3D;&#123;this.props.color&#125;        onClick&#x3D;&#123;() &#x3D;&gt; this.setState(state &#x3D;&gt; (&#123;count: state.count + 1&#125;))&#125;&gt;        Count: &#123;this.state.count&#125;      &lt;&#x2F;button&gt;    );  &#125;&#125;\nå¯æ›¿æ¢ä¸ºï¼š\n12345678910111213141516class CounterButton extends React.PureComponent &#123;  constructor(props) &#123;    super(props);    this.state &#x3D; &#123;count: 1&#125;;  &#125;  render() &#123;    return (      &lt;button        color&#x3D;&#123;this.props.color&#125;        onClick&#x3D;&#123;() &#x3D;&gt; this.setState(state &#x3D;&gt; (&#123;count: state.count + 1&#125;))&#125;&gt;        Count: &#123;this.state.count&#125;      &lt;&#x2F;button&gt;    );  &#125;&#125;\n\nPortalsPortal æä¾›äº†ä¸€ç§å°†å­èŠ‚ç‚¹æ¸²æŸ“åˆ°å­˜åœ¨äºçˆ¶ç»„ä»¶ä»¥å¤–çš„ DOM èŠ‚ç‚¹çš„ä¼˜ç§€çš„æ–¹æ¡ˆã€‚\nä¸€ä¸ª portal çš„å…¸å‹ç”¨ä¾‹æ˜¯å½“çˆ¶ç»„ä»¶æœ‰ overflow: hidden æˆ– z-index æ ·å¼æ—¶ï¼Œä½†ä½ éœ€è¦å­ç»„ä»¶èƒ½å¤Ÿåœ¨è§†è§‰ä¸Šâ€œè·³å‡ºâ€å…¶å®¹å™¨ã€‚ä¾‹å¦‚ï¼Œå¯¹è¯æ¡†ã€æ‚¬æµ®å¡ä»¥åŠæç¤ºæ¡†ï¼š\n12345678render() &#123;  &#x2F;&#x2F; React å¹¶*æ²¡æœ‰*åˆ›å»ºä¸€ä¸ªæ–°çš„ divã€‚å®ƒåªæ˜¯æŠŠå­å…ƒç´ æ¸²æŸ“åˆ° &#96;domNode&#96; ä¸­ã€‚  &#x2F;&#x2F; &#96;domNode&#96; æ˜¯ä¸€ä¸ªå¯ä»¥åœ¨ä»»ä½•ä½ç½®çš„æœ‰æ•ˆ DOM èŠ‚ç‚¹ã€‚  return ReactDOM.createPortal(    this.props.children,    domNode  );&#125;\n\nReact.StrictModeStrictMode ä¸ä¼šæ¸²æŸ“ä»»ä½•å¯è§çš„ UIã€‚å®ƒä¸ºå…¶åä»£å…ƒç´ è§¦å‘é¢å¤–çš„æ£€æŸ¥å’Œè­¦å‘Šã€‚ä¸¥æ ¼æ¨¡å¼æ£€æŸ¥ä»…åœ¨å¼€å‘æ¨¡å¼ä¸‹è¿è¡Œï¼›å®ƒä»¬ä¸ä¼šå½±å“ç”Ÿäº§æ„å»ºã€‚\nä½œç”¨ï¼šè¯†åˆ«ä¸å®‰å…¨çš„ç”Ÿå‘½å‘¨æœŸ\nå…³äºä½¿ç”¨è¿‡æ—¶å­—ç¬¦ä¸² ref API çš„è­¦å‘Š\nå…³äºä½¿ç”¨åºŸå¼ƒçš„ findDOMNode æ–¹æ³•çš„è­¦å‘Š\næ£€æµ‹æ„å¤–çš„å‰¯ä½œç”¨\næ£€æµ‹è¿‡æ—¶çš„ context API\nReact.memoReact.memo ä¸ºé«˜é˜¶ç»„ä»¶ã€‚å®ƒä¸ React.PureComponent éå¸¸ç›¸ä¼¼ï¼Œä½†å®ƒé€‚ç”¨äºå‡½æ•°ç»„ä»¶ï¼Œä½†ä¸é€‚ç”¨äº class ç»„ä»¶ã€‚\nå¦‚æœä½ çš„å‡½æ•°ç»„ä»¶åœ¨ç»™å®šç›¸åŒ props çš„æƒ…å†µä¸‹æ¸²æŸ“ç›¸åŒçš„ç»“æœï¼Œé‚£ä¹ˆä½ å¯ä»¥é€šè¿‡å°†å…¶åŒ…è£…åœ¨ React.memo ä¸­è°ƒç”¨ï¼Œä»¥æ­¤é€šè¿‡è®°å¿†ç»„ä»¶æ¸²æŸ“ç»“æœçš„æ–¹å¼æ¥æé«˜ç»„ä»¶çš„æ€§èƒ½è¡¨ç°ã€‚è¿™æ„å‘³ç€åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒReact å°†è·³è¿‡æ¸²æŸ“ç»„ä»¶çš„æ“ä½œå¹¶ç›´æ¥å¤ç”¨æœ€è¿‘ä¸€æ¬¡æ¸²æŸ“çš„ç»“æœã€‚\né»˜è®¤æƒ…å†µä¸‹å…¶åªä¼šå¯¹å¤æ‚å¯¹è±¡åšæµ…å±‚å¯¹æ¯”ï¼Œå¦‚æœä½ æƒ³è¦æ§åˆ¶å¯¹æ¯”è¿‡ç¨‹ï¼Œé‚£ä¹ˆè¯·å°†è‡ªå®šä¹‰çš„æ¯”è¾ƒå‡½æ•°é€šè¿‡ç¬¬äºŒä¸ªå‚æ•°ä¼ å…¥æ¥å®ç°ã€‚\n123const MyComponent &#x3D; React.memo(function MyComponent(props) &#123;  &#x2F;* ä½¿ç”¨ props æ¸²æŸ“ *&#x2F;&#125;);","plink":"https://www.hansomezao.com/2019/12/10/note/02.react-advance/"},{"title":"04.redux","date":"2019-12-10T05:39:02.000Z","date_formatted":{"ll":"2019å¹´12æœˆ10æ—¥","L":"2019/12/10","MM-DD":"12-10"},"author":"zao","updated":"2019-12-10T05:39:02.000Z","content":"redux\nåŸºç¡€\n\n1.æ•°æ®æµ:  ä¸¥æ ¼çš„å•å‘æ•°æ®æµæ˜¯ Redux æ¶æ„çš„è®¾è®¡æ ¸å¿ƒã€‚  Redux åº”ç”¨ä¸­æ•°æ®çš„ç”Ÿå‘½å‘¨æœŸéµå¾ªä¸‹é¢ 4 ä¸ªæ­¥éª¤ï¼š\nè°ƒç”¨ store.dispatch(action)ã€‚Action å°±æ˜¯ä¸€ä¸ªæè¿°â€œå‘ç”Ÿäº†ä»€ä¹ˆâ€çš„æ™®é€šå¯¹è±¡ã€‚\n\nRedux store è°ƒç”¨ä¼ å…¥çš„ reducer å‡½æ•°ã€‚Store ä¼šæŠŠä¸¤ä¸ªå‚æ•°ä¼ å…¥ reducerï¼š å½“å‰çš„ state æ ‘å’Œ actionã€‚\n\næ ¹ reducer åº”è¯¥æŠŠå¤šä¸ªå­ reducer è¾“å‡ºåˆå¹¶æˆä¸€ä¸ªå•ä¸€çš„ state æ ‘ã€‚æ ¹ reducer çš„ç»“æ„å®Œå…¨ç”±ä½ å†³å®šã€‚Redux åŸç”Ÿæä¾›combineReducers()è¾…åŠ©å‡½æ•°ï¼Œæ¥æŠŠæ ¹ reducer æ‹†åˆ†æˆå¤šä¸ªå‡½æ•°ï¼Œç”¨äºåˆ†åˆ«å¤„ç† state æ ‘çš„ä¸€ä¸ªåˆ†æ”¯ã€‚\n\nRedux store ä¿å­˜äº†æ ¹ reducer è¿”å›çš„å®Œæ•´ state æ ‘ã€‚è¿™ä¸ªæ–°çš„æ ‘å°±æ˜¯åº”ç”¨çš„ä¸‹ä¸€ä¸ª stateï¼æ‰€æœ‰è®¢é˜… store.subscribe(listener) çš„ç›‘å¬å™¨éƒ½å°†è¢«è°ƒç”¨ï¼›ç›‘å¬å™¨é‡Œå¯ä»¥è°ƒç”¨ store.getState() è·å¾—å½“å‰ stateã€‚\n\n\n2.Action:  Actionæ˜¯æŠŠæ•°æ®ä»åº”ç”¨ä¼ åˆ° store çš„æœ‰æ•ˆè½½è·ã€‚å®ƒæ˜¯ store æ•°æ®çš„å”¯ä¸€æ¥æºã€‚  ä¸€èˆ¬æ¥è¯´ä½ ä¼šé€šè¿‡ store.dispatch() å°† action ä¼ åˆ° storeã€‚  å¯ä»¥æŠŠ action ç†è§£æˆæ–°é—»çš„æ‘˜è¦ã€‚å¦‚ â€œç›ä¸½å–œæ¬¢42å·æ–‡ç« ã€‚â€ æˆ–è€… â€œä»»åŠ¡åˆ—è¡¨é‡Œæ·»åŠ äº†â€™å­¦ä¹  Redux æ–‡æ¡£â€™â€ã€‚  ä½ å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹è°ƒç”¨ store.dispatch(action)ï¼ŒåŒ…æ‹¬ç»„ä»¶ä¸­ã€XHR å›è°ƒä¸­ã€ç”šè‡³å®šæ—¶å™¨ä¸­ã€‚\n\n3.Reducer:  Reducers æŒ‡å®šäº†åº”ç”¨çŠ¶æ€çš„å˜åŒ–å¦‚ä½•å“åº” actions å¹¶å‘é€åˆ° store çš„ï¼Œ  Reducers å°±æ˜¯ä¸€ä¸ªçº¯å‡½æ•°ï¼Œæ¥æ”¶æ—§çš„ state å’Œ actionï¼Œè¿”å›æ–°çš„ stateã€‚(previousState, action) =&gt; newState  æ°¸è¿œä¸è¦åœ¨ reducer é‡Œåšè¿™äº›æ“ä½œï¼š\nä¿®æ”¹ä¼ å…¥å‚æ•°ï¼›\næ‰§è¡Œæœ‰å‰¯ä½œç”¨çš„æ“ä½œï¼Œå¦‚ API è¯·æ±‚å’Œè·¯ç”±è·³è½¬ï¼›\nè°ƒç”¨éçº¯å‡½æ•°ï¼Œå¦‚ Date.now() æˆ– Math.random()ã€‚\n\n4.Store:  Store å°±æ˜¯ç”¨æ¥ç»´æŒåº”ç”¨æ‰€æœ‰çš„ state æ ‘ çš„ä¸€ä¸ªå¯¹è±¡ã€‚ æ”¹å˜ store å†… state çš„æƒŸä¸€é€”å¾„æ˜¯å¯¹å®ƒ dispatch ä¸€ä¸ª actionã€‚  Store ä¸æ˜¯ç±»ã€‚å®ƒåªæ˜¯æœ‰å‡ ä¸ªæ–¹æ³•çš„å¯¹è±¡ã€‚ è¦åˆ›å»ºå®ƒï¼Œåªéœ€è¦æŠŠæ ¹éƒ¨çš„ reducing å‡½æ•° ä¼ é€’ç»™ createStoreã€‚  Store å°±æ˜¯æŠŠActionå’ŒReducerè”ç³»åˆ°ä¸€èµ·çš„å¯¹è±¡ã€‚\nStoreçš„æ–¹æ³•:getState()ä½œç”¨ï¼šè¿”å›åº”ç”¨å½“å‰çš„ state æ ‘ã€‚å®ƒä¸ store çš„æœ€åä¸€ä¸ª reducer è¿”å›å€¼ç›¸åŒã€‚\nè¿”å›å€¼ï¼š(any): åº”ç”¨å½“å‰çš„ state æ ‘ã€‚\n\ndispatch(action)ä½œç”¨ï¼šåˆ†å‘ actionã€‚è¿™æ˜¯è§¦å‘ state å˜åŒ–çš„æƒŸä¸€é€”å¾„ã€‚ä¼šä½¿ç”¨å½“å‰ getState() çš„ç»“æœå’Œä¼ å…¥çš„ action ä»¥åŒæ­¥æ–¹å¼çš„è°ƒç”¨ store çš„ reduce å‡½æ•°ã€‚è¿”å›å€¼ä¼šè¢«ä½œä¸ºä¸‹ä¸€ä¸ª stateã€‚ä»ç°åœ¨å¼€å§‹ï¼Œè¿™å°±æˆä¸ºäº† getState() çš„è¿”å›å€¼ï¼ŒåŒæ—¶å˜åŒ–ç›‘å¬å™¨(change listener)ä¼šè¢«è§¦å‘ã€‚\nå‚æ•°ï¼šaction (Object)\nè¿”å›å€¼ï¼š(Object): è¦ dispatch çš„ actionã€‚\næ³¨æ„ï¼šä½¿ç”¨ createStore åˆ›å»ºçš„ â€œçº¯æ­£â€ store åªæ”¯æŒæ™®é€šå¯¹è±¡ç±»å‹çš„ actionï¼Œè€Œä¸”ä¼šç«‹å³ä¼ åˆ° reducer æ¥æ‰§è¡Œã€‚ä½†æ˜¯ï¼Œå¦‚æœä½ ç”¨ applyMiddleware æ¥å¥—ä½ createStore æ—¶ï¼Œmiddleware å¯ä»¥ä¿®æ”¹ action çš„æ‰§è¡Œï¼Œå¹¶æ”¯æŒæ‰§è¡Œ dispatch intentï¼ˆæ„å›¾ï¼‰ã€‚Intent ä¸€èˆ¬æ˜¯å¼‚æ­¥æ“ä½œå¦‚ Promiseã€Observable æˆ–è€… Thunkã€‚\n\nsubscribe(listener)ä½œç”¨ï¼šæ·»åŠ ä¸€ä¸ªå˜åŒ–ç›‘å¬å™¨ã€‚æ¯å½“ dispatch action çš„æ—¶å€™å°±ä¼šæ‰§è¡Œï¼Œstate æ ‘ä¸­çš„ä¸€éƒ¨åˆ†å¯èƒ½å·²ç»å˜åŒ–ã€‚ä½ å¯ä»¥åœ¨å›è°ƒå‡½æ•°é‡Œè°ƒç”¨ getState() æ¥æ‹¿åˆ°å½“å‰ stateã€‚å¦‚æœéœ€è¦è§£ç»‘è¿™ä¸ªå˜åŒ–ç›‘å¬å™¨ï¼Œæ‰§è¡Œ subscribe è¿”å›çš„å‡½æ•°å³å¯ã€‚\nå‚æ•°ï¼šlistener (Function): æ¯å½“ dispatch action çš„æ—¶å€™éƒ½ä¼šæ‰§è¡Œçš„å›è°ƒã€‚state æ ‘ä¸­çš„ä¸€éƒ¨åˆ†å¯èƒ½å·²ç»å˜åŒ–ã€‚ä½ å¯ä»¥åœ¨å›è°ƒå‡½æ•°é‡Œè°ƒç”¨ getState() æ¥æ‹¿åˆ°å½“å‰ stateã€‚store çš„ reducer åº”è¯¥æ˜¯çº¯å‡½æ•°ï¼Œå› æ­¤ä½ å¯èƒ½éœ€è¦å¯¹ state æ ‘ä¸­çš„å¼•ç”¨åšæ·±åº¦æ¯”è¾ƒæ¥ç¡®å®šå®ƒçš„å€¼æ˜¯å¦æœ‰å˜åŒ–ã€‚\nè¿”å›å€¼ï¼š(Function): ä¸€ä¸ªå¯ä»¥è§£ç»‘å˜åŒ–ç›‘å¬å™¨çš„å‡½æ•°ã€‚\n\nsubscribe(listener)ä½œç”¨ï¼šæ›¿æ¢ store å½“å‰ç”¨æ¥è®¡ç®— state çš„ reducerã€‚è¿™æ˜¯ä¸€ä¸ªé«˜çº§ APIã€‚åªæœ‰åœ¨ä½ éœ€è¦å®ç°ä»£ç åˆ†éš”ï¼Œè€Œä¸”éœ€è¦ç«‹å³åŠ è½½ä¸€äº› reducer çš„æ—¶å€™æ‰å¯èƒ½ä¼šç”¨åˆ°å®ƒã€‚åœ¨å®ç° Redux çƒ­åŠ è½½æœºåˆ¶çš„æ—¶å€™ä¹Ÿå¯èƒ½ä¼šç”¨åˆ°ã€‚\nå‚æ•°ï¼šreducer (Function) store ä¼šä½¿ç”¨çš„ä¸‹ä¸€ä¸ª reducerã€‚\nAPI\n\n\ncreateStore(reducer, [preloadedState], enhancer)\n\nä½œç”¨ï¼šåˆ›å»ºä¸€ä¸ª Redux store æ¥ä»¥å­˜æ”¾åº”ç”¨ä¸­æ‰€æœ‰çš„ stateã€‚åº”ç”¨ä¸­åº”æœ‰ä¸”ä»…æœ‰ä¸€ä¸ª storeã€‚\n\nå‚æ•°ï¼šreducer (Function): \næ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯å½“å‰çš„ state æ ‘å’Œè¦å¤„ç†çš„ actionï¼Œè¿”å›æ–°çš„state æ ‘ã€‚\n\n[preloadedState] (any):\n åˆå§‹æ—¶çš„ stateã€‚ åœ¨åŒæ„åº”ç”¨ä¸­ï¼Œä½ å¯ä»¥å†³å®šæ˜¯å¦æŠŠæœåŠ¡ç«¯ä¼ æ¥çš„ state æ°´åˆï¼ˆhydrateï¼‰åä¼ ç»™å®ƒï¼Œæˆ–è€…ä»ä¹‹å‰ä¿å­˜çš„ç”¨æˆ·ä¼šè¯ä¸­æ¢å¤ä¸€ä¸ªä¼ ç»™å®ƒã€‚å¦‚æœä½ ä½¿ç”¨ combineReducers åˆ›å»º reducerï¼Œå®ƒå¿…é¡»æ˜¯ä¸€ä¸ªæ™®é€šå¯¹è±¡ï¼Œä¸ä¼ å…¥çš„ keys ä¿æŒåŒæ ·çš„ç»“æ„ã€‚å¦åˆ™ï¼Œä½ å¯ä»¥è‡ªç”±ä¼ å…¥ä»»ä½• reducer å¯ç†è§£çš„å†…å®¹ã€‚\n\nenhancer (Function):\nStore enhancer æ˜¯ä¸€ä¸ªç»„åˆ store creator çš„é«˜é˜¶å‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„å¼ºåŒ–è¿‡çš„ store creatorã€‚è¿™ä¸ middleware ç›¸ä¼¼ï¼Œå®ƒä¹Ÿå…è®¸ä½ é€šè¿‡å¤åˆå‡½æ•°æ”¹å˜ store æ¥å£ã€‚\n\n\nè¿”å›å€¼ï¼š(Store): ä¿å­˜äº†åº”ç”¨æ‰€æœ‰ state çš„å¯¹è±¡ã€‚æ”¹å˜ state çš„æƒŸä¸€æ–¹æ³•æ˜¯ dispatch actionã€‚ä½ ä¹Ÿå¯ä»¥ subscribe ç›‘å¬ state çš„å˜åŒ–ï¼Œç„¶åæ›´æ–° UIã€‚\n\n\ncombineReducers()ä½œç”¨ï¼šcombineReducers() æ‰€åšçš„åªæ˜¯ç”Ÿæˆä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°æ¥è°ƒç”¨ä½ çš„ä¸€ç³»åˆ— reducerï¼Œæ¯ä¸ª reducer æ ¹æ®å®ƒä»¬çš„ key æ¥ç­›é€‰å‡º state ä¸­çš„ä¸€éƒ¨åˆ†æ•°æ®å¹¶å¤„ç†ï¼Œç„¶åè¿™ä¸ªç”Ÿæˆçš„å‡½æ•°å†å°†æ‰€æœ‰ reducer çš„ç»“æœåˆå¹¶æˆä¸€ä¸ªå¤§çš„å¯¹è±¡ã€‚æ²¡æœ‰ä»»ä½•é­”æ³•ã€‚æ­£å¦‚å…¶ä»– reducersï¼Œå¦‚æœ combineReducers() ä¸­åŒ…å«çš„æ‰€æœ‰ reducers éƒ½æ²¡æœ‰æ›´æ”¹ stateï¼Œé‚£ä¹ˆä¹Ÿå°±ä¸ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚\n\n\napplyMiddleware(â€¦middlewares)ä½œç”¨ï¼šä½¿ç”¨åŒ…å«è‡ªå®šä¹‰åŠŸèƒ½çš„ middleware æ¥æ‰©å±• Redux æ˜¯ä¸€ç§æ¨èçš„æ–¹å¼ã€‚Middleware å¯ä»¥è®©ä½ åŒ…è£… store çš„ dispatch æ–¹æ³•æ¥è¾¾åˆ°ä½ æƒ³è¦çš„ç›®çš„ã€‚åŒæ—¶ï¼Œ middleware è¿˜æ‹¥æœ‰â€œå¯ç»„åˆâ€è¿™ä¸€å…³é”®ç‰¹æ€§ã€‚å¤šä¸ª middleware å¯ä»¥è¢«ç»„åˆåˆ°ä¸€èµ·ä½¿ç”¨ï¼Œå½¢æˆ middleware é“¾ã€‚å…¶ä¸­ï¼Œæ¯ä¸ª middleware éƒ½ä¸éœ€è¦å…³å¿ƒé“¾ä¸­å®ƒå‰åçš„ middleware çš„ä»»ä½•ä¿¡æ¯ã€‚Middleware æœ€å¸¸è§çš„ä½¿ç”¨åœºæ™¯æ˜¯æ— éœ€å¼•ç”¨å¤§é‡ä»£ç æˆ–ä¾èµ–ç±»ä¼¼ Rx çš„ç¬¬ä¸‰æ–¹åº“å®ç°å¼‚æ­¥ actionsã€‚è¿™ç§æ–¹å¼å¯ä»¥è®©ä½ åƒ dispatch ä¸€èˆ¬çš„ actions é‚£æ · dispatch å¼‚æ­¥ actionsã€‚\n\n\nbindActionCreators(actionCreators, dispatch)ä½œç”¨ï¼šæŠŠä¸€ä¸ª value ä¸ºä¸åŒ action creator çš„å¯¹è±¡ï¼Œè½¬æˆæ‹¥æœ‰åŒå key çš„å¯¹è±¡ã€‚åŒæ—¶ä½¿ç”¨ dispatch å¯¹æ¯ä¸ª action creator è¿›è¡ŒåŒ…è£…ï¼Œä»¥ä¾¿å¯ä»¥ç›´æ¥è°ƒç”¨å®ƒä»¬ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ä½ å¯ä»¥ç›´æ¥åœ¨ Store å®ä¾‹ä¸Šè°ƒç”¨ dispatchã€‚å¦‚æœä½ åœ¨ React ä¸­ä½¿ç”¨ Reduxï¼Œreact-redux ä¼šæä¾› dispatch å‡½æ•°è®©ä½ ç›´æ¥è°ƒç”¨å®ƒ ã€‚æƒŸä¸€ä¼šä½¿ç”¨åˆ° bindActionCreators çš„åœºæ™¯æ˜¯å½“ä½ éœ€è¦æŠŠ action creator å¾€ä¸‹ä¼ åˆ°ä¸€ä¸ªç»„ä»¶ä¸Šï¼Œå´ä¸æƒ³è®©è¿™ä¸ªç»„ä»¶è§‰å¯Ÿåˆ° Redux çš„å­˜åœ¨ï¼Œè€Œä¸”ä¸å¸Œæœ›æŠŠ dispatch æˆ– Redux store ä¼ ç»™å®ƒã€‚ä¸ºæ–¹ä¾¿èµ·è§ï¼Œä½ ä¹Ÿå¯ä»¥ä¼ å…¥ä¸€ä¸ªå‡½æ•°ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå®ƒä¼šè¿”å›ä¸€ä¸ªå‡½æ•°ã€‚å¦ä¸€æ›¿ä»£ bindActionCreators çš„åšæ³•æ˜¯ç›´æ¥æŠŠ dispatch å‡½æ•°å½“ä½œ prop ä¼ é€’ç»™å­ç»„ä»¶ï¼Œä½†è¿™æ—¶ä½ çš„å­ç»„ä»¶éœ€è¦å¼•å…¥ action creator å¹¶ä¸”æ„ŸçŸ¥å®ƒä»¬\n\n\ncompose(â€¦functions)ä½œç”¨ï¼šä»å³åˆ°å·¦æ¥ç»„åˆå¤šä¸ªå‡½æ•°ã€‚è¿™æ˜¯å‡½æ•°å¼ç¼–ç¨‹ä¸­çš„æ–¹æ³•ï¼Œä¸ºäº†æ–¹ä¾¿ï¼Œè¢«æ”¾åˆ°äº† Redux é‡Œã€‚å½“éœ€è¦æŠŠå¤šä¸ª store å¢å¼ºå™¨ ä¾æ¬¡æ‰§è¡Œçš„æ—¶å€™ï¼Œéœ€è¦ç”¨åˆ°å®ƒã€‚\n\n\nreact-redux\nRedux å®˜æ–¹æä¾›çš„ React ç»‘å®šåº“,å…·æœ‰é«˜æ•ˆä¸”çµæ´»çš„ç‰¹æ€§ã€‚æ­¤åº“å¹¶ä¸æ˜¯ Redux å†…ç½®ï¼Œéœ€è¦å•ç‹¬å®‰è£…ã€‚\nreact-redux API:&lt;Provider store&gt;ä½œç”¨ï¼š&lt;Provider store&gt; ä½¿ç»„ä»¶å±‚çº§ä¸­çš„ connect() æ–¹æ³•éƒ½èƒ½å¤Ÿè·å¾— Redux storeã€‚æ­£å¸¸æƒ…å†µä¸‹ï¼Œä½ çš„æ ¹ç»„ä»¶åº”è¯¥åµŒå¥—åœ¨ &lt;Provider&gt; ä¸­æ‰èƒ½ä½¿ç”¨ connect() æ–¹æ³•ã€‚\nå±æ€§ï¼šstore (Redux Store): åº”ç”¨ç¨‹åºä¸­å”¯ä¸€çš„ Redux store å¯¹è±¡\nchildren (ReactElement) ç»„ä»¶å±‚çº§çš„æ ¹ç»„ä»¶ã€‚\n\n\nconnect([mapStateToProps], [mapDispatchToProps], [mergeProps], [options])ä½œç”¨ï¼šè¿æ¥ React ç»„ä»¶ä¸ Redux storeã€‚è¿æ¥æ“ä½œä¸ä¼šæ”¹å˜åŸæ¥çš„ç»„ä»¶ç±»ã€‚åè€Œè¿”å›ä¸€ä¸ªæ–°çš„å·²ä¸ Redux store è¿æ¥çš„ç»„ä»¶ç±»ã€‚\n\nå‚æ•°ï¼š[mapStateToProps(state, [ownProps]): stateProps] (Function)ï¼š\nå¦‚æœå®šä¹‰è¯¥å‚æ•°ï¼Œç»„ä»¶å°†ä¼šç›‘å¬ Redux store çš„å˜åŒ–ã€‚ä»»ä½•æ—¶å€™ï¼Œåªè¦ Redux store å‘ç”Ÿæ”¹å˜ï¼ŒmapStateToProps å‡½æ•°å°±ä¼šè¢«è°ƒç”¨ã€‚è¯¥å›è°ƒå‡½æ•°å¿…é¡»è¿”å›ä¸€ä¸ªçº¯å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡ä¼šä¸ç»„ä»¶çš„ props åˆå¹¶ã€‚å¦‚æœä½ çœç•¥äº†è¿™ä¸ªå‚æ•°ï¼Œä½ çš„ç»„ä»¶å°†ä¸ä¼šç›‘å¬ Redux storeã€‚å¦‚æœæŒ‡å®šäº†è¯¥å›è°ƒå‡½æ•°ä¸­çš„ç¬¬äºŒä¸ªå‚æ•° ownPropsï¼Œåˆ™è¯¥å‚æ•°çš„å€¼ä¸ºä¼ é€’åˆ°ç»„ä»¶çš„ propsï¼Œè€Œä¸”åªè¦ç»„ä»¶æ¥æ”¶åˆ°æ–°çš„ propsï¼ŒmapStateToProps ä¹Ÿä¼šè¢«è°ƒç”¨ï¼ˆä¾‹å¦‚ï¼Œå½“ props æ¥æ”¶åˆ°æ¥è‡ªçˆ¶ç»„ä»¶ä¸€ä¸ªå°å°çš„æ”¹åŠ¨ï¼Œé‚£ä¹ˆä½ æ‰€ä½¿ç”¨çš„ ownProps å‚æ•°ï¼ŒmapStateToProps éƒ½ä¼šè¢«é‡æ–°è®¡ç®—ï¼‰ã€‚\n\n[mapDispatchToProps(dispatch, [ownProps]): dispatchProps] (Object or Function)ï¼š\nå¦‚æœä¼ é€’çš„æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¯¥å‡½æ•°å°†æ¥æ”¶ä¸€ä¸ª dispatch å‡½æ•°ï¼Œç„¶åç”±ä½ æ¥å†³å®šå¦‚ä½•è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡é€šè¿‡ dispatch å‡½æ•°ä¸ action creator ä»¥æŸç§æ–¹å¼ç»‘å®šåœ¨ä¸€èµ·ï¼ˆæç¤ºï¼šä½ ä¹Ÿè®¸ä¼šç”¨åˆ° Redux çš„è¾…åŠ©å‡½æ•° bindActionCreators()ã€‚å¦‚æœä½ çœç•¥è¿™ä¸ª mapDispatchToProps å‚æ•°ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œdispatch ä¼šæ³¨å…¥åˆ°ä½ çš„ç»„ä»¶ props ä¸­ã€‚å¦‚æœæŒ‡å®šäº†è¯¥å›è°ƒå‡½æ•°ä¸­ç¬¬äºŒä¸ªå‚æ•° ownPropsï¼Œè¯¥å‚æ•°çš„å€¼ä¸ºä¼ é€’åˆ°ç»„ä»¶çš„ propsï¼Œè€Œä¸”åªè¦ç»„ä»¶æ¥æ”¶åˆ°æ–° propsï¼ŒmapDispatchToProps ä¹Ÿä¼šè¢«è°ƒç”¨ã€‚\n\n[mergeProps(stateProps, dispatchProps, ownProps): props] (Function)ï¼š\nå¦‚æœæŒ‡å®šäº†è¿™ä¸ªå‚æ•°ï¼ŒmapStateToProps() ä¸ mapDispatchToProps() çš„æ‰§è¡Œç»“æœå’Œç»„ä»¶è‡ªèº«çš„ props å°†ä¼ å…¥åˆ°è¿™ä¸ªå›è°ƒå‡½æ•°ä¸­ã€‚è¯¥å›è°ƒå‡½æ•°è¿”å›çš„å¯¹è±¡å°†ä½œä¸º props ä¼ é€’åˆ°è¢«åŒ…è£…çš„ç»„ä»¶ä¸­ã€‚ä½ ä¹Ÿè®¸å¯ä»¥ç”¨è¿™ä¸ªå›è°ƒå‡½æ•°ï¼Œæ ¹æ®ç»„ä»¶çš„ props æ¥ç­›é€‰éƒ¨åˆ†çš„ state æ•°æ®ï¼Œæˆ–è€…æŠŠ props ä¸­çš„æŸä¸ªç‰¹å®šå˜é‡ä¸ action creator ç»‘å®šåœ¨ä¸€èµ·ã€‚å¦‚æœä½ çœç•¥è¿™ä¸ªå‚æ•°ï¼Œé»˜è®¤æƒ…å†µä¸‹è¿”å› Object.assign({}, ownProps, stateProps, dispatchProps) çš„ç»“æœã€‚\n\n[options] (Object)ï¼š\n å¦‚æœæŒ‡å®šè¿™ä¸ªå‚æ•°ï¼Œå¯ä»¥å®šåˆ¶ connector çš„è¡Œä¸ºã€‚\n [pure = true] (Boolean):å¦‚æœä¸º trueï¼Œconnector å°†æ‰§è¡Œ shouldComponentUpdate å¹¶ä¸”æµ…å¯¹æ¯” mergeProps çš„ç»“æœï¼Œé¿å…ä¸å¿…è¦çš„æ›´æ–°ï¼Œå‰ææ˜¯å½“å‰ç»„ä»¶æ˜¯ä¸€ä¸ªâ€œçº¯â€ç»„ä»¶ï¼Œå®ƒä¸ä¾èµ–äºä»»ä½•çš„è¾“å…¥æˆ– state è€Œåªä¾èµ–äº props å’Œ Redux store çš„ stateã€‚é»˜è®¤å€¼ä¸º trueã€‚\n [withRef = false] (Boolean): å¦‚æœä¸º trueï¼Œconnector ä¼šä¿å­˜ä¸€ä¸ªå¯¹è¢«è¢«åŒ…å«çš„ç»„ä»¶å®ä¾‹çš„å¼•ç”¨ï¼Œè¯¥å¼•ç”¨é€šè¿‡ getWrappedInstance() æ–¹æ³•è·å¾—ã€‚é»˜è®¤å€¼ä¸º falseã€‚\n\n\n\n\n\nå¼‚æ­¥Ation  redux-saga\n\n\nç¤ºä¾‹é¡¹ç›®:ğŸ’¯tiger-react-cli\n\n","plink":"https://www.hansomezao.com/2019/12/10/note/04.redux/"},{"title":"03.Hook","date":"2019-12-10T05:39:02.000Z","date_formatted":{"ll":"2019å¹´12æœˆ10æ—¥","L":"2019/12/10","MM-DD":"12-10"},"author":"zao","updated":"2019-12-10T05:39:02.000Z","content":"HookHook æ˜¯ React 16.8.0 çš„æ–°å¢ç‰¹æ€§ã€‚\nHook ä½¿ä½ åœ¨é class çš„æƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨æ›´å¤šçš„ React ç‰¹æ€§ã€‚Hook ä¸èƒ½åœ¨ class ç»„ä»¶ä¸­ä½¿ç”¨ã€‚\nä½¿ç”¨è§„åˆ™ï¼šåªèƒ½åœ¨å‡½æ•°æœ€å¤–å±‚è°ƒç”¨ Hookã€‚ä¸è¦åœ¨å¾ªç¯ã€æ¡ä»¶åˆ¤æ–­æˆ–è€…å­å‡½æ•°ä¸­è°ƒç”¨ã€‚\nåªèƒ½åœ¨ React çš„å‡½æ•°ç»„ä»¶ä¸­è°ƒç”¨ Hookã€‚ä¸è¦åœ¨å…¶ä»– JavaScript å‡½æ•°ä¸­è°ƒç”¨ã€‚\nState Hook\nuseState\nä½¿ç”¨useStateå¯ä»¥ä¸é€šè¿‡classç»„ä»¶è€Œåœ¨å‡½æ•°ç»„ä»¶å†…ä½¿ç”¨stateï¼Œå¯é€šè¿‡å¤šæ¬¡è°ƒç”¨å£°æ˜å¤šä¸ªstate\nå‚æ•°ï¼š\nuseState() æ–¹æ³•é‡Œé¢å”¯ä¸€çš„å‚æ•°å°±æ˜¯åˆå§‹ stateã€‚\n\nè¿”å›å€¼ï¼š\nå½“å‰ state ä»¥åŠæ›´æ–° state çš„å‡½æ•°ã€‚\n\nå‡½æ•°å¼æ›´æ–°ï¼š\nå¦‚æœæ–°çš„ state éœ€è¦é€šè¿‡ä½¿ç”¨å…ˆå‰çš„ state è®¡ç®—å¾—å‡ºï¼Œé‚£ä¹ˆå¯ä»¥å°†å‡½æ•°ä¼ é€’ç»™ setStateã€‚è¯¥å‡½æ•°å°†æ¥æ”¶å…ˆå‰çš„ stateï¼Œå¹¶è¿”å›ä¸€ä¸ªæ›´æ–°åçš„å€¼ã€‚\n1234567891011function Counter(&#123;initialCount&#125;) &#123;  const [count, setCount] &#x3D; useState(initialCount);  return (    &lt;&gt;      Count: &#123;count&#125;      &lt;button onClick&#x3D;&#123;() &#x3D;&gt; setCount(initialCount)&#125;&gt;Reset&lt;&#x2F;button&gt;      &lt;button onClick&#x3D;&#123;() &#x3D;&gt; setCount(prevCount &#x3D;&gt; prevCount + 1)&#125;&gt;+&lt;&#x2F;button&gt;      &lt;button onClick&#x3D;&#123;() &#x3D;&gt; setCount(prevCount &#x3D;&gt; prevCount - 1)&#125;&gt;-&lt;&#x2F;button&gt;    &lt;&#x2F;&gt;  );&#125;\n\nEffect HookEffect Hook å¯ä»¥è®©ä½ åœ¨å‡½æ•°ç»„ä»¶ä¸­æ‰§è¡Œå‰¯ä½œç”¨æ“ä½œï¼ˆåœ¨ React ç»„ä»¶ä¸­æ‰§è¡Œè¿‡æ•°æ®è·å–ã€è®¢é˜…æˆ–è€…æ‰‹åŠ¨ä¿®æ”¹è¿‡ DOMã€‚æˆ‘ä»¬ç»Ÿä¸€æŠŠè¿™äº›æ“ä½œç§°ä¸ºâ€œå‰¯ä½œç”¨â€ï¼Œæˆ–è€…ç®€ç§°ä¸ºâ€œä½œç”¨â€ã€‚ï¼‰\n\nuseEffect\nå¯ä»¥æŠŠ useEffect Hook çœ‹åš componentDidMountï¼ŒcomponentDidUpdate å’Œ componentWillUnmount è¿™ä¸‰ä¸ªå‡½æ•°çš„ç»„åˆã€‚\nuseEffect ä¼šåœ¨æ¯æ¬¡æ¸²æŸ“åï¼ˆç¬¬ä¸€æ¬¡æ¸²æŸ“ä¹‹åå’Œæ¯æ¬¡æ›´æ–°ä¹‹åï¼‰éƒ½æ‰§è¡Œï¼Œå¦‚æœä½ çš„ effect è¿”å›ä¸€ä¸ªå‡½æ•°ï¼ŒReact å°†ä¼šåœ¨ç»„ä»¶å¸è½½çš„æ—¶å€™æ‰§è¡Œæ¸…é™¤æ“ä½œæ—¶è°ƒç”¨å®ƒã€‚\nuseEffectåœ¨ç»„ä»¶å†…å¯å¤šæ¬¡è°ƒç”¨ï¼ŒHook å…è®¸æˆ‘ä»¬æŒ‰ç…§ä»£ç çš„ç”¨é€”åˆ†ç¦»ä»–ä»¬ï¼ŒReact å°†æŒ‰ç…§ effect å£°æ˜çš„é¡ºåºä¾æ¬¡è°ƒç”¨ç»„ä»¶ä¸­çš„æ¯ä¸€ä¸ª effectã€‚\nä½¿ç”¨ä½ç½®ï¼š\nç»„ä»¶å†…éƒ¨è°ƒç”¨ useEffectã€‚ å°† useEffect æ”¾åœ¨ç»„ä»¶å†…éƒ¨è®©æˆ‘ä»¬å¯ä»¥åœ¨ effect ä¸­ç›´æ¥è®¿é—® count state å˜é‡ï¼ˆæˆ–å…¶ä»– propsï¼‰ã€‚\næ€§èƒ½ä¼˜åŒ–ï¼š\nuseEffect çš„ç¬¬äºŒä¸ªå¯é€‰å‚æ•°å¯ä»¥å®ç°å¦‚æœæŸäº›ç‰¹å®šå€¼åœ¨ä¸¤æ¬¡é‡æ¸²æŸ“ä¹‹é—´æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œä½ å¯ä»¥é€šçŸ¥ React è·³è¿‡å¯¹ effect çš„è°ƒç”¨ã€‚è¯·ç¡®ä¿æ•°ç»„ä¸­åŒ…å«äº†æ‰€æœ‰å¤–éƒ¨ä½œç”¨åŸŸä¸­ä¼šéšæ—¶é—´å˜åŒ–å¹¶ä¸”åœ¨ effect ä¸­ä½¿ç”¨çš„å˜é‡\n123456789101112&#x2F;&#x2F; ä»…åœ¨ count æ›´æ”¹æ—¶æ›´æ–°useEffect(() &#x3D;&gt; &#123;  document.title &#x3D; &#96;You clicked $&#123;count&#125; times&#96;;&#125;, [count]); &#x2F;&#x2F; ä»…åœ¨ç»„ä»¶åˆæ¬¡æ¸²æŸ“å’Œç»„ä»¶é”€æ¯æ—¶æ‰§è¡ŒuseEffect(() &#x3D;&gt; &#123;  console.log(&#39;1&#39;)  return () &#x3D;&gt; &#123;    console.log(&#39;2&#39;)  &#125;&#125;, [])\n\nç¤ºä¾‹ä»£ç è¯¦è§£ useState ä¸ useEffect ï¼š12345678910111213141516171819202122232425262728293031323334353637383940&#x2F;&#x2F; å¼•å…¥ React ä¸­çš„ useState Hookã€‚å®ƒè®©æˆ‘ä»¬åœ¨å‡½æ•°ç»„ä»¶ä¸­å­˜å‚¨å†…éƒ¨ state&#x2F;&#x2F; å¼•å…¥ useEffectimport React, &#123; useState, useEffect &#125; from &#39;react&#39;;function Example(props) &#123;  &#x2F;&#x2F; å£°æ˜äº†ä¸€ä¸ªå« count çš„ state å˜é‡ï¼Œç„¶åæŠŠå®ƒè®¾ä¸º 0  const [count, setCount] &#x3D; useState(0);  &#x2F;&#x2F; å£°æ˜ç¬¬2ä¸ªstate  const [isOnline, setIsOnline] &#x3D; useState(null);  &#x2F;&#x2F; æ— éœ€æ¸…é™¤çš„ effect  useEffect(() &#x3D;&gt; &#123;    &#x2F;&#x2F; å°† document çš„ title è®¾ç½®ä¸ºåŒ…å«äº†ç‚¹å‡»æ¬¡æ•°çš„æ¶ˆæ¯ã€‚    document.title &#x3D; &#96;You clicked $&#123;count&#125; times&#96;;  &#125;);    &#x2F;&#x2F; éœ€è¦æ¸…é™¤çš„ effect  useEffect(() &#x3D;&gt; &#123;    function handleFn(val) &#123;      setIsOnline(val);    &#125;    &#x2F;&#x2F; æ³¨å†Œç›‘å¬    XXAPI.subscribe(handleFn);    &#x2F;&#x2F; æ¸…é™¤ç›‘å¬    return () &#x3D;&gt; &#123;      XXAPI.unsubscribe(handleFn);    &#125;;  &#125;);  return (    &lt;div&gt;      &#x2F;&#x2F; è¯»å– State: æˆ‘ä»¬å¯ä»¥ç›´æ¥ç”¨ count      &lt;p&gt;You clicked &#123;count&#125; times&lt;&#x2F;p&gt;      &#x2F;&#x2F; æ›´æ–° State: å¯ä»¥é€šè¿‡è°ƒç”¨ setCount æ¥æ›´æ–°å½“å‰çš„ count      &lt;button onClick&#x3D;&#123;() &#x3D;&gt; setCount(count + 1)&#125;&gt;        Click me      &lt;&#x2F;button&gt;    &lt;&#x2F;div&gt;  );&#125;\n\nuseLayoutEffectå…¶å‡½æ•°ç­¾åä¸ useEffect ç›¸åŒï¼Œä½†å®ƒä¼šåœ¨æ‰€æœ‰çš„ DOM å˜æ›´ä¹‹ååŒæ­¥è°ƒç”¨ effectã€‚å¯ä»¥ä½¿ç”¨å®ƒæ¥è¯»å– DOM å¸ƒå±€å¹¶åŒæ­¥è§¦å‘é‡æ¸²æŸ“ã€‚åœ¨æµè§ˆå™¨æ‰§è¡Œç»˜åˆ¶ä¹‹å‰ï¼ŒuseLayoutEffect å†…éƒ¨çš„æ›´æ–°è®¡åˆ’å°†è¢«åŒæ­¥åˆ·æ–°ã€‚å°½å¯èƒ½ä½¿ç”¨æ ‡å‡†çš„ useEffect ä»¥é¿å…é˜»å¡è§†è§‰æ›´æ–°ã€‚\nä¸ componentDidMount æˆ– componentDidUpdate ä¸åŒï¼Œä½¿ç”¨ useEffect è°ƒåº¦çš„ effect ä¸ä¼šé˜»å¡æµè§ˆå™¨æ›´æ–°å±å¹•ï¼Œè¿™è®©ä½ çš„åº”ç”¨çœ‹èµ·æ¥å“åº”æ›´å¿«ã€‚å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œeffect ä¸éœ€è¦åŒæ­¥åœ°æ‰§è¡Œã€‚åœ¨ä¸ªåˆ«æƒ…å†µä¸‹ï¼ˆä¾‹å¦‚æµ‹é‡å¸ƒå±€ï¼‰ï¼Œè¿™æ—¶éœ€è¦ç”¨åˆ°useLayoutEffect\nuseRefuseRef è¿”å›ä¸€ä¸ªå¯å˜çš„ ref å¯¹è±¡ï¼Œå…¶ .current å±æ€§è¢«åˆå§‹åŒ–ä¸ºä¼ å…¥çš„å‚æ•°ï¼ˆinitialValueï¼‰ã€‚è¿”å›çš„ ref å¯¹è±¡åœ¨ç»„ä»¶çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸå†…ä¿æŒä¸å˜ã€‚\n12345678910111213function TextInputWithFocusButton() &#123;  const inputEl &#x3D; useRef(null);  const onButtonClick &#x3D; () &#x3D;&gt; &#123;    &#x2F;&#x2F; &#96;current&#96; æŒ‡å‘å·²æŒ‚è½½åˆ° DOM ä¸Šçš„æ–‡æœ¬è¾“å…¥å…ƒç´     inputEl.current.focus();  &#125;;  return (    &lt;&gt;      &lt;input ref&#x3D;&#123;inputEl&#125; type&#x3D;&quot;text&quot; &#x2F;&gt;      &lt;button onClick&#x3D;&#123;onButtonClick&#125;&gt;Focus the input&lt;&#x2F;button&gt;    &lt;&#x2F;&gt;  );&#125;\nuseRef() æ¯” ref å±æ€§æ›´æœ‰ç”¨ã€‚å®ƒå¯ä»¥å¾ˆæ–¹ä¾¿åœ°ä¿å­˜ä»»ä½•å¯å˜å€¼ï¼Œå…¶ç±»ä¼¼äºåœ¨ class ä¸­ä½¿ç”¨å®ä¾‹å­—æ®µçš„æ–¹å¼ã€‚å½“ ref å¯¹è±¡å†…å®¹å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒuseRef å¹¶ä¸ä¼šé€šçŸ¥ä½ ã€‚å˜æ›´ .current å±æ€§ä¸ä¼šå¼•å‘ç»„ä»¶é‡æ–°æ¸²æŸ“ã€‚\nè‡ªå®šä¹‰Hookè‡ªå®šä¹‰Hook æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œå…¶åç§°ä»¥ use å¼€å¤´(å¿…é¡»ä»¥ use å¼€å¤´)ï¼Œå‡½æ•°å†…éƒ¨å¯ä»¥è°ƒç”¨å…¶ä»–çš„ Hookã€‚è‡ªå®šä¹‰Hookç”¨äºæå–å¤šç»„ä»¶ä¹‹é—´çš„å…±äº«é€»è¾‘ï¼Œå¯ç”¨äºæ›¿ä»£ render props å’Œ HOCã€‚\nåœ¨éœ€è¦å…±äº«é€»è¾‘çš„ç»„ä»¶å†…è°ƒç”¨å¾ˆç®€å•ï¼Œåªéœ€è¦å¼•å…¥å®šä¹‰å¥½çš„è‡ªå®šä¹‰Hookï¼Œå¹¶ä¼ å…¥è‡ªå·±æƒ³è¦çš„å‚æ•°æ‹¿åˆ°ä½ æƒ³è¦çš„è¿”å›å€¼ä½œç”¨äºå½“å‰ç»„ä»¶ã€‚\nå¦‚ä¸‹ä¾‹ï¼šæå–è‡ªå®šä¹‰Hookï¼š\n123456789101112131415161718import React, &#123; useState, useEffect &#125; from &#39;react&#39;;function useFriendStatus(friendID) &#123;  const [isOnline, setIsOnline] &#x3D; useState(null);  useEffect(() &#x3D;&gt; &#123;    function handleStatusChange(status) &#123;      setIsOnline(status.isOnline);    &#125;    XXXAPI.subscribeToFriendStatus(friendID, handleStatusChange);    return () &#x3D;&gt; &#123;      XXXAPI.unsubscribeFromFriendStatus(friendID, handleStatusChange);    &#125;;  &#125;);  return isOnline;&#125;\n\nä½¿ç”¨è‡ªå®šä¹‰Hookï¼š\n123456789function FriendListItem(props) &#123;  const isOnline &#x3D; useFriendStatus(props.friend.id);  return (    &lt;li style&#x3D;&#123;&#123; color: isOnline ? &#39;green&#39; : &#39;black&#39; &#125;&#125;&gt;      &#123;props.friend.name&#125;    &lt;&#x2F;li&gt;  );&#125;\n\n\nå…¶å®ƒHook\nuseReducer\nuseReduceræ˜¯useStateçš„æ›¿ä»£æ–¹æ¡ˆï¼Œå®ƒæ¥æ”¶ä¸€ä¸ªå½¢å¦‚ (state, action) =&gt; newState çš„ reducerï¼Œå¹¶è¿”å›å½“å‰çš„ state ä»¥åŠä¸å…¶é…å¥—çš„ dispatch æ–¹æ³•ã€‚\nåœ¨æŸäº›åœºæ™¯ä¸‹ï¼ŒuseReducer ä¼šæ¯” useState æ›´é€‚ç”¨ï¼Œä¾‹å¦‚ state é€»è¾‘è¾ƒå¤æ‚ä¸”åŒ…å«å¤šä¸ªå­å€¼ï¼Œæˆ–è€…ä¸‹ä¸€ä¸ª state ä¾èµ–äºä¹‹å‰çš„ state ç­‰ã€‚å¹¶ä¸”ï¼Œä½¿ç”¨ useReducer è¿˜èƒ½ç»™é‚£äº›ä¼šè§¦å‘æ·±æ›´æ–°çš„ç»„ä»¶åšæ€§èƒ½ä¼˜åŒ–ï¼Œå› ä¸ºä½ å¯ä»¥å‘å­ç»„ä»¶ä¼ é€’ dispatch è€Œä¸æ˜¯å›è°ƒå‡½æ•° ã€‚\nä½¿ç”¨ç¤ºä¾‹ï¼š\n1234567891011121314151617181920212223const initialState &#x3D; &#123;count: 0&#125;;function reducer(state, action) &#123;  switch (action.type) &#123;    case &#39;increment&#39;:      return &#123;count: state.count + 1&#125;;    case &#39;decrement&#39;:      return &#123;count: state.count - 1&#125;;    default:      throw new Error();  &#125;&#125;function Counter() &#123;  const [state, dispatch] &#x3D; useReducer(reducer, initialState);  return (    &lt;&gt;      Count: &#123;state.count&#125;      &lt;button onClick&#x3D;&#123;() &#x3D;&gt; dispatch(&#123;type: &#39;increment&#39;&#125;)&#125;&gt;+&lt;&#x2F;button&gt;      &lt;button onClick&#x3D;&#123;() &#x3D;&gt; dispatch(&#123;type: &#39;decrement&#39;&#125;)&#125;&gt;-&lt;&#x2F;button&gt;    &lt;&#x2F;&gt;  );&#125;\né€šè¿‡é˜…è¯»Reactæºç  ReactFiberHooks.js å‘ç° useState å°±æ˜¯å¯¹ useReducer çš„å°è£…ï¼š\n12345678910111213141516171819202122232425&#x2F;&#x2F; useStateexport function useState&lt;S&gt;(  initialState: (() &#x3D;&gt; S) | S,): [S, Dispatch&lt;BasicStateAction&lt;S&gt;&gt;] &#123;  return useReducer(    basicStateReducer,    &#x2F;&#x2F; useReducer has a special case to support lazy useState initializers    (initialState: any),  );&#125;&#x2F;&#x2F; useReducerexport function useReducer&lt;S, A&gt;(  reducer: (S, A) &#x3D;&gt; S,  initialState: S,  initialAction: A | void | null,): [S, Dispatch&lt;A&gt;] &#123;  &#x2F;&#x2F; ...  &#x2F;&#x2F; ...  &#x2F;&#x2F; ...&#125;&#96;&#96;&#96; &gt; ##### useMemo ä¸ useCallbackå¯ç”¨äºç»™å­ç»„ä»¶ä¼ é€’å‚æ•°åŠå›è°ƒå‡½æ•°æ—¶çš„ä¼˜åŒ–é¡¹\nimport React, {useState, useMemo, useCallback} from â€˜reactâ€™\nfunction fnComponent() {  const [count, setCount] = useState(0)  const [name, setName] = useState(â€˜nameâ€™)\n  // ä¸ä¼šåœ¨æ¯æ¬¡fnComponentæœ‰æ›´æ–°éƒ½é‡æ–°æ¸²æŸ“Child  const config = useMemo(()=&gt;{    text: count is ${count}  }, [count])  const handleButtonClk = useCallback(()=&gt;{ setCount(c=&gt;c+1) }, [])\n  return (          {name}      {count}      &lt;input value={name} onChange={(e)=&gt;{setName(e.target.value)}} /&gt;            )}\nfunction Child({config, handleButtonClk}) {  console.log(â€˜child renderâ€™)  return (          {config.text}      )}```\n","plink":"https://www.hansomezao.com/2019/12/10/note/03.Hook/"},{"title":"01.react-basic","date":"2019-12-10T05:39:02.000Z","date_formatted":{"ll":"2019å¹´12æœˆ10æ—¥","L":"2019/12/10","MM-DD":"12-10"},"author":"zao","updated":"2019-12-10T05:39:02.000Z","content":"react åŸºç¡€JSXJSXæ˜¯ä¸€ä¸ª JavaScript çš„è¯­æ³•æ‰©å±•,å¯ä»¥å¾ˆå¥½åœ°æè¿° UI åº”è¯¥å‘ˆç°å‡ºå®ƒåº”æœ‰äº¤äº’çš„æœ¬è´¨å½¢å¼ã€‚\nReact DOM åœ¨æ¸²æŸ“æ‰€æœ‰è¾“å…¥å†…å®¹ä¹‹å‰ï¼Œé»˜è®¤ä¼šè¿›è¡Œè½¬ä¹‰ã€‚å®ƒå¯ä»¥ç¡®ä¿åœ¨ä½ çš„åº”ç”¨ä¸­ï¼Œæ°¸è¿œä¸ä¼šæ³¨å…¥é‚£äº›å¹¶éè‡ªå·±æ˜ç¡®ç¼–å†™çš„å†…å®¹ã€‚æ‰€æœ‰çš„å†…å®¹åœ¨æ¸²æŸ“ä¹‹å‰éƒ½è¢«è½¬æ¢æˆäº†å­—ç¬¦ä¸²ã€‚\nJSX é‡Œçš„ class å˜æˆäº† className\næ·±å…¥äº†è§£ï¼šJSX ä»…ä»…åªæ˜¯ React.createElement(component, props, â€¦children) å‡½æ•°çš„è¯­æ³•ç³–ã€‚\nå¦‚ä¸‹JSXä»£ç ï¼š\n123&lt;MyButton color&#x3D;&quot;blue&quot; shadowSize&#x3D;&#123;2&#125;&gt;  Click Me&lt;&#x2F;MyButton&gt;\nä¼šç¼–è¯‘ä¸ºï¼š\n12345React.createElement(  MyButton,  &#123;color: &#39;blue&#39;, shadowSize: 2&#125;,  &#39;Click Me&#39;)\n\nå…ƒç´ å…ƒç´ æ˜¯æ„æˆ React åº”ç”¨çš„æœ€å°ç –å—ã€‚\nReact å…ƒç´ æ˜¯åˆ›å»ºå¼€é”€æå°çš„æ™®é€šå¯¹è±¡ã€‚React DOM ä¼šè´Ÿè´£æ›´æ–° DOM æ¥ä¸ React å…ƒç´ ä¿æŒä¸€è‡´ã€‚\nç»„ä»¶æ˜¯ç”±å…ƒç´ æ„æˆçš„ã€‚\nfalse, null, undefined, true æ˜¯åˆæ³•çš„å­å…ƒç´ ã€‚ä½†å®ƒä»¬å¹¶ä¸ä¼šè¢«æ¸²æŸ“ã€‚\nä»¥ä¸‹çš„ JSX è¡¨è¾¾å¼æ¸²æŸ“ç»“æœç›¸åŒï¼š\n1234567891011&lt;div &#x2F;&gt;&lt;div&gt;&lt;&#x2F;div&gt;&lt;div&gt;&#123;false&#125;&lt;&#x2F;div&gt;&lt;div&gt;&#123;null&#125;&lt;&#x2F;div&gt;&lt;div&gt;&#123;undefined&#125;&lt;&#x2F;div&gt;&lt;div&gt;&#123;true&#125;&lt;&#x2F;div&gt;\n\nç»„ä»¶ç»„ä»¶åç§°å¿…é¡»ä»¥å¤§å†™å­—æ¯å¼€å¤´(React ä¼šå°†ä»¥å°å†™å­—æ¯å¼€å¤´çš„ç»„ä»¶è§†ä¸ºåŸç”Ÿ DOM æ ‡ç­¾)\nå‡½æ•°ç»„ä»¶ï¼ˆä»¥å‰ç§°ä¹‹ä¸ºæ— çŠ¶æ€ç»„ä»¶ï¼Œä½†Hookå‡ºæ¥ä¹‹åå«ä¸ºå‡½æ•°ç»„ä»¶ï¼‰ï¼š\n123function Welcome(props) &#123;  return &lt;h1&gt;Hello, &#123;props.name&#125;&lt;&#x2F;h1&gt;;&#125;\n\nclassç»„ä»¶\n12345class Welcome extends React.Component &#123;  render() &#123;    return &lt;h1&gt;Hello, &#123;this.props.name&#125;&lt;&#x2F;h1&gt;;  &#125;&#125;\n\n\npropså½“ React å…ƒç´ ä¸ºç”¨æˆ·è‡ªå®šä¹‰ç»„ä»¶æ—¶ï¼Œå®ƒä¼šå°† JSX æ‰€æ¥æ”¶çš„å±æ€§ï¼ˆattributesï¼‰è½¬æ¢ä¸ºå•ä¸ªå¯¹è±¡ä¼ é€’ç»™ç»„ä»¶ï¼Œè¿™ä¸ªå¯¹è±¡è¢«ç§°ä¹‹ä¸º â€œpropsâ€ã€‚ç»„ä»¶æ— è®ºæ˜¯ä½¿ç”¨å‡½æ•°å£°æ˜è¿˜æ˜¯é€šè¿‡ class å£°æ˜ï¼Œéƒ½å†³ä¸èƒ½ä¿®æ”¹è‡ªèº«çš„ props\n12345678910111213141516&#x2F;&#x2F; è¿™æ®µä»£ç ä¼šåœ¨é¡µé¢ä¸Šæ¸²æŸ“ â€œHello, Saraâ€function Welcome(props) &#123;  return &lt;h1&gt;Hello, &#123;props.name&#125;&lt;&#x2F;h1&gt;;&#125;const element &#x3D; &lt;Welcome name&#x3D;&quot;Sara&quot; &#x2F;&gt;;ReactDOM.render(  element,  document.getElementById(&#39;root&#39;));&#x2F;&#x2F;ä¸Šæ®µä»£ç æ¸²æŸ“æ—¶å‘ç”Ÿäº†ä»€ä¹ˆï¼š  1. æˆ‘ä»¬è°ƒç”¨ ReactDOM.render() å‡½æ•°ï¼Œå¹¶ä¼ å…¥ &lt;Welcome name&#x3D;&quot;Sara&quot; &#x2F;&gt; ä½œä¸ºå‚æ•°ã€‚  2. React è°ƒç”¨ Welcome ç»„ä»¶ï¼Œå¹¶å°† &#123;name: &#39;Sara&#39;&#125; ä½œä¸º props ä¼ å…¥ã€‚  3. Welcome ç»„ä»¶å°† &lt;h1&gt;Hello, Sara&lt;&#x2F;h1&gt; å…ƒç´ ä½œä¸ºè¿”å›å€¼ã€‚  4. React DOM å°† DOM é«˜æ•ˆåœ°æ›´æ–°ä¸º &lt;h1&gt;Hello, Sara&lt;&#x2F;h1&gt;ã€‚\næœ‰å¤šç§æ–¹å¼å¯ä»¥åœ¨ JSX ä¸­æŒ‡å®š propsã€‚\nJavaScript è¡¨è¾¾å¼ä½œä¸º Props\nå­—ç¬¦ä¸²å­—é¢é‡\nprops é»˜è®¤å€¼ä¸ºtrue\nStateä½¿ç”¨this.setState()è®¾ç½®stateçš„å€¼\nthis.setState()å¯èƒ½æ˜¯å¼‚æ­¥çš„\nè°ƒç”¨this.setState()çš„æ—¶å€™ï¼ŒReact ä¼šæŠŠä½ æä¾›çš„å¯¹è±¡åˆå¹¶åˆ°å½“å‰çš„ stateã€‚\næ•°æ®æµreactæ˜¯å•å‘æ•°æ®æµï¼Œä»»ä½•çš„ state æ€»æ˜¯æ‰€å±äºç‰¹å®šçš„ç»„ä»¶ï¼Œè€Œä¸”ä»è¯¥ state æ´¾ç”Ÿçš„ä»»ä½•æ•°æ®æˆ– UI åªèƒ½å½±å“æ ‘ä¸­â€œä½äºâ€å®ƒä»¬çš„ç»„ä»¶ã€‚\nç”Ÿå‘½å‘¨æœŸåœ¨ V16 ç‰ˆæœ¬ä¸­å¼•å…¥äº† Fiber æœºåˆ¶ã€‚è¿™ä¸ªæœºåˆ¶ä¸€å®šç¨‹åº¦ä¸Šçš„å½±å“äº†éƒ¨åˆ†ç”Ÿå‘½å‘¨æœŸçš„è°ƒç”¨ï¼Œå¹¶ä¸”ä¹Ÿå¼•å…¥äº†æ–°çš„ 2 ä¸ª API æ¥è§£å†³é—®é¢˜ã€‚ï¼ˆFiber æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªè™šæ‹Ÿçš„å †æ ˆå¸§ï¼Œæ–°çš„è°ƒåº¦å™¨ä¼šæŒ‰ç…§ä¼˜å…ˆçº§è‡ªç”±è°ƒåº¦è¿™äº›å¸§ï¼Œä»è€Œå°†ä¹‹å‰çš„åŒæ­¥æ¸²æŸ“æ”¹æˆäº†å¼‚æ­¥æ¸²æŸ“ï¼Œåœ¨ä¸å½±å“ä½“éªŒçš„æƒ…å†µä¸‹å»åˆ†æ®µè®¡ç®—æ›´æ–°ã€‚åœ¨ä¹‹å‰çš„ç‰ˆæœ¬ä¸­ï¼Œå¦‚æœä½ æ‹¥æœ‰ä¸€ä¸ªå¾ˆå¤æ‚çš„å¤åˆç»„ä»¶ï¼Œç„¶åæ”¹åŠ¨äº†æœ€ä¸Šå±‚ç»„ä»¶çš„ stateï¼Œé‚£ä¹ˆè°ƒç”¨æ ˆå¯èƒ½ä¼šå¾ˆé•¿ï¼Œè°ƒç”¨æ ˆè¿‡é•¿ï¼Œå†åŠ ä¸Šä¸­é—´è¿›è¡Œäº†å¤æ‚çš„æ“ä½œï¼Œå°±å¯èƒ½å¯¼è‡´é•¿æ—¶é—´é˜»å¡ä¸»çº¿ç¨‹ï¼Œå¸¦æ¥ä¸å¥½çš„ç”¨æˆ·ä½“éªŒã€‚Fiber å°±æ˜¯ä¸ºäº†è§£å†³è¯¥é—®é¢˜è€Œç”Ÿã€‚ï¼‰\n1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556class ExampleComponent extends React.Component &#123;  &#x2F;&#x2F; ç”¨äºåˆå§‹åŒ– state  constructor(props) &#123;    super(props)    this.state &#x3D; &#123; hasError: false &#125;;  &#125;  &#x2F;&#x2F; ç”¨äºæ›¿æ¢ &#96;componentWillReceiveProps&#96; ï¼Œè¯¥å‡½æ•°ä¼šåœ¨åˆå§‹åŒ–å’Œ &#96;update&#96; æ—¶è¢«è°ƒç”¨  &#x2F;&#x2F; å› ä¸ºè¯¥å‡½æ•°æ˜¯é™æ€å‡½æ•°ï¼Œæ‰€ä»¥å–ä¸åˆ° &#96;this&#96;, å¦‚æœéœ€è¦å¯¹æ¯” &#96;prevProps&#96; éœ€è¦å•ç‹¬åœ¨ &#96;state&#96; ä¸­ç»´æŠ¤  &#x2F;&#x2F; å®ƒåº”è¿”å›ä¸€ä¸ªå¯¹è±¡æ¥æ›´æ–° state  static getDerivedStateFromProps(nextProps, prevState) &#123;&#125;  &#x2F;&#x2F; åˆ¤æ–­æ˜¯å¦éœ€è¦æ›´æ–°ç»„ä»¶ï¼Œå¤šç”¨äºç»„ä»¶æ€§èƒ½ä¼˜åŒ–  shouldComponentUpdate(nextProps, nextState) &#123;&#125;  &#x2F;&#x2F; ç»„ä»¶æŒ‚è½½åè°ƒç”¨  &#x2F;&#x2F; å¯ä»¥åœ¨è¯¥å‡½æ•°ä¸­è¿›è¡Œè¯·æ±‚æˆ–è€…è®¢é˜…  componentDidMount() &#123;&#125;  &#x2F;&#x2F; ç”¨äºæ›¿æ¢ componentWillUpdate ï¼Œè¯¥å‡½æ•°ä¼šåœ¨ update å DOM æ›´æ–°å‰è¢«è°ƒç”¨  &#x2F;&#x2F; ç”¨äºè¯»å–æœ€æ–°çš„ DOM æ•°æ®ã€‚  getSnapshotBeforeUpdate() &#123;&#125;  &#x2F;&#x2F; ç»„ä»¶å³å°†é”€æ¯  &#x2F;&#x2F; å¯ä»¥åœ¨æ­¤å¤„ç§»é™¤è®¢é˜…ï¼Œå®šæ—¶å™¨ç­‰ç­‰  componentWillUnmount() &#123;&#125;  &#x2F;&#x2F; ç»„ä»¶é”€æ¯åè°ƒç”¨  componentDidUnMount() &#123;&#125;  &#x2F;&#x2F; ç»„ä»¶æ›´æ–°åè°ƒç”¨  componentDidUpdate() &#123;&#125;  &#x2F;&#x2F; é”™è¯¯è¾¹ç•Œ - æ¸²æŸ“å¤‡ç”¨ UI  &#x2F;&#x2F; æ›´æ–° state ä½¿ä¸‹ä¸€æ¬¡æ¸²æŸ“èƒ½å¤Ÿæ˜¾ç¤ºé™çº§åçš„ UI  &#x2F;&#x2F; æ³¨æ„é”™è¯¯è¾¹ç•Œä»…å¯ä»¥æ•è·å…¶å­ç»„ä»¶çš„é”™è¯¯ï¼Œå®ƒæ— æ³•æ•è·å…¶è‡ªèº«çš„é”™è¯¯  static getDerivedStateFromError(error) &#123;    return &#123; hasError: true &#125;;  &#125;  &#x2F;&#x2F; é”™è¯¯è¾¹ç•Œ - æ‰“å°é”™è¯¯ä¿¡æ¯  &#x2F;&#x2F; ä½ åŒæ ·å¯ä»¥å°†é”™è¯¯æ—¥å¿—ä¸ŠæŠ¥ç»™æœåŠ¡å™¨  &#x2F;&#x2F; æ³¨æ„é”™è¯¯è¾¹ç•Œä»…å¯ä»¥æ•è·å…¶å­ç»„ä»¶çš„é”™è¯¯ï¼Œå®ƒæ— æ³•æ•è·å…¶è‡ªèº«çš„é”™è¯¯  componentDidCatch(error, info) &#123;    console.log(error, info);  &#125;  &#x2F;&#x2F; æ¸²æŸ“ç»„ä»¶å‡½æ•°  render() &#123;&#125;  &#x2F;&#x2F; ä»¥ä¸‹å‡½æ•°ä¸å»ºè®®ä½¿ç”¨  UNSAFE_componentWillMount() &#123;&#125;  UNSAFE_componentWillUpdate(nextProps, nextState) &#123;&#125;  &#x2F;&#x2F; æ¥æ”¶åˆ°æ–°çš„propsæ—¶è°ƒç”¨  UNSAFE_componentWillReceiveProps(nextProps) &#123;&#125;&#125;\nå¯¹äºå¼‚æ­¥æ¸²æŸ“ï¼Œç°åœ¨æ¸²æŸ“æœ‰ä¸¤ä¸ªé˜¶æ®µï¼šreconciliation å’Œ commit ã€‚å‰è€…è¿‡ç¨‹æ˜¯å¯ä»¥æ‰“æ–­çš„ï¼Œåè€…ä¸èƒ½æš‚åœï¼Œä¼šä¸€ç›´æ›´æ–°ç•Œé¢ç›´åˆ°å®Œæˆã€‚\nReconciliation é˜¶æ®µï¼šcomponentWillMount\ncomponentWillReceiveProps\nshouldComponentUpdate\ncomponentWillUpdate\n\nCommit é˜¶æ®µï¼šcomponentDidMount\ncomponentDidUpdate\ncomponentWillUnmount\n\nå› ä¸º reconciliation é˜¶æ®µæ˜¯å¯ä»¥è¢«æ‰“æ–­çš„ï¼Œæ‰€ä»¥ reconciliation é˜¶æ®µä¼šæ‰§è¡Œçš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°å°±å¯èƒ½ä¼šå‡ºç°è°ƒç”¨å¤šæ¬¡çš„æƒ…å†µï¼Œä»è€Œå¼•èµ· Bugã€‚æ‰€ä»¥å¯¹äº reconciliation é˜¶æ®µè°ƒç”¨çš„å‡ ä¸ªå‡½æ•°ï¼Œé™¤äº† shouldComponentUpdate ä»¥å¤–ï¼Œå…¶ä»–éƒ½åº”è¯¥é¿å…å»ä½¿ç”¨ã€‚\nV16.4ä»¥åç”Ÿå‘½å‘¨æœŸå›¾è§£ï¼ˆä¸åŒ…å«å®˜æ–¹ä¸å»ºè®®ä½¿ç”¨çš„ï¼‰\näº‹ä»¶å¤„ç†React äº‹ä»¶çš„å‘½åé‡‡ç”¨å°é©¼å³°å¼ï¼ˆcamelCaseï¼‰ï¼Œè€Œä¸æ˜¯çº¯å°å†™ã€‚\nä½¿ç”¨ JSX è¯­æ³•æ—¶ä½ éœ€è¦ä¼ å…¥ä¸€ä¸ªå‡½æ•°ä½œä¸ºäº‹ä»¶å¤„ç†å‡½æ•°ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚\nä¸ºJSXå†…æ—¶é—´ç»‘å®šthisçš„å‡ ç§æ–¹å¼ï¼š\nconstructorå†…å¤„ç†ï¼š123constructor() &#123;  this.handleClick &#x3D; this.handleClick.bind(this);&#125;\nJSXå†…ä½¿ç”¨bind:1&lt;button onClick&#x3D;&#123;this.handleClick.bind(this, id)&#125;&gt;Delete Row&lt;&#x2F;button&gt;\nç®­å¤´å‡½æ•°ï¼š1&lt;button onClick&#x3D;&#123;() &#x3D;&gt; this.handleClick(id)&#125;&gt;Delete Row&lt;&#x2F;button&gt;\n\n\nkeykey å¸®åŠ© React è¯†åˆ«å“ªäº›å…ƒç´ æ”¹å˜äº†ï¼Œæ¯”å¦‚è¢«æ·»åŠ æˆ–åˆ é™¤ã€‚å› æ­¤ä½ åº”å½“ç»™æ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ èµ‹äºˆä¸€ä¸ªç¡®å®šçš„æ ‡è¯†ã€‚key åªæ˜¯åœ¨å…„å¼ŸèŠ‚ç‚¹ä¹‹é—´å¿…é¡»å”¯ä¸€\nå—æ§ç»„ä»¶ä½¿ React çš„ state æˆä¸ºâ€œå”¯ä¸€æ•°æ®æºâ€ã€‚æ¸²æŸ“è¡¨å•çš„ React ç»„ä»¶è¿˜æ§åˆ¶ç€ç”¨æˆ·è¾“å…¥è¿‡ç¨‹ä¸­è¡¨å•å‘ç”Ÿçš„æ“ä½œã€‚è¢« React ä»¥è¿™ç§æ–¹å¼æ§åˆ¶å–å€¼çš„è¡¨å•è¾“å…¥å…ƒç´ å°±å«åšå—æ§ç»„ä»¶ã€‚\néå—æ§ç»„ä»¶è¡¨å•æ•°æ®å°†äº¤ç”± DOM èŠ‚ç‚¹æ¥å¤„ç†ã€‚ä½¿ç”¨éå—æ§ç»„ä»¶æ—¶å¦‚æœæƒ³èµ‹äºˆç»„ä»¶ä¸€ä¸ªåˆå§‹å€¼ï¼Œä½†æ˜¯ä¸å»æ§åˆ¶åç»­çš„æ›´æ–°ã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹, ä½ å¯ä»¥æŒ‡å®šä¸€ä¸ª defaultValue å±æ€§ï¼Œè€Œä¸æ˜¯ valueã€‚\n&lt;input type=&quot;file&quot; /&gt; å§‹ç»ˆæ˜¯ä¸€ä¸ªéå—æ§ç»„ä»¶\nè¿›é˜¶redux-adcanve\n","plink":"https://www.hansomezao.com/2019/12/10/note/01.react-basic/"},{"title":"05.redux-saga","date":"2019-12-10T05:39:02.000Z","date_formatted":{"ll":"2019å¹´12æœˆ10æ—¥","L":"2019/12/10","MM-DD":"12-10"},"author":"zao","updated":"2019-12-10T05:39:02.000Z","content":"redux-sagaä»‹ç»ï¼š  åœ¨ redux-saga çš„ä¸–ç•Œé‡Œï¼Œæ‰€æœ‰çš„ä»»åŠ¡éƒ½é€šç”¨ yield Effects æ¥å®Œæˆï¼ˆEffect å¯ä»¥çœ‹ä½œæ˜¯ redux-saga çš„ä»»åŠ¡å•å…ƒï¼‰\n\nåè¯é‡Šä¹‰ï¼šEffectï¼šä¸€ä¸ª effect å°±æ˜¯ä¸€ä¸ª Plain Object JavaScript å¯¹è±¡ï¼ŒåŒ…å«ä¸€äº›å°†è¢« saga middleware æ‰§è¡Œçš„æŒ‡ä»¤ã€‚ä½¿ç”¨ redux-saga æä¾›çš„å·¥å‚å‡½æ•°æ¥åˆ›å»º effectã€‚ä¸€ä¸ª Saga æ‰€åšçš„å®é™…ä¸Šæ˜¯ç»„åˆé‚£äº›æ‰€æœ‰çš„ Effectï¼Œå…±åŒå®ç°æ‰€éœ€çš„æ§åˆ¶æµã€‚ æœ€ç®€å•çš„ä¾‹å­æ˜¯ç›´æ¥æŠŠ yield ä¸€ä¸ªæ¥ä¸€ä¸ªåœ°æ”¾ç½®æ¥å¯¹åºåˆ—åŒ– yield Effectã€‚ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ç†Ÿæ‚‰çš„æ§åˆ¶æµæ“ä½œç¬¦ï¼ˆif, while, forï¼‰ æ¥å®ç°æ›´å¤æ‚çš„æ§åˆ¶æµã€‚\n\næ ¸å¿ƒAPI:Saga è¾…åŠ©å‡½æ•°:takeEveryå…è®¸å¤šä¸ªå®ä¾‹åŒæ—¶å¯åŠ¨\n\ntakeLateståœ¨ä»»ä½•æ—¶åˆ» takeLatest åªå…è®¸æ‰§è¡Œä¸€ä¸ªä»»åŠ¡ï¼Œå¹¶ä¸”è¿™ä¸ªä»»åŠ¡æ˜¯æœ€åè¢«å¯åŠ¨çš„é‚£ä¸ªï¼Œå¦‚æœä¹‹å‰å·²ç»æœ‰ä¸€ä¸ªä»»åŠ¡åœ¨æ‰§è¡Œï¼Œé‚£ä¹‹å‰çš„è¿™ä¸ªä»»åŠ¡ä¼šè‡ªåŠ¨è¢«å–æ¶ˆ\n\n\nEffect Creatorstake(pattern)takeå‡½æ•°å¯ä»¥ç†è§£ä¸ºç›‘å¬æœªæ¥çš„actionï¼Œå®ƒåˆ›å»ºäº†ä¸€ä¸ªå‘½ä»¤å¯¹è±¡ï¼Œå‘Šè¯‰middlewareç­‰å¾…ä¸€ä¸ªç‰¹å®šçš„actionï¼Œ Generatorä¼šæš‚åœï¼Œç›´åˆ°ä¸€ä¸ªä¸patternåŒ¹é…çš„actionè¢«å‘èµ·ï¼Œæ‰ä¼šç»§ç»­æ‰§è¡Œä¸‹é¢çš„è¯­å¥ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œtakeæ˜¯ä¸€ä¸ªé˜»å¡çš„ effectã€‚take è®©æˆ‘ä»¬é€šè¿‡å…¨é¢æ§åˆ¶ action è§‚å¯Ÿè¿›ç¨‹æ¥æ„å»ºå¤æ‚çš„æ§åˆ¶æµæˆä¸ºå¯èƒ½ã€‚\n\nput(action)putå‡½æ•°æ˜¯ç”¨æ¥å‘é€actionçš„ effectï¼Œä½ å¯ä»¥ç®€å•çš„æŠŠå®ƒç†è§£æˆä¸ºreduxæ¡†æ¶ä¸­çš„dispatchå‡½æ•°ï¼Œå½“putä¸€ä¸ªactionåï¼Œreducerä¸­å°±ä¼šè®¡ç®—æ–°çš„stateå¹¶è¿”å›ï¼Œæ³¨æ„ï¼š put ä¹Ÿæ˜¯é˜»å¡ effect\n\ncall(fn, â€¦args)callå‡½æ•°ä½ å¯ä»¥æŠŠå®ƒç®€å•çš„ç†è§£ä¸ºå°±æ˜¯å¯ä»¥è°ƒç”¨å…¶ä»–å‡½æ•°çš„å‡½æ•°ï¼Œå®ƒå‘½ä»¤ middleware æ¥è°ƒç”¨fn å‡½æ•°ï¼Œ argsä¸ºå‡½æ•°çš„å‚æ•°ï¼Œæ³¨æ„ï¼š fn å‡½æ•°å¯ä»¥æ˜¯ä¸€ä¸ª Generator å‡½æ•°ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªè¿”å› Promise çš„æ™®é€šå‡½æ•°ï¼Œcall å‡½æ•°ä¹Ÿæ˜¯é˜»å¡ effect\n\nselect(selector, â€¦args)select å‡½æ•°æ˜¯ç”¨æ¥æŒ‡ç¤º middlewareè°ƒç”¨æä¾›çš„é€‰æ‹©å™¨è·å–Storeä¸Šçš„stateæ•°æ®ï¼Œä½ ä¹Ÿå¯ä»¥ç®€å•çš„æŠŠå®ƒç†è§£ä¸ºreduxæ¡†æ¶ä¸­è·å–storeä¸Šçš„ stateæ•°æ®ä¸€æ ·çš„åŠŸèƒ½ ï¼šstore.getState()\n\nfork(fn, â€¦args)fork å‡½æ•°å’Œ call å‡½æ•°å¾ˆåƒï¼Œéƒ½æ˜¯ç”¨æ¥è°ƒç”¨å…¶ä»–å‡½æ•°çš„ï¼Œä½†æ˜¯forkå‡½æ•°æ˜¯éé˜»å¡å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œç¨‹åºæ‰§è¡Œå®Œ yield fork(fnï¼Œ args) è¿™ä¸€è¡Œä»£ç åï¼Œä¼šç«‹å³æ¥ç€æ‰§è¡Œä¸‹ä¸€è¡Œä»£ç è¯­å¥ï¼Œè€Œä¸ä¼šç­‰å¾…fnå‡½æ•°è¿”å›ç»“æœåï¼Œåœ¨æ‰§è¡Œä¸‹é¢çš„è¯­å¥\n\ncancel(task)ä¸€æ—¦ä»»åŠ¡è¢« forkï¼Œå¯ä»¥ä½¿ç”¨ yield cancel(task) æ¥ä¸­æ­¢ä»»åŠ¡æ‰§è¡Œï¼Œä½¿ç”¨ yield cancelled() æ¥æ£€æŸ¥ Generator æ˜¯å¦å·²ç»è¢«å–æ¶ˆã€‚å–æ¶ˆæ­£åœ¨è¿è¡Œçš„ä»»åŠ¡ã€‚å–æ¶ˆæ¥å£è¯·æ±‚ï¼ˆraceä¹Ÿå¯ä»¥å®ç°ç±»ä¼¼å–æ¶ˆåŠŸèƒ½ï¼‰\n\n\ncreateSagaMiddleware()createSagaMiddleware å‡½æ•°æ˜¯ç”¨æ¥åˆ›å»ºä¸€ä¸ª Redux ä¸­é—´ä»¶ï¼Œå°† Sagas ä¸ Redux Store é“¾æ¥èµ·æ¥ã€‚sagas ä¸­çš„æ¯ä¸ªå‡½æ•°éƒ½å¿…é¡»è¿”å›ä¸€ä¸ª Generator å¯¹è±¡ï¼Œmiddleware ä¼šè¿­ä»£è¿™ä¸ª Generator å¹¶æ‰§è¡Œæ‰€æœ‰ yield åçš„ Effectï¼ˆEffect å¯ä»¥çœ‹ä½œæ˜¯ redux-saga çš„ä»»åŠ¡å•å…ƒï¼‰\n\nmiddleware.run(sagas, â€¦args)åŠ¨æ€æ‰§è¡Œsagasï¼Œç”¨äºapplyMiddlewareé˜¶æ®µä¹‹åæ‰§è¡Œsagas\n\n\né”™è¯¯å¤„ç†ï¼šæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç†Ÿæ‚‰çš„ try/catch è¯­æ³•åœ¨ Saga ä¸­æ•è·é”™è¯¯ã€‚\n\nç¤ºä¾‹é¡¹ç›®:ğŸ’¯tiger-react-cli\n","plink":"https://www.hansomezao.com/2019/12/10/note/05.redux-saga/"},{"title":"jså¸¸ç”¨å°æŠ€å·§","date":"2019-12-10T05:39:02.000Z","date_formatted":{"ll":"2019å¹´12æœˆ10æ—¥","L":"2019/12/10","MM-DD":"12-10"},"author":"zao","updated":"2019-12-10T05:39:02.000Z","content":"å°æ•°å–æ•´ï¼š\n11.234 | 0\n\n1~~1.234\n\n11.234 &gt;&gt; 0\n\nå¦™ç”¨éšå¼è½¬æ¢ï¼š\n\nå­—ç¬¦ä¸²è½¬number:\n\n1+'123'\n\n\nnew Dateè½¬æ—¶é—´æˆ³ï¼š\n\n1+new Date()\n\n\næ•°ç»„/å¤šç»´æ•°ç»„è½¬ä¸ºé€—å·åˆ†éš”å­—ç¬¦ä¸²(å¯ç”¨äºå¤šç»´æ•°ç»„è½¬ä¸€ç»´)ï¼š\n\n1\"\"+[1, 2 , 3, 3, [2, 3, 4]]\n\nè§£æ„ï¼š\n\näº¤æ¢a,bçš„å€¼ï¼š\n\n1234var a=1;var b=2;[a, b] = [b, a];console.log(a, b);\n\næ‰©å±•è¿ç®—ç¬¦ï¼š\n\nå–æ•°ç»„æœ€å¤§å€¼/æœ€å°å€¼ï¼š\n\n12Math.max(...[1,2,3])Math.min(...[1,2,3])\n\n\nç”Ÿæˆæ—¶é—´ï¼š\n\n1new Date(...[2018,6,4])\n\n\nå­—ç¬¦ä¸²è½¬æ•°ç»„ï¼š\n\n12345method 1: [...'string']method 2: Array.from('string')\n\n\nåˆå¹¶å¯¹è±¡ï¼š\n\n123456let obj1 = &#123;a:1, b:2&#125;;let obj2 = &#123;b:3, c:4&#125;;&#123;...obj1, ...obj2&#125;  ç­‰åŒäºObject.assign(obj1, obj2)\n\nå¸¸ç”¨æ–¹æ³•ï¼š\n\næ•°å­—å‰è¡¥0ï¼š\n\n123function preFixNum(num, length) &#123;  return (Array(length).join('0') + num).slice(-length);&#125;\n\n\næ•°ç»„å…ƒç´ ä¸ºå¯¹è±¡çš„å»é‡ï¼š\n\n1[...new Set(arr.map(v =&gt; JSON.stringify(v)))].map(v =&gt; JSON.parse(v))\n\n\næ•°ç»„æ±‚å’Œï¼š\n\n1234567var arr = [1,2,3,4,5];method 1: var sum = eval(arr.join('+'));method 2: var sum = arr.reduce((prev,cur) =&gt; prev + cur);\n\n\né‡‘é’±æ ¼å¼åŒ–(åƒåˆ†)ï¼š\n\n12345678910let money = 11111;method 1: money.toLocaleString('en-US');method 2: Intl.NumberFormat().format(money);method 3: String(money).replace(/\\B(?=(\\d&#123;3&#125;)+(?!\\d))/g, ',');\n\n\nçŸ­è·¯é€»è¾‘ä»£æ›¿ifï¼š\n\n1isTrue &amp;&amp; console.log(1);\n\n\nRGB to Hexï¼š\n\n123function RGBtoHEX(rgb)&#123;  return ((1&lt;&lt;24) + (rgb.r&lt;&lt;16) + (rgb.g&lt;&lt;8) + rgb.b).toString(16).substr(1);&#125;\n\n\nå»¶æ—¶å‡½æ•°:\n\n1const delay &#x3D; ms &#x3D;&gt; new Promise(resolve &#x3D;&gt; setTimeout(resolve, ms))\n\n\nç”ŸæˆæŒ‡å®šé•¿åº¦æ•°ç»„ï¼š\n\n1Array.from(new Array(10).keys());\næ­£åˆ™è¿›é˜¶ï¼š\n\næ•è·æ‹¬å·ï¼š\n\n12åŒ¹é… 'tigerHee' å¹¶ä¸”è®°ä½åŒ¹é…é¡¹/(tigerHee)/\n\n\néæ•è·æ‹¬å·ï¼š\n\n12åŒ¹é… 'tigerHee' ä½†æ˜¯ä¸è®°ä½åŒ¹é…é¡¹/(?:tigerHee)/\n\n\nå…ˆè¡Œæ–­è¨€ï¼š\n\n12åŒ¹é…'tiger'ä»…ä»…å½“'tiger'åé¢è·Ÿç€'Hee'/tiger(?=Hee)/\n\n\nåè¡Œæ–­è¨€ï¼š\n\n12åŒ¹é…'Hee'ä»…ä»…å½“'Hee'å‰é¢æ˜¯'tiger'/(?&lt;=tiger)Hee/\n\n\næ­£å‘å¦å®šæŸ¥æ‰¾ï¼š\n\n12åŒ¹é…'tiger'ä»…ä»…å½“'tiger'åé¢ä¸è·Ÿç€'java'/tiger(?!java)/\n\n\n\n","plink":"https://www.hansomezao.com/2019/12/10/note/jså¸¸ç”¨å°æŠ€å·§/"},{"title":"httpå¸¸è§æ¶ˆæ¯å¤´","date":"2019-12-06T10:30:37.000Z","date_formatted":{"ll":"2019å¹´12æœˆ6æ—¥","L":"2019/12/06","MM-DD":"12-06"},"author":"zao","updated":"2019-12-06T10:30:37.000Z","content":"HTTPæ¶ˆæ¯å¤´ï¼ˆHTTP headersï¼‰ï¼å¸¸ç”¨çš„HTTPè¯·æ±‚å¤´ä¸å“åº”å¤´HTTPæ¶ˆæ¯å¤´æ˜¯æŒ‡ï¼Œåœ¨è¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼ˆ Hypertext Transfer Protocol ï¼ŒHTTPï¼‰çš„è¯·æ±‚å’Œå“åº”æ¶ˆæ¯ä¸­ï¼Œåè®®å¤´éƒ¨åˆ†çš„é‚£äº›ç»„ä»¶ã€‚HTTPæ¶ˆæ¯å¤´ç”¨æ¥å‡†ç¡®æè¿°æ­£åœ¨è·å–çš„èµ„æºã€æœåŠ¡å™¨æˆ–è€…å®¢æˆ·ç«¯çš„è¡Œä¸ºï¼Œå®šä¹‰äº†HTTPäº‹åŠ¡ä¸­çš„å…·ä½“æ“ä½œå‚æ•°ã€‚\nå…³äºHTTPæ¶ˆæ¯å¤´\nå¸¸ç”¨çš„HTTPè¯·æ±‚å¤´\nå¸¸ç”¨çš„HTTPå“åº”å¤´\n1. å…³äºHTTPæ¶ˆæ¯å¤´HTTPæ¶ˆæ¯å¤´æ˜¯åœ¨ï¼Œå®¢æˆ·ç«¯è¯·æ±‚ï¼ˆRequestï¼‰æˆ–æœåŠ¡å™¨å“åº”ï¼ˆResponseï¼‰æ—¶ä¼ é€’çš„ï¼Œä½è¯·æ±‚æˆ–å“åº”çš„ç¬¬ä¸€è¡Œï¼ŒHTTPæ¶ˆæ¯ä½“ï¼ˆè¯·æ±‚æˆ–å“åº”çš„å†…å®¹ï¼‰æ˜¯å…¶åä¼ è¾“ã€‚HTTPæ¶ˆæ¯å¤´ï¼Œä»¥æ˜æ–‡çš„å­—ç¬¦ä¸²æ ¼å¼ä¼ é€ï¼Œæ˜¯ä»¥å†’å·åˆ†éš”çš„é”®/å€¼å¯¹ï¼Œå¦‚ï¼šAccept-Charset: utf-8ï¼Œæ¯ä¸€ä¸ªæ¶ˆæ¯å¤´æœ€åä»¥å›è½¦ç¬¦(CR)å’Œæ¢è¡Œç¬¦(LF)ç»“å°¾ã€‚HTTPæ¶ˆæ¯å¤´ç»“æŸåï¼Œä¼šç”¨ä¸€ä¸ªç©ºç™½çš„å­—æ®µæ¥æ ‡è¯†ï¼Œè¿™æ ·å°±ä¼šå‡ºç°ä¸¤ä¸ªè¿ç»­çš„CR-LFã€‚\nHTTPæ¶ˆæ¯å¤´ç”±IANAï¼ˆThe Internet Assigned Numbers Authorityï¼Œäº’è”ç½‘æ•°å­—åˆ†é…æœºæ„ï¼‰æ¥æ•´ç†å’Œç»´æŠ¤ã€‚å…¶æ ‡å‡†æœ€æ—©æ¥æºäºRFC 4229ã€‚IANAå°†å…¶æ•´ç†åˆ°äº†æ¶ˆæ¯å¤´æ–‡æ¡£ï¼Œæ–‡æ¡£ä¸­è¿˜åŒ…æ‹¬äº†ä¸€äº›æ–°æå‡ºçš„ä¿¡æ¯å¤´ã€‚\nHTTPæ¶ˆæ¯å¤´æ”¯æŒè‡ªå®šä¹‰ï¼Œ è‡ªå®šä¹‰çš„ä¸“ç”¨æ¶ˆæ¯å¤´ä¸€èˆ¬ä¼šæ·»åŠ &#39;X-&#39;å‰ç¼€ã€‚\n2. å¸¸ç”¨çš„HTTPè¯·æ±‚å¤´\nåè®®å¤´è¯´æ˜ç¤ºä¾‹çŠ¶æ€\n\nAcceptå¯æ¥å—çš„å“åº”å†…å®¹ç±»å‹ï¼ˆContent-Typesï¼‰ã€‚Accept: text/plainå›ºå®š\n\nAccept-Charsetå¯æ¥å—çš„å­—ç¬¦é›†Accept-Charset: utf-8å›ºå®š\n\nAccept-Encodingå¯æ¥å—çš„å“åº”å†…å®¹çš„ç¼–ç æ–¹å¼ã€‚Accept-Encoding: gzip, deflateå›ºå®š\n\nAccept-Languageå¯æ¥å—çš„å“åº”å†…å®¹è¯­è¨€åˆ—è¡¨ã€‚Accept-Language: en-USå›ºå®š\n\nAccept-Datetimeå¯æ¥å—çš„æŒ‰ç…§æ—¶é—´æ¥è¡¨ç¤ºçš„å“åº”å†…å®¹ç‰ˆæœ¬Accept-Datetime: Sat, 26 Dec 2015 17:30:00 GMTä¸´æ—¶\n\nAuthorizationç”¨äºè¡¨ç¤ºHTTPåè®®ä¸­éœ€è¦è®¤è¯èµ„æºçš„è®¤è¯ä¿¡æ¯Authorization: Basic OSdjJGRpbjpvcGVuIANlc2SdDE==å›ºå®š\n\nCache-Controlç”¨æ¥æŒ‡å®šå½“å‰çš„è¯·æ±‚/å›å¤ä¸­çš„ï¼Œæ˜¯å¦ä½¿ç”¨ç¼“å­˜æœºåˆ¶ã€‚Cache-Control: no-cacheå›ºå®š\n\nConnectionå®¢æˆ·ç«¯ï¼ˆæµè§ˆå™¨ï¼‰æƒ³è¦ä¼˜å…ˆä½¿ç”¨çš„è¿æ¥ç±»å‹Connection: keep-alive``Connection: Upgradeå›ºå®š\n\nCookieç”±ä¹‹å‰æœåŠ¡å™¨é€šè¿‡Set-Cookieï¼ˆè§ä¸‹æ–‡ï¼‰è®¾ç½®çš„ä¸€ä¸ªHTTPåè®®CookieCookie: $Version=1; Skin=new;å›ºå®šï¼šæ ‡å‡†\n\nContent-Lengthä»¥8è¿›åˆ¶è¡¨ç¤ºçš„è¯·æ±‚ä½“çš„é•¿åº¦Content-Length: 348å›ºå®š\n\nContent-MD5è¯·æ±‚ä½“çš„å†…å®¹çš„äºŒè¿›åˆ¶ MD5 æ•£åˆ—å€¼ï¼ˆæ•°å­—ç­¾åï¼‰ï¼Œä»¥ Base64 ç¼–ç çš„ç»“æœContent-MD5: oD8dH2sgSW50ZWdyaIEd9D==åºŸå¼ƒ\n\nContent-Typeè¯·æ±‚ä½“çš„MIMEç±»å‹ ï¼ˆç”¨äºPOSTå’ŒPUTè¯·æ±‚ä¸­ï¼‰Content-Type: application/x-www-form-urlencodedå›ºå®š\n\nDateå‘é€è¯¥æ¶ˆæ¯çš„æ—¥æœŸå’Œæ—¶é—´ï¼ˆä»¥RFC 7231ä¸­å®šä¹‰çš„â€HTTPæ—¥æœŸâ€æ ¼å¼æ¥å‘é€ï¼‰Date: Dec, 26 Dec 2015 17:30:00 GMTå›ºå®š\n\nExpectè¡¨ç¤ºå®¢æˆ·ç«¯è¦æ±‚æœåŠ¡å™¨åšå‡ºç‰¹å®šçš„è¡Œä¸ºExpect: 100-continueå›ºå®š\n\nFromå‘èµ·æ­¤è¯·æ±‚çš„ç”¨æˆ·çš„é‚®ä»¶åœ°å€From: user@itbilu.comå›ºå®š\n\nHostè¡¨ç¤ºæœåŠ¡å™¨çš„åŸŸåä»¥åŠæœåŠ¡å™¨æ‰€ç›‘å¬çš„ç«¯å£å·ã€‚å¦‚æœæ‰€è¯·æ±‚çš„ç«¯å£æ˜¯å¯¹åº”çš„æœåŠ¡çš„æ ‡å‡†ç«¯å£ï¼ˆ80ï¼‰ï¼Œåˆ™ç«¯å£å·å¯ä»¥çœç•¥ã€‚Host: www.itbilu.com:80``Host: www.itbilu.comå›ºå®š\n\nIf-Matchä»…å½“å®¢æˆ·ç«¯æä¾›çš„å®ä½“ä¸æœåŠ¡å™¨ä¸Šå¯¹åº”çš„å®ä½“ç›¸åŒ¹é…æ—¶ï¼Œæ‰è¿›è¡Œå¯¹åº”çš„æ“ä½œã€‚ä¸»è¦ç”¨äºåƒ PUT è¿™æ ·çš„æ–¹æ³•ä¸­ï¼Œä»…å½“ä»ç”¨æˆ·ä¸Šæ¬¡æ›´æ–°æŸä¸ªèµ„æºåï¼Œè¯¥èµ„æºæœªè¢«ä¿®æ”¹çš„æƒ…å†µä¸‹ï¼Œæ‰æ›´æ–°è¯¥èµ„æºã€‚If-Match: â€œ9jd00cdj34pss9ejqiw39d82f20d0ikdâ€å›ºå®š\n\nIf-Modified-Sinceå…è®¸åœ¨å¯¹åº”çš„èµ„æºæœªè¢«ä¿®æ”¹çš„æƒ…å†µä¸‹è¿”å›304æœªä¿®æ”¹If-Modified-Since: Dec, 26 Dec 2015 17:30:00 GMTå›ºå®š\n\nIf-None-Matchå…è®¸åœ¨å¯¹åº”çš„å†…å®¹æœªè¢«ä¿®æ”¹çš„æƒ…å†µä¸‹è¿”å›304æœªä¿®æ”¹ï¼ˆ 304 Not Modified ï¼‰ï¼Œå‚è€ƒ è¶…æ–‡æœ¬ä¼ è¾“åè®® çš„å®ä½“æ ‡è®°If-None-Match: â€œ9jd00cdj34pss9ejqiw39d82f20d0ikdâ€å›ºå®š\n\nIf-Rangeå¦‚æœè¯¥å®ä½“æœªè¢«ä¿®æ”¹è¿‡ï¼Œåˆ™å‘è¿”å›æ‰€ç¼ºå°‘çš„é‚£ä¸€ä¸ªæˆ–å¤šä¸ªéƒ¨åˆ†ã€‚å¦åˆ™ï¼Œè¿”å›æ•´ä¸ªæ–°çš„å®ä½“If-Range: â€œ9jd00cdj34pss9ejqiw39d82f20d0ikdâ€å›ºå®š\n\nIf-Unmodified-Sinceä»…å½“è¯¥å®ä½“è‡ªæŸä¸ªç‰¹å®šæ—¶é—´ä»¥æ¥æœªè¢«ä¿®æ”¹çš„æƒ…å†µä¸‹ï¼Œæ‰å‘é€å›åº”ã€‚If-Unmodified-Since: Dec, 26 Dec 2015 17:30:00 GMTå›ºå®š\n\nMax-Forwardsé™åˆ¶è¯¥æ¶ˆæ¯å¯è¢«ä»£ç†åŠç½‘å…³è½¬å‘çš„æ¬¡æ•°ã€‚Max-Forwards: 10å›ºå®š\n\nOriginå‘èµ·ä¸€ä¸ªé’ˆå¯¹è·¨åŸŸèµ„æºå…±äº«çš„è¯·æ±‚ï¼ˆè¯¥è¯·æ±‚è¦æ±‚æœåŠ¡å™¨åœ¨å“åº”ä¸­åŠ å…¥ä¸€ä¸ªAccess-Control-Allow-Originçš„æ¶ˆæ¯å¤´ï¼Œè¡¨ç¤ºè®¿é—®æ§åˆ¶æ‰€å…è®¸çš„æ¥æºï¼‰ã€‚Origin: http://www.itbilu.comå›ºå®š: æ ‡å‡†\n\nPragmaä¸å…·ä½“çš„å®ç°ç›¸å…³ï¼Œè¿™äº›å­—æ®µå¯èƒ½åœ¨è¯·æ±‚/å›åº”é“¾ä¸­çš„ä»»ä½•æ—¶å€™äº§ç”Ÿã€‚Pragma: no-cacheå›ºå®š\n\nProxy-Authorizationç”¨äºå‘ä»£ç†è¿›è¡Œè®¤è¯çš„è®¤è¯ä¿¡æ¯ã€‚Proxy-Authorization: Basic IOoDZRgDOi0vcGVuIHNlNidJi2==å›ºå®š\n\nRangeè¡¨ç¤ºè¯·æ±‚æŸä¸ªå®ä½“çš„ä¸€éƒ¨åˆ†ï¼Œå­—èŠ‚åç§»ä»¥0å¼€å§‹ã€‚Range: bytes=500-999å›ºå®š\n\nRefererè¡¨ç¤ºæµè§ˆå™¨æ‰€è®¿é—®çš„å‰ä¸€ä¸ªé¡µé¢ï¼Œå¯ä»¥è®¤ä¸ºæ˜¯ä¹‹å‰è®¿é—®é¡µé¢çš„é“¾æ¥å°†æµè§ˆå™¨å¸¦åˆ°äº†å½“å‰é¡µé¢ã€‚Refererå…¶å®æ˜¯Referrerè¿™ä¸ªå•è¯ï¼Œä½†RFCåˆ¶ä½œæ ‡å‡†æ—¶ç»™æ‹¼é”™äº†ï¼Œåæ¥ä¹Ÿå°±å°†é”™å°±é”™ä½¿ç”¨Refereräº†ã€‚Referer: http://itbilu.com/nodejså›ºå®š\n\nTEæµè§ˆå™¨é¢„æœŸæ¥å—çš„ä¼ è¾“æ—¶çš„ç¼–ç æ–¹å¼ï¼šå¯ä½¿ç”¨å›åº”åè®®å¤´Transfer-Encodingä¸­çš„å€¼ï¼ˆè¿˜å¯ä»¥ä½¿ç”¨â€trailersâ€è¡¨ç¤ºæ•°æ®ä¼ è¾“æ—¶çš„åˆ†å—æ–¹å¼ï¼‰ç”¨æ¥è¡¨ç¤ºæµè§ˆå™¨å¸Œæœ›åœ¨æœ€åä¸€ä¸ªå¤§å°ä¸º0çš„å—ä¹‹åè¿˜æ¥æ”¶åˆ°ä¸€äº›é¢å¤–çš„å­—æ®µã€‚TE: trailers,deflateå›ºå®š\n\nUser-Agentæµè§ˆå™¨çš„èº«ä»½æ ‡è¯†å­—ç¬¦ä¸²User-Agent: Mozilla/â€¦â€¦å›ºå®š\n\nUpgradeè¦æ±‚æœåŠ¡å™¨å‡çº§åˆ°ä¸€ä¸ªé«˜ç‰ˆæœ¬åè®®ã€‚Upgrade: HTTP/2.0, SHTTP/1.3, IRC/6.9, RTA/x11å›ºå®š\n\nViaå‘Šè¯‰æœåŠ¡å™¨ï¼Œè¿™ä¸ªè¯·æ±‚æ˜¯ç”±å“ªäº›ä»£ç†å‘å‡ºçš„ã€‚Via: 1.0 fred, 1.1 itbilu.com.com (Apache/1.1)å›ºå®š\n\nWarningä¸€ä¸ªä¸€èˆ¬æ€§çš„è­¦å‘Šï¼Œè¡¨ç¤ºåœ¨å®ä½“å†…å®¹ä½“ä¸­å¯èƒ½å­˜åœ¨é”™è¯¯ã€‚Warning: 199 Miscellaneous warningå›ºå®š\n3. å¸¸ç”¨çš„HTTPå“åº”å¤´\nå“åº”å¤´è¯´æ˜ç¤ºä¾‹çŠ¶æ€\n\nAccess-Control-Allow-OriginæŒ‡å®šå“ªäº›ç½‘ç«™å¯ä»¥è·¨åŸŸæºèµ„æºå…±äº«Access-Control-Allow-Origin: *ä¸´æ—¶\n\nAccept-PatchæŒ‡å®šæœåŠ¡å™¨æ‰€æ”¯æŒçš„æ–‡æ¡£è¡¥ä¸æ ¼å¼Accept-Patch: text/example;charset=utf-8å›ºå®š\n\nAccept-RangesæœåŠ¡å™¨æ‰€æ”¯æŒçš„å†…å®¹èŒƒå›´Accept-Ranges: byteså›ºå®š\n\nAgeå“åº”å¯¹è±¡åœ¨ä»£ç†ç¼“å­˜ä¸­å­˜åœ¨çš„æ—¶é—´ï¼Œä»¥ç§’ä¸ºå•ä½Age: 12å›ºå®š\n\nAllowå¯¹äºç‰¹å®šèµ„æºçš„æœ‰æ•ˆåŠ¨ä½œ;Allow: GET, HEADå›ºå®š\n\nCache-Controlé€šçŸ¥ä»æœåŠ¡å™¨åˆ°å®¢æˆ·ç«¯å†…çš„æ‰€æœ‰ç¼“å­˜æœºåˆ¶ï¼Œè¡¨ç¤ºå®ƒä»¬æ˜¯å¦å¯ä»¥ç¼“å­˜è¿™ä¸ªå¯¹è±¡åŠç¼“å­˜æœ‰æ•ˆæ—¶é—´ã€‚å…¶å•ä½ä¸ºç§’Cache-Control: max-age=3600å›ºå®š\n\nConnectioné’ˆå¯¹è¯¥è¿æ¥æ‰€é¢„æœŸçš„é€‰é¡¹Connection: closeå›ºå®š\n\nContent-Dispositionå¯¹å·²çŸ¥MIMEç±»å‹èµ„æºçš„æè¿°ï¼Œæµè§ˆå™¨å¯ä»¥æ ¹æ®è¿™ä¸ªå“åº”å¤´å†³å®šæ˜¯å¯¹è¿”å›èµ„æºçš„åŠ¨ä½œï¼Œå¦‚ï¼šå°†å…¶ä¸‹è½½æˆ–æ˜¯æ‰“å¼€ã€‚Content-Disposition: attachment; filename=â€fname.extâ€å›ºå®š\n\nContent-Encodingå“åº”èµ„æºæ‰€ä½¿ç”¨çš„ç¼–ç ç±»å‹ã€‚Content-Encoding: gzipå›ºå®š\n\nContent-Languageå“å°±å†…å®¹æ‰€ä½¿ç”¨çš„è¯­è¨€Content-Language: zh-cnå›ºå®š\n\nContent-Lengthå“åº”æ¶ˆæ¯ä½“çš„é•¿åº¦ï¼Œç”¨8è¿›åˆ¶å­—èŠ‚è¡¨ç¤ºContent-Length: 348å›ºå®š\n\nContent-Locationæ‰€è¿”å›çš„æ•°æ®çš„ä¸€ä¸ªå€™é€‰ä½ç½®Content-Location: /index.htmå›ºå®š\n\nContent-MD5å“åº”å†…å®¹çš„äºŒè¿›åˆ¶ MD5 æ•£åˆ—å€¼ï¼Œä»¥ Base64 æ–¹å¼ç¼–ç Content-MD5: IDK0iSsgSW50ZWd0DiJUi==å·²æ·˜æ±°\n\nContent-Rangeå¦‚æœæ˜¯å“åº”éƒ¨åˆ†æ¶ˆæ¯ï¼Œè¡¨ç¤ºå±äºå®Œæ•´æ¶ˆæ¯çš„å“ªä¸ªéƒ¨åˆ†Content-Range: bytes 21010-47021/47022å›ºå®š\n\nContent-Typeå½“å‰å†…å®¹çš„MIMEç±»å‹Content-Type: text/html; charset=utf-8å›ºå®š\n\nDateæ­¤æ¡æ¶ˆæ¯è¢«å‘é€æ—¶çš„æ—¥æœŸå’Œæ—¶é—´(ä»¥RFC 7231ä¸­å®šä¹‰çš„â€HTTPæ—¥æœŸâ€æ ¼å¼æ¥è¡¨ç¤º)Date: Tue, 15 Nov 1994 08:12:31 GMTå›ºå®š\n\nETagå¯¹äºæŸä¸ªèµ„æºçš„æŸä¸ªç‰¹å®šç‰ˆæœ¬çš„ä¸€ä¸ªæ ‡è¯†ç¬¦ï¼Œé€šå¸¸æ˜¯ä¸€ä¸ª æ¶ˆæ¯æ•£åˆ—ETag: â€œ737060cd8c284d8af7ad3082f209582dâ€å›ºå®š\n\nExpiresæŒ‡å®šä¸€ä¸ªæ—¥æœŸ/æ—¶é—´ï¼Œè¶…è¿‡è¯¥æ—¶é—´åˆ™è®¤ä¸ºæ­¤å›åº”å·²ç»è¿‡æœŸExpires: Thu, 01 Dec 1994 16:00:00 GMTå›ºå®š: æ ‡å‡†\n\nLast-Modifiedæ‰€è¯·æ±‚çš„å¯¹è±¡çš„æœ€åä¿®æ”¹æ—¥æœŸ(æŒ‰ç…§ RFC 7231 ä¸­å®šä¹‰çš„â€œè¶…æ–‡æœ¬ä¼ è¾“åè®®æ—¥æœŸâ€æ ¼å¼æ¥è¡¨ç¤º)Last-Modified: Dec, 26 Dec 2015 17:30:00 GMTå›ºå®š\n\nLinkç”¨æ¥è¡¨ç¤ºä¸å¦ä¸€ä¸ªèµ„æºä¹‹é—´çš„ç±»å‹å…³ç³»ï¼Œæ­¤ç±»å‹å…³ç³»æ˜¯åœ¨RFC 5988ä¸­å®šä¹‰Link:; rel=â€alternateâ€å›ºå®š\n\nLocationç”¨äºåœ¨è¿›è¡Œé‡å®šå‘ï¼Œæˆ–åœ¨åˆ›å»ºäº†æŸä¸ªæ–°èµ„æºæ—¶ä½¿ç”¨ã€‚Location: http://www.itbilu.com/nodejså›ºå®š\n\nP3PP3Pç­–ç•¥ç›¸å…³è®¾ç½®P3P: CP=â€This is not a P3P policy!å›ºå®š\n\nPragmaä¸å…·ä½“çš„å®ç°ç›¸å…³ï¼Œè¿™äº›å“åº”å¤´å¯èƒ½åœ¨è¯·æ±‚/å›åº”é“¾ä¸­çš„ä¸åŒæ—¶å€™äº§ç”Ÿä¸åŒçš„æ•ˆæœPragma: no-cacheå›ºå®š\n\nProxy-Authenticateè¦æ±‚åœ¨è®¿é—®ä»£ç†æ—¶æä¾›èº«ä»½è®¤è¯ä¿¡æ¯ã€‚Proxy-Authenticate: Basicå›ºå®š\n\nPublic-Key-Pinsç”¨äºé˜²æ­¢ä¸­é—´æ”»å‡»ï¼Œå£°æ˜ç½‘ç«™è®¤è¯ä¸­ä¼ è¾“å±‚å®‰å…¨åè®®çš„è¯ä¹¦æ•£åˆ—å€¼Public-Key-Pins: max-age=2592000; pin-sha256=â€â€¦â€¦â€;å›ºå®š\n\nRefreshç”¨äºé‡å®šå‘ï¼Œæˆ–è€…å½“ä¸€ä¸ªæ–°çš„èµ„æºè¢«åˆ›å»ºæ—¶ã€‚é»˜è®¤ä¼šåœ¨5ç§’ååˆ·æ–°é‡å®šå‘ã€‚Refresh: 5; url=http://itbilu.com\n\nRetry-Afterå¦‚æœæŸä¸ªå®ä½“ä¸´æ—¶ä¸å¯ç”¨ï¼Œé‚£ä¹ˆæ­¤åè®®å¤´ç”¨äºå‘ŠçŸ¥å®¢æˆ·ç«¯ç¨åé‡è¯•ã€‚å…¶å€¼å¯ä»¥æ˜¯ä¸€ä¸ªç‰¹å®šçš„æ—¶é—´æ®µ(ä»¥ç§’ä¸ºå•ä½)æˆ–ä¸€ä¸ªè¶…æ–‡æœ¬ä¼ è¾“åè®®æ—¥æœŸã€‚ç¤ºä¾‹1:Retry-After: 120ç¤ºä¾‹2: Retry-After: Dec, 26 Dec 2015 17:30:00 GMTå›ºå®š\n\nServeræœåŠ¡å™¨çš„åç§°Server: nginx/1.6.3å›ºå®š\n\nSet-Cookieè®¾ç½®HTTP cookieSet-Cookie: UserID=itbilu; Max-Age=3600; Version=1å›ºå®š: æ ‡å‡†\n\nStatusé€šç”¨ç½‘å…³æ¥å£çš„å“åº”å¤´å­—æ®µï¼Œç”¨æ¥è¯´æ˜å½“å‰HTTPè¿æ¥çš„å“åº”çŠ¶æ€ã€‚Status: 200 OK\n\nTrailerTrailerç”¨æˆ·è¯´æ˜ä¼ è¾“ä¸­åˆ†å—ç¼–ç çš„ç¼–ç ä¿¡æ¯Trailer: Max-Forwardså›ºå®š\n\nTransfer-Encodingç”¨è¡¨ç¤ºå®ä½“ä¼ è¾“ç»™ç”¨æˆ·çš„ç¼–ç å½¢å¼ã€‚åŒ…æ‹¬ï¼šchunkedã€compressã€ deflateã€gzipã€identityã€‚Transfer-Encoding: chunkedå›ºå®š\n\nUpgradeè¦æ±‚å®¢æˆ·ç«¯å‡çº§åˆ°å¦ä¸€ä¸ªé«˜ç‰ˆæœ¬åè®®ã€‚Upgrade: HTTP/2.0, SHTTP/1.3, IRC/6.9, RTA/x11å›ºå®š\n\nVaryå‘ŠçŸ¥ä¸‹æ¸¸çš„ä»£ç†æœåŠ¡å™¨ï¼Œåº”å½“å¦‚ä½•å¯¹ä»¥åçš„è¯·æ±‚åè®®å¤´è¿›è¡ŒåŒ¹é…ï¼Œä»¥å†³å®šæ˜¯å¦å¯ä½¿ç”¨å·²ç¼“å­˜çš„å“åº”å†…å®¹è€Œä¸æ˜¯é‡æ–°ä»åŸæœåŠ¡å™¨è¯·æ±‚æ–°çš„å†…å®¹ã€‚Vary: *å›ºå®š\n\nViaå‘ŠçŸ¥ä»£ç†æœåŠ¡å™¨çš„å®¢æˆ·ç«¯ï¼Œå½“å‰å“åº”æ˜¯é€šè¿‡ä»€ä¹ˆé€”å¾„å‘é€çš„ã€‚Via: 1.0 fred, 1.1 itbilu.com (nginx/1.6.3)å›ºå®š\n\nWarningä¸€èˆ¬æ€§è­¦å‘Šï¼Œå‘ŠçŸ¥åœ¨å®ä½“å†…å®¹ä½“ä¸­å¯èƒ½å­˜åœ¨é”™è¯¯ã€‚Warning: 199 Miscellaneous warningå›ºå®š\n\nWWW-Authenticateè¡¨ç¤ºåœ¨è¯·æ±‚è·å–è¿™ä¸ªå®ä½“æ—¶åº”å½“ä½¿ç”¨çš„è®¤è¯æ¨¡å¼ã€‚WWW-Authenticate: Basicå›ºå®š\n","plink":"https://www.hansomezao.com/2019/12/06/note/httpå¸¸è§æ¶ˆæ¯å¤´/"},{"title":"08.Reactæºç å­¦ä¹ -commit","date":"2019-12-02T02:25:29.000Z","date_formatted":{"ll":"2019å¹´12æœˆ2æ—¥","L":"2019/12/02","MM-DD":"12-02"},"author":"zao","updated":"2019-12-02T02:25:29.000Z","content":"commité¦–å…ˆè¦æ ‡è®°ä¼˜å…ˆçº§ï¼Œå› ä¸ºæœ‰ä¸€éƒ¨åˆ†ä¼˜å…ˆçº§çš„ä»»åŠ¡å·²ç»è¢«æäº¤äº†ï¼Œæ‰€ä»¥éœ€è¦æ¸…æ¥šä¸€äº›ç›¸å…³çš„ä¼˜å…ˆçº§ã€‚è¢«æäº¤çš„ä»»åŠ¡åº”è¯¥æ˜¯ï¼š\nå­æ ‘ä¸­ä¼˜å…ˆçº§æœ€é«˜çš„ä»»åŠ¡\næˆ–è€…å¤–éƒ¨æŒ‡å®šçš„ä¼˜å…ˆçº§ï¼ˆflushSyncæˆ–è€…retryï¼‰\nå¦‚æœ RootFiber æœ¬èº«ä¹Ÿæœ‰å‰¯ä½œç”¨ï¼ˆä¸€èˆ¬åªæœ‰ç¬¬ä¸€æ¬¡ï¼‰ï¼Œé‚£ä¹ˆä»–æœ¬èº«ä¹Ÿè¦åŠ åˆ° effect é“¾ä¸Šï¼Œæ”¾åœ¨æœ€åã€‚æ¥ä¸‹å»æ˜¯ä¸‰ä¸ªæäº¤æ“ä½œï¼Œåˆ†åˆ«æ˜¯:\næäº¤Snapshot\næäº¤HostComponentçš„ side effect`\næäº¤æ‰€æœ‰ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ\n123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187function commitRoot(root: FiberRoot, finishedWork: Fiber): void &#123;  isWorking &#x3D; true  isCommitting &#x3D; true  startCommitTimer()  invariant(    root.current !&#x3D;&#x3D; finishedWork,    &#39;Cannot commit the same tree as before. This is probably a bug &#39; +      &#39;related to the return field. This error is likely caused by a bug &#39; +      &#39;in React. Please file an issue.&#39;,  )  const committedExpirationTime &#x3D; root.pendingCommitExpirationTime  invariant(    committedExpirationTime !&#x3D;&#x3D; NoWork,    &#39;Cannot commit an incomplete root. This error is likely caused by a &#39; +      &#39;bug in React. Please file an issue.&#39;,  )  root.pendingCommitExpirationTime &#x3D; NoWork  const updateExpirationTimeBeforeCommit &#x3D; finishedWork.expirationTime  const childExpirationTimeBeforeCommit &#x3D; finishedWork.childExpirationTime  const earliestRemainingTimeBeforeCommit &#x3D;    updateExpirationTimeBeforeCommit &#x3D;&#x3D;&#x3D; NoWork ||    (childExpirationTimeBeforeCommit !&#x3D;&#x3D; NoWork &amp;&amp;      childExpirationTimeBeforeCommit &lt; updateExpirationTimeBeforeCommit)      ? childExpirationTimeBeforeCommit      : updateExpirationTimeBeforeCommit  markCommittedPriorityLevels(root, earliestRemainingTimeBeforeCommit)  let prevInteractions: Set&lt;Interaction&gt; &#x3D; (null: any)  &#x2F;&#x2F; Reset this to null before calling lifecycles  ReactCurrentOwner.current &#x3D; null  let firstEffect  if (finishedWork.effectTag &gt; PerformedWork) &#123;    &#x2F;&#x2F; A fiber&#39;s effect list consists only of its children, not itself. So if    &#x2F;&#x2F; the root has an effect, we need to add it to the end of the list. The    &#x2F;&#x2F; resulting list is the set that would belong to the root&#39;s parent, if    &#x2F;&#x2F; it had one; that is, all the effects in the tree including the root.    if (finishedWork.lastEffect !&#x3D;&#x3D; null) &#123;      finishedWork.lastEffect.nextEffect &#x3D; finishedWork      firstEffect &#x3D; finishedWork.firstEffect    &#125; else &#123;      firstEffect &#x3D; finishedWork    &#125;  &#125; else &#123;    &#x2F;&#x2F; There is no effect on the root.    firstEffect &#x3D; finishedWork.firstEffect  &#125;  prepareForCommit(root.containerInfo)  &#x2F;&#x2F; Invoke instances of getSnapshotBeforeUpdate before mutation.  nextEffect &#x3D; firstEffect  startCommitSnapshotEffectsTimer()  while (nextEffect !&#x3D;&#x3D; null) &#123;    let didError &#x3D; false    let error    if (__DEV__) &#123;      invokeGuardedCallback(null, commitBeforeMutationLifecycles, null)      if (hasCaughtError()) &#123;        didError &#x3D; true        error &#x3D; clearCaughtError()      &#125;    &#125; else &#123;      try &#123;        commitBeforeMutationLifecycles()      &#125; catch (e) &#123;        didError &#x3D; true        error &#x3D; e      &#125;    &#125;    if (didError) &#123;      invariant(        nextEffect !&#x3D;&#x3D; null,        &#39;Should have next effect. This error is likely caused by a bug &#39; +          &#39;in React. Please file an issue.&#39;,      )      captureCommitPhaseError(nextEffect, error)      &#x2F;&#x2F; Clean-up      if (nextEffect !&#x3D;&#x3D; null) &#123;        nextEffect &#x3D; nextEffect.nextEffect      &#125;    &#125;  &#125;  stopCommitSnapshotEffectsTimer()  nextEffect &#x3D; firstEffect  startCommitHostEffectsTimer()  while (nextEffect !&#x3D;&#x3D; null) &#123;    let didError &#x3D; false    let error    if (__DEV__) &#123;      invokeGuardedCallback(null, commitAllHostEffects, null)      if (hasCaughtError()) &#123;        didError &#x3D; true        error &#x3D; clearCaughtError()      &#125;    &#125; else &#123;      try &#123;        commitAllHostEffects()      &#125; catch (e) &#123;        didError &#x3D; true        error &#x3D; e      &#125;    &#125;    if (didError) &#123;      invariant(        nextEffect !&#x3D;&#x3D; null,        &#39;Should have next effect. This error is likely caused by a bug &#39; +          &#39;in React. Please file an issue.&#39;,      )      captureCommitPhaseError(nextEffect, error)      &#x2F;&#x2F; Clean-up      if (nextEffect !&#x3D;&#x3D; null) &#123;        nextEffect &#x3D; nextEffect.nextEffect      &#125;    &#125;  &#125;  stopCommitHostEffectsTimer()  resetAfterCommit(root.containerInfo)  root.current &#x3D; finishedWork  nextEffect &#x3D; firstEffect  startCommitLifeCyclesTimer()  while (nextEffect !&#x3D;&#x3D; null) &#123;    let didError &#x3D; false    let error    if (__DEV__) &#123;      invokeGuardedCallback(        null,        commitAllLifeCycles,        null,        root,        committedExpirationTime,      )      if (hasCaughtError()) &#123;        didError &#x3D; true        error &#x3D; clearCaughtError()      &#125;    &#125; else &#123;      try &#123;        commitAllLifeCycles(root, committedExpirationTime)      &#125; catch (e) &#123;        didError &#x3D; true        error &#x3D; e      &#125;    &#125;    if (didError) &#123;      invariant(        nextEffect !&#x3D;&#x3D; null,        &#39;Should have next effect. This error is likely caused by a bug &#39; +          &#39;in React. Please file an issue.&#39;,      )      captureCommitPhaseError(nextEffect, error)      if (nextEffect !&#x3D;&#x3D; null) &#123;        nextEffect &#x3D; nextEffect.nextEffect      &#125;    &#125;  &#125;  isCommitting &#x3D; false  isWorking &#x3D; false  stopCommitLifeCyclesTimer()  stopCommitTimer()  onCommitRoot(finishedWork.stateNode)  const updateExpirationTimeAfterCommit &#x3D; finishedWork.expirationTime  const childExpirationTimeAfterCommit &#x3D; finishedWork.childExpirationTime  const earliestRemainingTimeAfterCommit &#x3D;    updateExpirationTimeAfterCommit &#x3D;&#x3D;&#x3D; NoWork ||    (childExpirationTimeAfterCommit !&#x3D;&#x3D; NoWork &amp;&amp;      childExpirationTimeAfterCommit &lt; updateExpirationTimeAfterCommit)      ? childExpirationTimeAfterCommit      : updateExpirationTimeAfterCommit  if (earliestRemainingTimeAfterCommit &#x3D;&#x3D;&#x3D; NoWork) &#123;    &#x2F;&#x2F; If there&#39;s no remaining work, we can clear the set of already failed    &#x2F;&#x2F; error boundaries.    legacyErrorBoundariesThatAlreadyFailed &#x3D; null  &#125;  onCommit(root, earliestRemainingTimeAfterCommit)  &#x2F;&#x2F; profiler ç›¸å…³&#125;","plink":"https://www.hansomezao.com/2019/12/02/note/08-Reactæºç å­¦ä¹ -commit/"},{"title":"07.Reactæºç å­¦ä¹ -beginWork","date":"2019-12-01T07:25:29.000Z","date_formatted":{"ll":"2019å¹´12æœˆ1æ—¥","L":"2019/12/01","MM-DD":"12-01"},"author":"zao","updated":"2019-12-01T07:25:29.000Z","content":"beginWorkæ‰§è¡Œå¯¹æ•´æ£µæ ‘çš„æ¯ä¸€ä¸ªèŠ‚ç‚¹è¿›è¡Œæ›´æ–°çš„æ“ä½œï¼ˆperformUnitOfWorkå†…è°ƒç”¨beginWorkï¼‰\næºç åœ¨ react-reconciler ä¸‹çš„ ReactFiberBeginWork.js å†…ï¼š\nbeginWork()æ–¹æ³•é‡Œé€šè¿‡ switch (workInProgress.tag)å¯¹ä¸åŒçš„ç»„ä»¶åšä¸åŒçš„æ›´æ–°å¤„ç†ï¼š\nä¸‹é¢çœ‹çœ‹ä¸åŒç»„ä»¶çš„æ›´æ–°ï¼š\nå‡ºç°é¢‘ç‡å¾ˆé«˜çš„ä¸€ä¸ªåˆ¤æ–­ current === null ç”¨äºåˆ¤æ–­ç»„ä»¶æ˜¯å¦æ˜¯ç¬¬ä¸€æ¬¡æ¸²æŸ“ã€‚\n1.FunctionComponent1234567891011121314151617181920212223242526272829function updateFunctionComponent(  current,  workInProgress,  Component,  nextProps: any,  renderExpirationTime,) &#123;  &#x2F;&#x2F; æ­¤å¤„å»æ‰__DEV__ä»£ç   const unmaskedContext &#x3D; getUnmaskedContext(workInProgress, Component, true);  const context &#x3D; getMaskedContext(workInProgress, unmaskedContext);  let nextChildren;  prepareToReadContext(workInProgress, renderExpirationTime);  prepareToUseHooks(current, workInProgress, renderExpirationTime);  if (__DEV__) &#123;    &#x2F;&#x2F; æ­¤å¤„å»æ‰__DEV__ä»£ç   &#125; else &#123;    nextChildren &#x3D; Component(nextProps, context);  &#125;  nextChildren &#x3D; finishHooks(Component, nextProps, nextChildren, context);  &#x2F;&#x2F; React DevTools reads this flag.  workInProgress.effectTag |&#x3D; PerformedWork;  reconcileChildren(    current,    workInProgress,    nextChildren,    renderExpirationTime,  );  return workInProgress.child;&#125;\nè°ƒç”¨Componentæ—¶ä¼ å…¥äº†ä¸¤ä¸ªå€¼nextPropså’Œcontext, é‚£ä¹ˆå‡½æ•°ç»„ä»¶å¯ä»¥ç›´æ¥é€šè¿‡ç¬¬äºŒä¸ªå‚æ•°æ‹¿åˆ°contextï¼Œå®˜æ–¹æ–‡æ¡£æ²¡æœ‰è¯´æ˜è¿‡è¿™ç‚¹ã€‚\n2.ClassComponent12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879function updateClassComponent(  current: Fiber | null,  workInProgress: Fiber,  Component: any,  nextProps,  renderExpirationTime: ExpirationTime,) &#123;  if (__DEV__) &#123;    &#x2F;&#x2F; å»æ‰__DEV__ä»£ç   &#125;  &#x2F;&#x2F; Push context providers early to prevent context stack mismatches.  &#x2F;&#x2F; During mounting we don&#39;t know the child context yet as the instance doesn&#39;t exist.  &#x2F;&#x2F; We will invalidate the child context in finishClassComponent() right after rendering.  let hasContext;  if (isLegacyContextProvider(Component)) &#123;    hasContext &#x3D; true;    pushLegacyContextProvider(workInProgress);  &#125; else &#123;    hasContext &#x3D; false;  &#125;  prepareToReadContext(workInProgress, renderExpirationTime);  const instance &#x3D; workInProgress.stateNode;  let shouldUpdate;  if (instance &#x3D;&#x3D;&#x3D; null) &#123;    if (current !&#x3D;&#x3D; null) &#123;      &#x2F;&#x2F; An class component without an instance only mounts if it suspended      &#x2F;&#x2F; inside a non- concurrent tree, in an inconsistent state. We want to      &#x2F;&#x2F; tree it like a new mount, even though an empty version of it already      &#x2F;&#x2F; committed. Disconnect the alternate pointers.      current.alternate &#x3D; null;      workInProgress.alternate &#x3D; null;      &#x2F;&#x2F; Since this is conceptually a new fiber, schedule a Placement effect      workInProgress.effectTag |&#x3D; Placement;    &#125;    &#x2F;&#x2F; In the initial pass we might need to construct the instance.    constructClassInstance(      workInProgress,      Component,      nextProps,      renderExpirationTime,    );    mountClassInstance(      workInProgress,      Component,      nextProps,      renderExpirationTime,    );    shouldUpdate &#x3D; true;  &#125; else if (current &#x3D;&#x3D;&#x3D; null) &#123;    &#x2F;&#x2F; In a resume, we&#39;ll already have an instance we can reuse.    shouldUpdate &#x3D; resumeMountClassInstance(      workInProgress,      Component,      nextProps,      renderExpirationTime,    );  &#125; else &#123;    shouldUpdate &#x3D; updateClassInstance(      current,      workInProgress,      Component,      nextProps,      renderExpirationTime,    );  &#125;  const nextUnitOfWork &#x3D; finishClassComponent(    current,    workInProgress,    Component,    shouldUpdate,    hasContext,    renderExpirationTime,  );  if (__DEV__) &#123;    &#x2F;&#x2F; å»æ‰__DEV__ä»£ç   &#125;  return nextUnitOfWork;&#125;\n\nå¼€å§‹æ˜¯å¯¹contextçš„æ“ä½œï¼Œå› ä¸ºClassComponentå¯ä»¥æˆä¸ºcontext providerã€‚\ncurrent === nullåªä¼šå‡ºç°åœ¨ç¬¬ä¸€æ¬¡æ¸²æŸ“çš„æ—¶å€™ï¼Œå› ä¸ºä¼šå…ˆåˆ›å»ºworkInProcessï¼Œåœ¨æ¸²æŸ“ç»“æŸä¹‹åæ‰ä¼šæŠŠworkInProcessæ‹·è´æˆcurrentï¼Œä»£è¡¨ç€ç¬¬ä¸€æ¬¡æ¸²æŸ“ç»“æŸã€‚è€Œåé¢ä¹Ÿä¼šå‡ºç°æ ¹æ®current === nullæ¥åˆ¤æ–­æ˜¯å¦éœ€è¦è°ƒç”¨componentDidMountçš„ä»£ç \nåœ¨è¿™é‡Œå¦‚æœcurrent === nullå°±è¡Œè¦è¿›è¡Œå®ä¾‹çš„æ„å»ºå·¥ä½œï¼Œå¦‚æœä¸æ˜¯ï¼Œç›´æ¥updateClassInstance\nå¦‚æœæ˜¯è¿˜è¦åˆ¤æ–­å®ä¾‹æ˜¯å¦å·²ç»åˆ›å»ºworkInProgress.stateNode === nullï¼Œå¦‚æœæ˜¯çš„è¯è¦åˆ›å»ºè¿™ä¸ªå®ä¾‹ï¼Œé€šè¿‡constructClassInstance(ä»£ç åœ¨åŒçº§çš„ReactFiberClassComponent.jså†…ï¼Œè¿™ä¸ªæ–¹æ³•è°ƒç”¨adoptClassInstanceç»™ ClassComponent çš„å®ä¾‹æŒ‚è½½ä¸€ä¸ªupdaterå¯¹è±¡ï¼Œé‡Œé¢åŒ…å«æˆ‘ä»¬å¸¸ç”¨çš„æ–¹æ³•ï¼šforceUpdate, replaceState, setState)ï¼Œå¹¶ä¸”æŒ‚è½½å®ä¾‹mountClassInstanceï¼ˆåˆå§‹åŒ– propsã€state ç­‰å®ä¾‹å±æ€§ï¼Œå¦‚æœæœ‰updateQueueå°±æ›´æ–°ä¹‹ï¼Œä¸€èˆ¬æ¥è¯´ç¬¬ä¸€æ¬¡æ¸²æŸ“æ˜¯æ²¡æœ‰çš„ã€‚ï¼‰\nå¦‚æœå·²ç»æœ‰currentåˆ™è°ƒç”¨updateClassInstance\næœ€åè°ƒç”¨finishClassComponent\n3.IndeterminateComponentFunctionalComponentåœ¨å«æœ‰renderæ–¹æ³•æ—¶ä¼šè¢«å½“åšClassComponentæ¥å¤„ç†\n12345678910export default ()&#x3D;&gt;&#123;  return &#123;    componentDidMount() &#123;      console.log(&#39;Indeterminate&#39;)    &#125;,    render() &#123;      return &lt;div&gt;Indeterminate&lt;&#x2F;div&gt;    &#125;,  &#125;&#125;\n4.HostComponentåŸç”Ÿçš„htmlæ ‡ç­¾ï¼ˆcompleteWorké˜¶æ®µå°±æ˜¯ä»HostComponentå¼€å§‹é€†ç€Fiberè¾“å¾€å›return Fiber,å¹¶åœ¨HostComponentä¸Šè¿›è¡Œè™šæ‹ŸDOMçš„diffåˆ¤æ–­æ¯”è¾ƒpropsï¼‰\nreconcileChildrenä¸åŒç±»å‹çš„ç»„ä»¶æ›´æ–°æœ€åéƒ½ä¼šè°ƒç”¨æ­¤æ–¹æ³•\næ ¹æ®props.childrenç”ŸæˆFiberå­æ ‘\nåˆ¤æ–­Fiberå¯¹è±¡æ˜¯å¦å¯ä»¥å¤ç”¨\nåˆ—è¡¨æ ¹æ®keyä¼˜åŒ–\n12345678910111213141516171819202122export function reconcileChildren(  current: Fiber | null,  workInProgress: Fiber,  nextChildren: any,  renderExpirationTime: ExpirationTime,) &#123;  if (current &#x3D;&#x3D;&#x3D; null) &#123;    workInProgress.child &#x3D; mountChildFibers(      workInProgress,      null,      nextChildren,      renderExpirationTime,    );  &#125; else &#123;    workInProgress.child &#x3D; reconcileChildFibers(      workInProgress,      current.child,      nextChildren,      renderExpirationTime,    );  &#125;&#125;\næŸ¥çœ‹ä¸Šé¢ä¸¤ç§ä¸åŒè°ƒç”¨çš„æ–¹æ³•å¼•å…¥:\n12345import &#123;  mountChildFibers,  reconcileChildFibers,  cloneChildFibers,&#125; from &#39;.&#x2F;ReactChildFiber&#39;;\nç„¶åå»ReactChildFiber.jså†…æŸ¥çœ‹æ–¹æ³•å®šä¹‰ï¼šmountChildFiberså’ŒreconcileChildFibersæ–¹æ³•æ˜¯ä¸€æ ·çš„ï¼Œå”¯ä¸€çš„åŒºåˆ«æ˜¯ç”Ÿæˆè¿™ä¸ªæ–¹æ³•çš„æ—¶å€™çš„ä¸€ä¸ªå‚æ•°ä¸åŒ\n12export const reconcileChildFibers &#x3D; ChildReconciler(true);export const mountChildFibers &#x3D; ChildReconciler(false);\nè¿™ä¸ªå‚æ•°å«shouldTrackSideEffectsï¼Œä»–çš„ä½œç”¨æ˜¯åˆ¤æ–­æ˜¯å¦è¦å¢åŠ ä¸€äº›effectTagï¼Œä¸»è¦æ˜¯ç”¨æ¥ä¼˜åŒ–åˆæ¬¡æ¸²æŸ“çš„\n123if (shouldTrackSideEffects &amp;&amp; newFiber.alternate &#x3D;&#x3D;&#x3D; null) &#123;  newFiber.effectTag &#x3D; Placement&#125;\nChildReconcileræœ€ç»ˆè°ƒç”¨çš„æ˜¯reconcileChildFibers:\n12345678910function ChildReconciler(shouldTrackSideEffects) &#123;  &#x2F;&#x2F; çœç•¥å…¶ä»–ä»£ç   function reconcileChildFibers(    returnFiber: Fiber,    currentFirstChild: Fiber | null,    newChild: any,    expirationTime: ExpirationTime,  ): Fiber | null &#123;&#125;  return reconcileChildFibers;&#125;\nreconcileChildFibersä¼šæ ¹æ®newChildçš„ä¸åŒç±»å‹è¿›è¡Œå¯¹åº”çš„å¤„ç†ï¼Œæœ€ç»ˆçš„è¿”å›æ˜¯å½“å‰èŠ‚ç‚¹çš„ç¬¬ä¸€ä¸ªå­©å­èŠ‚ç‚¹ï¼Œä¼šåœ¨performUnitWorkä¸­ return å¹¶èµ‹å€¼ç»™nextUnitOfWorkã€‚\nchildrençš„åˆæ³•ç±»å‹ï¼š\nReactElementï¼Œé€šè¿‡createElementå’ŒReactDOM.createPortalåˆ›å»ºï¼Œ$$typeofä¸åŒ\nstringæˆ–è€…numberï¼Œabcä¸­divçš„childrenå°±æ˜¯â€abcâ€\n[// renderAble]æ•°ç»„ï¼Œæ¯ä¸€é¡¹éƒ½å¯ä»¥æ˜¯å…¶ä»–åˆæ³•ç±»å‹ï¼Œä¸èƒ½åµŒå¥—\nIteratorï¼Œè·Ÿæ•°ç»„ç±»ä¼¼ï¼Œåªæ˜¯éå†æ–¹å¼ä¸åŒ\nReact.ConcurrentModeè¿™äº›å†…ç½®ç»„ä»¶ï¼Œæœ€ç»ˆä¼šè½¬æ¢æˆReactElementï¼Œä¸åŒçš„æ˜¯ReactElement.type\nreconcileSingleElement &amp; reconcileSinglePortal &amp; reconcileSingleTextNode\nreconcileChildrenArray &amp; reconcileChildrenArray\n","plink":"https://www.hansomezao.com/2019/12/01/note/07-Reactæºç å­¦ä¹ -beginWork/"},{"title":"06.Reactæºç å­¦ä¹ -ä»»åŠ¡è°ƒåº¦","date":"2019-11-30T08:28:29.000Z","date_formatted":{"ll":"2019å¹´11æœˆ30æ—¥","L":"2019/11/30","MM-DD":"11-30"},"author":"zao","updated":"2019-11-30T08:28:29.000Z","content":"ä»»åŠ¡è°ƒåº¦ä»»åŠ¡è°ƒåº¦å›¾è§£ï¼š\n\næºç åœ¨ react-reconciler ä¸‹çš„ ReactFiberScheduler.js å†…ï¼š\nscheduleWork:12345678910111213141516171819202122232425262728293031323334353637383940414243function scheduleWork(fiber: Fiber, expirationTime: ExpirationTime) &#123;    &#x2F;&#x2F; æ›´æ–°FiberåŠæ‰€æœ‰å­æ ‘çš„expirationTimeï¼Œ    &#x2F;&#x2F; è¿”å›FiberRoot  const root &#x3D; scheduleWorkToRoot(fiber, expirationTime);  if (root &#x3D;&#x3D;&#x3D; null) &#123;    &#x2F;&#x2F; å»æ‰__DEV__ä»£ç     return;  &#125;  if (    !isWorking &amp;&amp;    nextRenderExpirationTime !&#x3D;&#x3D; NoWork &amp;&amp;    expirationTime &gt; nextRenderExpirationTime  ) &#123;    &#x2F;&#x2F; This is an interruption. (Used for performance tracking.)    interruptedBy &#x3D; fiber;    &#x2F;&#x2F; ä¼˜å…ˆæ‰§è¡Œé«˜ä¼˜å…ˆçº§çš„ä»»åŠ¡    resetStack();  &#125;  markPendingPriorityLevel(root, expirationTime);  if (    &#x2F;&#x2F; If we&#39;re in the render phase, we don&#39;t need to schedule this root    &#x2F;&#x2F; for an update, because we&#39;ll do it before we exit...    !isWorking ||    isCommitting ||    &#x2F;&#x2F; ...unless this is a different root than the one we&#39;re rendering.    nextRoot !&#x3D;&#x3D; root  ) &#123;    const rootExpirationTime &#x3D; root.expirationTime;    requestWork(root, rootExpirationTime);  &#125;  if (nestedUpdateCount &gt; NESTED_UPDATE_LIMIT) &#123;    &#x2F;&#x2F; Reset this back to zero so subsequent updates don&#39;t throw.    &#x2F;&#x2F; é˜²æ­¢æ›´æ–°ä¸­ä¿®æ”¹state,æ— é™å¾ªç¯è¿›å…¥æ›´æ–°    nestedUpdateCount &#x3D; 0;    invariant(      false,      &#39;Maximum update depth exceeded. This can happen when a &#39; +        &#39;component repeatedly calls setState inside &#39; +        &#39;componentWillUpdate or componentDidUpdate. React limits &#39; +        &#39;the number of nested updates to prevent infinite loops.&#39;,    );  &#125;&#125;\n\nrequestWork:åŠ å…¥åˆ°rootè°ƒåº¦é˜Ÿåˆ—\nåˆ¤æ–­æ˜¯å¦æ‰¹é‡æ›´æ–°\næ ¹æ®expirationTimeåˆ¤æ–­è°ƒåº¦ç±»å‹\n12345678910111213141516171819202122232425function requestWork(root: FiberRoot, expirationTime: ExpirationTime) &#123;  &#x2F;&#x2F; å¤„ç†firstScheduledRoot,lastScheduledRoot,rootçš„expirationTime  addRootToSchedule(root, expirationTime);  if (isRendering) &#123;    &#x2F;&#x2F; å·²ç»å¼€å§‹    return;  &#125;  if (isBatchingUpdates) &#123;    &#x2F;&#x2F; Flush work at the end of the batch.    if (isUnbatchingUpdates) &#123;      &#x2F;&#x2F; ...unless we&#39;re inside unbatchedUpdates, in which case we should      &#x2F;&#x2F; flush it now.      nextFlushedRoot &#x3D; root;      nextFlushedExpirationTime &#x3D; Sync;      performWorkOnRoot(root, Sync, false);    &#125;    return;  &#125;  &#x2F;&#x2F; TODO: Get rid of Sync and use current time?  if (expirationTime &#x3D;&#x3D;&#x3D; Sync) &#123;    performSyncWork();  &#125; else &#123;    scheduleCallbackWithExpirationTime(root, expirationTime);  &#125;&#125;\n\nsetState æ˜¯åŒæ­¥çš„è¿˜æ˜¯å¼‚æ­¥çš„ï¼Ÿ\nsetStateæœ¬èº«çš„æ–¹æ³•è°ƒç”¨æ˜¯åŒæ­¥çš„ï¼Œä½†æ˜¯è°ƒç”¨setStateå¹¶ä¸æ ‡å¿—ç€Reactçš„stateç«‹é©¬å°±æ›´æ–°äº†ï¼Œè¿™ä¸ªæ›´æ–°æ˜¯è¦æ ¹æ®æˆ‘ä»¬å½“å‰çš„æ‰§è¡Œç¯å¢ƒçš„ä¸Šæ–‡æ¥åˆ¤æ–­çš„å¦‚æœå¤„äºisBatchingUpdatesç¯å¢ƒä¸‹ä¸ä¼šåŒæ­¥æ›´æ–°çš„ï¼Œå¦è¿˜æœ‰å¼‚æ­¥æ›´æ–°è°ƒåº¦ä¹Ÿä¸ä¼šåŒæ­¥æ›´æ–°ã€‚\nscheduleråŒ…ï¼ˆè¢«æåˆ°ä¸react-reconcileråŒçº§çš„ç›®å½•ï¼‰:ç»´æŠ¤æ—¶é—´ç‰‡\næ¨¡æ‹ŸrequestIdleCallback(ç­‰æµè§ˆå™¨æŠŠè¦åšçš„äº‹åšå®Œåæ¥è°ƒå–å›è°ƒ)\nè°ƒåº¦åˆ—è¡¨å’Œè¶…æ—¶åˆ¤æ–­\nä¸»è¦ç”¨åˆ°çš„æ–¹æ³•ï¼š\n\n1\n\n1function scheduleCallbackWithExpirationTime(root: FiberRoot, expirationTime: ExpirationTime,)&#123;&#125;\n\nå¼‚æ­¥è¿›è¡Œrootä»»åŠ¡è°ƒåº¦å°±æ˜¯é€šè¿‡è¿™ä¸ªæ–¹æ³•æ¥åšçš„ï¼Œè¿™é‡Œæœ€ä¸»è¦çš„å°±æ˜¯è°ƒç”¨äº†schedulerçš„scheduleDeferredCallbackæ–¹æ³•ï¼ˆåœ¨scheduleråŒ…ä¸­æ˜¯scheduleWorkï¼‰\nä¼ å…¥çš„çš„æ˜¯å›è°ƒå‡½æ•°performAsyncWorkï¼Œä»¥åŠä¸€ä¸ªåŒ…å«timeoutè¶…æ—¶äº‹ä»¶çš„å¯¹è±¡\n\n2\n\n1function unstable_scheduleCallback(callback, deprecated_options)&#123;&#125;\n\nåˆ›å»ºä¸€ä¸ªè°ƒåº¦èŠ‚ç‚¹newNodeï¼Œå¹¶æŒ‰ç…§timoutAtçš„é¡ºåºåŠ å…¥åˆ°CallbackNodeé“¾è¡¨ï¼Œè°ƒç”¨ensureHostCallbackIsScheduled\nè¿™é‡Œé¢çš„expirationTimeæ˜¯è°ƒç”¨æ—¶ä¼ å…¥çš„timeoutAtåŠ ä¸Šå½“å‰æ—¶é—´å½¢æˆçš„è¿‡æœŸæ—¶é—´ã€‚\n\n3\n\n1function ensureHostCallbackIsScheduled()&#123;&#125;\n\nå¦‚æœå·²ç»åœ¨è°ƒç”¨å›è°ƒäº†ï¼Œå°± returnï¼Œå› ä¸ºæœ¬æ¥å°±ä¼šç»§ç»­è°ƒç”¨ä¸‹å»ï¼ŒisExecutingCallbackåœ¨flushWorkçš„æ—¶å€™ä¼šè¢«ä¿®æ”¹ä¸ºtrue\nå¦‚æœisHostCallbackScheduledä¸ºfalseï¼Œä¹Ÿå°±æ˜¯è¿˜æ²¡å¼€å§‹è°ƒåº¦ï¼Œé‚£ä¹ˆè®¾ä¸ºtrueï¼Œå¦‚æœå·²ç»å¼€å§‹äº†ï¼Œå°±ç›´æ¥å–æ¶ˆï¼Œå› ä¸ºé¡ºåºå¯èƒ½å˜äº†ã€‚\nè°ƒç”¨requestHostCallbackå¼€å§‹è°ƒåº¦\n\n4\n\n1requestHostCallback &#x3D; function(callback, absoluteTimeout)&#123;&#125;\n\nå¼€å§‹è¿›å…¥è°ƒåº¦ï¼Œè®¾ç½®è°ƒåº¦çš„å†…å®¹ï¼Œç”¨scheduledHostCallbackå’ŒtimeoutTimeè¿™ä¸¤ä¸ªå…¨å±€å˜é‡è®°å½•å›è°ƒå‡½æ•°å’Œå¯¹åº”çš„è¿‡æœŸæ—¶é—´\nè°ƒç”¨requestAnimationFrameWithTimeoutï¼Œå…¶å®å°±æ˜¯è°ƒç”¨requestAnimationFrameåœ¨åŠ ä¸Šè®¾ç½®äº†ä¸€ä¸ª100msçš„å®šæ—¶å™¨ï¼Œé˜²æ­¢requestAnimationFrameå¤ªä¹…ä¸è§¦å‘ã€‚\nè°ƒç”¨å›è°ƒanimtionTickå¹¶è®¾ç½®isAnimationFrameScheduledå…¨å±€å˜é‡ä¸ºtrue\n\n5\n\n1var animationTick &#x3D; function(rafTime) &#123;&#125;\n\nåªè¦scheduledHostCallbackè¿˜åœ¨å°±ç»§ç»­è°ƒè¦requestAnimationFrameWithTimeoutå› ä¸ºè¿™ä¸€å¸§æ¸²æŸ“å®Œäº†å¯èƒ½é˜Ÿåˆ—è¿˜æ²¡æƒ…å†µï¼Œæœ¬èº«ä¹Ÿæ˜¯è¦è¿›å…¥å†æ¬¡è°ƒç”¨çš„ï¼Œè¿™è¾¹å°±çœå»äº†requestHostCallbackåœ¨æ¬¡è°ƒç”¨çš„å¿…è¦æ€§\næ¥ä¸‹å»ä¸€æ®µä»£ç æ˜¯ç”¨æ¥è®¡ç®—ç›¸éš”çš„requestAnimationFrameçš„æ—¶å·®çš„ï¼Œè¿™ä¸ªæ—¶å·®å¦‚æœè¿ç»­ä¸¤æ¬¡éƒ½å°é±¼å½“å‰çš„activeFrameTimeï¼Œè¯´æ˜å¹³å°çš„å¸§ç‡æ˜¯å¾ˆé«˜çš„ï¼Œè¿™ç§æƒ…å†µä¸‹ä¼šåŠ¨æ€å¾—ç¼©å°å¸§æ—¶é—´ã€‚\næœ€åæ›´æ–°frameDeadlineï¼Œç„¶åå¦‚æœæ²¡æœ‰è§¦å‘idleTickåˆ™å‘é€æ¶ˆæ¯\n\n6\n\n123window.addEventListener(&#39;message&#39;, idleTick, false)var idleTick &#x3D; function(event) &#123;&#125;\n\né¦–å…ˆåˆ¤æ–­postMessageæ˜¯ä¸æ˜¯è‡ªå·±çš„ï¼Œä¸æ˜¯ç›´æ¥è¿”å›\næ¸…ç©ºscheduledHostCallbackå’ŒtimeoutTime\nè·å–å½“å‰æ—¶é—´ï¼Œå¯¹æ¯”frameDeadlineï¼ŒæŸ¥çœ‹æ˜¯å¦å·²ç»è¶…æ—¶äº†ï¼Œå¦‚æœè¶…æ—¶äº†ï¼Œåˆ¤æ–­ä¸€ä¸‹ä»»åŠ¡callbackçš„è¿‡æœŸæ—¶é—´æœ‰æ²¡æœ‰åˆ°ï¼Œå¦‚æœæ²¡æœ‰åˆ°ï¼Œåˆ™é‡æ–°å¯¹è¿™ä¸ªcallbackè¿›è¡Œä¸€æ¬¡è°ƒåº¦ï¼Œç„¶åè¿”å›ã€‚å¦‚æœåˆ°äº†ï¼Œåˆ™è®¾ç½®didTimeoutä¸ºtrue\næ¥ä¸‹å»å°±æ˜¯è°ƒç”¨callbackäº†ï¼Œè¿™é‡Œè®¾ç½®isFlushingHostCallbackå…¨å±€å˜é‡ä¸ºtrueä»£è¡¨æ­£åœ¨æ‰§è¡Œã€‚å¹¶ä¸”è°ƒç”¨callbackä¹Ÿå°±æ˜¯flushWorkå¹¶ä¼ å…¥didTimeout\n\n7\n\n1function flushWork(didTimeout) &#123;&#125;\n\nå…ˆè®¾ç½®isExecutingCallbackä¸ºtrueï¼Œä»£è¡¨æ­£åœ¨è°ƒç”¨callback\nè®¾ç½®deadlineObject.didTimeoutï¼Œåœ¨ React ä¸šåŠ¡ä¸­å¯ä»¥ç”¨æ¥åˆ¤æ–­ä»»åŠ¡æ˜¯å¦è¶…æ—¶\nå¦‚æœdidTimeoutï¼Œä¼šä¸€æ¬¡ä»firstCallbackNodeå‘åä¸€ç›´æ‰§è¡Œï¼ŒçŸ¥é“ç¬¬ä¸€ä¸ªæ²¡è¿‡æœŸçš„ä»»åŠ¡\nå¦‚æœæ²¡æœ‰è¶…æ—¶ï¼Œåˆ™ä¾æ­¤æ‰§è¡Œç¬¬ä¸€ä¸ªcallbackï¼ŒçŸ¥é“å¸§æ—¶é—´ç»“æŸä¸ºæ­¢\næœ€åæ¸…ç†å˜é‡ï¼Œå¦‚æœä»»åŠ¡æ²¡æœ‰æ‰§è¡Œå®Œï¼Œåˆ™å†æ¬¡è°ƒç”¨ensureHostCallbackIsScheduledè¿›å…¥è°ƒåº¦\né¡ºä¾¿æŠŠImmediaä¼˜å…ˆçº§çš„ä»»åŠ¡éƒ½è°ƒç”¨ä¸€éã€‚\n\n8\n\n1function flushFirstCallback() &#123;&#125;\n\nå¦‚æœå½“å‰é˜Ÿåˆ—ä¸­åªæœ‰ä¸€ä¸ªå›è°ƒï¼Œæ¸…ç©ºé˜Ÿåˆ—\nè°ƒç”¨å›è°ƒå¹¶ä¼ å…¥deadlineå¯¹è±¡ï¼Œé‡Œé¢æœ‰timeRemainingæ–¹æ³•é€šè¿‡frameDeadline - now()æ¥åˆ¤æ–­æ˜¯å¦å¸§æ—¶é—´å·²ç»åˆ°äº†\nå¦‚æœå›è°ƒæœ‰è¿”å›å†…å®¹ï¼ŒæŠŠè¿™ä¸ªè¿”å›åŠ å…¥åˆ°å›è°ƒé˜Ÿåˆ—\nperformWork:performWorké€šè¿‡ä¸¤ç§æ–¹å¼è°ƒç”¨:\nperformAsyncWork å¼‚æ­¥æ–¹å¼\nå¼‚æ­¥æƒ…å†µç»™performWorkè®¾ç½®çš„minExpirationTimeæ˜¯NoWorkï¼Œå¹¶ä¸”ä¼šåˆ¤æ–­dl.didTimeoutï¼Œè¿™ä¸ªå€¼æ˜¯æŒ‡ä»»åŠ¡çš„expirationTimeæ˜¯å¦å·²ç»è¶…æ—¶ï¼Œå¦‚æœè¶…æ—¶äº†ï¼Œåˆ™ç›´æ¥è®¾ç½®newExpirationTimeToWorkOnä¸ºå½“å‰æ—¶é—´ï¼Œè¡¨ç¤ºè¿™ä¸ªä»»åŠ¡ç›´æ¥æ‰§è¡Œå°±è¡Œäº†ï¼Œä¸éœ€è¦åˆ¤æ–­æ˜¯å¦è¶…è¿‡äº†å¸§æ—¶é—´\nperformSyncWork åŒæ­¥æ–¹å¼\nåŒæ­¥æ–¹å¼ä¹…æ¯”è¾ƒç®€å•äº†ï¼Œè®¾ç½®minExpirationTimeä¸ºSyncä¹Ÿå°±æ˜¯1\nperformWorkOnRootè¿™é‡Œä¹Ÿåˆ†ä¸ºåŒæ­¥å’Œå¼‚æ­¥ä¸¤ç§æƒ…å†µï¼Œä½†æ˜¯è¿™ä¸¤ç§æƒ…å†µçš„åŒºåˆ«å…¶å®éå¸¸å°ã€‚\né¦–å…ˆæ˜¯ä¸€ä¸ªå‚æ•°çš„åŒºåˆ«ï¼ŒisYieldyåœ¨åŒæ­¥çš„æƒ…å†µä¸‹æ˜¯falseï¼Œè€Œåœ¨å¼‚æ­¥æƒ…å†µä¸‹æ˜¯trueã€‚è¿™ä¸ªå‚æ•°é¡¾åæ€ä¹‰å°±æ˜¯æ˜¯å¦å¯ä»¥ä¸­æ–­ï¼Œé‚£ä¹ˆè¿™ä¸ªåŒºåˆ«ä¹Ÿå°±å¾ˆå¥½ç†è§£äº†ã€‚\nç¬¬äºŒä¸ªåŒºåˆ«å°±æ˜¯åœ¨renderRootä¹‹ååˆ¤æ–­ä¸€ä¸‹shouldYeildï¼Œå¦‚æœæ—¶é—´ç‰‡å·²ç»ç”¨å®Œï¼Œåˆ™ä¸ç›´æ¥completeRootï¼Œè€Œæ˜¯ç­‰åˆ°ä¸€ä¸‹æ¬¡requestIdleCallbackä¹‹åå†æ‰§è¡Œã€‚\nrenderRoot å’Œ completeRoot åˆ†åˆ«å¯¹åº”ä¸¤ä¸ªé˜¶æ®µï¼š\næ¸²æŸ“é˜¶æ®µ\næäº¤é˜¶æ®µ\næ¸²æŸ“é˜¶æ®µå¯ä»¥è¢«æ‰“æ–­ï¼Œè€Œæäº¤é˜¶æ®µä¸èƒ½\nfindHighestPriorityRootä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬çš„ React åº”ç”¨åªä¼šæœ‰ä¸€ä¸ªrootï¼Œæ‰€ä»¥è¿™é‡Œçš„å¤§éƒ¨åˆ†é€»è¾‘å…¶å®éƒ½ä¸æ˜¯å¸¸è§æƒ…å†µã€‚\nå¾ªç¯firstScheduledRoot =&gt; lastScheduledRootï¼ŒremainingExpirationTimeæ˜¯root.expirationTimeï¼Œä¹Ÿå°±æ˜¯æœ€æ—©çš„è¿‡æœŸæ—¶é—´ã€‚\nå¦‚æœä»–æ˜¯NoWorkè¯´æ˜ä»–å·²ç»æ²¡æœ‰ä»»åŠ¡äº†ï¼Œä»é“¾è¡¨ä¸­åˆ é™¤ã€‚\nä»å‰©ä¸‹çš„ä¸­æ‰¾åˆ°expirationTimeæœ€å°çš„ä¹Ÿå°±æ˜¯ä¼˜å…ˆçº§æœ€é«˜çš„rootç„¶åæŠŠä»–èµ‹å€¼ç»™nextFlushedRootå¹¶æŠŠä»–çš„expirationTimeèµ‹å€¼ç»™nextFlushedExpirationTimeè¿™ä¸¤ä¸ªå…¬å…±å˜é‡ã€‚\nä¸€èˆ¬æ¥è¯´ä¼šç›´æ¥æ‰§è¡Œä¸‹é¢è¿™ä¸ªé€»è¾‘\n123456if (root &#x3D;&#x3D;&#x3D; root.nextScheduledRoot) &#123;  &#x2F;&#x2F; This is the only root in the list.  root.nextScheduledRoot &#x3D; null;  firstScheduledRoot &#x3D; lastScheduledRoot &#x3D; null;  break;&#125;\n\nrenderRooté¦–å…ˆæ˜¯ä¸€ä¸ªåˆ¤æ–­æ˜¯å¦éœ€è¦åˆå§‹åŒ–å˜é‡çš„åˆ¤æ–­\n12345678910111213141516if (  expirationTime !&#x3D;&#x3D; nextRenderExpirationTime ||  root !&#x3D;&#x3D; nextRoot ||  nextUnitOfWork &#x3D;&#x3D;&#x3D; null) &#123;  &#x2F;&#x2F; Reset the stack and start working from the root.  resetStack()  nextRoot &#x3D; root  nextRenderExpirationTime &#x3D; expirationTime  nextUnitOfWork &#x3D; createWorkInProgress(    nextRoot.current,    null,    nextRenderExpirationTime,  )  root.pendingCommitExpirationTime &#x3D; NoWork&#125;\nä»–åˆ¤æ–­çš„æƒ…å†µæ˜¯æ˜¯å¦æœ‰æ–°çš„æ›´æ–°è¿›æ¥äº†ã€‚å‡è®¾è¿™ç§æƒ…å†µï¼šä¸Šä¸€ä¸ªä»»åŠ¡å› ä¸ºæ—¶é—´ç‰‡ç”¨å®Œäº†è€Œä¸­æ–­äº†ï¼Œè¿™ä¸ªæ—¶å€™nextUnitOfWorkæ˜¯æœ‰å·¥ä½œçš„ï¼Œè¿™æ—¶å€™å¦‚æœä¸‹ä¸€ä¸ªrequestIdleCallbackè¿›æ¥äº†ï¼Œä¸­é€”æ²¡æœ‰æ–°çš„ä»»åŠ¡è¿›æ¥ï¼Œé‚£ä¹ˆè¿™äº›å…¨å±€å˜é‡éƒ½æ²¡æœ‰å˜è¿‡ï¼Œrootçš„nextExpirationTimeToWorkOnè‚¯å®šä¹Ÿæ²¡æœ‰å˜åŒ–ï¼Œé‚£ä¹ˆä»£è¡¨æ˜¯ç»§ç»­ä¸Šä¸€æ¬¡çš„ä»»åŠ¡ã€‚è€Œå¦‚æœæœ‰æ–°çš„æ›´æ–°è¿›æ¥ï¼Œåˆ™åŠ¿å¿…nextExpirationTimeToWorkOnæˆ–è€…rootä¼šå˜åŒ–ï¼Œé‚£ä¹ˆè‚¯å®šéœ€è¦é‡ç½®å˜é‡\nresetStackå¦‚æœæ˜¯è¢«ä¸­æ–­çš„æƒ…å†µï¼Œä¼šæ¨å‡ºcontextæ ˆ\nç„¶åå°±è¿›å…¥æ•´ä½“ï¼Œè°ƒç”¨workLoop\n12345678910111213function workLoop(isYieldy) &#123;  if (!isYieldy) &#123;    &#x2F;&#x2F; Flush work without yielding    while (nextUnitOfWork !&#x3D;&#x3D; null) &#123;      nextUnitOfWork &#x3D; performUnitOfWork(nextUnitOfWork)    &#125;  &#125; else &#123;    &#x2F;&#x2F; Flush asynchronous work until the deadline runs out of time.    while (nextUnitOfWork !&#x3D;&#x3D; null &amp;&amp; !shouldYield()) &#123;      nextUnitOfWork &#x3D; performUnitOfWork(nextUnitOfWork)    &#125;  &#125;&#125;\nworkLoopé€»è¾‘å¾ˆç®€å•çš„ï¼Œåªæ˜¯åˆ¤æ–­æ˜¯å¦éœ€è¦ç»§ç»­è°ƒç”¨performUnitOfWork\nåœ¨workLoopæ‰§è¡Œå®Œä¹‹åï¼Œå°±è¿›å…¥æ”¶å°¾é˜¶æ®µäº†ã€‚\né¦–å…ˆå¦‚æœdidFatalä¸ºtrueï¼Œä»£è¡¨æœ‰ä¸€ä¸ªæ— æ³•å¤„ç†çš„é”™è¯¯ï¼Œç›´æ¥è°ƒç”¨onFatalï¼Œä¸commit\n123function onFatal(root) &#123;  root.finishedWork &#x3D; null&#125;\n\nå¦‚æœnextUnitOfWork !== nullï¼Œä»£è¡¨ä»»åŠ¡æ²¡æœ‰æ‰§è¡Œå®Œï¼Œæ˜¯yieldäº†ï¼Œæ‰§è¡ŒonYield\n123function onYield(root) &#123;  root.finishedWork &#x3D; null&#125;\n\nå¦‚æœä»¥ä¸Šéƒ½æ²¡æœ‰ï¼Œè¯´æ˜å·²ç»completeæ•´æ£µæ ‘äº†ï¼Œå¦‚æœnextRenderDidErrorä»£è¡¨æœ‰æ•è·åˆ°å¯å¤„ç†çš„é”™è¯¯\nè¿™æ—¶å€™å…ˆåˆ¤æ–­æ˜¯å¦æœ‰ä¼˜å…ˆçº§æ›´ä½çš„ä»»åŠ¡ï¼Œæœ‰çš„è¯æŠŠå½“å‰çš„æ¸²æŸ“æ—¶é—´è®¾ç½®è¿›suspendTimeï¼ŒåŒæ—¶è°ƒç”¨onSuspend\nå¦‚æœä¸ç¬¦åˆå†åˆ¤æ–­æ˜¯å¦å¸§æ—¶é—´è¶…æ—¶ï¼Œå¦‚æœæ²¡æœ‰è¶…æ—¶å¹¶ä¸”æ²¡æœ‰root.didErrorï¼Œå¹¶ä¸”æŠŠroot.expirationTimeè®¾ç½®ä¸ºSyncï¼Œç„¶åè°ƒç”¨onSuspendã€‚\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä»–ä»¬è°ƒç”¨onSuspendæœ€åä¸€ä¸ªå‚æ•°ä¼ é€’çš„éƒ½æ˜¯-1ï¼Œçœ‹onSuspendçš„é€»è¾‘å¯ä»¥å‘ç°å…¶å®ä»€ä¹ˆéƒ½ä¸åšã€‚ä»€ä¹ˆéƒ½ä¸åšä»£è¡¨ç€ï¼Œä»–ä»¬ä¸ä¼šè®¾ç½®root.finishedWorkï¼Œé‚£ä¹ˆè¿”å›åˆ°ä¸Šä¸€å±‚çš„performWorkOnRootçš„æ—¶å€™\n123456789finishedWork &#x3D; root.finishedWorkif (finishedWork !&#x3D;&#x3D; null) &#123;  if (!shouldYield()) &#123;    &#x2F;&#x2F; Still time left. Commit the root.    completeRoot(root, finishedWork, expirationTime)  &#125; else &#123;    root.finishedWork &#x3D; finishedWork  &#125;&#125;\nå¹¶ä¸ä¼šæ‰§è¡ŒcompleteRootä¹Ÿå°±ä¸ä¼šcommitï¼Œä¼šå†è¿”å›åˆ°performWorkæ‰¾ä¸‹ä¸€ä¸ªroot\n12345678910111213141516171819202122232425262728293031323334353637383940414243function onSuspend(  root: FiberRoot,  finishedWork: Fiber,  suspendedExpirationTime: ExpirationTime,  rootExpirationTime: ExpirationTime,  msUntilTimeout: number,): void &#123;  root.expirationTime &#x3D; rootExpirationTime  if (enableSuspense &amp;&amp; msUntilTimeout &#x3D;&#x3D;&#x3D; 0 &amp;&amp; !shouldYield()) &#123;    &#x2F;&#x2F; Don&#39;t wait an additional tick. Commit the tree immediately.    root.pendingCommitExpirationTime &#x3D; suspendedExpirationTime    root.finishedWork &#x3D; finishedWork  &#125; else if (msUntilTimeout &gt; 0) &#123;    &#x2F;&#x2F; Wait &#96;msUntilTimeout&#96; milliseconds before committing.    root.timeoutHandle &#x3D; scheduleTimeout(      onTimeout.bind(null, root, finishedWork, suspendedExpirationTime),      msUntilTimeout,    )  &#125;&#125;function onTimeout(root, finishedWork, suspendedExpirationTime) &#123;  if (enableSuspense) &#123;    &#x2F;&#x2F; The root timed out. Commit it.    root.pendingCommitExpirationTime &#x3D; suspendedExpirationTime    root.finishedWork &#x3D; finishedWork    &#x2F;&#x2F; Read the current time before entering the commit phase. We can be    &#x2F;&#x2F; certain this won&#39;t cause tearing related to batching of event updates    &#x2F;&#x2F; because we&#39;re at the top of a timer event.    recomputeCurrentRendererTime()    currentSchedulerTime &#x3D; currentRendererTime    if (enableSchedulerTracing) &#123;      &#x2F;&#x2F; Don&#39;t update pending interaction counts for suspense timeouts,      &#x2F;&#x2F; Because we know we still need to do more work in this case.      suspenseDidTimeout &#x3D; true      flushRoot(root, suspendedExpirationTime)      suspenseDidTimeout &#x3D; false    &#125; else &#123;      flushRoot(root, suspendedExpirationTime)    &#125;  &#125;&#125;\nå…¶ä¸­scheduleTimeoutæ˜¯ä¸åŒå¹³å°çš„setTimout\næœ€åä¸€ä¸ªåˆ¤æ–­å°±æ˜¯çœŸæ­£çš„æŒ‚èµ·ä»»åŠ¡äº†ï¼Œä¹Ÿå°±æ˜¯suquenseçš„æƒ…å†µï¼Œå…¶å®åšçš„äº‹æƒ…è·Ÿä¸Šé¢ä¸¤ä¸ªå·®ä¸å¤šï¼Œå”¯ä¸€çš„åŒºåˆ«æ˜¯è°ƒç”¨onSuspendçš„æ—¶å€™æœ€åä¸€ä¸ªå‚æ•°è‚¯å®šæ˜¯å¤§äºç­‰äºé›¶çš„ã€‚ä»£è¡¨ç€ä»–æ˜¯ç«‹åˆ»å°±è¦commitè¿˜æ˜¯åœ¨ä¸€ä¸ªtimeoutä¹‹åå†commitã€‚å› ä¸ºæˆ‘ä»¬å¯ä»¥çœ‹åˆ°onTimeoutæœ€åæ˜¯flushRootï¼Œå°±æ˜¯ä»¥Syncçš„æ–¹å¼è°ƒç”¨performWork\nå¦‚æœä»¥ä¸Šé€»è¾‘éƒ½æ²¡æœ‰ï¼Œé‚£ä¹ˆç›´æ¥è°ƒç”¨onComplete\n12345678function onComplete(  root: FiberRoot,  finishedWork: Fiber,  expirationTime: ExpirationTime,) &#123;  root.pendingCommitExpirationTime &#x3D; expirationTime  root.finishedWork &#x3D; finishedWork&#125;","plink":"https://www.hansomezao.com/2019/11/30/note/06-Reactæºç å­¦ä¹ -ä»»åŠ¡è°ƒåº¦/"},{"title":"05.Reactæºç å­¦ä¹ -expirationTime","date":"2019-11-29T08:51:29.000Z","date_formatted":{"ll":"2019å¹´11æœˆ29æ—¥","L":"2019/11/29","MM-DD":"11-29"},"author":"zao","updated":"2019-11-29T08:51:29.000Z","content":"expirationTimeReact ä¸­æœ‰ä¸¤ç§ç±»å‹çš„ExpirationTimeï¼Œä¸€ä¸ªæ˜¯Interactiveçš„ï¼Œå¦ä¸€ç§æ˜¯æ™®é€šçš„å¼‚æ­¥ã€‚Interactiveçš„æ¯”å¦‚è¯´æ˜¯ç”±äº‹ä»¶è§¦å‘çš„ï¼Œé‚£ä¹ˆä»–çš„å“åº”ä¼˜å…ˆçº§ä¼šæ¯”è¾ƒé«˜å› ä¸ºæ¶‰åŠåˆ°äº¤äº’ã€‚\næºç åœ¨ react-reconciler ä¸‹çš„ ReactFiberExpirationTime.js å†…ï¼š\n12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849const UNIT_SIZE &#x3D; 10const MAGIC_NUMBER_OFFSET &#x3D; 2&#x2F;&#x2F; 1 unit of expiration time represents 10ms.function msToExpirationTime(ms) &#123;  &#x2F;&#x2F; Always add an offset so that we don&#39;t clash with the magic number for NoWork.  return ((ms &#x2F; UNIT_SIZE) | 0) + MAGIC_NUMBER_OFFSET&#125;function expirationTimeToMs(expirationTime) &#123;  return (expirationTime - MAGIC_NUMBER_OFFSET) * UNIT_SIZE&#125;function ceiling(num, precision) &#123;  return (((num &#x2F; precision) | 0) + 1) * precision&#125;function computeExpirationBucket(currentTime, expirationInMs, bucketSizeMs) &#123;  return (    MAGIC_NUMBER_OFFSET +    ceiling(      currentTime - MAGIC_NUMBER_OFFSET + expirationInMs &#x2F; UNIT_SIZE,      bucketSizeMs &#x2F; UNIT_SIZE,    )  )&#125;const LOW_PRIORITY_EXPIRATION &#x3D; 5000const LOW_PRIORITY_BATCH_SIZE &#x3D; 250function computeAsyncExpiration(currentTime) &#123;  return computeExpirationBucket(    currentTime,    LOW_PRIORITY_EXPIRATION,    LOW_PRIORITY_BATCH_SIZE,  )&#125;&#x2F;&#x2F; const HIGH_PRIORITY_EXPIRATION &#x3D; __DEV__ ? 500 : 150;const HIGH_PRIORITY_EXPIRATION &#x3D; 500const HIGH_PRIORITY_BATCH_SIZE &#x3D; 100function computeInteractiveExpiration(currentTime) &#123;  return computeExpirationBucket(    currentTime,    HIGH_PRIORITY_EXPIRATION,    HIGH_PRIORITY_BATCH_SIZE,  )&#125;\n\nceilingå‡½æ•°çš„(((num / precision) | 0) + 1) * precisionç±»ä¼¼ä¸Šå–æ•´çš„æ“ä½œï¼Œä»¥åŠè°ƒç”¨ceilingçš„å‚æ•°æ¥æºæ˜¯LOW_PRIORITY_BATCH_SIZE HIGH_PRIORITY_BATCH_SIZEï¼Œè¿™ä¹ˆåšä¹Ÿè®¸æ˜¯ä¸ºäº†è®©éå¸¸ç›¸è¿‘çš„ä¸¤æ¬¡æ›´æ–°å¾—åˆ°ç›¸åŒçš„expirationTimeï¼Œç„¶ååœ¨ä¸€æ¬¡æ›´æ–°ä¸­å®Œæˆï¼Œç›¸å½“äºä¸€ä¸ªè‡ªåŠ¨çš„batchedUpdatesã€‚\n","plink":"https://www.hansomezao.com/2019/11/29/note/05-Reactæºç å­¦ä¹ -expirationTime/"},{"title":"04.Reactæºç å­¦ä¹ -update","date":"2019-11-28T10:26:29.000Z","date_formatted":{"ll":"2019å¹´11æœˆ28æ—¥","L":"2019/11/28","MM-DD":"11-28"},"author":"zao","updated":"2019-11-28T10:26:29.000Z","content":"updateä»€ä¹ˆæ˜¯updateç”¨äºè®°å½•ç»„ä»¶çŠ¶æ€çš„æ”¹å˜\nå­˜æ”¾äºupdateQueueä¸­\nå¤šä¸ªupdateå¯ä»¥åŒæ—¶å­˜åœ¨\nå¦‚ä½•åˆ›å»ºupdateæºç åœ¨ react-reconciler ä¸‹çš„ ReactUpdateQueue.js å†…ï¼š\nåˆ›å»ºupdate:\n1234567891011121314151617181920export function createUpdate(expirationTime: ExpirationTime): Update&lt;*&gt; &#123;  return &#123;      &#x2F;&#x2F; æ›´æ–°çš„è¿‡æœŸæ—¶é—´    expirationTime: expirationTime,      &#x2F;&#x2F; export const UpdateState &#x3D; 0;      &#x2F;&#x2F; export const ReplaceState &#x3D; 1;      &#x2F;&#x2F; export const ForceUpdate &#x3D; 2;      &#x2F;&#x2F; export const CaptureUpdate &#x3D; 3;      &#x2F;&#x2F; æŒ‡å®šæ›´æ–°çš„ç±»å‹ï¼Œå€¼ä¸ºä»¥ä¸Šå‡ ç§    tag: UpdateState,      &#x2F;&#x2F; æ›´æ–°å†…å®¹ï¼Œæ¯”å¦‚&#96;setState&#96;æ¥æ”¶çš„ç¬¬ä¸€ä¸ªå‚æ•°    payload: null,      &#x2F;&#x2F; å¯¹åº”çš„å›è°ƒï¼Œ&#96;setState&#96;ï¼Œ&#96;render&#96;éƒ½æœ‰    callback: null,      &#x2F;&#x2F; æŒ‡å‘ä¸‹ä¸€ä¸ªæ›´æ–°    next: null,      &#x2F;&#x2F; æŒ‡å‘ä¸‹ä¸€ä¸ª&#96;side effect&#96;    nextEffect: null,  &#125;;&#125;\n\nåˆ›å»ºupdateQueue:\n12345678910111213141516171819export function createUpdateQueue&lt;State&gt;(baseState: State): UpdateQueue&lt;State&gt; &#123;  const queue: UpdateQueue&lt;State&gt; &#x3D; &#123;      &#x2F;&#x2F; æ¯æ¬¡æ“ä½œå®Œæ›´æ–°ä¹‹åçš„&#96;state&#96;    baseState,      &#x2F;&#x2F; é˜Ÿåˆ—ä¸­çš„ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ª&#96;Update&#96;    firstUpdate: null,    lastUpdate: null,      &#x2F;&#x2F; ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªæ•è·ç±»å‹çš„&#96;Update&#96;    firstCapturedUpdate: null,    lastCapturedUpdate: null,      &#x2F;&#x2F; ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ª&#96;side effect&#96;    firstEffect: null,    lastEffect: null,      &#x2F;&#x2F; ç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªæ•è·äº§ç”Ÿçš„&#96;side effect&#96;    firstCapturedEffect: null,    lastCapturedEffect: null,  &#125;;  return queue;&#125;\n","plink":"https://www.hansomezao.com/2019/11/28/note/04-Reactæºç å­¦ä¹ -update/"},{"title":"03.Reactæºç å­¦ä¹ -FiberRootä¸Fiber","date":"2019-11-27T09:24:29.000Z","date_formatted":{"ll":"2019å¹´11æœˆ27æ—¥","L":"2019/11/27","MM-DD":"11-27"},"author":"zao","updated":"2019-11-27T09:24:29.000Z","content":"Reactä¸­çš„æ•°æ®ç»“æ„FiberRootä»€ä¹ˆæ˜¯ FiberRootï¼Ÿ\næ•´ä¸ªåº”ç”¨çš„èµ·ç‚¹\nåŒ…å«åº”ç”¨æŒ‚è½½çš„ç›®æ ‡èŠ‚ç‚¹\nè®°å½•æ•´ä¸ªåº”ç”¨æ›´æ–°è¿‡ç¨‹çš„å„ç§ä¿¡æ¯\nç»“æ„å¦‚ä¸‹ï¼š\n123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354type BaseFiberRootProperties &#x3D; &#123;|    &#x2F;&#x2F; rootèŠ‚ç‚¹ï¼Œrenderæ–¹æ³•æ¥æ”¶çš„ç¬¬äºŒä¸ªå‚æ•°  containerInfo: any,    &#x2F;&#x2F; åªæœ‰åœ¨æŒä¹…æ›´æ–°ä¸­ä¼šç”¨åˆ°ï¼Œä¹Ÿå°±æ˜¯ä¸æ”¯æŒå¢é‡æ›´æ–°çš„å¹³å°ï¼Œreact-domä¸ä¼šç”¨åˆ°  pendingChildren: any,    &#x2F;&#x2F; å½“å‰åº”ç”¨å¯¹åº”çš„Fiberå¯¹è±¡ï¼Œæ˜¯Root Fiber  current: Fiber,    &#x2F;&#x2F; ä¸€ä¸‹çš„ä¼˜å…ˆçº§æ˜¯ç”¨æ¥åŒºåˆ†    &#x2F;&#x2F; 1) æ²¡æœ‰æäº¤(committed)çš„ä»»åŠ¡    &#x2F;&#x2F; 2) æ²¡æœ‰æäº¤çš„æŒ‚èµ·ä»»åŠ¡    &#x2F;&#x2F; 3) æ²¡æœ‰æäº¤çš„å¯èƒ½è¢«æŒ‚èµ·çš„ä»»åŠ¡    &#x2F;&#x2F; æˆ‘ä»¬é€‰æ‹©ä¸è¿½è¸ªæ¯ä¸ªå•ç‹¬çš„é˜»å¡ç™»è®°ï¼Œä¸ºäº†å…¼é¡¾æ€§èƒ½    &#x2F;&#x2F; The earliest and latest priority levels that are suspended from committing.    &#x2F;&#x2F; æœ€è€å’Œæ–°çš„åœ¨æäº¤çš„æ—¶å€™è¢«æŒ‚èµ·çš„ä»»åŠ¡  earliestSuspendedTime: ExpirationTime,  latestSuspendedTime: ExpirationTime,    &#x2F;&#x2F; The earliest and latest priority levels that are not known to be suspended.    &#x2F;&#x2F; æœ€è€å’Œæœ€æ–°çš„ä¸ç¡®å®šæ˜¯å¦ä¼šæŒ‚èµ·çš„ä¼˜å…ˆçº§ï¼ˆæ‰€æœ‰ä»»åŠ¡è¿›æ¥ä¸€å¼€å§‹éƒ½æ˜¯è¿™ä¸ªçŠ¶æ€ï¼‰  earliestPendingTime: ExpirationTime,  latestPendingTime: ExpirationTime,    &#x2F;&#x2F; The latest priority level that was pinged by a resolved promise and can    &#x2F;&#x2F; be retried.    &#x2F;&#x2F; æœ€æ–°çš„é€šè¿‡ä¸€ä¸ªpromiseè¢«resloveå¹¶ä¸”å¯ä»¥é‡æ–°å°è¯•çš„ä¼˜å…ˆçº§  latestPingedTime: ExpirationTime,    &#x2F;&#x2F; å¦‚æœæœ‰é”™è¯¯è¢«æŠ›å‡ºå¹¶ä¸”æ²¡æœ‰æ›´å¤šçš„æ›´æ–°å­˜åœ¨ï¼Œæˆ‘ä»¬å°è¯•åœ¨å¤„ç†é”™è¯¯å‰åŒæ­¥é‡æ–°ä»å¤´æ¸²æŸ“    &#x2F;&#x2F; åœ¨&#96;renderRoot&#96;å‡ºç°æ— æ³•å¤„ç†çš„é”™è¯¯æ—¶ä¼šè¢«è®¾ç½®ä¸º&#96;true&#96;  didError: boolean,    &#x2F;&#x2F; æ­£åœ¨ç­‰å¾…æäº¤çš„ä»»åŠ¡çš„&#96;expirationTime&#96;  pendingCommitExpirationTime: ExpirationTime,    &#x2F;&#x2F; å·²ç»å®Œæˆçš„ä»»åŠ¡çš„FiberRootå¯¹è±¡ï¼Œå¦‚æœä½ åªæœ‰ä¸€ä¸ªRootï¼Œé‚£ä»–æ°¸è¿œåªå¯èƒ½æ˜¯è¿™ä¸ªRootå¯¹åº”çš„Fiberï¼Œæˆ–è€…æ˜¯null    &#x2F;&#x2F; åœ¨commité˜¶æ®µåªä¼šå¤„ç†è¿™ä¸ªå€¼å¯¹åº”çš„ä»»åŠ¡  finishedWork: Fiber | null,    &#x2F;&#x2F; åœ¨ä»»åŠ¡è¢«æŒ‚èµ·çš„æ—¶å€™é€šè¿‡setTimeoutè®¾ç½®çš„è¿”å›å†…å®¹ï¼Œç”¨æ¥ä¸‹ä¸€æ¬¡å¦‚æœæœ‰æ–°çš„ä»»åŠ¡æŒ‚èµ·æ—¶æ¸…ç†è¿˜æ²¡è§¦å‘çš„timeout  timeoutHandle: TimeoutHandle | NoTimeout,    &#x2F;&#x2F; é¡¶å±‚contextå¯¹è±¡ï¼Œåªæœ‰ä¸»åŠ¨è°ƒç”¨&#96;renderSubtreeIntoContainer&#96;æ—¶æ‰ä¼šæœ‰ç”¨  context: Object | null,  pendingContext: Object | null,    &#x2F;&#x2F; ç”¨æ¥ç¡®å®šç¬¬ä¸€æ¬¡æ¸²æŸ“çš„æ—¶å€™æ˜¯å¦éœ€è¦èåˆ  +hydrate: boolean,    &#x2F;&#x2F; å½“å‰rootä¸Šå‰©ä½™çš„è¿‡æœŸæ—¶é—´    &#x2F;&#x2F; TODO: æåˆ°rendereré‡Œé¢åŒºå¤„ç†  nextExpirationTimeToWorkOn: ExpirationTime,    &#x2F;&#x2F; å½“å‰æ›´æ–°å¯¹åº”çš„è¿‡æœŸæ—¶é—´  expirationTime: ExpirationTime,    &#x2F;&#x2F; List of top-level batches. This list indicates whether a commit should be    &#x2F;&#x2F; deferred. Also contains completion callbacks.    &#x2F;&#x2F; TODO: Lift this into the renderer    &#x2F;&#x2F; é¡¶å±‚æ‰¹æ¬¡ï¼ˆæ‰¹å¤„ç†ä»»åŠ¡ï¼Ÿï¼‰è¿™ä¸ªå˜é‡æŒ‡æ˜ä¸€ä¸ªcommitæ˜¯å¦åº”è¯¥è¢«æ¨è¿Ÿ    &#x2F;&#x2F; åŒæ—¶åŒ…æ‹¬å®Œæˆä¹‹åçš„å›è°ƒ    &#x2F;&#x2F; è²Œä¼¼ç”¨åœ¨æµ‹è¯•çš„æ—¶å€™ï¼Ÿ  firstBatch: Batch | null,    &#x2F;&#x2F; rootä¹‹é—´å…³è”çš„é“¾è¡¨ç»“æ„  nextScheduledRoot: FiberRoot | null,|&#125;;\n\nFiberä»€ä¹ˆæ˜¯Fiberï¼Ÿ\næ¯ä¸€ä¸ªReactElementå¯¹åº”ä¸€ä¸ªFiberå¯¹è±¡\nè®°å½•èŠ‚ç‚¹çš„å„ç§çŠ¶æ€\nä¸²è”æ•´ä¸ªåº”ç”¨å½¢æˆæ ‘ç»“æ„\nç»“æ„å¦‚ä¸‹ï¼š\n12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182&#x2F;&#x2F; Fiberå¯¹åº”ä¸€ä¸ªç»„ä»¶éœ€è¦è¢«å¤„ç†æˆ–è€…å·²ç»å¤„ç†äº†ï¼Œä¸€ä¸ªç»„ä»¶å¯ä»¥æœ‰ä¸€ä¸ªæˆ–è€…å¤šä¸ªFibertype Fiber &#x3D; &#123;|    &#x2F;&#x2F; æ ‡è®°ä¸åŒçš„ç»„ä»¶ç±»å‹  tag: WorkTag,    &#x2F;&#x2F; ReactElementé‡Œé¢çš„key  key: null | string,    &#x2F;&#x2F; ReactElement.typeï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬è°ƒç”¨&#96;createElement&#96;çš„ç¬¬ä¸€ä¸ªå‚æ•°  elementType: any,    &#x2F;&#x2F; The resolved function&#x2F;class&#x2F; associated with this fiber.    &#x2F;&#x2F; å¼‚æ­¥ç»„ä»¶resolvedä¹‹åè¿”å›çš„å†…å®¹ï¼Œä¸€èˆ¬æ˜¯&#96;function&#96;æˆ–è€…&#96;class&#96;  type: any,    &#x2F;&#x2F; The local state associated with this fiber.    &#x2F;&#x2F; è·Ÿå½“å‰Fiberç›¸å…³æœ¬åœ°çŠ¶æ€ï¼ˆæ¯”å¦‚æµè§ˆå™¨ç¯å¢ƒå°±æ˜¯DOMèŠ‚ç‚¹ï¼‰  stateNode: any,    &#x2F;&#x2F; æŒ‡å‘ä»–åœ¨FiberèŠ‚ç‚¹æ ‘ä¸­çš„&#96;parent&#96;ï¼Œç”¨æ¥åœ¨å¤„ç†å®Œè¿™ä¸ªèŠ‚ç‚¹ä¹‹åå‘ä¸Šè¿”å›  return: Fiber | null,    &#x2F;&#x2F; å•é“¾è¡¨æ ‘ç»“æ„    &#x2F;&#x2F; æŒ‡å‘è‡ªå·±çš„ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹  child: Fiber | null,    &#x2F;&#x2F; æŒ‡å‘è‡ªå·±çš„å…„å¼Ÿç»“æ„    &#x2F;&#x2F; å…„å¼ŸèŠ‚ç‚¹çš„returnæŒ‡å‘åŒä¸€ä¸ªçˆ¶èŠ‚ç‚¹  sibling: Fiber | null,  index: number,    &#x2F;&#x2F; refå±æ€§  ref: null | (((handle: mixed) &#x3D;&gt; void) &amp; &#123;_stringRef: ?string&#125;) | RefObject,    &#x2F;&#x2F; æ–°çš„å˜åŠ¨å¸¦æ¥çš„æ–°çš„props  pendingProps: any,     &#x2F;&#x2F; ä¸Šä¸€æ¬¡æ¸²æŸ“å®Œæˆä¹‹åçš„props  memoizedProps: any,    &#x2F;&#x2F; è¯¥Fiberå¯¹åº”çš„ç»„ä»¶äº§ç”Ÿçš„Updateä¼šå­˜æ”¾åœ¨è¿™ä¸ªé˜Ÿåˆ—é‡Œé¢  updateQueue: UpdateQueue&lt;any&gt; | null,    &#x2F;&#x2F; ä¸Šä¸€æ¬¡æ¸²æŸ“çš„æ—¶å€™çš„state  memoizedState: any,    &#x2F;&#x2F; ä¸€ä¸ªåˆ—è¡¨ï¼Œå­˜æ”¾è¿™ä¸ªFiberä¾èµ–çš„context  firstContextDependency: ContextDependency&lt;mixed&gt; | null,    &#x2F;&#x2F; ç”¨æ¥æè¿°å½“å‰Fiberå’Œä»–å­æ ‘çš„&#96;Bitfield&#96;    &#x2F;&#x2F; å…±å­˜çš„æ¨¡å¼è¡¨ç¤ºè¿™ä¸ªå­æ ‘æ˜¯å¦é»˜è®¤æ˜¯å¼‚æ­¥æ¸²æŸ“çš„    &#x2F;&#x2F; Fiberè¢«åˆ›å»ºçš„æ—¶å€™ä»–ä¼šç»§æ‰¿çˆ¶Fiber    &#x2F;&#x2F; å…¶ä»–çš„æ ‡è¯†ä¹Ÿå¯ä»¥åœ¨åˆ›å»ºçš„æ—¶å€™è¢«è®¾ç½®    &#x2F;&#x2F; ä½†æ˜¯åœ¨åˆ›å»ºä¹‹åä¸åº”è¯¥å†è¢«ä¿®æ”¹ï¼Œç‰¹åˆ«æ˜¯ä»–çš„å­Fiberåˆ›å»ºä¹‹å‰  mode: TypeOfMode,    &#x2F;&#x2F; Effect    &#x2F;&#x2F; ç”¨æ¥è®°å½•Side Effect  effectTag: SideEffectTag,    &#x2F;&#x2F; å•é“¾è¡¨ç”¨æ¥å¿«é€ŸæŸ¥æ‰¾ä¸‹ä¸€ä¸ªside effect  nextEffect: Fiber | null,    &#x2F;&#x2F; å­æ ‘ä¸­ç¬¬ä¸€ä¸ªside effect  firstEffect: Fiber | null,    &#x2F;&#x2F; å­æ ‘ä¸­æœ€åä¸€ä¸ªside effect  lastEffect: Fiber | null,    &#x2F;&#x2F; ä»£è¡¨ä»»åŠ¡åœ¨æœªæ¥çš„å“ªä¸ªæ—¶é—´ç‚¹åº”è¯¥è¢«å®Œæˆ    &#x2F;&#x2F; ä¸åŒ…æ‹¬ä»–çš„å­æ ‘äº§ç”Ÿçš„ä»»åŠ¡  expirationTime: ExpirationTime,    &#x2F;&#x2F; å¿«é€Ÿç¡®å®šå­æ ‘ä¸­æ˜¯å¦æœ‰ä¸åœ¨ç­‰å¾…çš„å˜åŒ–  childExpirationTime: ExpirationTime,    &#x2F;&#x2F; åœ¨Fiberæ ‘æ›´æ–°çš„è¿‡ç¨‹ä¸­ï¼Œæ¯ä¸ªFiberéƒ½ä¼šæœ‰ä¸€ä¸ªè·Ÿå…¶å¯¹åº”çš„Fiber    &#x2F;&#x2F; æˆ‘ä»¬ç§°ä»–ä¸º&#96;current &lt;&#x3D;&#x3D;&gt; workInProgress&#96;    &#x2F;&#x2F; åœ¨æ¸²æŸ“å®Œæˆä¹‹åä»–ä»¬ä¼šäº¤æ¢ä½ç½®  alternate: Fiber | null,    &#x2F;&#x2F; ä¸‹é¢æ˜¯è°ƒè¯•ç›¸å…³çš„ï¼Œæ”¶é›†æ¯ä¸ªFiberå’Œå­æ ‘æ¸²æŸ“æ—¶é—´çš„  actualDuration?: number,    &#x2F;&#x2F; If the Fiber is currently active in the &quot;render&quot; phase,    &#x2F;&#x2F; This marks the time at which the work began.    &#x2F;&#x2F; This field is only set when the enableProfilerTimer flag is enabled.  actualStartTime?: number,    &#x2F;&#x2F; Duration of the most recent render time for this Fiber.    &#x2F;&#x2F; This value is not updated when we bailout for memoization purposes.    &#x2F;&#x2F; This field is only set when the enableProfilerTimer flag is enabled.  selfBaseDuration?: number,    &#x2F;&#x2F; Sum of base times for all descedents of this Fiber.    &#x2F;&#x2F; This value bubbles up during the &quot;complete&quot; phase.    &#x2F;&#x2F; This field is only set when the enableProfilerTimer flag is enabled.  treeBaseDuration?: number,    &#x2F;&#x2F; Conceptual aliases    &#x2F;&#x2F; workInProgress : Fiber -&gt;  alternate The alternate used for reuse happens    &#x2F;&#x2F; to be the same as work in progress.    &#x2F;&#x2F; __DEV__ only  _debugID?: number,  _debugSource?: Source | null,  _debugOwner?: Fiber | null,  _debugIsCurrentlyTiming?: boolean,|&#125;;\n\næ¥çœ‹çœ‹Fiberæ˜¯å¦‚ä½•ä¸²è”èŠ‚ç‚¹çš„ï¼šæœ‰å¦‚ä¸‹èŠ‚ç‚¹ç»“æ„ï¼š\n\nè¢«Fiberå¤„ç†æˆèƒ½é«˜æ•ˆéå†çš„æ ‘å½¢ç»“æ„åï¼š\n\n","plink":"https://www.hansomezao.com/2019/11/27/note/03-Reactæºç å­¦ä¹ -FiberRootä¸Fiber/"},{"title":"02.Reactæºç å­¦ä¹ -component","date":"2019-11-26T08:23:29.000Z","date_formatted":{"ll":"2019å¹´11æœˆ26æ—¥","L":"2019/11/26","MM-DD":"11-26"},"author":"zao","updated":"2019-11-26T08:23:29.000Z","content":"ComponentReact.jså†…æ˜¯å¦‚ä½•å¼•ç”¨createElement:\n12345678910&#x2F;&#x2F;é¦–å…ˆå¼•å…¥import &#123;Component, PureComponent&#125; from &#39;.&#x2F;ReactBaseClasses&#39;;&#x2F;&#x2F;åº”ç”¨const React &#x3D; &#123;  &#x2F;&#x2F; ...other props  Component,  PureComponent,&#125;;export default React;\n\nComponentä»£ç åœ¨åŒçº§ç›®å½•ä¸‹ ReactBaseClasses.js å†…ï¼š\n12345678910111213function Component(props, context, updater) &#123;  this.props &#x3D; props;  this.context &#x3D; context;  &#x2F;&#x2F; If a component has string refs, we will assign a different object later.  this.refs &#x3D; emptyObject;  &#x2F;&#x2F; We initialize the default updater but the real one gets injected by the  &#x2F;&#x2F; renderer.  this.updater &#x3D; updater || ReactNoopUpdateQueue;&#125;Component.prototype.forceUpdate &#x3D; function(callback) &#123;  this.updater.enqueueForceUpdate(this, callback, &#39;forceUpdate&#39;);&#125;;\n\nå‘ç°ä¸€ä¸ªä¸å¸¸è§çš„apiï¼šforceUpdate ï¼šå¼ºåˆ¶åˆ·æ–°ç»„ä»¶\nå¦PureComponentå°±æ¯”Componentå¤šäº†ä¸€ä¸ªisPureReactComponentå±æ€§ï¼š\n123456789101112131415161718&#x2F;** * Convenience component with default shallow equality check for sCU. *&#x2F;function PureComponent(props, context, updater) &#123;  this.props &#x3D; props;  this.context &#x3D; context;  &#x2F;&#x2F; If a component has string refs, we will assign a different object later.  this.refs &#x3D; emptyObject;  this.updater &#x3D; updater || ReactNoopUpdateQueue;&#125;const pureComponentPrototype &#x3D; (PureComponent.prototype &#x3D; new ComponentDummy());pureComponentPrototype.constructor &#x3D; PureComponent;&#x2F;&#x2F; Avoid an extra prototype jump for these methods.Object.assign(pureComponentPrototype, Component.prototype);pureComponentPrototype.isPureReactComponent &#x3D; true;export &#123;Component, PureComponent&#125;;\n","plink":"https://www.hansomezao.com/2019/11/26/note/02-Reactæºç å­¦ä¹ -component/"},{"title":"01.Reactæºç å­¦ä¹ -createElement","date":"2019-11-25T03:25:29.000Z","date_formatted":{"ll":"2019å¹´11æœˆ25æ—¥","L":"2019/11/25","MM-DD":"11-25"},"author":"zao","updated":"2019-11-25T03:25:29.000Z","content":"createElementå¹³æ—¶æˆ‘ä»¬åœ¨Reactç»„ä»¶å†…ä¹¦å†™çš„JSXä»£ç åœ¨ç¼–è¯‘æ—¶ä¼šè¢«å¤„ç†æˆå¦‚ä¸‹:\n\næ­¤æ•ˆæœåœ¨ Babel ä¸Šå®ç°ã€‚\nReact.jså†…æ˜¯å¦‚ä½•å¼•ç”¨createElement:\n12345678910111213141516&#x2F;&#x2F;é¦–å…ˆå¼•å…¥import &#123;  createElement,  createFactory,  cloneElement,  isValidElement,&#125; from &#39;.&#x2F;ReactElement&#39;;&#x2F;&#x2F;åº”ç”¨const React &#x3D; &#123;  &#x2F;&#x2F; ...other props  createElement: __DEV__ ? createElementWithValidation : createElement,  cloneElement: __DEV__ ? cloneElementWithValidation : cloneElement,  createFactory: __DEV__ ? createFactoryWithValidation : createFactory,&#125;;export default React;\n\ncreateElementä»£ç åœ¨åŒçº§ç›®å½•ä¸‹ ReactElement.js å†…ï¼š\n12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970export function createElement(type, config, children) &#123;  let propName;  &#x2F;&#x2F; Reserved names are extracted  const props &#x3D; &#123;&#125;;  let key &#x3D; null;  let ref &#x3D; null;  let self &#x3D; null;  let source &#x3D; null;  &#x2F;&#x2F; å¤„ç†props  if (config !&#x3D; null) &#123;    if (hasValidRef(config)) &#123;      ref &#x3D; config.ref;    &#125;    if (hasValidKey(config)) &#123;      key &#x3D; &#39;&#39; + config.key;    &#125;    self &#x3D; config.__self &#x3D;&#x3D;&#x3D; undefined ? null : config.__self;    source &#x3D; config.__source &#x3D;&#x3D;&#x3D; undefined ? null : config.__source;    &#x2F;&#x2F; Remaining properties are added to a new props object    for (propName in config) &#123;      if (        hasOwnProperty.call(config, propName) &amp;&amp;        !RESERVED_PROPS.hasOwnProperty(propName)      ) &#123;        props[propName] &#x3D; config[propName];      &#125;    &#125;  &#125;  &#x2F;&#x2F; å¤„ç†å¤šä¸ªchildren  const childrenLength &#x3D; arguments.length - 2;  if (childrenLength &#x3D;&#x3D;&#x3D; 1) &#123;    props.children &#x3D; children;  &#125; else if (childrenLength &gt; 1) &#123;    const childArray &#x3D; Array(childrenLength);    for (let i &#x3D; 0; i &lt; childrenLength; i++) &#123;      childArray[i] &#x3D; arguments[i + 2];    &#125;    if (__DEV__) &#123;      if (Object.freeze) &#123;        Object.freeze(childArray);      &#125;    &#125;    props.children &#x3D; childArray;  &#125;  &#x2F;&#x2F; defaultPropsçš„å¤„ç†  if (type &amp;&amp; type.defaultProps) &#123;    const defaultProps &#x3D; type.defaultProps;    for (propName in defaultProps) &#123;      if (props[propName] &#x3D;&#x3D;&#x3D; undefined) &#123;        props[propName] &#x3D; defaultProps[propName];      &#125;    &#125;  &#125;  if (__DEV__) &#123;    if (key || ref) &#123;      const displayName &#x3D; typeof type &#x3D;&#x3D;&#x3D; &#39;function&#39; ? type.displayName || type.name || &#39;Unknown&#39; : type;      if (key) &#123; defineKeyPropWarningGetter(props, displayName); &#125;      if (ref) &#123; defineRefPropWarningGetter(props, displayName); &#125;    &#125;  &#125;  return ReactElement(    type,    key,    ref,    self,    source,    ReactCurrentOwner.current,    props,  );&#125;\nReactElementé€šè¿‡createElementåˆ›å»ºï¼Œè°ƒç”¨è¯¥æ–¹æ³•éœ€è¦ä¼ å…¥ä¸‰ä¸ªå‚æ•°ï¼š\ntype (æŒ‡ä»£è¿™ä¸ªReactElementçš„ç±»å‹)\nconfig (ReactElementçš„å±æ€§)\nchildren (ReactElementçš„å†…å®¹)\nä»å¦‚ä¸‹ä»£ç ï¼š\n123456if (  hasOwnProperty.call(config, propName) &amp;&amp;  !RESERVED_PROPS.hasOwnProperty(propName)) &#123;  props[propName] &#x3D; config[propName];&#125;\n1234567&#x2F;&#x2F;å†…åµŒpropsconst RESERVED_PROPS &#x3D; &#123;  key: true,  ref: true,  __self: true,  __source: true,&#125;;\nå¯ä»¥çœ‹å‡ºkey,ref,__self,__sourceä¸ä¼šè¢«å¤åˆ°å…ƒç´ çš„propsä¸Šå»\ncreateElementæœ€åè¿”å›äº†ä¸€ä¸ªReactElementï¼ŒReactElementä¼šè¿”å›ä¸€ä¸ªå¯¹è±¡ä»£ç å¦‚ä¸‹ï¼š\n12345678910111213141516171819202122232425262728293031323334353637383940const ReactElement &#x3D; function(type, key, ref, self, source, owner, props) &#123;  const element &#x3D; &#123;    &#x2F;&#x2F; This tag allows us to uniquely identify this as a React Element    $$typeof: REACT_ELEMENT_TYPE,    &#x2F;&#x2F; Built-in properties that belong on the element    type: type,    key: key,    ref: ref,    props: props,    &#x2F;&#x2F; Record the component responsible for creating this element.    _owner: owner,  &#125;;  if (__DEV__) &#123;    element._store &#x3D; &#123;&#125;;    Object.defineProperty(element._store, &#39;validated&#39;, &#123;      configurable: false,      enumerable: false,      writable: true,      value: false,    &#125;);    Object.defineProperty(element, &#39;_self&#39;, &#123;      configurable: false,      enumerable: false,      writable: false,      value: self,    &#125;);    Object.defineProperty(element, &#39;_source&#39;, &#123;      configurable: false,      enumerable: false,      writable: false,      value: source,    &#125;);    if (Object.freeze) &#123;      Object.freeze(element.props);      Object.freeze(element);    &#125;  &#125;  return element;&#125;;\nReactElementåªæ˜¯ä¸€ä¸ªç”¨æ¥æ‰¿è½½ä¿¡æ¯çš„å®¹å™¨ï¼Œä»–ä¼šå‘Šè¯‰åç»­çš„æ“ä½œè¿™ä¸ªèŠ‚ç‚¹çš„ä»¥ä¸‹ä¿¡æ¯ï¼š\ntypeç±»å‹ï¼Œç”¨äºåˆ¤æ–­å¦‚ä½•åˆ›å»ºèŠ‚ç‚¹\nkeyå’Œrefè¿™äº›ç‰¹æ®Šä¿¡æ¯\npropsæ–°çš„å±æ€§å†…å®¹\n$$typeof ç”¨æ¥æ ‡è¯†elementæ˜¯ä»€ä¹ˆç±»å‹,ç”¨äºç¡®å®šæ˜¯å¦å±äºReactElement\n","plink":"https://www.hansomezao.com/2019/11/25/note/01-Reactæºç å­¦ä¹ -createElement/"},{"title":"æ­£åˆ™è¡¨è¾¾å¼","date":"2019-11-20T08:40:03.000Z","date_formatted":{"ll":"2019å¹´11æœˆ20æ—¥","L":"2019/11/20","MM-DD":"11-20"},"author":"zao","updated":"2019-11-20T08:40:03.000Z","content":"ç¬¬ä¸€éƒ¨åˆ† åŸºç¡€çŸ¥è¯†ä¸€ã€æ­£åˆ™ç”³æ˜æ–¹å¼1ã€æ„é€ å‡½æ•°æ–¹å¼1var reg = new RegExp('\\d', 'gi');\n\nâ— é€šè¿‡ new æ„é€ ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡ï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ªå‚æ•° â€˜\\dâ€™ æ˜¯æ­£åˆ™å†…å®¹ï¼Œç¬¬äºŒä¸ªå‚æ•° â€˜giâ€™ æ˜¯ä¿®é¥°ç¬¦ã€‚ä¸¤ä¸ªå‚æ•°çš†ä¸ºå­—ç¬¦ä¸²ç±»å‹\nâ— ä¿®é¥°ç¬¦çš„ä½œç”¨æ˜¯å¯¹åŒ¹é…è¿‡ç¨‹è¿›è¡Œé™å®š\nâ— ä¿®é¥°ç¬¦æœ‰ä¸‰ç§ï¼ši, g, mï¼Œå¯ä»¥åŒæ—¶å‡ºç°ï¼Œæ²¡æœ‰é¡ºåºï¼ˆå³ gi ä¸ ig ä¸€æ ·ï¼‰ï¼Œè¯·å‚è€ƒä¸‹æ–¹è¯´æ˜\n\nä¿®é¥°ç¬¦è¯´æ˜\n\niå¿½ç•¥å¤§å°å†™åŒ¹é…\n\ngå…¨å±€åŒ¹é…ï¼Œå³æ˜¯åŒ¹é…ä¸€ä¸ªåç»§ç»­åŒ¹é…ï¼Œç›´åˆ°ç»“æŸ\n\nmå¤šè¡ŒåŒ¹é…ï¼Œå³æ˜¯é‡åˆ°æ¢è¡Œåä¸åœæ­¢åŒ¹é…ï¼Œç›´åˆ°ç»“æŸ\nè¯´æ˜ï¼š â— [a-z] è¡¨ç¤ºä»å°å†™å­—æ¯aåˆ°å°å†™å­—æ¯zä¹‹é—´çš„ä»»æ„å­—ç¬¦(å«aå’Œz)ï¼Œä¸‹æ–‡ä¼šæœ‰è¯¦ç»†è¯´æ˜ â— + è¡¨ç¤ºè‡³å°‘å‡ºç°ä¸€æ¬¡ â— \\n åœ¨jsä¸­è¡¨ç¤ºæ¢è¡Œ â— ^[a-z] è¡¨ç¤ºä»¥ä»»æ„å°å†™å­—æ¯å¼€å¤´çš„è¡Œ\n123456789101112131415161718192021'aBcd efg'.match(/[a-z]+/);// [\"a\"]'aBcd efg'.match(/[a-z]+/i);// [\"aBcd\"]'aBcd efg'.match(/[a-z]+/g);// [\"a\", \"cd\", \"efg\"]'aBcd efg'.match(/[a-z]+/gi);// [\"aBcd\", \"efg\"]'aB\\ncd\\n efg'.match(/^[a-z]+/m);// [\"a\"]'aB\\ncd\\n efg'.match(/^[a-z]+/g);// [\"a\"]'aB\\ncd\\n efg'.match(/^[a-z]+/gm);// [\"a\", \"cd\"]// æ³¨æ„ä¸æ˜¯ [\"a\", \"cd\", \"efg\"]\n\n2ã€å­—é¢é‡æ–¹å¼ç›¸æ¯”è¾ƒä¸Šä¸€ç§æ–¹å¼ï¼Œè¿™ä¸€ç§æ›´ä¸ºå¸¸è§ï¼Œä¸Šé¢ç¤ºä¾‹ä¹Ÿéƒ½ä½¿ç”¨äº†è¿™ç§æ–¹å¼\n1var reg = /\\d/gi;\n\nä¸¤ä¸ªæ–œçº¿å†…ä¸ºæ­£åˆ™çš„å†…å®¹ï¼Œåé¢å¯ä»¥è·Ÿä¿®é¥°ç¬¦ï¼Œä¸ç¬¬ä¸€ç§æ„é€ å‡½æ•°æ–¹å¼ç›¸æ¯”æ›´ç®€æ´ï¼Œç¼ºç‚¹æ˜¯æ­£åˆ™å†…å®¹ä¸èƒ½æ‹¼æ¥ï¼Œå¯¹äºå¤§å¤šæ•°åœºæ™¯ä¿©è¯´è¶³å¤Ÿäº†\näºŒã€æ­£åˆ™ç›¸å…³ç¬¦å·1ã€æ–¹æ‹¬å· [] ç”¨æ³•ç”¨äºæŸ¥æ‰¾æ–¹æ‹¬å·å†…çš„ä»»æ„å­—ç¬¦ï¼š\n\nåœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\næ³¨æ„ï¼š 1ï¼‰^ åœ¨ [] å†…å¼€å§‹ä½ç½®åŠæ­£åˆ™åŒæ–œçº¿å¼€å§‹ä½ç½®æœ‰ç‰¹æ®Šå«ä¹‰ï¼Œå…¶ä»–ä½ç½®è¡¨ç¤º ^ å­—ç¬¦æœ¬èº«\nâ— // æ­£åˆ™å¼€å¤´ä½ç½®è¡¨ç¤ºä»¥æŸæŸå¼€å¤´çš„å­—ç¬¦ä¸²ï¼Œå¦‚ä¸‹è¡¨ç¤ºä»¥å¤§å†™æˆ–å°å†™å­—æ¯å¼€å¤´çš„ä¸”è¿ç»­ä¸ºå­—æ¯çš„å­—ç¬¦ä¸²ï¼š\n12'adobe 2016'.match(/^[a-zA-Z]+/);// [\"adobe\"]\n\nâ— åœ¨æ­£åˆ™ æˆ– åŒ¹é…ä¸­(å³ | åŒ¹é…)ï¼Œè¡¨ç¤º æˆ–è€…ä»¥æŸæŸå­—ç¬¦å¼€å§‹çš„å­—ç¬¦ä¸²ï¼Œå¦‚ä¸‹è¡¨ç¤ºåŒ¹é… è¿ç»­æ•°å­— æˆ– ä»¥å°å†™å­—æ¯å¼€å¤´ä¸”è¿ç»­ä¸ºå°å†™å­—æ¯çš„å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥è¿”å›ç»“æœåŒ…å«2016 å’Œ adobeï¼Œæ³¨æ„è¿”å›ç»“æœä¸æ˜¯ [â€œ2016â€, â€œadobeâ€]\n12'adobe2016ps'.match(/\\d+|^[a-z]+/g);// [\"adobe\", \"2016\"]\n\nâ— åœ¨ [] å†…å¼€å§‹ä½ç½®æ—¶ï¼Œè¡¨ç¤ºä¸åŒ¹é… [] å†…é™¤ ^ ä»¥å¤–çš„æ‰€æœ‰å­—ç¬¦ï¼š\n12'adobe'.match(/[^abc]/g);// [\"d\", \"o\", \"e\"]\n\næ³¨ï¼š $ ä¸ ^ çš„å‰ä¸¤ä¸ªç”¨æ³•ç›¸ä¼¼ï¼Œåªä¸è¿‡åŒ¹é…çš„æ˜¯ä»¥æŸæŸå­—ç¬¦ç»“å°¾çš„å­—ç¬¦ä¸²ï¼Œä¸¾ä¾‹ï¼š\n1234'adobe 2016'.match(/\\d+|[a-z]+$/g);// [\"2016\"]'adobe'.match(/\\d+|[a-z]+$/g);// [\"adobe\"]\n\n2ï¼‰- (è¿å­—ç¬¦)è¡¨ç¤ºå·¦è¾¹å­—ç¬¦çš„ ASCII å€¼åˆ°å³è¾¹å­—ç¬¦ ASCII ç¼–ç å€¼ä¹‹é—´åŠå·¦å³å­—ç¬¦è‡ªèº«çš„æ‰€æœ‰å­—ç¬¦\n12'adobe PS 2016'.match(/[a-g]/g);// [\"a\", \"d\", \"b\", \"e\"]\n\n3ï¼‰- è¿å­—ç¬¦å·¦ä¾§çš„å­—ç¬¦å¯¹åº”çš„ ASCII å€¼ä¸€å®šè¦å°äºæˆ–ç­‰äºå³ä¾§çš„å­—ç¬¦ï¼Œå¦åˆ™ä¼šæŠ¥è¯­æ³•é”™è¯¯\n12'adobe'.match(/[z-a]/);// Uncaught SyntaxError: Invalid regular expression: /[z-a]/: Range out of order in character class...\n\n4ï¼‰å¦‚æœå¸Œæœ›å¯¹è¿å­—ç¬¦ - æœ¬èº«è¿›è¡ŒåŒ¹é…ï¼Œéœ€è¦ç”¨åæ–œçº¿è½¬ä¹‰\n12'adobe-2016'.match(/[a-g\\-]/g);// [\"a\", \"d\", \"b\", \"e\", \"-\"]\n\n5ï¼‰æŸ¥çœ‹ ASCII è¡¨å°±ä¼šå‘ç°ï¼Œå¤§å†™å­—æ¯çš„ ASCII å€¼æ˜¯å°äºå°å†™å­—æ¯çš„ï¼Œå› æ­¤ä¸‹é¢ç”¨æ³•ä¼šæŠ¥è¯­æ³•é”™è¯¯\n12'adobe-2016'.match(/[a-Z]/g);// Uncaught SyntaxError: Invalid regular expression: /[a-Z]/: Range out of order in character ...\n\né‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œå¦‚æœè¦è¡¨ç¤ºæ‰€æœ‰å­—æ¯ï¼Œä¸åŒºåˆ†å¤§å°å†™æ€ä¹ˆåŠå‘¢ï¼Ÿå…¶å®æœ‰ä¸¤ç§æ–¹å¼ï¼š Aã€ç¬¬ä¸€ç§æ˜¯ä½¿ç”¨ä¿®é¥°ç¬¦ iï¼Œå‰é¢æåˆ°è¿‡ã€‚ä¸¾ä¾‹ï¼š\n12'adobe-PS'.match(/[a-z]/gi);// [\"a\", \"d\", \"o\", \"b\", \"e\", \"P\", \"S\"]\n\nBã€ç¬¬äºŒç§æ˜¯åœ¨æ­£åˆ™ä¸­æ˜ç¡®æŒ‡æ˜å¤§å°å†™å­—æ¯ï¼Œä¸¾ä¾‹ï¼š\n12'adobe-PS'.match(/[a-zA-Z]/g);// [\"a\", \"d\", \"o\", \"b\", \"e\", \"P\", \"S\"]\n\nè¿”å›ç»“æœè·Ÿç¬¬ä¸€ç§ä¸€æ ·ã€‚å½“ç„¶è¿™ä¸ªä¾‹å­æœ‰äº›ç‰¹æ®Šï¼šåŒ¹é…äº†æ‰€æœ‰å¤§å°å†™å­—æ¯ã€‚å½“åªåŒ¹é…éƒ¨åˆ†å¤§å°å†™å­—æ¯çš„æ—¶å€™åªèƒ½ä½¿ç”¨ç¬¬äºŒç§æ–¹å¼ï¼Œåœ¨æ­¤å°±ä¸åšç¤ºä¾‹äº†ï¼Œè¯»è€…å¯ä»¥è‡ªå·±æµ‹è¯•\n6ï¼‰åŒ¹é…å¤§å°å­—æ¯ä¸èƒ½å†™æˆ [A-z]ï¼Œè™½ç„¶ä¸ä¼šæŠ¥è¯­æ³•é”™è¯¯ï¼Œä½†éšå¼çš„æ”¾å¤§äº†åŒ¹é…èŒƒå›´ï¼ŒæŸ¥çœ‹ ASCII ä¼šå‘ç°ï¼Œåœ¨å¤§å†™å­—æ¯ Z åˆ°å°å†™å­—æ¯ a ä¹‹é—´è¿˜æœ‰ [ã€ \\ã€ ]ã€ ^ã€ _ã€ ` è¿™6ä¸ªå­—ç¬¦ï¼Œå› æ­¤ä¸èƒ½è¿™ä¹ˆå†™ã€‚\n7ï¼‰æƒ³å¿…æœ‰åŒå­¦ä¼šé—®ï¼Œ \\w ä¸ä¹Ÿå¯ä»¥åŒ¹é…å­—æ¯ä¹ˆï¼Ÿæ˜¯çš„ï¼Œ\\w ç¡®å®å¯ä»¥åŒ¹é…å­—æ¯ï¼Œä½†è·Ÿä¸Šé¢è¯´çš„ä¸€æ ·,ä¹Ÿéšå¼çš„æ”¾å¤§äº†åŒ¹é…èŒƒå›´ï¼Œ\\w é™¤äº†åŒ¹é…å¤§å°å­—æ¯å¤–è¿˜åŒ¹é…äº†æ•°å­—å’Œä¸‹åˆ’çº¿ï¼Œå³ \\w ä¸ [A-Za-z0-9_] ç­‰ä»·ï¼Œå½“ç„¶ A-Zã€a-zã€0-9(ç­‰ä»·äº\\d)ã€_è¿™å››ç»„æ²¡é¡ºåºä¹‹åˆ†\n2ã€ç‰¹æ®Šå«ä¹‰å­—ç¬¦â— . åŒ¹é…ä»»æ„å•ä¸ªå­—ç¬¦ï¼Œé™¤æ¢è¡Œå’Œç»“æŸç¬¦\n12'1+0.2*2=1.4'.match(/.&#123;2&#125;/g);// [\"1+\", \"0.\", \"2*\", \"2=\", \"1.\"]\n\nâ— \\w åŒ¹é…ä»»æ„å•è¯å­—ç¬¦ï¼ˆæ•°å­—ã€å­—æ¯ã€ä¸‹åˆ’çº¿ï¼‰ï¼Œç­‰ä»·äº[A-Za-z0-9_]\n12'ad34~!@$ps'.match(/\\w/g);// [\"a\", \"d\", \"3\", \"4\", \"p\", \"s\"]\n\nâ— \\W åŒ¹é…ä»»æ„å•è¯å­—ç¬¦ï¼Œä¸\\wç›¸åï¼Œç­‰ä»·äº[^A-Za-z0-9_]\n12'ad34~!@$ps'.match(/\\W/g);// [\"~\", \"!\", \"@\", \"$\"]\n\nâ— \\d åŒ¹é…æ•°å­—ï¼Œç­‰ä»·äº [0-9]\n12'ps6'.match(/\\d/g);// [\"6\"]\n\nâ— \\D åŒ¹é…éæ•°å­—ï¼Œç­‰ä»·äº [0-9]\n12'ps6'.match(/\\D/g);// [\"p\", \"s\"]\n\nâ— \\s åŒ¹é…ç©ºç™½å­—ç¬¦ï¼Œä¸»è¦æœ‰(\\nã€\\fã€\\rã€\\tã€\\v)ï¼Œæ³¨æ„â€™a\\sbâ€™ä¸­çš„\\sä¾ç„¶æ˜¯å­—ç¬¦sï¼Œæ‰€ä»¥â€™a\\sbâ€™.match(/\\s/g)è¿”å› null\n12'adobe ps'.match(/\\s/g);// [\" \"]\n\nâ— \\S åŒ¹é…éç©ºç™½å­—ç¬¦ï¼Œä¸\\sç›¸å\n12'adobe ps'.match(/\\S/g);// [\"a\", \"d\", \"o\", \"b\", \"e\", \"p\", \"s\"]\n\nâ— \\b åŒ¹é…å•è¯è¾¹ç•Œï¼Œæ³¨æ„è¿ç»­çš„æ•°å­—ã€å­—æ¯æˆ–ä¸‹åˆ’çº¿ç»„æˆçš„å­—ç¬¦ä¸²ä¼šè®¤ä¸ºä¸€ä¸ªå•è¯\n12'adobe(2016) ps6.4'.match(/\\b(\\w+)/g);// [\"adobe\", \"2016\", \"ps6\", \"4\"]\n\nâ— \\B åŒ¹é…éå•è¯è¾¹ç•Œï¼Œä»”ç»†ä½“ä¼šä¸‹é¢çš„ç¤ºä¾‹ä¸\\bçš„ç»“æœ\n12'adobe(2016) ps6.4'.match(/\\B(\\w+)/g);// [\"dobe\", \"016\", \"s6\"]\n\nâ— \\0 åŒ¹é…NULå­—ç¬¦\n12'\\0'.match(/\\0/);// [\"NUL\"]\n\nâ— \\n åŒ¹é…æ¢è¡Œç¬¦ï¼ˆç¼–ç ï¼š10ï¼Œnewlineï¼‰\n12'adobe\\nps'.match(/\\n/).index;// 5\n\nâ— \\f åŒ¹é…æ¢é¡µç¬¦\n12'adobe\\fps'.match(/\\f/).index;// 5\n\nâ— \\r åŒ¹é…å›è½¦ç¬¦ï¼ˆç¼–ç ï¼š13ï¼Œreturnï¼‰\n12'adobe\\rps'.match(/\\r/).index;// 5\n\nâ— \\t åŒ¹é…åˆ¶è¡¨ç¬¦ï¼Œé”®ç›˜tabå¯¹åº”çš„å­—ç¬¦\n12'adobe\\tps'.match(/\\t/).index;// 5\n\nâ— \\v åŒ¹é…å‚ç›´åˆ¶è¡¨ç¬¦\n12'adobe\\vps'.match(/\\v/).index;// 5\n\nâ— \\xxx åŒ¹é…ä»¥å…«è¿›åˆ¶æ•°xxxè§„å®šçš„å­—ç¬¦\n1234'a'.charCodeAt(0).toString(8);// \"141\"'adobe ps'.match(/\\141/g);// [\"a\"]\n\nâ— \\xdd åŒ¹é…ä»¥åå…­è¿›åˆ¶æ•°ddè§„å®šçš„å­—ç¬¦\n1234'a'.charCodeAt(0).toString(16);// \"61\"'adobe ps'.match(/\\x61/g);// [\"a\"]\n\nâ— \\uxxxx åŒ¹é…ä»¥åå…­è¿›åˆ¶æ•°xxxxè§„å®šçš„ Unicodeå­—ç¬¦ï¼Œæ³¨æ„ä½æ•°ä¸å¤Ÿéœ€è¦è¡¥0\n1234'a'.charCodeAt(0).toString(16);// \"61\"'adobe ps'.match(/\\u0061/g);// [\"a\"]\n\næ³¨æ„ï¼š windowç³»ç»Ÿå›è½¦æ¢è¡Œç¬¦ä¸º\\r\\nï¼Œlinuxç³»ç»Ÿä¸‹æ²¡æœ‰\\rï¼Œlinuxç³»ç»Ÿé€šè¿‡viç¼–è¾‘å™¨æ‰“å¼€windowç³»ç»Ÿçš„æ–‡æœ¬æ–‡ä»¶æ—¶å€™ï¼Œç»å¸¸åœ¨è¡Œå°¾å‡ºç°^Mç¬¦å·ï¼Œä¹Ÿå°±æ˜¯\\rçš„åŸå› ï¼Œè§£ææ–‡æœ¬çš„æ—¶å€™éœ€è¦æ³¨æ„ç›¸å…³åˆ¤æ–­ã€‚\n3ã€é‡è¯è¯´æ˜â— n+ åŒ¹é…åŒ…å«è‡³å°‘ä¸€ä¸ªnçš„å­—ç¬¦ä¸²\n12'adobe paas'.match(/a+\\w+/g);// [\"adobe\", \"aas\"]\n\nâ— n* åŒ¹é…åŒ…å«é›¶ä¸ªæˆ–å¤šä¸ªnçš„å­—ç¬¦ä¸²\n12'ab3 aa12bb'.match(/a*\\d+/g);// [\"3\", \"aa12\"]\n\nâ— n? åŒ¹é…åŒ…å«é›¶ä¸ªæˆ–ä¸€ä¸ªnçš„å­—ç¬¦ä¸²\n12'ab3 aa12bb'.match(/a?\\d+/g);// [\"3\", \"a12\"]\n\nâ— n{x} åŒ¹é…åŒ…å«è¿ç»­xä¸ªnçš„å­—ç¬¦ä¸²\n12'ab3 aa12bb aaa34'.match(/a&#123;2&#125;\\d+/g);// [\"aa12\", \"aa34\"]\n\nâ— n{x,y} åŒ¹é…åŒ…å«è‡³å°‘è¿ç»­xä¸ªä¸”æœ€å¤šè¿ç»­yä¸ªnçš„å­—ç¬¦ä¸²\n12'a3 aaa12bb aaaaaaa34'.match(/a&#123;2,4&#125;\\d+/g);// [\"aaa12\", \"aaaa34\"]\n\nâ— n{x,} åŒ¹é…åŒ…å«è‡³å°‘è¿ç»­xä¸ªnçš„å­—ç¬¦ä¸²\n12'a3 aaa12bbaa4'.match(/a&#123;2,&#125;\\d+/g);// [\"aaa12\", \"aa4\"]\n\nç”±ä¸Šå¯çŸ¥ï¼Œä»¥ä¸‹ è¡¨è¾¾å¼1 ä¸ è¡¨è¾¾å¼2 ç­‰ä»·\n\nè¡¨è¾¾å¼1è¡¨è¾¾å¼2\n\nn+n{1,}\n\nn*n{0,}\n\nnï¼Ÿn{0,1}\n4ã€ç¬¦å·è¯´æ˜ç¬¦å· {}ã€ã€$ã€*ã€+ã€?ã€[]ã€[]ã€- å·²ç»åœ¨å‰é¢ä»‹ç»è¿‡ï¼Œæ¥ä¸‹æ¥çœ‹ä¸‹å…¶ä»–ç‰¹æ®Šå­—ç¬¦ â— a|b åŒ¹é…åŒ…å«aæˆ–bçš„å­—ç¬¦ä¸²\n12'adobe ps13'.match(/([a-g]+l\\d+)/g);// [\"ad\", \"be\", \"13\"]\n\nâ— / å­—é¢é‡æ–¹å¼ç”³æ˜æ­£åˆ™æ—¶çš„ç•Œå®šç¬¦\n12'adobe'.match(/\\w+/);// [\"adobe\"]\n\nâ— \\ æ™®é€šåæ–œçº¿å­—ç¬¦\n12'a\\\\dobe'.match(/\\\\/);// [\"\\\"]\n\n5ã€å°æ‹¬å· () ç”¨æ³•æ­£åˆ™åœ¨éå…¨å±€(g)æ¨¡å¼ä¸‹ï¼Œé€šè¿‡matchæ–¹å¼ï¼Œè¿”å›çš„æ•°ç»„ç¬¬ä¸€ä¸ªå€¼æ•´ä½“åŒ¹é…çš„å­—ç¬¦ä¸²ï¼Œå…¶ä»–å€¼ä¸ºé€šè¿‡æ‹¬å·åˆ†ç»„åŒ¹é…åˆ°çš„ 1ï¼‰æ•è·ç”¨æ³• â— è¡¨ç¤ºå¯¹åŒ¹é…çš„å­—ç¬¦ä¸²è¿›è¡Œåˆ†ç»„\n123'adobe cs9cs10, adobe cs11'.match(/([a-z]+\\d+)+/);// [\"cs9cs10\", \"cs10\"]// æ³¨æ„&#123;2,&#125;æ˜¯å¯¹ æ‹¬å¼§å†…çš„åŒ¹é… çš„æè¿°\n\nâ— ä¸|ä¸€èµ·ä½¿ç”¨è¡¨ç¤ºé€‰æ‹©æ€§\n12\"he is 12. she is 13. it's box\".match(/(it|she|he)\\s+is/g);// [\"he is\", \"she is\"]\n\nâ— è¡¨ç¤ºå¯¹åŒ¹é…çš„å­—ç¬¦ä¸²æ•è·\n1234'adobe cs9'.match(/[a-z]+\\d+/);// [\"cs9\"]'adobe cs9'.match(/[a-z]+(\\d+)/);// [\"cs9\", \"9\"]\n\nâ— è¡¨ç¤ºå¯¹åŒ¹é…çš„å­—ç¬¦ä¸²åå‘å¼•ç”¨ï¼Œå¼•ç”¨ä» \\1 å¼€å§‹ï¼Œä»æ­£åˆ™å·¦ä¾§ç¬¬ä¸€ä¸ªå·¦æ‹¬å·ï¼ˆå½“ç„¶è¦æ˜¯é—­åˆçš„æ‹¬å·æ‰è¡Œï¼‰å¼€å§‹è®¡ç®—ï¼Œæ¯å¤šä¸€å¯¹æ‹¬å·ï¼Œå¼•ç”¨æ•°åŠ ä¸€ï¼Œåœ¨éæ•è·æƒ…å†µä¸‹ä¸ä¼šåŠ ä¸€ã€‚ä½†æ­£åˆ™æ¯”è¾ƒå¤æ‚æ—¶ï¼Œå‡å°‘å¼•ç”¨å¯ä»¥æå‡åŒ¹é…æ€§èƒ½ï¼Œå…³äº éæ•è· ä¸‹æ–¹ä¼šè¯¦ç»†ä»‹ç» å¼•ç”¨çš„ç»“æœå¯ä»¥é€šè¿‡ æ„é€ å‡½æ•° RegExp è·å–ï¼Œå³ RegExp.9\n123456789'Can you can a can as a canner can can a can?'.match(/([cC]an+)\\s+\\1/g);// [\"can can\"]// æ³¨æ„ `\\1` ç­‰ä»·äºæ­£åˆ™é‡Œçš„ `([a-z]+)`ï¼Œå³ä¸ä¸‹é¢ç¤ºä¾‹ç›¸åŒ'Can you can a can as a canner can can a can?'.match(/[cC]an+\\s+[cC]an+/g);// [\"can can\"]// å¦‚æœæŠŠæ‹¬å¼§å»æ‰å¯ä»¥çœ‹ä¸‹ç»“æœ'Can you can a can as a canner can can a can?'.match(/[cC]an+\\s+\\1/g);// null\n\n2ï¼‰éæ•è·ç”¨æ³•ï¼Œä»¥(?)å½¢å¼å‡ºç° â— (?:n ) è¡¨ç¤ºéæ•è·ç»„\n123// ä¸ä½¿ç”¨æ‹¬å·æ—¶'adobe12ps15test'.match(/[a-z]+\\d+[a-z]+/);// [\"adobe12ps\"]\n\n// ä½¿ç”¨æ‹¬å·åˆ†ç»„\n12345'adobe12ps15test'.match(/[a-z]+(\\d+)([a-z]+)/);// [\"adobe12ps\", \"12\", \"ps\"]'adobe12ps15test'.match(/[a-z]+(?:\\d+)([a-z]+)/);// [\"adobe12ps\", \"ps\"]\n\n// çœ‹èµ·æ¥ä¸Šé¢è¯­å¥ä¸ç”¨(?:)ä¹Ÿå¯ä»¥å¾—åˆ°ç›¸åŒç»“æœï¼Œå³ï¼š\n12'adobe12ps15test'.match(/[a-z]+\\d+([a-z]+)/);// [\"adobe12ps\", \"ps\"]\n\n// æ³¨æ„ï¼Œä½†éœ€æ±‚å¸Œæœ›åŒ¹é…å­—æ¯ä¹‹é—´çš„è§„åˆ™å¤æ‚æ—¶ï¼Œå¦‚å¸Œæœ›åŒ¹é…å­—æ¯ï¼Œä¸”å­—æ¯ä¹‹é—´å¯ä»¥ä¸º1æˆ–3æ—¶ï¼Œä½†ä¸éœ€è¦1å’Œ3\n12'adobe11ps15test'.match(/[a-z]+(1|3)+([a-z]+)/);// [\"adobe11ps\", \"1\", \"ps\"]\n\n// è¿”å›ä¸­ä¸å¸Œæœ›åŒ…å«æ•°å­—æ€ä¹ˆåŠï¼Œå¯ä»¥ä½¿ç”¨éæ•è·\n12'adobe11ps15test'.match(/[a-z]+(?:1|3)+([a-z]+)/);// [\"adobe11ps\", \"ps\"]\n\nâ— (?=n ) åŒ¹é…ä»»ä½•å…¶åç´§è·Ÿå­—ç¬¦nçš„å­—ç¬¦ä¸²ï¼Œä½†è¿”å›ä¸­ä¸åŒ…å«n\n12'adobe12ps15test'.match(/[a-z]+(?=\\d)/g);// [\"adobe\", \"ps\"]\n\nâ— (?!n ) åŒ¹é…ä»»ä½•å…¶åæ²¡æœ‰ç´§è·Ÿå­—ç¬¦nçš„å­—ç¬¦ä¸²ï¼Œè¿”å›ä¸­ä¸åŒ…å«n\n12'adobe12ps15test'.match(/[a-z]+(?!\\d)/g);// [\"adob\", \"p\", \"test\"]\n\nâ— (?&lt;=n ) åŒ¹é…ä»»ä½•å…¶å‰ç´§è·Ÿå­—ç¬¦nçš„å­—ç¬¦ä¸²ï¼Œè¿”å›ä¸­ä¸åŒ…å«n\n12'adobe12ps15test'.match(/(?&lt;=\\d)[a-z]+/g);// [\"ps\", \"test\"]\n\nâ— (?&lt;!n ) åŒ¹é…ä»»ä½•å…¶å‰ç´§è·Ÿå­—ç¬¦nçš„å­—ç¬¦ä¸²ï¼Œè¿”å›ä¸­ä¸åŒ…å«n\n12'adobe12ps15test'.match(/(?&lt;!\\d)[a-z]+/g);// [\"adobe\", \"s\", \"est\"]\n\n3ï¼‰æ³¨æ„ â— Aã€å¦‚æœå¸Œæœ›å¯¹ä¸Šé¢ç‰¹æ®Šå­—ç¬¦æœ¬èº«è¿›è¡ŒåŒ¹é…ï¼Œéœ€è¦åœ¨å…¶å‰é¢æ·»åŠ \\è¿›è¡Œè½¬ç§»\n1234'11+2=13'.match(/\\d+\\+/g); // [\"11+\"]'(11+2)*2=26'.match(/\\(\\d+\\+\\d+\\)/g); // [\"(11+2)\"]\n\nâ— Bã€\\ä¸¾ä¾‹\n12345// æ³¨æ„ä¸‹é¢ä¸¤ä¸ªè¡¨è¾¾å¼è¿”å›çš„ç»“æœ'path C:\\Windows\\System32'.match(/([a-zA-Z]:\\\\\\w+)/g); // null'path C:\\\\Windows\\\\System32'.match(/([a-zA-Z]:\\\\\\w+)/g); // [\"C:\\Windows\"]\n\n\nè¯´æ˜: åœ¨ç”³æ˜å­—ç¬¦ä¸² â€˜path C:\\Windows\\System32â€™ æ—¶ï¼Œå…¶ä¸­çš„ â€˜â€™ å°±å·²ç»è¢«å½“åšè½¬ç§»ç¬¦ï¼Œæ—¢æ˜¯ â€˜\\Wâ€™ === â€˜Wâ€™,æ‰€ä»¥å¦‚æœå¸Œæœ›ç”³æ˜çš„å­—ç¬¦ä¸²ä¸­åŒ…å«åæ–œçº¿ï¼Œéœ€è¦åœ¨åŠ ä¸€ä¸ªåæ–œçº¿è½¬ä¹‰ï¼Œå³ \\\n\n6ã€æ­£åˆ™ç›¸å…³æ–¹æ³•1ï¼‰ RegExpå¯¹è±¡ç›¸å…³æ–¹æ³•\n\nåœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\n2ï¼‰Stringå¯¹è±¡ç›¸å…³æ–¹æ³•\n\nåœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°\n3ï¼‰replace å…·ä½“ç”¨æ³• é¡¾åæ€ä¹‰ï¼Œæ˜¯å­—ç¬¦ä¸²æ›¿æ¢æ–¹æ³•ï¼Œä½†ç”¨æ³•æ¯”è¾ƒå¹¿æ³›ï¼Œç›¸ä¿¡è¯»è€…å·²ç»éå¸¸ç†Ÿæ‚‰äº†ã€‚åœ¨æ­¤å°±å½“å¤ä¹ äº† Aã€ åŸºæœ¬ç”¨æ³• ç›´æ¥ä¼ å…¥å­—ç¬¦ä¸²è¿›è¡Œæ›¿æ¢ï¼Œæ‰¾åˆ°å­ä¸²ååªæ›¿æ¢ä¸€æ¬¡ï¼Œä¸¾ä¾‹ï¼š\n123'adobe abc'.replace('b', '_')// \"ado_e abc\"// æ³¨æ„ ç¬¬äºŒä¸ª b æ²¡æœ‰è¢«æ›¿æ¢\n\nå¦‚æœå¸Œæœ›å…¨éƒ¨æ›¿æ¢ï¼Œå¯ä»¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼å¹¶ç”¨å…¨å±€ä¿®é¥°ç¬¦ g æ–¹å¼ï¼Œä¸¾ä¾‹ï¼š\n12'adobe abc'.replace(/b/g, '_')// \"ado_e a_c\"\n\nBã€ é«˜çº§ç”¨æ³• ç¬¬äºŒä¸ªå‚æ•°å¯ä»¥ä½¿ç”¨ functionï¼Œå…¶ä¸­æœ‰ä¸‰ä¸ªå‚æ•°ï¼Œåˆ†åˆ«ä¸º åŒ¹é…çš„å­—ç¬¦ä¸²ã€å½“å‰åŒ¹é…çš„å­—ç¬¦ä¸²indexå€¼ã€åŒ¹é…çš„æºå­—ç¬¦ä¸²ï¼Œæœ€ç»ˆç»“æœæ ¹æ®æ¯æ¬¡åŒ¹é…ç»“æœè¿›è¡Œç›¸åº”çš„æ›¿æ¢ ä¸¾ä¾‹ï¼š\n12345678'adobe aacc bbaa'.replace(/a+/g, function(str, index, source)&#123;    if(index &gt; 0)&#123;        return str.toUpperCase();    &#125; else &#123;        return str;    &#125;&#125;);// \"adobe AAcc bbAA\"\n\nç¬¬äºŒéƒ¨åˆ† æ¡ˆä¾‹åˆ†æä¸€ã€å¸¸è§åŒ¹é…åœ¨å†™æ­£åˆ™ä¹‹å‰ï¼Œéœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š\nä¸€å®šè¦æ¸…æ¥šæœŸæœ›çš„è§„åˆ™æ˜¯ä»€ä¹ˆï¼Œä¸ç„¶æ— ä»åŒ¹é…\næœ‰äº›æ­£åˆ™ä¸åªä¸€ç§å†™æ³•ï¼Œè¦æ³¨æ„ç®€çŸ­å¹²ç»ƒï¼Œå¤æ‚çš„æ­£åˆ™è¡¨è¾¾å¼ä¸ä»…éš¾æ‡‚ï¼Œè€Œä¸”å®¹æ˜“å‡ºBUGï¼Œæ€§èƒ½ä¹Ÿä¸æ˜¯å¾ˆå¥½\næ­£åˆ™è™½å¥½ï¼Œå¯è¦é€‚åº¦å¥¥ã€‚æœ‰äº›å­—ç¬¦ä¸²å¤„ç†ä¸ä¸€å®šé€‚åˆç”¨æ­£åˆ™\n1ã€æ‰‹æœºå·è§„åˆ™ï¼šä»¥1å¼€å¤´ç¬¬äºŒä½ä¸º3ã€5ã€7ã€8ä¸”é•¿åº¦ä¸º11ä½çš„æ•°å­—ç»„åˆ\n12/^1[3578]\\d&#123;9&#125;$/.test(13600001111);// true\n\n2ã€ å­—ç¬¦ä¸²æå–ä¸¾ä¾‹ï¼šæå–å­—ç¬¦ä¸²ä¸­çš„æ•°å­— åˆ†æï¼š æ ¹æ®å¯¹æ•°å­—çš„ç†è§£ï¼Œå¯èƒ½ä¸ºè´Ÿæ•°ï¼Œå³-?ï¼Œå¦‚æœæ˜¯è´Ÿæ•°ï¼Œå…¶åéœ€è¦æ˜¯æ•°å­—ä¸”è‡³å°‘ä¸€ä½ï¼Œå³ -?\\d+ï¼Œå°æ•°éƒ¨åˆ†å¯èƒ½æœ‰ä¹Ÿå¯èƒ½æ²¡æœ‰ï¼Œæ‰€ä»¥éœ€è¦å¯¹å°æ•°éƒ¨åˆ†æ‹¬å¼§èµ·æ¥ç”¨ ? æˆ– {0, 1}é™å®šï¼Œå› ä¸º.æ˜¯ç‰¹æ®Šå­—ç¬¦éœ€è¦è½¬ä¹‰ï¼Œäºæ˜¯è¡¨è¾¾å¼ä¸ºï¼š-?\\d+(.\\d+)?\n12'(12.3 - 32.3)*2 = -40'.match(/-?\\d+(\\.\\d+)?/g);// [\"12.3\", \"32.3\", \"2\", \"-40\"]\n\näºŒã€jQueryä¸­çš„æ­£åˆ™ç‰‡æ®µ1ã€è¡¨è¾¾å¼ åœ¨jQuery 3.1.2-preä¸­æ‰¾åˆ°ä¸€ä¸ªè§£æå•æ ‡ç­¾çš„æ­£åˆ™ï¼Œå¦‚ä¸‹ï¼š\n1/^&lt;([a-z][^\\/\\0&gt;:\\x20\\t\\r\\n\\f]*)[\\x20\\t\\r\\n\\f]*\\/?&gt;(?:&lt;\\/\\1&gt;|)$/i\n\n2ã€åˆ†è§£ ä¹ä¸€çœ‹æœ‰ç‚¹æ‡µï¼Œå…¶å®æ‹†è§£ä¹‹åå°±å®¹æ˜“ç†è§£äº†ï¼Œæ³¨æ„æ‹†è§£çš„æ­¥éª¤ï¼Œé€šå¸¸æ¥è¯´ï¼š 1ï¼‰ ç¬¬ä¸€æ­¥å¯ä»¥å…ˆçœ‹æ‹¬å· () ï¼Œå¯ä»¥å°†å„ä¸ªå°æ‹¬å·åŠéæ‹¬å·çš„åˆ†æˆä¸åŒéƒ¨åˆ†ï¼Œå¦‚\n1/^&lt;  ([a-z][^\\/\\0&gt;:\\x20\\t\\r\\n\\f]*)  [\\x20\\t\\r\\n\\f]*\\/?&gt;  (?:&lt;\\/\\1&gt;|)  $/i\n\n2ï¼‰ ç¬¬äºŒæ­¥å¯ä»¥å°†ä¸­æ‹¬å·åˆ†å¼€\n1/^&lt;  (  [a-z]  [^\\/\\0&gt;:\\x20\\t\\r\\n\\f]*  )  [\\x20\\t\\r\\n\\f]*  \\/?&gt;  (?:&lt;\\/\\1&gt;|)  $/i\n\nç°åœ¨æ˜¯ä¸æ˜¯å·²ç»å¾ˆæ¸…æ¥šäº†ï¼Œæ¥ä¸‹æ¥åˆ†è§£ä¸‹ï¼Œå°±å¾ˆå®¹æ˜“ç†è§£äº† 3ã€è¯¦è§£ â— 1ï¼‰^&lt; å¾ˆæ˜æ˜¾åœ¨åŒ¹é…æ ‡ç­¾å·¦å°–æ‹¬å·æ‹¬å·ï¼Œä¸”ä»¥å…¶å¼€å§‹\nâ— 2ï¼‰( [a-z] [^\\/\\0&gt;:\\x20\\t\\r\\n\\f]* ) è¿™ä¸ªæ‹¬å·æœ‰ä¸¤éƒ¨åˆ†ï¼Œç¬¬ä¸€ä¸ª [a-z] æ²¡ä»€ä¹ˆå¥½è§£é‡Šï¼Œå³æ ‡ç­¾&lt;ç´§è·Ÿçš„å¿…é¡»ä¸ºå­—æ¯ï¼Œå› ä¸ºå…¨å±€åŠ äº† i(å¿½ç•¥å¤§å°å†™) ä¿®é¥°ç¬¦ï¼Œæ‰€ä»¥å¤§å°å†™å­—æ¯éƒ½å¯ä»¥ï¼›[^\\/\\0&gt;:\\x20\\t\\r\\n\\f]*ï¼ŒåŠé™åˆ¶æ ‡ç­¾åå¿…é¡»ä»¥å­—æ¯å¼€å§‹ï¼Œä¸”ç¬¬äºŒä¸ªå­—æ¯ä¸èƒ½ä¸º/ \\0 &gt; : \\20 t \\r \\n \\fçš„ä»»æ„å¤šä¸ªå­—ç¬¦ï¼ˆæ€è€ƒä¸ºä»€ä¹ˆï¼‰ï¼Œ() è¡¨ç¤ºå¯¹æ ‡ç­¾çš„åˆ†ç»„ï¼Œæ–¹ä¾¿å–åˆ°æ ‡ç­¾å\nâ— 3ï¼‰[\\x20\\t\\r\\n\\f]* è¡¨ç¤ºå¯èƒ½å«æœ‰ [\\x20\\t\\r\\n\\f] è¿™äº›ç‰¹æ®Šå­—ç¬¦ï¼Œä¸å‰é¢çš„ [^\\/\\0&gt;:\\x20\\t\\r\\n\\f]* ç›¸ä¼¼å´ä¸ä¸€æ ·ï¼Œé€šè¿‡è¿™é‡Œå¯ä»¥çœ‹å‡º&lt;brä¹‹åè¿›è¡Œå›è½¦ä¹Ÿèƒ½åŒ¹é…åˆ° â— 4ï¼‰/?&gt; èƒ½åŒ¹é…æˆ–\n â— 5ï¼‰(?:&lt;\\/\\1&gt;|) è¿™é‡Œä¸æ•è·ï¼Œå¹¶ç”¨\\1å»åå‘å¼•ç”¨ç¬¬ä¸€ä¸ªæ‹¬å·çš„è¡¨è¾¾å¼ ([a-z][^\\/\\0&gt;:\\x20\\t\\r\\n\\f]*)ã€‚è¿™é‡Œçš„|è¡¨ç¤º &lt;/\\1&gt; å¯æœ‰å¯æ— ï¼Œå³ï¼š(?:&lt;\\/\\1&gt;|) ä¸ (?:&lt;\\/\\1&gt;)?åŒ¹é…ç»“æœä¸€æ ·\n","plink":"https://www.hansomezao.com/2019/11/20/note/æ­£åˆ™è¡¨è¾¾å¼/"},{"title":"restful API","date":"2019-11-10T06:52:21.000Z","date_formatted":{"ll":"2019å¹´11æœˆ10æ—¥","L":"2019/11/10","MM-DD":"11-10"},"author":"ç½‘ä¸Šæ”¶é›†,æ¥æºä¸æ˜","updated":"2019-11-10T06:52:21.000Z","content":"ä¸€ã€URL è®¾è®¡1.1 åŠ¨è¯ + å®¾è¯­RESTful çš„æ ¸å¿ƒæ€æƒ³å°±æ˜¯ï¼Œå®¢æˆ·ç«¯å‘å‡ºçš„æ•°æ®æ“ä½œæŒ‡ä»¤éƒ½æ˜¯â€åŠ¨è¯ + å®¾è¯­â€çš„ç»“æ„ã€‚æ¯”å¦‚ï¼ŒGET /articlesè¿™ä¸ªå‘½ä»¤ï¼ŒGETæ˜¯åŠ¨è¯ï¼Œ/articlesæ˜¯å®¾è¯­ã€‚\nåŠ¨è¯é€šå¸¸å°±æ˜¯äº”ç§ HTTP æ–¹æ³•ï¼Œå¯¹åº” CRUD æ“ä½œã€‚\n\nGETï¼šè¯»å–ï¼ˆReadï¼‰\nPOSTï¼šæ–°å»ºï¼ˆCreateï¼‰\nPUTï¼šæ›´æ–°ï¼ˆUpdateï¼‰\nPATCHï¼šæ›´æ–°ï¼ˆUpdateï¼‰ï¼Œé€šå¸¸æ˜¯éƒ¨åˆ†æ›´æ–°\nDELETEï¼šåˆ é™¤ï¼ˆDeleteï¼‰\n\næ ¹æ® HTTP è§„èŒƒï¼ŒåŠ¨è¯ä¸€å¾‹å¤§å†™ã€‚\n1.2 åŠ¨è¯çš„è¦†ç›–æœ‰äº›å®¢æˆ·ç«¯åªèƒ½ä½¿ç”¨GETå’ŒPOSTè¿™ä¸¤ç§æ–¹æ³•ã€‚æœåŠ¡å™¨å¿…é¡»æ¥å—POSTæ¨¡æ‹Ÿå…¶ä»–ä¸‰ä¸ªæ–¹æ³•ï¼ˆPUTã€PATCHã€DELETEï¼‰ã€‚\nè¿™æ—¶ï¼Œå®¢æˆ·ç«¯å‘å‡ºçš„ HTTP è¯·æ±‚ï¼Œè¦åŠ ä¸ŠX-HTTP-Method-Overrideå±æ€§ï¼Œå‘Šè¯‰æœåŠ¡å™¨åº”è¯¥ä½¿ç”¨å“ªä¸€ä¸ªåŠ¨è¯ï¼Œè¦†ç›–POSTæ–¹æ³•ã€‚\n\n12POST /api/Person/4 HTTP/1.1  X-HTTP-Method-Override: PUT\n\nä¸Šé¢ä»£ç ä¸­ï¼ŒX-HTTP-Method-OverrideæŒ‡å®šæœ¬æ¬¡è¯·æ±‚çš„æ–¹æ³•æ˜¯PUTï¼Œè€Œä¸æ˜¯POSTã€‚\n1.3 å®¾è¯­å¿…é¡»æ˜¯åè¯å®¾è¯­å°±æ˜¯ API çš„ URLï¼Œæ˜¯ HTTP åŠ¨è¯ä½œç”¨çš„å¯¹è±¡ã€‚å®ƒåº”è¯¥æ˜¯åè¯ï¼Œä¸èƒ½æ˜¯åŠ¨è¯ã€‚æ¯”å¦‚ï¼Œ/articlesè¿™ä¸ª URL å°±æ˜¯æ­£ç¡®çš„ï¼Œè€Œä¸‹é¢çš„ URL ä¸æ˜¯åè¯ï¼Œæ‰€ä»¥éƒ½æ˜¯é”™è¯¯çš„ã€‚\n\n/getAllCars\n/createNewCar\n/deleteAllRedCars\n\n1.4 å¤æ•° URLæ—¢ç„¶ URL æ˜¯åè¯ï¼Œé‚£ä¹ˆåº”è¯¥ä½¿ç”¨å¤æ•°ï¼Œè¿˜æ˜¯å•æ•°ï¼Ÿ\nè¿™æ²¡æœ‰ç»Ÿä¸€çš„è§„å®šï¼Œä½†æ˜¯å¸¸è§çš„æ“ä½œæ˜¯è¯»å–ä¸€ä¸ªé›†åˆï¼Œæ¯”å¦‚GET /articlesï¼ˆè¯»å–æ‰€æœ‰æ–‡ç« ï¼‰ï¼Œè¿™é‡Œæ˜æ˜¾åº”è¯¥æ˜¯å¤æ•°ã€‚\nä¸ºäº†ç»Ÿä¸€èµ·è§ï¼Œå»ºè®®éƒ½ä½¿ç”¨å¤æ•° URLï¼Œæ¯”å¦‚GET /articles/2è¦å¥½äºGET /article/2ã€‚\n1.5 é¿å…å¤šçº§ URLå¸¸è§çš„æƒ…å†µæ˜¯ï¼Œèµ„æºéœ€è¦å¤šçº§åˆ†ç±»ï¼Œå› æ­¤å¾ˆå®¹æ˜“å†™å‡ºå¤šçº§çš„ URLï¼Œæ¯”å¦‚è·å–æŸä¸ªä½œè€…çš„æŸä¸€ç±»æ–‡ç« ã€‚\n\n1GET /authors/12/categories/2\n\nè¿™ç§ URL ä¸åˆ©äºæ‰©å±•ï¼Œè¯­ä¹‰ä¹Ÿä¸æ˜ç¡®ï¼Œå¾€å¾€è¦æƒ³ä¸€ä¼šï¼Œæ‰èƒ½æ˜ç™½å«ä¹‰ã€‚\næ›´å¥½çš„åšæ³•æ˜¯ï¼Œé™¤äº†ç¬¬ä¸€çº§ï¼Œå…¶ä»–çº§åˆ«éƒ½ç”¨æŸ¥è¯¢å­—ç¬¦ä¸²è¡¨è¾¾ã€‚\n\n1GET /authors/12?categories=2\n\nä¸‹é¢æ˜¯å¦ä¸€ä¸ªä¾‹å­ï¼ŒæŸ¥è¯¢å·²å‘å¸ƒçš„æ–‡ç« ã€‚ä½ å¯èƒ½ä¼šè®¾è®¡æˆä¸‹é¢çš„ URLã€‚\n\n1GET /articles/published\n\næŸ¥è¯¢å­—ç¬¦ä¸²çš„å†™æ³•æ˜æ˜¾æ›´å¥½ã€‚\n\n1GET /articles?published=true\n\näºŒã€çŠ¶æ€ç 2.1 çŠ¶æ€ç å¿…é¡»ç²¾ç¡®å®¢æˆ·ç«¯çš„æ¯ä¸€æ¬¡è¯·æ±‚ï¼ŒæœåŠ¡å™¨éƒ½å¿…é¡»ç»™å‡ºå›åº”ã€‚å›åº”åŒ…æ‹¬ HTTP çŠ¶æ€ç å’Œæ•°æ®ä¸¤éƒ¨åˆ†ã€‚\nHTTP çŠ¶æ€ç å°±æ˜¯ä¸€ä¸ªä¸‰ä½æ•°ï¼Œåˆ†æˆäº”ä¸ªç±»åˆ«ã€‚\n\n1xxï¼šç›¸å…³ä¿¡æ¯\n2xxï¼šæ“ä½œæˆåŠŸ\n3xxï¼šé‡å®šå‘\n4xxï¼šå®¢æˆ·ç«¯é”™è¯¯\n5xxï¼šæœåŠ¡å™¨é”™è¯¯\n\nè¿™äº”å¤§ç±»æ€»å…±åŒ…å«100å¤šç§çŠ¶æ€ç ï¼Œè¦†ç›–äº†ç»å¤§éƒ¨åˆ†å¯èƒ½é‡åˆ°çš„æƒ…å†µã€‚æ¯ä¸€ç§çŠ¶æ€ç éƒ½æœ‰æ ‡å‡†çš„ï¼ˆæˆ–è€…çº¦å®šçš„ï¼‰è§£é‡Šï¼Œå®¢æˆ·ç«¯åªéœ€æŸ¥çœ‹çŠ¶æ€ç ï¼Œå°±å¯ä»¥åˆ¤æ–­å‡ºå‘ç”Ÿäº†ä»€ä¹ˆæƒ…å†µï¼Œæ‰€ä»¥æœåŠ¡å™¨åº”è¯¥è¿”å›å°½å¯èƒ½ç²¾ç¡®çš„çŠ¶æ€ç ã€‚\nAPI ä¸éœ€è¦1xxçŠ¶æ€ç ï¼Œä¸‹é¢ä»‹ç»å…¶ä»–å››ç±»çŠ¶æ€ç çš„ç²¾ç¡®å«ä¹‰ã€‚\n2.2 2xx çŠ¶æ€ç 200çŠ¶æ€ç è¡¨ç¤ºæ“ä½œæˆåŠŸï¼Œä½†æ˜¯ä¸åŒçš„æ–¹æ³•å¯ä»¥è¿”å›æ›´ç²¾ç¡®çš„çŠ¶æ€ç ã€‚\n\nGET: 200 OK\nPOST: 201 Created\nPUT: 200 OK\nPATCH: 200 OK\nDELETE: 204 No Content\n\nä¸Šé¢ä»£ç ä¸­ï¼ŒPOSTè¿”å›201çŠ¶æ€ç ï¼Œè¡¨ç¤ºç”Ÿæˆäº†æ–°çš„èµ„æºï¼›DELETEè¿”å›204çŠ¶æ€ç ï¼Œè¡¨ç¤ºèµ„æºå·²ç»ä¸å­˜åœ¨ã€‚\næ­¤å¤–ï¼Œ202 AcceptedçŠ¶æ€ç è¡¨ç¤ºæœåŠ¡å™¨å·²ç»æ”¶åˆ°è¯·æ±‚ï¼Œä½†è¿˜æœªè¿›è¡Œå¤„ç†ï¼Œä¼šåœ¨æœªæ¥å†å¤„ç†ï¼Œé€šå¸¸ç”¨äºå¼‚æ­¥æ“ä½œã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚\n\n12345678HTTP/1.1 202 Accepted&#123;  \"task\": &#123;    \"href\": \"/api/company/job-management/jobs/2130040\",    \"id\": \"2130040\"  &#125;&#125;\n\n2.3 3xx çŠ¶æ€ç API ç”¨ä¸åˆ°301çŠ¶æ€ç ï¼ˆæ°¸ä¹…é‡å®šå‘ï¼‰å’Œ302çŠ¶æ€ç ï¼ˆæš‚æ—¶é‡å®šå‘ï¼Œ307ä¹Ÿæ˜¯è¿™ä¸ªå«ä¹‰ï¼‰ï¼Œå› ä¸ºå®ƒä»¬å¯ä»¥ç”±åº”ç”¨çº§åˆ«è¿”å›ï¼Œæµè§ˆå™¨ä¼šç›´æ¥è·³è½¬ï¼ŒAPI çº§åˆ«å¯ä»¥ä¸è€ƒè™‘è¿™ä¸¤ç§æƒ…å†µã€‚\nAPI ç”¨åˆ°çš„3xxçŠ¶æ€ç ï¼Œä¸»è¦æ˜¯303 See Otherï¼Œè¡¨ç¤ºå‚è€ƒå¦ä¸€ä¸ª URLã€‚å®ƒä¸302å’Œ307çš„å«ä¹‰ä¸€æ ·ï¼Œä¹Ÿæ˜¯â€æš‚æ—¶é‡å®šå‘â€ï¼ŒåŒºåˆ«åœ¨äº302å’Œ307ç”¨äºGETè¯·æ±‚ï¼Œè€Œ303ç”¨äºPOSTã€PUTå’ŒDELETEè¯·æ±‚ã€‚æ”¶åˆ°303ä»¥åï¼Œæµè§ˆå™¨ä¸ä¼šè‡ªåŠ¨è·³è½¬ï¼Œè€Œä¼šè®©ç”¨æˆ·è‡ªå·±å†³å®šä¸‹ä¸€æ­¥æ€ä¹ˆåŠã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚\n\n12HTTP/1.1 303 See OtherLocation: /api/orders/12345\n\n2.4 4xx çŠ¶æ€ç 4xxçŠ¶æ€ç è¡¨ç¤ºå®¢æˆ·ç«¯é”™è¯¯ï¼Œä¸»è¦æœ‰ä¸‹é¢å‡ ç§ã€‚\n400 Bad Requestï¼šæœåŠ¡å™¨ä¸ç†è§£å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œæœªåšä»»ä½•å¤„ç†ã€‚\n401 Unauthorizedï¼šç”¨æˆ·æœªæä¾›èº«ä»½éªŒè¯å‡­æ®ï¼Œæˆ–è€…æ²¡æœ‰é€šè¿‡èº«ä»½éªŒè¯ã€‚\n403 Forbiddenï¼šç”¨æˆ·é€šè¿‡äº†èº«ä»½éªŒè¯ï¼Œä½†æ˜¯ä¸å…·æœ‰è®¿é—®èµ„æºæ‰€éœ€çš„æƒé™ã€‚\n404 Not Foundï¼šæ‰€è¯·æ±‚çš„èµ„æºä¸å­˜åœ¨ï¼Œæˆ–ä¸å¯ç”¨ã€‚\n405 Method Not Allowedï¼šç”¨æˆ·å·²ç»é€šè¿‡èº«ä»½éªŒè¯ï¼Œä½†æ˜¯æ‰€ç”¨çš„ HTTP æ–¹æ³•ä¸åœ¨ä»–çš„æƒé™ä¹‹å†…ã€‚\n410 Goneï¼šæ‰€è¯·æ±‚çš„èµ„æºå·²ä»è¿™ä¸ªåœ°å€è½¬ç§»ï¼Œä¸å†å¯ç”¨ã€‚\n415 Unsupported Media Typeï¼šå®¢æˆ·ç«¯è¦æ±‚çš„è¿”å›æ ¼å¼ä¸æ”¯æŒã€‚æ¯”å¦‚ï¼ŒAPI åªèƒ½è¿”å› JSON æ ¼å¼ï¼Œä½†æ˜¯å®¢æˆ·ç«¯è¦æ±‚è¿”å› XML æ ¼å¼ã€‚\n422 Unprocessable Entity ï¼šå®¢æˆ·ç«¯ä¸Šä¼ çš„é™„ä»¶æ— æ³•å¤„ç†ï¼Œå¯¼è‡´è¯·æ±‚å¤±è´¥ã€‚\n429 Too Many Requestsï¼šå®¢æˆ·ç«¯çš„è¯·æ±‚æ¬¡æ•°è¶…è¿‡é™é¢ã€‚\n2.5 5xx çŠ¶æ€ç 5xxçŠ¶æ€ç è¡¨ç¤ºæœåŠ¡ç«¯é”™è¯¯ã€‚ä¸€èˆ¬æ¥è¯´ï¼ŒAPI ä¸ä¼šå‘ç”¨æˆ·é€éœ²æœåŠ¡å™¨çš„è¯¦ç»†ä¿¡æ¯ï¼Œæ‰€ä»¥åªè¦ä¸¤ä¸ªçŠ¶æ€ç å°±å¤Ÿäº†ã€‚\n500 Internal Server Errorï¼šå®¢æˆ·ç«¯è¯·æ±‚æœ‰æ•ˆï¼ŒæœåŠ¡å™¨å¤„ç†æ—¶å‘ç”Ÿäº†æ„å¤–ã€‚\n503 Service Unavailableï¼šæœåŠ¡å™¨æ— æ³•å¤„ç†è¯·æ±‚ï¼Œä¸€èˆ¬ç”¨äºç½‘ç«™ç»´æŠ¤çŠ¶æ€ã€‚\nä¸‰ã€æœåŠ¡å™¨å›åº”3.1 ä¸è¦è¿”å›çº¯æœ¬æ–‡API è¿”å›çš„æ•°æ®æ ¼å¼ï¼Œä¸åº”è¯¥æ˜¯çº¯æ–‡æœ¬ï¼Œè€Œåº”è¯¥æ˜¯ä¸€ä¸ª JSON å¯¹è±¡ï¼Œå› ä¸ºè¿™æ ·æ‰èƒ½è¿”å›æ ‡å‡†çš„ç»“æ„åŒ–æ•°æ®ã€‚æ‰€ä»¥ï¼ŒæœåŠ¡å™¨å›åº”çš„ HTTP å¤´çš„Content-Typeå±æ€§è¦è®¾ä¸ºapplication/jsonã€‚\nå®¢æˆ·ç«¯è¯·æ±‚æ—¶ï¼Œä¹Ÿè¦æ˜ç¡®å‘Šè¯‰æœåŠ¡å™¨ï¼Œå¯ä»¥æ¥å— JSON æ ¼å¼ï¼Œå³è¯·æ±‚çš„ HTTP å¤´çš„ACCEPTå±æ€§ä¹Ÿè¦è®¾æˆapplication/jsonã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚\n\n12GET /orders/2 HTTP/1.1 Accept: application/json\n\n3.2 å‘ç”Ÿé”™è¯¯æ—¶ï¼Œä¸è¦è¿”å› 200 çŠ¶æ€ç æœ‰ä¸€ç§ä¸æ°å½“çš„åšæ³•æ˜¯ï¼Œå³ä½¿å‘ç”Ÿé”™è¯¯ï¼Œä¹Ÿè¿”å›200çŠ¶æ€ç ï¼ŒæŠŠé”™è¯¯ä¿¡æ¯æ”¾åœ¨æ•°æ®ä½“é‡Œé¢ï¼Œå°±åƒä¸‹é¢è¿™æ ·ã€‚\n\n123456789HTTP/1.1 200 OKContent-Type: application/json&#123;  \"status\": \"failure\",  \"data\": &#123;    \"error\": \"Expected at least two items in list.\"  &#125;&#125;\n\nä¸Šé¢ä»£ç ä¸­ï¼Œè§£ææ•°æ®ä½“ä»¥åï¼Œæ‰èƒ½å¾—çŸ¥æ“ä½œå¤±è´¥ã€‚\nè¿™å¼ åšæ³•å®é™…ä¸Šå–æ¶ˆäº†çŠ¶æ€ç ï¼Œè¿™æ˜¯å®Œå…¨ä¸å¯å–çš„ã€‚æ­£ç¡®çš„åšæ³•æ˜¯ï¼ŒçŠ¶æ€ç åæ˜ å‘ç”Ÿçš„é”™è¯¯ï¼Œå…·ä½“çš„é”™è¯¯ä¿¡æ¯æ”¾åœ¨æ•°æ®ä½“é‡Œé¢è¿”å›ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚\n\n123456789HTTP/1.1 400 Bad RequestContent-Type: application/json&#123;  \"error\": \"Invalid payoad.\",  \"detail\": &#123;     \"surname\": \"This field is required.\"  &#125;&#125;\n\n3.3 æä¾›é“¾æ¥API çš„ä½¿ç”¨è€…æœªå¿…çŸ¥é“ï¼ŒURL æ˜¯æ€ä¹ˆè®¾è®¡çš„ã€‚ä¸€ä¸ªè§£å†³æ–¹æ³•å°±æ˜¯ï¼Œåœ¨å›åº”ä¸­ï¼Œç»™å‡ºç›¸å…³é“¾æ¥ï¼Œä¾¿äºä¸‹ä¸€æ­¥æ“ä½œã€‚è¿™æ ·çš„è¯ï¼Œç”¨æˆ·åªè¦è®°ä½ä¸€ä¸ª URLï¼Œå°±å¯ä»¥å‘ç°å…¶ä»–çš„ URLã€‚è¿™ç§æ–¹æ³•å«åš HATEOASã€‚\nä¸¾ä¾‹æ¥è¯´ï¼ŒGitHub çš„ API éƒ½åœ¨ api.github.com è¿™ä¸ªåŸŸåã€‚è®¿é—®å®ƒï¼Œå°±å¯ä»¥å¾—åˆ°å…¶ä»– URLã€‚\n\n123456789&#123;  ...  \"feeds_url\": \"https://api.github.com/feeds\",  \"followers_url\": \"https://api.github.com/user/followers\",  \"following_url\": \"https://api.github.com/user/following&#123;/target&#125;\",  \"gists_url\": \"https://api.github.com/gists&#123;/gist_id&#125;\",  \"hub_url\": \"https://api.github.com/hub\",  ...&#125;\n\nä¸Šé¢çš„å›åº”ä¸­ï¼ŒæŒ‘ä¸€ä¸ª URL è®¿é—®ï¼Œåˆå¯ä»¥å¾—åˆ°åˆ«çš„ URLã€‚å¯¹äºç”¨æˆ·æ¥è¯´ï¼Œä¸éœ€è¦è®°ä½ URL è®¾è®¡ï¼Œåªè¦ä» api.github.com ä¸€æ­¥æ­¥æŸ¥æ‰¾å°±å¯ä»¥äº†ã€‚\nHATEOAS çš„æ ¼å¼æ²¡æœ‰ç»Ÿä¸€è§„å®šï¼Œä¸Šé¢ä¾‹å­ä¸­ï¼ŒGitHub å°†å®ƒä»¬ä¸å…¶ä»–å±æ€§æ”¾åœ¨ä¸€èµ·ã€‚æ›´å¥½çš„åšæ³•åº”è¯¥æ˜¯ï¼Œå°†ç›¸å…³é“¾æ¥ä¸å…¶ä»–å±æ€§åˆ†å¼€ã€‚\n\n12345678910HTTP/1.1 200 OKContent-Type: application/json&#123;  \"status\": \"In progress\",   \"links\": &#123;[    &#123; \"rel\":\"cancel\", \"method\": \"delete\", \"href\":\"/api/status/12345\" &#125; ,    &#123; \"rel\":\"edit\", \"method\": \"put\", \"href\":\"/api/status/12345\" &#125;  ]&#125;&#125;\n","plink":"https://www.hansomezao.com/2019/11/10/note/restfulAPI/"},{"title":"ES6 bilibiliï¼ˆ92é›†ä¹‹å‰ï¼‰","date":"2019-10-18T05:43:24.000Z","date_formatted":{"ll":"2019å¹´10æœˆ18æ—¥","L":"2019/10/18","MM-DD":"10-18"},"author":"zao","updated":"2019-10-18T05:43:24.000Z","content":"é¢å‘è¿‡ç¨‹ç¼–ç¨‹é¢å‘è¿‡ç¨‹å°±æ˜¯åˆ†æå‡ºè§£å†³é—®é¢˜æ‰€éœ€è¦çš„æ­¥éª¤ï¼Œç„¶åç”¨å‡½æ•°æŠŠè¿™äº›æ­¥éª¤ä¸€æ­¥ä¸€æ­¥å®ç°ï¼Œä½¿ç”¨çš„æ—¶å€™å†ä¸€ä¸ªä¸€ä¸ªçš„ä¾æ¬¡è°ƒç”¨å°±å¯ä»¥äº†ã€‚\né¢å‘è¿‡ç¨‹ï¼Œå°±æ˜¯æŒ‰ç…§æˆ‘ä»¬åˆ†æå¥½äº†çš„æ­¥éª¤ï¼ŒæŒ‰ç…§æ­¥éª¤è§£å†³é—®é¢˜ã€‚\né¢å‘å¯¹è±¡ç¼–ç¨‹é¢å‘å¯¹è±¡æ˜¯æŠŠäº‹ç‰©åˆ†è§£æˆä¸€ä¸ªä¸ªå¯¹è±¡ï¼Œç„¶åç”±å¯¹è±¡ä¹‹é—´åˆ†å·¥ä¸åˆä½œã€‚\né¢å‘å¯¹è±¡æ˜¯ä»¥å¯¹è±¡åŠŸèƒ½æ¥åˆ’åˆ†é—®é¢˜ï¼Œè€Œä¸æ˜¯æ­¥éª¤ã€‚\nåœ¨é¢å‘å¯¹è±¡ç¨‹åºå¼€å‘æ€æƒ³ä¸­ï¼Œæ¯ä¸€ä¸ªå¯¹è±¡éƒ½æ˜¯åŠŸèƒ½ä¸­å¿ƒï¼Œå…·æœ‰æ˜ç¡®åˆ†å·¥ã€‚\né¢å‘å¯¹è±¡ç¼–ç¨‹å…·æœ‰çµæ´»ã€ä»£ç å¯å¤ç”¨ã€å®¹æ˜“ç»´æŠ¤å’Œå¼€å‘çš„ä¼˜ç‚¹ï¼Œæ›´é€‚åˆå¤šäººåˆä½œçš„å¤§å‹è½¯ä»¶é¡¹ç›®ã€‚\né¢å‘å¯¹è±¡çš„ç‰¹æ€§å°è£…æ€§ \nç»§æ‰¿æ€§\nå¤šæ€æ€§\né¢å‘è¿‡ç¨‹ä¸é¢å‘å¯¹è±¡çš„ä¼˜ç¼ºç‚¹é¢å‘è¿‡ç¨‹ä¼˜ç‚¹ï¼šæ€§èƒ½æ¯”é¢å‘å¯¹è±¡é«˜ï¼Œé€‚åˆè·Ÿç¡¬ä»¶è”ç³»å¾ˆç´§å¯†çš„ä¸œè¥¿ï¼Œä¾‹å¦‚å•ç‰‡æœºå°±é‡‡ç”¨çš„é¢å‘è¿‡ç¨‹ç¼–ç¨‹ã€‚\nç¼ºç‚¹ï¼šæ²¡æœ‰é¢å‘å¯¹è±¡æ˜“ç»´æŠ¤ã€æ˜“å¤ç”¨ã€æ˜“æ‰©å±•ã€‚\né¢å‘å¯¹è±¡ä¼˜ç‚¹ï¼šæ˜“ç»´æŠ¤ã€æ˜“å¤ç”¨ã€æ˜“æ‰©å±•ï¼Œç”±äºé¢å‘å¯¹è±¡æœ‰å°è£…ã€ç»§æ‰¿ã€å¤šæ€æ€§çš„ç‰¹æ€§ï¼Œå¯ä»¥è®¾è®¡å‡ºä½è€¦åˆçš„ç³»ç»Ÿï¼Œä½¿ç³»ç»Ÿæ›´åŠ çµæ´»ã€æ›´åŠ æ˜“äºç»´æŠ¤ã€‚\nç¼ºç‚¹ï¼šæ€§èƒ½æ¯”é¢å‘è¿‡ç¨‹ä½ã€‚\nES6ä¸­çš„ç±»å’Œå¯¹è±¡é¢å‘å¯¹è±¡é¢å‘å¯¹è±¡æ›´è´´è¿‘æˆ‘ä»¬çš„å®é™…ç”Ÿæ´»,å¯ä»¥ä½¿ç”¨é¢å‘å¯¹è±¡æè¿°ç°å®ä¸–ç•Œäº‹ç‰©ã€‚\nä½†æ˜¯äº‹ç‰©åˆ†ä¸ºå…·ä½“çš„äº‹ç‰©å’ŒæŠ½è±¡çš„äº‹ç‰©é¢å‘å¯¹è±¡çš„æ€ç»´ç‰¹ç‚¹æŠ½å–ï¼ˆæŠ½è±¡ï¼‰å¯¹è±¡å…±ç”¨çš„å±æ€§å’Œè¡Œä¸ºç»„ç»‡ï¼ˆå°è£…ï¼‰ä¸€ä¸ªç±»ï¼ˆæ¨¡æ¿ï¼‰ã€‚\n\nå¯¹ç±»è¿›è¡Œå®ä¾‹åŒ–, è·å–ç±»çš„å¯¹è±¡ã€‚\n  é¢å‘å¯¹è±¡ç¼–ç¨‹æˆ‘ä»¬è€ƒè™‘çš„æ˜¯æœ‰å“ªäº›å¯¹è±¡ï¼ŒæŒ‰ç…§é¢å‘å¯¹è±¡çš„æ€ç»´ç‰¹ç‚¹ï¼Œä¸æ–­çš„åˆ›å»ºå¯¹è±¡ï¼Œä½¿ç”¨å¯¹è±¡ï¼ŒæŒ‡æŒ¥å¯¹è±¡åšäº‹æƒ…ã€‚\n\nå¯¹è±¡ç°å®ç”Ÿæ´»ä¸­ï¼šä¸‡ç‰©çš†å¯¹è±¡ï¼Œå¯¹è±¡æ˜¯ä¸€ä¸ªå…·ä½“çš„äº‹ç‰©ï¼Œçœ‹å¾—è§æ‘¸\nå¾—ç€çš„å®ç‰©ã€‚ä¾‹å¦‚ï¼Œä¸€æœ¬ä¹¦ã€ä¸€è¾†æ±½è½¦ã€ä¸€ä¸ªäººå¯ä»¥æ˜¯â€œå¯¹è±¡â€ï¼Œ\nä¸€ä¸ªæ•°æ®åº“ã€ä¸€å¼ ç½‘é¡µã€ä¸€ä¸ªä¸è¿œç¨‹æœåŠ¡å™¨çš„è¿æ¥ä¹Ÿå¯ä»¥æ˜¯\nâ€œå¯¹è±¡â€ã€‚\n\nåœ¨ JavaScriptä¸­ï¼Œå¯¹è±¡æ˜¯ä¸€ç»„æ— åºçš„ç›¸å…³å±æ€§å’Œæ–¹æ³•çš„é›†åˆï¼Œ\næ‰€æœ‰çš„äº‹ç‰©éƒ½æ˜¯å¯¹è±¡ï¼Œä¾‹å¦‚å­—ç¬¦ä¸²ã€æ•°å€¼ã€æ•°ç»„ã€å‡½æ•°ç­‰ã€‚å¯¹è±¡æ˜¯ç”±å±æ€§å’Œæ–¹æ³•ç»„æˆçš„ï¼šå±æ€§ï¼šäº‹ç‰©çš„ç‰¹å¾ï¼Œåœ¨å¯¹è±¡ä¸­ç”¨å±æ€§æ¥è¡¨ç¤ºï¼ˆå¸¸ç”¨åè¯ï¼‰\næ–¹æ³•ï¼šäº‹ç‰©çš„è¡Œä¸ºï¼Œåœ¨å¯¹è±¡ä¸­ç”¨æ–¹æ³•æ¥è¡¨ç¤ºï¼ˆå¸¸ç”¨åŠ¨è¯ï¼‰\nç±»classåœ¨ ES6 ä¸­æ–°å¢åŠ äº†ç±»çš„æ¦‚å¿µï¼Œå¯ä»¥ä½¿ç”¨classå…³é”®å­—å£°æ˜ä¸€ä¸ªç±»ï¼Œä¹‹åä»¥è¿™ä¸ªç±»æ¥å®ä¾‹åŒ–å¯¹è±¡ã€‚æ³¨æ„ï¼š ç±»å¿…é¡»ä½¿ç”¨ new å®ä¾‹åŒ–å¯¹è±¡\nç±» constructor æ„é€ å‡½æ•°constructor()æ–¹æ³•æ˜¯ç±»çš„æ„é€ å‡½æ•°(é»˜è®¤æ–¹æ³•)ï¼Œç”¨äºä¼ é€’å‚\næ•°ï¼Œè¿”å›å®ä¾‹å¯¹è±¡ï¼Œé€šè¿‡newå‘½ä»¤ç”Ÿæˆå¯¹è±¡å®ä¾‹æ—¶ï¼Œè‡ªåŠ¨è°ƒç”¨\nè¯¥æ–¹æ³•ã€‚\nå¦‚æœæ²¡æœ‰æ˜¾ç¤ºå®šä¹‰ï¼Œç±»å†…éƒ¨ä¼šè‡ªåŠ¨ç»™æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªconstructor() åˆ›å»ºç±»12345678&lt;!-- 1. åˆ›å»ºä¸€ä¸ªclassï¼Œåˆ›å»ºä¸€ä¸ªâ€œæ˜æ˜Ÿâ€ç±»--&gt;class Star&#123;    constructor(uname)&#123;        this.uame &#x2F;&#x2F;æŒ‡å‘åˆ›å»ºçš„å®ä¾‹    &#125;&#125; 2.åˆ©ç”¨ç±»åˆ›å»ºå¯¹è±¡ new new Star()  &#x2F;&#x2F;åªè¦åŠ äº†newï¼Œè‡ªåŠ¨è°ƒç”¨constructor\né€šè¿‡classå…³é”®å­—åˆ›å»ºç±»ï¼Œç±»åä¹ æƒ¯æ€§å®šä¹‰é¦–å­—æ¯å¤§å†™\nç±»é‡Œé¢æœ‰ä¸ªconstructor()å‡½æ•°ï¼Œå¯ä»¥æ¥å—ä¼ è¿‡æ¥çš„å‚æ•°ï¼ŒåŒæ—¶è¿”å›å®ä¾‹å¯¹è±¡ã€‚\nconstructorå‡½æ•°åªè¦newç”Ÿæˆå®ä¾‹æ—¶ï¼Œå°±ä¼šè‡ªåŠ¨è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼›å¦‚æœæˆ‘ä»¬ä¸å†™è¿™ä¸ªå‡½æ•°ï¼Œç±»ä¹Ÿä¼šè‡ªåŠ¨ç”Ÿæˆè¿™ä¸ªå‡½æ•°ã€‚\nç”Ÿæˆå®ä¾‹newä¸èƒ½çœç•¥ã€‚\næœ€åæ³¨æ„è¯­æ³•è§„èŒƒï¼Œåˆ›å»ºç±»æ—¶ï¼Œç±»ååé¢ä¸è¦åŠ å°æ‹¬å·ï¼›ç”Ÿæˆå®ä¾‹ï¼Œç±»ååé¢åŠ å°æ‹¬å·ï¼Œæ„é€ å‡½æ•°ä¸éœ€è¦åŠ functionã€‚ \nç±»æ·»åŠ æ–¹æ³•123456789101112131415161718192021222324&lt;script&gt;    &#x2F;&#x2F; 1. åˆ›å»ºç±» class  åˆ›å»ºä¸€ä¸ª æ˜æ˜Ÿç±»    class Star &#123;        &#x2F;&#x2F; ç±»çš„å…±æœ‰å±æ€§æ”¾åˆ° constructor é‡Œé¢        constructor(uname, age) &#123;            this.uname &#x3D; uname;            this.age &#x3D; age;        &#125;        sing(song) &#123;            &#x2F;&#x2F; console.log(&#39;æˆ‘å”±æ­Œ&#39;);            console.log(this.uname + song);        &#125;    &#125;    &#x2F;&#x2F; 2. åˆ©ç”¨ç±»åˆ›å»ºå¯¹è±¡ new    var ldh &#x3D; new Star(&#39;åˆ˜å¾·å&#39;, 18);    var zxy &#x3D; new Star(&#39;å¼ å­¦å‹&#39;, 20);    console.log(ldh);    console.log(zxy);    &#x2F;&#x2F; (1) æˆ‘ä»¬ç±»é‡Œé¢æ‰€æœ‰çš„å‡½æ•°ä¸éœ€è¦å†™function     &#x2F;&#x2F; (2) å¤šä¸ªå‡½æ•°æ–¹æ³•ä¹‹é—´ä¸éœ€è¦æ·»åŠ é€—å·åˆ†éš”    ldh.sing(&#39;å†°é›¨&#39;);    zxy.sing(&#39;æé¦™å…°&#39;);&lt;&#x2F;script&gt;\nç±»çš„ç»§æ‰¿å­ç±»é€šè¿‡==extends==å¯ä»¥ç»§æ‰¿çˆ¶ç±»çš„ä¸€äº›å±æ€§å’Œæ–¹æ³•ã€‚  \næ³¨æ„    \nç»§æ‰¿ä¸­å±æ€§æˆ–è€…æ–¹æ³•çš„æŸ¥æ‰¾åŸåˆ™ï¼šå°±è¿‘åŸåˆ™ã€‚        \nç»§æ‰¿ä¸­ï¼Œå¦‚æœå®ä¾‹åŒ–å­ç±»è¾“å‡ºä¸€ä¸ªæ–¹æ³•ï¼Œå…ˆçœ‹å­ç±»æœ‰æ²¡æœ‰è¿™\nä¸ªæ–¹æ³•ï¼Œå¦‚æœæœ‰å°±å…ˆæ‰§è¡Œå­ç±»çš„ï¼›å¦‚æœå­ç±»ä¸­æ²¡ï¼Œå°±å»çˆ¶ç±»\nä¸­æŸ¥æ‰¾ï¼Œå¦‚æœæœ‰ï¼Œå°±æ‰§è¡Œçˆ¶ç±»ä¸­çš„è¿™ä¸ªæ–¹æ³•ï¼ˆå°±è¿‘åŸåˆ™ï¼‰ã€‚12345678910111213class Father&#123;   &#x2F;&#x2F; çˆ¶ç±»    conostrctor()&#123;            &#125;    money()&#123;        console.log(100)    &#125;&#125; class  Son extends Father &#123;  &#x2F;&#x2F; å­ç±»ç»§æ‰¿çˆ¶ç±»    &#125;var son&#x3D;new Son();son.money()\nsuperå…³é”®å­—super å…³é”®å­—ç”¨äºè®¿é—®å’Œè°ƒç”¨å¯¹è±¡çˆ¶ç±»ä¸Šçš„å‡½æ•°ã€‚å¯ä»¥è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼Œä¹Ÿå¯ä»¥è°ƒç”¨çˆ¶ç±»çš„æ™®é€šå‡½æ•°ã€‚\næ³¨æ„å­ç±»åœ¨æ„é€ å‡½æ•°ä¸­ä½¿ç”¨super, å¿…é¡»æ”¾åˆ° this å‰é¢(å¿…é¡»å…ˆè°ƒç”¨çˆ¶ç±»çš„æ„é€ æ–¹æ³•,åœ¨ä½¿ç”¨å­ç±»æ„é€ æ–¹æ³•)\n123456789101112131415161718class Father &#123;    constructor(x, y) &#123;        this.x &#x3D; x;        this.y &#x3D; y;    &#125;    sum() &#123;        console.log(this.x + this.y);    &#125;&#125;class Son extends Father &#123;    constructor(x, y) &#123;        super(x, y); &#x2F;&#x2F;è°ƒç”¨äº†çˆ¶ç±»ä¸­çš„æ„é€ å‡½æ•°    &#125;&#125;var son &#x3D; new Son(1, 2);var son1 &#x3D; new Son(11, 22);son.sum();son1.sum();\nsuperå¿…é¡»æ”¾åˆ°thiså‰é¢\n123456789101112131415161718192021222324252627282930&lt;script&gt;       &#x2F;&#x2F; çˆ¶ç±»æœ‰åŠ æ³•æ–¹æ³•       class Father &#123;           constructor(x, y) &#123;               this.x &#x3D; x;               this.y &#x3D; y;           &#125;           sum() &#123;               console.log(this.x + this.y);           &#125;       &#125;       &#x2F;&#x2F; å­ç±»ç»§æ‰¿çˆ¶ç±»åŠ æ³•æ–¹æ³• åŒæ—¶ æ‰©å±•å‡æ³•æ–¹æ³•       class Son extends Father &#123;           constructor(x, y) &#123;               &#x2F;&#x2F; åˆ©ç”¨super è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°               &#x2F;&#x2F; super å¿…é¡»åœ¨å­ç±»thisä¹‹å‰è°ƒç”¨               super(x, y);               this.x &#x3D; x;               this.y &#x3D; y;           &#125;           subtract() &#123;               console.log(this.x - this.y);           &#125;       &#125;       var son &#x3D; new Son(5, 3);       son.subtract();       son.sum();   &lt;&#x2F;script&gt;\n\nä½¿ç”¨ç±»çš„æ³¨æ„äº‹é¡¹åœ¨ ES6 ä¸­ç±»æ²¡æœ‰å˜é‡æå‡ï¼Œæ‰€ä»¥å¿…é¡»å…ˆå®šä¹‰ç±»ï¼Œæ‰èƒ½é€šè¿‡ç±»å®ä¾‹åŒ–å¯¹è±¡ã€‚\nç±»é‡Œé¢çš„å…±æœ‰å±æ€§å’Œæ–¹æ³•ä¸€å®šè¦åŠ thisä½¿ç”¨ã€‚\nç±»é‡Œé¢çš„thisæŒ‡å‘é—®é¢˜ï¼šconstructor é‡Œé¢çš„thisæŒ‡å‘å®ä¾‹å¯¹è±¡ï¼Œæ–¹æ³•é‡Œé¢çš„this æŒ‡å‘è¿™ä¸ªæ–¹æ³•çš„è°ƒç”¨è€…ã€‚12345678910111213141516171819202122232425262728293031323334353637383940var that;    var _that;    class Star &#123;        constructor(uname, age) &#123;            &#x2F;&#x2F; constructor é‡Œé¢çš„this æŒ‡å‘çš„æ˜¯ åˆ›å»ºçš„å®ä¾‹å¯¹è±¡            that &#x3D; this;            console.log(this);            this.uname &#x3D; uname;            this.age &#x3D; age;            &#x2F;&#x2F; this.sing();            this.btn &#x3D; document.querySelector(&#39;button&#39;);            this.btn.onclick &#x3D; this.sing;        &#125;        sing() &#123;            &#x2F;&#x2F; è¿™ä¸ªsingæ–¹æ³•é‡Œé¢çš„this æŒ‡å‘çš„æ˜¯ btn             è¿™ä¸ªæŒ‰é’®,å› ä¸ºè¿™ä¸ªæŒ‰é’®è°ƒç”¨äº†è¿™ä¸ªå‡½æ•°            console.log(this);            console.log(that.uname);             &#x2F;&#x2F; thaté‡Œé¢å­˜å‚¨çš„æ˜¯constructoré‡Œé¢çš„this        &#125;        dance() &#123;            &#x2F;&#x2F; è¿™ä¸ªdanceé‡Œé¢çš„this æŒ‡å‘çš„æ˜¯å®ä¾‹å¯¹è±¡             ldh å› ä¸ºldh è°ƒç”¨äº†è¿™ä¸ªå‡½æ•°            _that &#x3D; this;            console.log(this);        &#125;    &#125;    var ldh &#x3D; new Star(&#39;åˆ˜å¾·å&#39;);    console.log(that &#x3D;&#x3D;&#x3D; ldh);    ldh.dance();    console.log(_that &#x3D;&#x3D;&#x3D; ldh);&#x2F;&#x2F; 1. åœ¨ES6ä¸­ç±»æ²¡æœ‰å˜é‡æå‡ï¼Œæ‰€ä»¥å¿…é¡»å…ˆå®šä¹‰ç±»ï¼Œæ‰èƒ½é€šè¿‡ç±»å®ä¾‹åŒ–å¯¹è±¡&#x2F;&#x2F; 2. ç±»é‡Œé¢çš„å…±æœ‰çš„å±æ€§å’Œæ–¹æ³•ä¸€å®šè¦åŠ thisä½¿ç”¨.\n\n\n\næ„é€ å‡½æ•°æ„é€ å‡½æ•°æ˜¯ä¸€ç§ç‰¹æ®Šçš„å‡½æ•°ï¼Œä¸»è¦ç”¨æ¥åˆå§‹åŒ–å¯¹è±¡ï¼Œå³ä¸ºå¯¹\nè±¡æˆå‘˜å˜é‡èµ‹åˆå§‹å€¼ï¼Œå®ƒæ€»ä¸newä¸€èµ·ä½¿ç”¨ã€‚æˆ‘ä»¬å¯ä»¥æŠŠå¯¹è±¡\nä¸­ä¸€äº›å…¬å…±çš„å±æ€§å’Œæ–¹æ³•æŠ½å–å‡ºæ¥ï¼Œç„¶åå°è£…åˆ°è¿™ä¸ªå‡½æ•°é‡Œé¢ã€‚åœ¨ JS ä¸­ï¼Œä½¿ç”¨æ„é€ å‡½æ•°æ—¶è¦æ³¨æ„ä»¥ä¸‹ä¸¤ç‚¹ï¼š\næ„é€ å‡½æ•°ç”¨äºåˆ›å»ºæŸä¸€ç±»å¯¹è±¡ï¼Œå…¶é¦–å­—æ¯è¦å¤§å†™\næ„é€ å‡½æ•°è¦å’Œ new ä¸€èµ·ä½¿ç”¨æ‰æœ‰æ„ä¹‰\nnew åœ¨æ‰§è¡Œæ—¶ä¼šåšå››ä»¶äº‹æƒ…åœ¨å†…å­˜ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„ç©ºå¯¹è±¡ã€‚\nè®© this æŒ‡å‘è¿™ä¸ªæ–°çš„å¯¹è±¡ã€‚\næ‰§è¡Œæ„é€ å‡½æ•°é‡Œé¢çš„ä»£ç ï¼Œç»™è¿™ä¸ªæ–°å¯¹è±¡æ·»åŠ å±æ€§å’Œæ–¹æ³•ã€‚\nè¿”å›è¿™ä¸ªæ–°å¯¹è±¡ï¼ˆæ‰€ä»¥æ„é€ å‡½æ•°é‡Œé¢ä¸éœ€è¦ return ï¼‰ã€‚\næˆå‘˜JavaScriptçš„æ„é€ å‡½æ•°ä¸­å¯ä»¥æ·»åŠ ä¸€äº›æˆå‘˜ï¼Œå¯ä»¥åœ¨æ„é€ å‡½æ•°æœ¬èº«ä¸Šæ·»åŠ ï¼Œä¹Ÿå¯ä»¥åœ¨æ„é€ å‡½æ•°å†…éƒ¨çš„thisä¸Šæ·»åŠ ã€‚é€šè¿‡è¿™ä¸¤ç§æ–¹å¼æ·»åŠ çš„æˆå‘˜ï¼Œå°±åˆ†åˆ«ç§°ä¸º==é™æ€æˆå‘˜==å’Œ==å®ä¾‹æˆå‘˜==ã€‚\né™æ€æˆå‘˜ï¼šåœ¨æ„é€ å‡½æ•°æœ¬ä¸Šæ·»åŠ çš„æˆå‘˜ç§°ä¸ºé™æ€æˆå‘˜ï¼Œåªèƒ½ç”±æ„é€ å‡½æ•°æœ¬èº«æ¥è®¿é—® ã€‚\nå®ä¾‹æˆå‘˜ï¼šåœ¨æ„é€ å‡½æ•°å†…éƒ¨åˆ›å»ºçš„å¯¹è±¡æˆå‘˜ç§°ä¸ºå®ä¾‹æˆå‘˜ï¼Œåªèƒ½ç”±å®ä¾‹åŒ–çš„å¯¹è±¡æ¥è®¿é—®ã€‚1234567891011121314151617181920function Star()&#123;    this.name&#x3D;name    this.age&#x3D;age    this.sing&#x3D;function()&#123;        console.log(SSS)    &#125;&#125;var XXX&#x3D;new Star(&quot;XX&quot;,&quot;YY&quot;)&#x2F;&#x2F;1.å®ä¾‹æˆå‘˜å°±æ˜¯æ„é€ å‡½æ•°å†…éƒ¨é€šè¿‡thisæ·»åŠ çš„æˆå‘˜name age sing å°±æ˜¯å®ä¾‹æˆå‘˜&#x2F;&#x2F; å®ä¾‹æˆå‘˜åªèƒ½é€šè¿‡å®ä¾‹åŒ–çš„å¯¹è±¡æ¥è®¿é—®console.log(XXX.name);XXX.sing();&#x2F;&#x2F; console.log(Star.uname);  &#x2F;&#x2F;ä¸å¯ä»¥é€šè¿‡æ„é€ å‡½æ•°æ¥è®¿é—®å®ä¾‹æˆå‘˜&#x2F;&#x2F; 2. é™æ€æˆå‘˜ åœ¨æ„é€ å‡½æ•°æœ¬èº«ä¸Šæ·»åŠ çš„æˆå‘˜  sex å°±æ˜¯é™æ€æˆå‘˜Star.sex &#x3D; &#39;ç”·&#39;;&#x2F;&#x2F; é™æ€æˆå‘˜åªèƒ½é€šè¿‡æ„é€ å‡½æ•°æ¥è®¿é—®console.log(Star.sex);console.log(ldh.sex); &#x2F;&#x2F; ä¸èƒ½é€šè¿‡å¯¹è±¡æ¥è®¿é—®\næ„é€ å‡½æ•°çš„é—®é¢˜å­˜åœ¨æµªè´¹å†…å­˜çš„é—®é¢˜123456789function Star(uname, age) &#123;    this.uname &#x3D; uname;    this.age &#x3D; age;    this.sing &#x3D; function() &#123;        console.log(&#39;æˆ‘ä¼šå”±æ­Œ&#39;);    &#125;&#125;var ldh &#x3D; new Star(&#39;åˆ˜å¾·å&#39;, 18);var zxy &#x3D; new Star(&#39;å¼ å­¦å‹&#39;, 19);\n\næ„é€ å‡½æ•°åŸå‹ prototypeæ„é€ å‡½æ•°é€šè¿‡åŸå‹åˆ†é…çš„å‡½æ•°æ˜¯æ‰€æœ‰å¯¹è±¡æ‰€å…±äº«çš„ã€‚JavaScript è§„å®šï¼Œæ¯ä¸€ä¸ªæ„é€ å‡½æ•°==éƒ½æœ‰ä¸€ä¸ª prototype==å±æ€§ï¼ŒæŒ‡å‘å¦ä¸€ä¸ªå¯¹è±¡ã€‚æ³¨æ„è¿™ä¸ªprototypeå°±æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡çš„æ‰€æœ‰å±æ€§å’Œæ–¹æ³•ï¼Œéƒ½ä¼šè¢«æ„é€ å‡½æ•°æ‰€æ‹¥æœ‰ã€‚\n\næˆ‘ä»¬å¯ä»¥æŠŠé‚£äº›ä¸å˜çš„æ–¹æ³•ï¼Œç›´æ¥å®šä¹‰åœ¨ prototypeå¯¹è±¡ä¸Šï¼Œè¿™æ ·æ‰€æœ‰å¯¹è±¡çš„å®ä¾‹å°±å¯ä»¥å…±äº«è¿™äº›æ–¹æ³•ã€‚\n\nä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æŠŠå…¬å…±å±æ€§å®šä¹‰åˆ°æ„é€ å‡½æ•°é‡Œé¢ï¼Œå…¬å…±çš„æ–¹æ³•æˆ‘ä»¬æ”¾åˆ°åŸå‹å¯¹è±¡èº«ä¸Šã€‚\n\né—®ç­”åŸå‹æ˜¯ä»€ä¹ˆ ï¼Ÿä¸€ä¸ªå¯¹è±¡ï¼Œæˆ‘ä»¬ä¹Ÿç§°ä¸º prototype ä¸ºåŸå‹å¯¹è±¡ã€‚\nåŸå‹çš„ä½œç”¨æ˜¯ä»€ä¹ˆ ï¼Ÿå…±äº«æ–¹æ³•ã€‚\nå¯¹è±¡åŸå‹  __ proto __å¯¹è±¡éƒ½ä¼šæœ‰ä¸€ä¸ªå±æ€§ __ proto __ æŒ‡å‘æ„é€ å‡½æ•°çš„ prototype åŸå‹å¯¹è±¡ï¼Œä¹‹æ‰€ä»¥æˆ‘ä»¬å¯¹è±¡å¯ä»¥ä½¿ç”¨æ„é€ å‡½æ•° prototype åŸå‹å¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•ï¼Œå°±æ˜¯å› ä¸ºå¯¹è±¡æœ‰ __ proto __ åŸå‹çš„å­˜åœ¨ã€‚\n1234567891011121314151617181920212223&lt;script&gt;        function Star(uname, age) &#123;            this.uname &#x3D; uname;            this.age &#x3D; age;        &#125;                Star.prototype.sing &#x3D; function() &#123;            console.log(&#39;æˆ‘ä¼šå”±æ­Œ&#39;);        &#125;                var ldh &#x3D; new Star(&#39;åˆ˜å¾·å&#39;, 18);        var zxy &#x3D; new Star(&#39;å¼ å­¦å‹&#39;, 19);        ldh.sing();                console.log(ldh); &#x2F;&#x2F; å¯¹è±¡èº«ä¸Šç³»ç»Ÿè‡ªå·±æ·»åŠ ä¸€ä¸ª         __proto__ æŒ‡å‘æˆ‘ä»¬æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡ prototype                console.log(ldh.__proto__ &#x3D;&#x3D;&#x3D; Star.prototype);        &#x2F;&#x2F; æ–¹æ³•çš„æŸ¥æ‰¾è§„åˆ™: é¦–å…ˆå…ˆçœ‹ldh å¯¹è±¡èº«ä¸Šæ˜¯å¦æœ‰         sing æ–¹æ³•,å¦‚æœæœ‰å°±æ‰§è¡Œè¿™ä¸ªå¯¹è±¡ä¸Šçš„sing        &#x2F;&#x2F; å¦‚æœæ²¡æœ‰singè¿™ä¸ªæ–¹æ³•,å› ä¸ºæœ‰__proto__çš„å­˜åœ¨,å°±        å»æ„é€ å‡½æ•°åŸå‹å¯¹è±¡prototypeèº«ä¸Šå»æŸ¥æ‰¾singè¿™ä¸ªæ–¹æ³•    &lt;&#x2F;script&gt;\n\nprotoå¯¹è±¡åŸå‹å’ŒåŸå‹å¯¹è±¡ prototype æ˜¯ç­‰ä»·çš„\nprotoå¯¹è±¡åŸå‹çš„æ„ä¹‰å°±åœ¨äºä¸ºå¯¹è±¡çš„æŸ¥æ‰¾æœºåˆ¶æä¾›ä¸€ä¸ªæ–¹å‘ï¼Œæˆ–è€…è¯´ä¸€æ¡è·¯çº¿ï¼Œä½†æ˜¯å®ƒæ˜¯ä¸€ä¸ªéæ ‡å‡†å±æ€§ï¼Œå› æ­¤å®é™…å¼€å‘ä¸­ï¼Œä¸å¯ä»¥ä½¿ç”¨è¿™ä¸ªå±æ€§ï¼Œå®ƒåªæ˜¯å†…éƒ¨æŒ‡å‘åŸå‹å¯¹è±¡ prototype\nconstructor  æ„é€ å‡½æ•°å¯¹è±¡åŸå‹ï¼ˆ __ proto __ï¼‰å’Œæ„é€ å‡½æ•°ï¼ˆprototypeï¼‰åŸå‹å¯¹è±¡é‡Œé¢éƒ½æœ‰ä¸€ä¸ªå±æ€§ constructor å±æ€§ ï¼Œconstructor æˆ‘ä»¬ç§°ä¸ºæ„é€ å‡½æ•°ï¼Œå› ä¸ºå®ƒæŒ‡å›æ„é€ å‡½æ•°æœ¬èº«ã€‚\n\nconstructor ä¸»è¦ç”¨äºè®°å½•è¯¥å¯¹è±¡å¼•ç”¨äºå“ªä¸ªæ„é€ å‡½æ•°ï¼Œå®ƒå¯ä»¥è®©åŸå‹å¯¹è±¡é‡æ–°æŒ‡å‘åŸæ¥çš„æ„é€ å‡½æ•°ã€‚\n\nä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¯¹è±¡çš„æ–¹æ³•éƒ½åœ¨æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡ä¸­è®¾ç½®ã€‚å¦‚æœæœ‰å¤šä¸ªå¯¹è±¡çš„æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥ç»™åŸå‹å¯¹è±¡é‡‡å–å¯¹è±¡å½¢å¼èµ‹å€¼ï¼Œä½†æ˜¯è¿™æ ·å°±ä¼šè¦†ç›–æ„é€ å‡½æ•°åŸå‹å¯¹è±¡åŸæ¥çš„å†…å®¹ï¼Œè¿™æ ·ä¿®æ”¹åçš„åŸå‹å¯¹è±¡ constructorå°±ä¸å†æŒ‡å‘å½“å‰æ„é€ å‡½æ•°äº†ã€‚æ­¤æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¿®æ”¹åçš„åŸå‹å¯¹è±¡ä¸­ï¼Œæ·»åŠ ä¸€ä¸ªconstructoræŒ‡å‘åŸæ¥çš„æ„é€ å‡½æ•°ã€‚\n\næ„é€ å‡½æ•°ã€å®ä¾‹ã€åŸå‹å¯¹è±¡ä¸‰è€…ä¹‹é—´çš„å…³ç³»\n1234567891011121314151617181920212223242526272829303132&lt;script&gt;       function Star(uname, age) &#123;           this.uname &#x3D; uname;           this.age &#x3D; age;       &#125;       &#x2F;&#x2F; å¾ˆå¤šæƒ…å†µä¸‹,æˆ‘ä»¬éœ€è¦æ‰‹åŠ¨çš„åˆ©ç”¨constructor        è¿™ä¸ªå±æ€§æŒ‡å›åŸæ¥çš„æ„é€ å‡½æ•°       &#x2F;&#x2F; Star.prototype.sing &#x3D; function() &#123;       &#x2F;&#x2F;     console.log(&#39;æˆ‘ä¼šå”±æ­Œ&#39;);       &#x2F;&#x2F; &#125;;       &#x2F;&#x2F; Star.prototype.movie &#x3D; function() &#123;       &#x2F;&#x2F;     console.log(&#39;æˆ‘ä¼šæ¼”ç”µå½±&#39;);       &#x2F;&#x2F; &#125;       Star.prototype &#x3D; &#123;           &#x2F;&#x2F; å¦‚æœæˆ‘ä»¬ä¿®æ”¹äº†åŸæ¥çš„åŸå‹å¯¹è±¡,ç»™åŸå‹å¯¹è±¡èµ‹           å€¼çš„æ˜¯ä¸€ä¸ªå¯¹è±¡,åˆ™å¿…é¡»æ‰‹åŠ¨çš„åˆ©ç”¨constructoræŒ‡           å›åŸæ¥çš„æ„é€ å‡½æ•°           constructor: Star,           sing: function() &#123;               console.log(&#39;æˆ‘ä¼šå”±æ­Œ&#39;);           &#125;,           movie: function() &#123;               console.log(&#39;æˆ‘ä¼šæ¼”ç”µå½±&#39;);           &#125;       &#125;       var ldh &#x3D; new Star(&#39;åˆ˜å¾·å&#39;, 18);       var zxy &#x3D; new Star(&#39;å¼ å­¦å‹&#39;, 19);       console.log(Star.prototype);       console.log(ldh.__proto__);       console.log(Star.prototype.constructor);       console.log(ldh.__proto__.constructor);   &lt;&#x2F;script&gt;\nåŸå‹é“¾\nåªè¦æ˜¯å¯¹è±¡å°±æœ‰proto åŸå‹, æŒ‡å‘åŸå‹å¯¹è±¡\n\næˆ‘ä»¬StaråŸå‹å¯¹è±¡é‡Œé¢çš„protoåŸå‹æŒ‡å‘çš„æ˜¯ Object.prototype\n\næˆ‘ä»¬Object.prototypeåŸå‹å¯¹è±¡é‡Œé¢çš„protoåŸå‹  æŒ‡å‘ä¸º null\n\nJavaScript çš„æˆå‘˜æŸ¥æ‰¾æœºåˆ¶(è§„åˆ™)å½“è®¿é—®ä¸€ä¸ªå¯¹è±¡çš„å±æ€§ï¼ˆåŒ…æ‹¬æ–¹æ³•ï¼‰æ—¶ï¼Œé¦–å…ˆæŸ¥æ‰¾è¿™ä¸ªå¯¹è±¡è‡ªèº«æœ‰æ²¡æœ‰è¯¥å±æ€§ã€‚\nå¦‚æœæ²¡æœ‰å°±æŸ¥æ‰¾å®ƒçš„åŸå‹ï¼ˆä¹Ÿå°±æ˜¯ protoæŒ‡å‘çš„ prototype åŸå‹å¯¹è±¡ï¼‰ã€‚\nå¦‚æœè¿˜æ²¡æœ‰å°±æŸ¥æ‰¾åŸå‹å¯¹è±¡çš„åŸå‹ï¼ˆObjectçš„åŸå‹å¯¹è±¡ï¼‰ã€‚\nä¾æ­¤ç±»æ¨ä¸€ç›´æ‰¾åˆ° Object ä¸ºæ­¢ï¼ˆnullï¼‰ã€‚\nprotoå¯¹è±¡åŸå‹çš„æ„ä¹‰å°±åœ¨äºä¸ºå¯¹è±¡æˆå‘˜æŸ¥æ‰¾æœºåˆ¶æä¾›ä¸€ä¸ªæ–¹å‘ï¼Œæˆ–è€…è¯´ä¸€æ¡è·¯çº¿ã€‚\nåŸå‹å¯¹è±¡thisæŒ‡å‘æ„é€ å‡½æ•°ä¸­çš„thisæŒ‡å‘æˆ‘ä»¬å®ä¾‹å¯¹è±¡ã€‚\nåŸå‹å¯¹è±¡é‡Œé¢æ”¾çš„æ˜¯æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•é‡Œé¢çš„this æŒ‡å‘çš„æ˜¯ è¿™ä¸ªæ–¹æ³•çš„è°ƒç”¨è€…ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ªå®ä¾‹å¯¹è±¡ã€‚\næ‰©å±•å†…ç½®å¯¹è±¡å¯ä»¥é€šè¿‡åŸå‹å¯¹è±¡ï¼Œå¯¹åŸæ¥çš„å†…ç½®å¯¹è±¡è¿›è¡Œæ‰©å±•è‡ªå®šä¹‰çš„æ–¹æ³•ã€‚æ¯”å¦‚ç»™æ•°ç»„å¢åŠ è‡ªå®šä¹‰æ±‚å¶æ•°å’Œçš„åŠŸèƒ½ã€‚ï¼ˆåŸå‹å¯¹è±¡çš„åº”ç”¨ï¼‰\n123456789Array.prototype.sum&#x3D;function()&#123;        var sum&#x3D;0        for(i&#x3D;0;i&lt;this.length;i++)&#123;            sum +&#x3D; this[i]        &#125;        return sum    &#125;    var arr&#x3D;[1,2,3]    console.log(arr.sum())\næ³¨æ„æ•°ç»„å’Œå­—ç¬¦ä¸²==å†…ç½®å¯¹è±¡==ä¸èƒ½ä»¥å¯¹è±¡çš„å½¢å¼è¿½åŠ ï¼Œå› ä¸ºä¼šè¦†ç›–åŸæœ¬çš„å†…ç½®æ–¹æ³•â€”â€”Array.prototype = {} ï¼Œåªèƒ½ä½¿ç”¨Array.prototype.xxx = function(){} çš„æ–¹å¼ã€‚\nç»§æ‰¿ES6ä¹‹å‰å¹¶æ²¡æœ‰ç»™æˆ‘ä»¬æä¾›extendsç»§æ‰¿ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡æ„é€ å‡½æ•°+åŸå‹å¯¹è±¡æ¨¡æ‹Ÿå®ç°ç»§æ‰¿ï¼Œè¢«ç§°ä¸ºç»„åˆç»§æ‰¿ã€‚\ncall()è°ƒç”¨è¿™ä¸ªå‡½æ•°, å¹¶ä¸”ä¿®æ”¹å‡½æ•°è¿è¡Œæ—¶çš„ this æŒ‡å‘\n1fun.call(thisArg, arg1, arg2, ...)\nthisArgï¼šå½“å‰è°ƒç”¨å‡½æ•° this çš„æŒ‡å‘å¯¹è±¡ã€‚\n\narg1ï¼Œarg2ï¼šä¼ é€’çš„å…¶ä»–å‚æ•°ã€‚\n1234567891011121314151617&lt;script&gt;    function fn(x,y,z)&#123;        console.log(&quot;deadly sleepy&quot;)        console.log(this)        console.log(x+y+z)    &#125;    var o&#x3D;&#123;        think:&quot;want to sleep&quot;    &#125;    var postgraduate&#x3D;&quot;postgraduate&quot;;    var is&#x3D;&quot;is&quot;;    var important&#x3D;&quot;important&quot;    fn.call()    fn.call(o)    fn.call(o,postgraduate,is,important)&lt;&#x2F;script&gt;\nå€Ÿç”¨æ„é€ å‡½æ•°ç»§æ‰¿çˆ¶ç±»å‹å±æ€§æ ¸å¿ƒåŸç†ï¼šé€šè¿‡ call() æŠŠçˆ¶ç±»å‹çš„ this æŒ‡å‘å­ç±»å‹çš„ this ï¼Œè¿™æ ·å°±å¯ä»¥å®ç°å­ç±»å‹ç»§æ‰¿çˆ¶ç±»å‹çš„å±æ€§ã€‚\n  extendså±äºç±»çš„ç»§æ‰¿ï¼Œå†™æ³•æ˜¯class Son extends Fatherã€‚  è¿™é‡Œæ˜¯å‡½æ•°  super()æ˜¯è®¿é—®å’Œè°ƒç”¨çˆ¶æ„é€ å‡½æ•°çš„æ–¹æ³•  call()æ˜¯ç»§æ‰¿çˆ¶æ„é€ å‡½æ•°çš„ç±»å’Œæ–¹æ³•\n1234567891011121314&#x2F;&#x2F; çˆ¶ç±»function Father(name, age, sex) &#123;  this.name &#x3D; name;  this.age &#x3D; age;  this.sex &#x3D; sex;&#125;&#x2F;&#x2F; å­ç±»function Son(name, age, sex, score) &#123;  Father.call(this, name, age, sex);  &#x2F;&#x2F; æ­¤æ—¶çˆ¶ç±»çš„ this   æŒ‡å‘å­ç±»çš„ thisï¼ŒåŒæ—¶è°ƒç”¨è¿™ä¸ªå‡½æ•°  this.score &#x3D; score;&#125;var s1 &#x3D; new Son(&#39;zs&#39;, 18, &#39;ç”·&#39;, 100);console.dir(s1);\nå­ç±»æ„é€ å‡½æ•°ä¸­é€šè¿‡callå°†çˆ¶ç±»æ„é€ å‡½æ•°thisæŒ‡å‘è‡ªèº«ï¼Œè¾¾åˆ°ç»§æ‰¿çˆ¶ç±»å±æ€§ç›®çš„\n1234567891011121314151617181920212223242526272829303132333435&lt;script&gt;       &#x2F;&#x2F; å€Ÿç”¨çˆ¶æ„é€ å‡½æ•°ç»§æ‰¿å±æ€§       &#x2F;&#x2F; 1. çˆ¶æ„é€ å‡½æ•°       function Father(uname, age) &#123;           &#x2F;&#x2F; this æŒ‡å‘çˆ¶æ„é€ å‡½æ•°çš„å¯¹è±¡å®ä¾‹           this.uname &#x3D; uname;           this.age &#x3D; age;       &#125;       Father.prototype.money &#x3D; function() &#123;           console.log(100000);       &#125;;       &#x2F;&#x2F; 2 .å­æ„é€ å‡½æ•°        function Son(uname, age, score) &#123;           &#x2F;&#x2F; this æŒ‡å‘å­æ„é€ å‡½æ•°çš„å¯¹è±¡å®ä¾‹           Father.call(this, uname, age);           this.score &#x3D; score;       &#125;       &#x2F;&#x2F; Son.prototype &#x3D; Father.prototype;        &#x2F;&#x2F;è¿™æ ·ç›´æ¥èµ‹å€¼ä¼šæœ‰é—®é¢˜,å¦‚æœä¿®æ”¹äº†å­åŸå‹å¯¹è±¡,çˆ¶åŸå‹      &#x2F;&#x2F;å¯¹è±¡ä¹Ÿä¼šè·Ÿç€ä¸€èµ·å˜åŒ–       Son.prototype &#x3D; new Father();       &#x2F;&#x2F; å¦‚æœåˆ©ç”¨å¯¹è±¡çš„å½¢å¼ä¿®æ”¹äº†åŸå‹å¯¹è±¡,åˆ«å¿˜äº†åˆ©ç”¨       &#x2F;&#x2F;constructor æŒ‡å›åŸæ¥çš„æ„é€ å‡½æ•°       Son.prototype.constructor &#x3D; Son;       &#x2F;&#x2F; è¿™ä¸ªæ˜¯å­æ„é€ å‡½æ•°ä¸“é—¨çš„æ–¹æ³•,åŸå‹é“¾æŸ¥æ‰¾       Son.prototype.exam &#x3D; function() &#123;           console.log(&#39;å­©å­è¦è€ƒè¯•&#39;);       &#125;       var son &#x3D; new Son(&#39;åˆ˜å¾·å&#39;, 18, 100);       console.log(son);       console.log(Father.prototype);       console.log(Son.prototype.constructor);   &lt;&#x2F;script&gt;\nä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¯¹è±¡çš„æ–¹æ³•éƒ½åœ¨æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡ä¸­è®¾ç½®ï¼Œé€šè¿‡æ„é€ å‡½æ•°æ— æ³•ç»§æ‰¿çˆ¶ç±»æ–¹æ³•ã€‚æ ¸å¿ƒåŸç†ï¼š \n\nå°†å­ç±»æ‰€å…±äº«çš„æ–¹æ³•æå–å‡ºæ¥ï¼Œè®©å­ç±»çš„ prototype åŸå‹å¯¹è±¡ = new çˆ¶ç±»()  \n\næœ¬è´¨ï¼šå­ç±»åŸå‹å¯¹è±¡ç­‰äºæ˜¯å®ä¾‹åŒ–çˆ¶ç±»ï¼Œå› ä¸ºçˆ¶ç±»å®ä¾‹åŒ–ä¹‹åå¦å¤–å¼€è¾Ÿç©ºé—´ï¼Œå°±ä¸ä¼šå½±å“åŸæ¥çˆ¶ç±»åŸå‹å¯¹è±¡\n\nå°†å­ç±»çš„ constructor ä»æ–°æŒ‡å‘å­ç±»çš„æ„é€ å‡½æ•°\n\nç±»çš„æœ¬è´¨classæœ¬è´¨è¿˜æ˜¯functionï¼ˆç®€å•è®¤ä¸ºï¼Œæ„é€ å‡½æ•°çš„å¦å¤–ä¸€ç§å†™æ³•ï¼‰ï¼›\nç±»çš„æ‰€æœ‰æ–¹æ³•éƒ½å®šä¹‰åœ¨ç±»çš„prototypeå±æ€§ä¸Šï¼›\nç±»åˆ›å»ºçš„å®ä¾‹,é‡Œé¢ä¹Ÿæœ‰protoæŒ‡å‘ç±»çš„prototypeåŸå‹å¯¹è±¡ï¼›\næ‰€ä»¥ES6çš„ç±»å®ƒçš„ç»å¤§éƒ¨åˆ†åŠŸèƒ½ï¼ŒES5éƒ½å¯ä»¥åšåˆ°ï¼Œæ–°çš„classå†™æ³•åªæ˜¯è®©å¯¹è±¡åŸå‹çš„å†™æ³•æ›´åŠ æ¸…æ™°ã€æ›´åƒé¢å‘å¯¹è±¡ç¼–ç¨‹çš„è¯­æ³•è€Œå·²ï¼›\næ‰€ä»¥ES6çš„ç±»å…¶å®å°±æ˜¯è¯­æ³•ç³–ï¼›\nè¯­æ³•ç³–:è¯­æ³•ç³–å°±æ˜¯ä¸€ç§ä¾¿æ·å†™æ³•ã€‚ç®€å•ç†è§£,æœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥å®ç°åŒæ ·çš„åŠŸèƒ½,ä½†æ˜¯ä¸€ç§å†™æ³•æ›´åŠ æ¸…æ™°ã€æ–¹ä¾¿,é‚£ä¹ˆè¿™ä¸ªæ–¹æ³•å°±æ˜¯è¯­æ³•ç³–ã€‚\nES6ä¹‹å‰é€šè¿‡ ==æ„é€ å‡½æ•°+ åŸå‹å®ç°é¢å‘å¯¹è±¡== ç¼–ç¨‹\næ„é€ å‡½æ•°æœ‰åŸå‹å¯¹è±¡prototypeï¼›\næ„é€ å‡½æ•°åŸå‹å¯¹è±¡prototype é‡Œé¢æœ‰constructor æŒ‡å‘æ„é€ å‡½æ•°æœ¬èº«ï¼›\næ„é€ å‡½æ•°å¯ä»¥é€šè¿‡åŸå‹å¯¹è±¡æ·»åŠ æ–¹æ³•ï¼›\næ„é€ å‡½æ•°åˆ›å»ºçš„å®ä¾‹å¯¹è±¡æœ‰protoåŸå‹æŒ‡å‘æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡ã€‚\nES6é€šè¿‡ ==ç±»== å®ç°é¢å‘å¯¹è±¡ç¼–ç¨‹\n1234567891011121314151617181920212223&lt;script&gt;    class Star &#123;                &#125;    console.log(typeof Star);    &#x2F;&#x2F; 1. ç±»çš„æœ¬è´¨å…¶å®è¿˜æ˜¯ä¸€ä¸ªå‡½æ•°æˆ‘ä»¬ä¹Ÿå¯ä»¥ç®€å•çš„è®¤ä¸º    &#x2F;&#x2F;ç±»å°±æ˜¯æ„é€ å‡½æ•°çš„å¦å¤–ä¸€ç§å†™æ³•    &#x2F;&#x2F; (1) ç±»æœ‰åŸå‹å¯¹è±¡prototype     console.log(Star.prototype);    &#x2F;&#x2F; (2) ç±»åŸå‹å¯¹è±¡prototype é‡Œé¢æœ‰constructor æŒ‡å‘ç±»æœ¬èº«    console.log(Star.prototype.constructor);    &#x2F;&#x2F; (3)ç±»å¯ä»¥é€šè¿‡åŸå‹å¯¹è±¡æ·»åŠ æ–¹æ³•    Star.prototype.sing &#x3D; function() &#123;        console.log(&#39;å†°é›¨&#39;);    &#125;    var ldh &#x3D; new Star();    console.dir(ldh);    &#x2F;&#x2F; (4) ç±»åˆ›å»ºçš„å®ä¾‹å¯¹è±¡æœ‰__proto__ åŸå‹æŒ‡å‘ ç±»çš„åŸå‹å¯¹è±¡    console.log(ldh.__proto__ &#x3D;&#x3D;&#x3D; Star.prototype);    i &#x3D; i + 1;    i++&lt;&#x2F;script&gt;\n\nES5æ–°å¢æ–¹æ³•æ•°ç»„æ–¹æ³•è¿­ä»£(éå†)æ–¹æ³•ï¼š      forEach()ã€map()ã€filter()ã€some()ã€every()ï¼›\nforEach()array.forEach(function(value, index, array))\n1. valueæ¯ä¸€ä¸ªæ•°ç»„å…ƒç´ \n2. indexæ¯ä¸€ä¸ªæ•°ç»„å…ƒç´ çš„ç´¢å¼•å·\n3. arrayæ•°ç»„æœ¬èº«123456var arr &#x3D; [1, 2, 3]arr.forEach(function (value, index, array) &#123;    console.log(&#39;æ¯ä¸ªæ•°ç»„å…ƒç´ &#39; + value);    console.log(&#39;æ¯ä¸ªæ•°ç»„å…ƒç´ çš„ç´¢å¼•å·&#39; + index);    console.log(&#39;æ•°ç»„æœ¬èº«&#39; + array);&#125;)\n\nfilter()array.filter(function(value, index, array))\n1. valueæ¯ä¸€ä¸ªæ•°ç»„å…ƒç´ \n2. indexæ¯ä¸€ä¸ªæ•°ç»„å…ƒç´ çš„ç´¢å¼•å·\n3. arrayæ•°ç»„æœ¬èº«filter() æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œæ–°æ•°ç»„ä¸­çš„å…ƒç´ æ˜¯é€šè¿‡æ£€æŸ¥æŒ‡å®šæ•°ç»„ä¸­ç¬¦åˆæ¡ä»¶çš„æ‰€æœ‰å…ƒç´ ï¼Œä¸»è¦ç”¨äº==ç­›é€‰æ•°ç»„==ã€‚\næ³¨æ„å®ƒç›´æ¥è¿”å›ä¸€ä¸ª==æ–°==æ•°ç»„\n1234567var arr &#x3D; [12, 66, 4, 88, 3, 7];&#x2F;&#x2F;newAArræ¥æ”¶è¿”å›çš„æ•°ç»„var newArr &#x3D; arr.filter(function (value, index) &#123;    &#x2F;&#x2F; return value &gt;&#x3D; 20;    return value % 2 &#x3D;&#x3D;&#x3D; 0;&#125;);console.log(newArr);\n\nsome()array.some(function(value, index, array))\n1. valueæ¯ä¸€ä¸ªæ•°ç»„å…ƒç´ \n2. indexæ¯ä¸€ä¸ªæ•°ç»„å…ƒç´ çš„ç´¢å¼•å·\n3. arrayæ•°ç»„æœ¬èº«some() æ–¹æ³•ç”¨äºæ£€æµ‹æ•°ç»„ä¸­çš„å…ƒç´ æ˜¯å¦æ»¡è¶³æŒ‡å®šæ¡ä»¶ã€‚å³æŸ¥æ‰¾æ•°ç»„ä¸­æ˜¯å¦æœ‰æ»¡è¶³æ¡ä»¶çš„å…ƒç´ ã€‚\næ³¨æ„å®ƒ==è¿”å›å€¼æ˜¯å¸ƒå°”å€¼==ï¼Œ å¦‚æœæŸ¥æ‰¾åˆ°è¿™ä¸ªå…ƒç´ ï¼Œ å°±è¿”å›trueï¼Œ  å¦‚æœæŸ¥æ‰¾ä¸åˆ°å°±è¿”å›falseã€‚\nå¦‚æœæ‰¾åˆ°ç¬¬ä¸€ä¸ªæ»¡è¶³æ¡ä»¶çš„å…ƒç´ ï¼Œåˆ™ç»ˆæ­¢å¾ªç¯ï¼Œä¸åœ¨ç»§ç»­æŸ¥æ‰¾ã€‚\n1. filter()æŸ¥æ‰¾åˆ°æ»¡è¶³æ¡ä»¶çš„å…ƒç´ åï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œ \nè€Œä¸”æ˜¯æŠŠæ‰€æœ‰æ»¡è¶³æ¡ä»¶çš„å…ƒç´ è¿”å›å›æ¥ã€‚\n2. some()æŸ¥æ‰¾æ»¡è¶³æ¡ä»¶çš„å…ƒç´ æ˜¯å¦å­˜åœ¨ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªå¸ƒå°”\nå€¼ï¼ŒæŸ¥æ‰¾åˆ°ç¬¬ä¸€ä¸ªæ»¡è¶³æ¡ä»¶çš„å…ƒç´ å°±ç»ˆæ­¢å¾ªç¯ã€‚some()å’ŒforEachçš„åŒºåˆ«åœ¨forEach() å’Œfilter() é‡Œé¢ return ä¸ä¼šç»ˆæ­¢è¿­ä»£ã€‚\nåœ¨some()é‡Œé¢é‡åˆ° return true å°±æ˜¯ç»ˆæ­¢éå†ï¼Œè¿­ä»£æ•ˆç‡æ›´é«˜ã€‚\n12345678910var arr &#x3D; [&#39;red&#39;, &#39;green&#39;, &#39;blue&#39;, &#39;pink&#39;];&#x2F;&#x2F; 1. forEachè¿­ä»£ éå†arr.forEach(function(value) &#123;    if (value &#x3D;&#x3D; &#39;green&#39;) &#123;        console.log(&#39;æ‰¾åˆ°äº†è¯¥å…ƒç´ &#39;);&#x2F;&#x2F;         return true; &#x2F;&#x2F; åœ¨forEach é‡Œé¢ return ä¸ä¼šç»ˆæ­¢è¿­ä»£    &#125;    console.log(11);&#125;)\n12345678910&#x2F;&#x2F; å¦‚æœæŸ¥è¯¢æ•°ç»„ä¸­å”¯ä¸€çš„å…ƒç´ , ç”¨someæ–¹æ³•æ›´åˆé€‚,arr.some(function (value) &#123;    if (value &#x3D;&#x3D; &#39;green&#39;) &#123;        console.log(&#39;æ‰¾åˆ°äº†è¯¥å…ƒç´ &#39;);        return true; &#x2F;&#x2F;  åœ¨some é‡Œé¢ é‡åˆ° return true         &#x2F;&#x2F;å°±æ˜¯ç»ˆæ­¢éå† è¿­ä»£æ•ˆç‡æ›´é«˜    &#125;    console.log(11);&#125;);\n12345678arr.filter(function (value) &#123;    if (value &#x3D;&#x3D; &#39;green&#39;) &#123;        console.log(&#39;æ‰¾åˆ°äº†è¯¥å…ƒç´ &#39;);        return true; &#x2F;&#x2F; filter é‡Œé¢ return ä¸ä¼šç»ˆæ­¢è¿­ä»£    &#125;    console.log(11);&#125;);\nå­—ç¬¦ä¸²æ–¹æ³•trim()trim() æ–¹æ³•ä¼šä»ä¸€ä¸ªå­—ç¬¦ä¸²çš„ä¸¤ç«¯åˆ é™¤ç©ºç™½å­—ç¬¦ã€‚       \ntrim() æ–¹æ³•å¹¶ä¸å½±å“åŸå­—ç¬¦ä¸²æœ¬èº«ï¼Œå®ƒè¿”å›çš„æ˜¯ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ã€‚\nè§£å†³è¡¨å•æäº¤ç”¨æˆ·è¾“å…¥ç©ºæ ¼çš„é—®é¢˜ã€‚\nå¯¹è±¡æ–¹æ³•Object.keys()ç”¨äºè·å–å¯¹è±¡è‡ªèº«æ‰€æœ‰çš„å±æ€§\nObject.keys(å¯¹è±¡å‚æ•°å)æ•ˆæœç±»ä¼¼ forâ€¦in\nè¿”å›ä¸€ä¸ªç”±==å±æ€§å==ç»„æˆçš„==æ•°ç»„==\nObject.defineProperty()å®šä¹‰å¯¹è±¡ä¸­æ–°å±æ€§æˆ–ä¿®æ”¹åŸæœ‰çš„å±æ€§ã€‚(äº†è§£)\nObject.defineProperty(obj, prop, descriptor)objï¼šå¿…éœ€ã€‚ç›®æ ‡å¯¹è±¡ ã€‚\npropï¼šå¿…éœ€ã€‚éœ€è¦å®šä¹‰æˆ–ä¿®æ”¹çš„å±æ€§çš„åå­—ã€‚\ndescriptorï¼šå¿…éœ€ã€‚ç›®æ ‡å±æ€§æ‰€æ‹¥æœ‰çš„ç‰¹æ€§ã€‚\nç¬¬ä¸‰ä¸ªå‚æ•° descriptor è¯´æ˜ï¼šä»¥å¯¹è±¡å½¢å¼ { } ä¹¦å†™\nvalue: è®¾ç½®å±æ€§çš„å€¼ã€‚é»˜è®¤ä¸ºundefinedï¼›\nwritable: å€¼æ˜¯å¦å¯ä»¥é‡å†™ã€‚true | false  ï¼Œé»˜è®¤ä¸ºfalseï¼›\nenumerable: ç›®æ ‡å±æ€§æ˜¯å¦å¯ä»¥è¢«æšä¸¾ï¼ˆèƒ½ä¸èƒ½è¢«éå†ï¼‰ã€‚true | false  ï¼Œé»˜è®¤ä¸º falseï¼›\nconfigurable: ç›®æ ‡å±æ€§æ˜¯å¦å¯ä»¥è¢«åˆ é™¤æˆ–æ˜¯å¦å¯ä»¥å†æ¬¡ä¿®æ”¹ç‰¹æ€§ï¼Œ true | false  ï¼Œé»˜è®¤ä¸ºfalseã€‚\n1234567891011121314151617181920212223242526272829303132333435363738394041424344454647&#x2F;&#x2F; Object.defineProperty() å®šä¹‰æ–°å±æ€§æˆ–ä¿®æ”¹åŸæœ‰çš„å±æ€§   var obj &#x3D; &#123;       id: 1,       pname: &#39;å°ç±³&#39;,       price: 1999   &#125;;   Object.defineProperty(obj, &#39;num&#39;, &#123;       value: 1000,       enumerable: true   &#125;);   console.log(obj);   Object.defineProperty(obj, &#39;price&#39;, &#123;       value: 9.9   &#125;);   console.log(obj);   Object.defineProperty(obj, &#39;id&#39;, &#123;       &#x2F;&#x2F; å¦‚æœå€¼ä¸ºfalse ä¸å…è®¸ä¿®æ”¹è¿™ä¸ªå±æ€§å€¼ é»˜è®¤å€¼ä¹Ÿæ˜¯false       writable: false,   &#125;);   obj.id &#x3D; 2;   console.log(obj);   Object.defineProperty(obj, &#39;address&#39;, &#123;       value: &#39;ä¸­å›½å±±ä¸œè“ç¿”æŠ€æ ¡xxå•å…ƒ&#39;,       writable: false,       &#x2F;&#x2F; enumerable å¦‚æœå€¼ä¸ºfalse åˆ™ä¸å…è®¸éå†, é»˜è®¤çš„å€¼æ˜¯ false       enumerable: false,       &#x2F;&#x2F; configurable å¦‚æœä¸ºfalse åˆ™ä¸å…è®¸åˆ é™¤è¿™ä¸ªå±æ€§        &#x2F;&#x2F;ä¸å…è®¸å†ä¿®æ”¹ç¬¬ä¸‰ä¸ªå‚æ•°é‡Œé¢çš„ç‰¹æ€§ é»˜è®¤ä¸ºfalse       configurable: false   &#125;);   console.log(obj);   console.log(Object.keys(obj));   delete obj.address;   console.log(obj);   delete obj.pname;   console.log(obj);   Object.defineProperty(obj, &#39;address&#39;, &#123;       value: &#39;ä¸­å›½å±±ä¸œè“ç¿”æŠ€æ ¡xxå•å…ƒ&#39;,       &#x2F;&#x2F; å¦‚æœå€¼ä¸ºfalse ä¸å…è®¸ä¿®æ”¹è¿™ä¸ªå±æ€§å€¼ é»˜è®¤å€¼ä¹Ÿæ˜¯false       writable: true,       &#x2F;&#x2F; enumerable å¦‚æœå€¼ä¸ºfalse åˆ™ä¸å…è®¸éå†, é»˜è®¤çš„å€¼æ˜¯ false       enumerable: true,       &#x2F;&#x2F; configurable å¦‚æœä¸ºfalse åˆ™ä¸å…è®¸åˆ é™¤ä»¥åŠè¿™ä¸ªå±æ€§        ä¸å…è®¸å†ä¿®æ”¹ç¬¬ä¸‰ä¸ªå‚æ•°é‡Œé¢çš„ç‰¹æ€§é»˜è®¤ä¸ºfalse       configurable: true   &#125;);   console.log(obj.address);&#x2F;&#x2F;ä¸å…è®¸å†ä¿®æ”¹ç¬¬ä¸‰ä¸ªå‚æ•°é‡Œé¢çš„ç‰¹æ€§\n\nå‡½æ•°è¿›é˜¶å‡½æ•°çš„å®šä¹‰å’Œè°ƒç”¨å‡½æ•°çš„å®šä¹‰æ–¹å¼å‡½æ•°å£°æ˜æ–¹å¼ function å…³é”®å­— (å‘½åå‡½æ•°)\nfunction fn(){};å‡½æ•°è¡¨è¾¾å¼ (åŒ¿åå‡½æ•°)\nvar fun =function(){};new Function()   \nvar fn = new Function(&apos;å‚æ•°1&apos;,&apos;å‚æ•°2&apos;..., &apos;å‡½æ•°ä½“&apos;)Function é‡Œé¢å‚æ•°éƒ½å¿…é¡»æ˜¯å­—ç¬¦ä¸²æ ¼å¼\nç¬¬ä¸‰ç§æ–¹å¼æ‰§è¡Œæ•ˆç‡ä½ï¼Œä¹Ÿä¸æ–¹ä¾¿ä¹¦å†™ï¼Œå› æ­¤è¾ƒå°‘ä½¿ç”¨\næ‰€æœ‰å‡½æ•°éƒ½æ˜¯ Function çš„å®ä¾‹(å¯¹è±¡)  \nå‡½æ•°ä¹Ÿå±äºå¯¹è±¡\n\nå‡½æ•°çš„è°ƒç”¨æ–¹å¼æ™®é€šå‡½æ•°\nfunction fn() {\n    console.log(&apos;äººç”Ÿçš„å·…å³°&apos;);\n}å¯¹è±¡çš„æ–¹æ³•\nvar o = {\n    sayHi: function() {\n        console.log(&apos;äººç”Ÿçš„å·…å³°&apos;);\n\n    }\n}\no.sayHi();æ„é€ å‡½æ•°\nfunction Star() {};\nnew Star();ç»‘å®šäº‹ä»¶å‡½æ•°\nbtn.onclick = function() {};   // ç‚¹å‡»äº†æŒ‰é’®å°±å¯ä»¥è°ƒç”¨è¿™ä¸ªå‡½æ•°å®šæ—¶å™¨å‡½æ•°\nsetInterval(function() {}, 1000);  \n//è¿™ä¸ªå‡½æ•°æ˜¯å®šæ—¶å™¨è‡ªåŠ¨1ç§’é’Ÿè°ƒç”¨ä¸€æ¬¡ç«‹å³æ‰§è¡Œå‡½æ•°\n(function() {\n        console.log(&apos;äººç”Ÿçš„å·…å³°&apos;);\n    })();\n    // ç«‹å³æ‰§è¡Œå‡½æ•°æ˜¯è‡ªåŠ¨è°ƒç”¨\nä¸¤ç§å†™æ³•\n( function () {} ) ()\n( function () {} () )thiså‡½æ•°å†… this çš„æŒ‡å‘è°ƒç”¨æ–¹å¼çš„ä¸åŒå†³å®šäº†this çš„æŒ‡å‘ä¸åŒï¼Œä¸€èˆ¬æŒ‡å‘è°ƒç”¨è€…ã€‚è°ƒç”¨æ–¹å¼ | thisæŒ‡å‘â€”|â€”æ™®é€šå‡½æ•°è°ƒç”¨ | windowå¯¹è±¡æ–¹æ³•è°ƒç”¨ | å¯¹è±¡æ„é€ å‡½æ•°è°ƒç”¨ | å®ä¾‹å¯¹è±¡ï¼›åŸå‹å¯¹è±¡é‡Œçš„thisä¹ŸæŒ‡å‘å®ä¾‹å¯¹è±¡ç»‘å®šäº‹ä»¶è°ƒç”¨ | ç»‘å®šäº‹ä»¶çš„å¯¹è±¡å®šæ—¶å™¨å‡½æ•°è°ƒç”¨ | windowç«‹å³æ‰§è¡Œå‡½æ•°è°ƒç”¨ | window\næ”¹å˜å‡½æ•°å†…éƒ¨ this æŒ‡å‘å¸¸ç”¨çš„æœ‰ bind()ã€call()ã€apply() ä¸‰ç§æ–¹æ³•ã€‚\ncall æ–¹æ³•call() æ–¹æ³•è°ƒç”¨ä¸€ä¸ªå¯¹è±¡ã€‚ç®€å•ç†è§£ä¸ºè°ƒç”¨å‡½æ•°çš„æ–¹å¼ï¼Œä½†æ˜¯å®ƒå¯ä»¥æ”¹å˜å‡½æ•°çš„ this æŒ‡å‘ã€‚\nfun.call(thisArg, arg1, arg2, ...)thisArgï¼šåœ¨ fun å‡½æ•°è¿è¡Œæ—¶æŒ‡å®šçš„ this å€¼\narg1ï¼Œarg2ï¼šä¼ é€’çš„å…¶ä»–å‚æ•°\nè¿”å›å€¼å°±æ˜¯å‡½æ•°çš„è¿”å›å€¼ï¼Œå› ä¸ºå®ƒå°±æ˜¯è°ƒç”¨å‡½æ•°\nå› æ­¤å½“æˆ‘ä»¬æƒ³æ”¹å˜thisæŒ‡å‘ï¼ŒåŒæ—¶æƒ³è°ƒç”¨è¿™ä¸ªå‡½æ•°çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨ callï¼Œæ¯”å¦‚ç»§æ‰¿ã€‚\napply æ–¹æ³•apply() æ–¹æ³•è°ƒç”¨ä¸€ä¸ªå‡½æ•°ã€‚ç®€å•ç†è§£ä¸ºè°ƒç”¨å‡½æ•°çš„æ–¹å¼ï¼Œä½†æ˜¯å®ƒå¯ä»¥æ”¹å˜å‡½æ•°çš„ this æŒ‡å‘ã€‚\nfun.apply(thisArg, [argsArray])thisArgï¼šåœ¨funå‡½æ•°è¿è¡Œæ—¶æŒ‡å®šçš„ this å€¼\nargsArrayï¼šä¼ é€’çš„å€¼ï¼Œå¿…é¡»åŒ…å«åœ¨æ•°ç»„é‡Œé¢\nè¿”å›å€¼å°±æ˜¯å‡½æ•°çš„è¿”å›å€¼ï¼Œå› ä¸ºå®ƒå°±æ˜¯è°ƒç”¨å‡½æ•°\nå› æ­¤ apply ä¸»è¦è·Ÿæ•°ç»„æœ‰å…³ç³»ï¼Œæ¯”å¦‚ä½¿ç”¨ Math.max() æ±‚æ•°ç»„çš„æœ€å¤§å€¼\nä¸ç”¨æŒ‡å‘å¯¹è±¡æ—¶ï¼Œå¯ä»¥å†™null\n1234567var arr &#x3D; [1, 66, 3, 99, 4];var arr1 &#x3D; [&#39;red&#39;, &#39;pink&#39;];&lt;!--var max &#x3D; Math.max.apply(null, arr);--&gt;&lt;!--å†™nullå¯èƒ½ä¼šå‡ºç°é—®é¢˜ï¼Œè¯¦è§ä¸¥æ ¼æ¨¡å¼ç« èŠ‚--&gt;var max &#x3D; Math.max.apply(Math, arr);var min &#x3D; Math.min.apply(Math, arr);console.log(max, min);\n\nbind()æ–¹æ³•bind() æ–¹æ³•ä¸ä¼šè°ƒç”¨å‡½æ•°ã€‚ä½†æ˜¯èƒ½æ”¹å˜å‡½æ•°å†…éƒ¨thisæŒ‡å‘ã€‚\nfun.bind(thisArg, arg1, arg2, ...) thisArgï¼šåœ¨ fun å‡½æ•°è¿è¡Œæ—¶æŒ‡å®šçš„ this å€¼ï¼›\narg1ï¼Œarg2ï¼šä¼ é€’çš„å…¶ä»–å‚æ•°ï¼›\nè¿”å›ç”±æŒ‡å®šçš„thiså€¼å’Œåˆå§‹åŒ–å‚æ•°æ”¹é€ çš„åŸå‡½æ•°æ‹·è´ã€‚å½“æˆ‘ä»¬åªæ˜¯æƒ³æ”¹å˜thisæŒ‡å‘ï¼Œå¹¶ä¸”ä¸æƒ³è°ƒç”¨è¿™ä¸ªå‡½æ•°çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨ bindã€‚\nä¸ä¼šè°ƒç”¨åŸæ¥çš„å‡½æ•°ï¼Œå¯ä»¥æ”¹å˜åŸæ¥å‡½æ•°å†…éƒ¨çš„this æŒ‡å‘\nè¿”å›çš„æ˜¯åŸå‡½æ•°æ”¹å˜thisä¹‹åäº§ç”Ÿçš„æ–°å‡½æ•°ï¼›\nå¦‚æœæœ‰çš„å‡½æ•°æˆ‘ä»¬ä¸éœ€è¦ç«‹å³è°ƒç”¨ï¼Œä½†æ˜¯åˆæƒ³æ”¹å˜è¿™ä¸ªå‡½æ•°å†…éƒ¨çš„thisæŒ‡å‘æ­¤æ—¶ç”¨bindï¼›\næˆ‘ä»¬æœ‰ä¸€ä¸ªæŒ‰é’®,å½“æˆ‘ä»¬ç‚¹å‡»äº†ä¹‹åï¼Œå°±ç¦ç”¨è¿™ä¸ªæŒ‰é’®ï¼Œ3ç§’é’Ÿä¹‹åå¼€å¯è¿™ä¸ªæŒ‰é’®ã€‚12345678910111213143. bind()  ç»‘å®š æ†ç»‘çš„æ„æ€ var o &#x3D; &#123;     name: &#39;andy&#39; &#125;; function fn(a, b) &#123;     console.log(this);     console.log(a + b); &#125;; var f &#x3D; fn.bind(o, 1, 2); f();\n123456789101112131415161718192021222324252627282930    &#x2F;&#x2F; 1. ä¸ä¼šè°ƒç”¨åŸæ¥çš„å‡½æ•°       å¯ä»¥æ”¹å˜åŸæ¥å‡½æ•°å†…éƒ¨çš„this æŒ‡å‘    &#x2F;&#x2F; 2. è¿”å›çš„æ˜¯åŸå‡½æ•°æ”¹å˜thisä¹‹åäº§ç”Ÿçš„æ–°å‡½æ•°    &#x2F;&#x2F; 3. å¦‚æœæœ‰çš„å‡½æ•°æˆ‘ä»¬ä¸éœ€è¦ç«‹å³è°ƒç”¨,ä½†æ˜¯åˆæƒ³æ”¹å˜è¿™ä¸ªå‡½æ•°å†…éƒ¨çš„thisæŒ‡å‘æ­¤æ—¶ç”¨bind    &#x2F;&#x2F; 4. æˆ‘ä»¬æœ‰ä¸€ä¸ªæŒ‰é’®,å½“æˆ‘ä»¬ç‚¹å‡»äº†ä¹‹å,å°±ç¦ç”¨è¿™ä¸ªæŒ‰é’®,3ç§’é’Ÿä¹‹åå¼€å¯è¿™ä¸ªæŒ‰é’®&lt;button&gt;ç‚¹å‡»&lt;&#x2F;button&gt;&lt;button&gt;ç‚¹å‡»&lt;&#x2F;button&gt;&lt;button&gt;ç‚¹å‡»&lt;&#x2F;button&gt;&lt;script&gt;    &#x2F;&#x2F; var btn1 &#x3D; document.querySelector(&#39;button&#39;);    &#x2F;&#x2F; btn1.onclick &#x3D; function() &#123;    &#x2F;&#x2F;     this.disabled &#x3D; true; &#x2F;&#x2F; è¿™ä¸ªthis æŒ‡å‘çš„æ˜¯ btn è¿™ä¸ªæŒ‰é’®    &#x2F;&#x2F;     &#x2F;&#x2F; var that &#x3D; this;    &#x2F;&#x2F;     setTimeout(function() &#123;    &#x2F;&#x2F;         &#x2F;&#x2F; that.disabled &#x3D; false; &#x2F;&#x2F; å®šæ—¶å™¨å‡½æ•°é‡Œé¢çš„this æŒ‡å‘çš„æ˜¯window    &#x2F;&#x2F;         this.disabled &#x3D; false; &#x2F;&#x2F; æ­¤æ—¶å®šæ—¶å™¨å‡½æ•°é‡Œé¢çš„this æŒ‡å‘çš„æ˜¯btn    &#x2F;&#x2F;     &#125;.bind(this), 3000); &#x2F;&#x2F; è¿™ä¸ªthis æŒ‡å‘çš„æ˜¯btn è¿™ä¸ªå¯¹è±¡    &#x2F;&#x2F; &#125;            var btns &#x3D; document.querySelectorAll(&#39;button&#39;);    for (var i &#x3D; 0; i &lt; btns.length; i++) &#123;        btns[i].onclick &#x3D; function() &#123;            this.disabled &#x3D; true;            setTimeout(function() &#123;                this.disabled &#x3D; false;            &#125;.bind(this), 2000);        &#125;    &#125;&lt;&#x2F;script&gt;\ncall()    apply()     bind() æ€»ç»“ç›¸åŒç‚¹éƒ½å¯ä»¥æ”¹å˜thisæŒ‡å‘\nåŒºåˆ«ç‚¹callå’Œapplyä¼šè°ƒç”¨å‡½æ•°ï¼Œå¹¶ä¸”æ”¹å˜å‡½æ•°å†…éƒ¨thisæŒ‡å‘ï¼›\ncall å’Œ apply ä¼ é€’çš„å‚æ•°ä¸ä¸€æ ·ï¼Œcall ä¼ é€’å‚æ•° aru1, aru2â€¦å½¢å¼ ã€‚ apply å¿…é¡»æ•°ç»„å½¢å¼[arg]\nbind  ä¸ä¼šè°ƒç”¨å‡½æ•°, å¯ä»¥æ”¹å˜å‡½æ•°å†…éƒ¨thisæŒ‡å‘.\nä¸»è¦åº”ç”¨åœºæ™¯call ç»å¸¸åšç»§æ‰¿. \napply ç»å¸¸è·Ÿæ•°ç»„æœ‰å…³ç³».  æ¯”å¦‚å€ŸåŠ©äºæ•°å­¦å¯¹è±¡å®ç°æ•°ç»„æœ€å¤§å€¼æœ€å°å€¼\nbind  ä¸è°ƒç”¨å‡½æ•°,ä½†æ˜¯è¿˜æƒ³æ”¹å˜thisæŒ‡å‘. æ¯”å¦‚æ”¹å˜å®šæ—¶å™¨å†…éƒ¨çš„thisæŒ‡å‘. \nä¸¥æ ¼æ¨¡å¼ä»€ä¹ˆæ˜¯ä¸¥æ ¼æ¨¡å¼JavaScript é™¤äº†æä¾›æ­£å¸¸æ¨¡å¼å¤–ï¼Œè¿˜æä¾›äº†ä¸¥æ ¼æ¨¡å¼ï¼ˆstrict modeï¼‰ã€‚ES5 çš„ä¸¥æ ¼æ¨¡å¼æ˜¯é‡‡ç”¨å…·æœ‰é™åˆ¶æ€§ JavaScript å˜ä½“çš„ä¸€ç§æ–¹å¼ï¼Œå³åœ¨ä¸¥æ ¼çš„æ¡ä»¶ä¸‹è¿è¡Œ JS ä»£ç ã€‚\nä¸¥æ ¼æ¨¡å¼åœ¨ IE10ä»¥ä¸Šç‰ˆæœ¬çš„æµè§ˆå™¨ä¸­æ‰ä¼šè¢«æ”¯æŒï¼Œæ—§ç‰ˆæœ¬æµè§ˆå™¨ä¸­ä¼šè¢«å¿½ç•¥ã€‚\nä¸¥æ ¼æ¨¡å¼å¯¹æ­£å¸¸çš„ JavaScript è¯­ä¹‰åšäº†ä¸€äº›æ›´æ”¹ï¼š \næ¶ˆé™¤äº† Javascript è¯­æ³•çš„ä¸€äº›ä¸åˆç†ã€ä¸ä¸¥è°¨ä¹‹å¤„ï¼Œå‡å°‘äº†ä¸€äº›æ€ªå¼‚è¡Œä¸ºã€‚\næ¶ˆé™¤ä»£ç è¿è¡Œçš„ä¸€äº›ä¸å®‰å…¨ä¹‹å¤„ï¼Œä¿è¯ä»£ç è¿è¡Œçš„å®‰å…¨ã€‚\næé«˜ç¼–è¯‘å™¨æ•ˆç‡ï¼Œå¢åŠ è¿è¡Œé€Ÿåº¦ã€‚\nç¦ç”¨äº†åœ¨ ECMAScriptçš„æœªæ¥ç‰ˆæœ¬ä¸­å¯èƒ½ä¼šå®šä¹‰çš„ä¸€äº›è¯­æ³•ï¼Œä¸ºæœªæ¥æ–°ç‰ˆæœ¬çš„Javascriptåšå¥½é“ºå«ã€‚æ¯”å¦‚ä¸€äº›ä¿ç•™å­—å¦‚ï¼šclass, enum, export, extends, import,superä¸èƒ½åšå˜é‡å\nå¼€å¯ä¸¥æ ¼æ¨¡å¼ä¸¥æ ¼æ¨¡å¼å¯ä»¥åº”ç”¨åˆ°æ•´ä¸ªè„šæœ¬æˆ–ä¸ªåˆ«å‡½æ•°ä¸­ã€‚å› æ­¤åœ¨ä½¿ç”¨æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä¸¥æ ¼æ¨¡å¼åˆ†ä¸ºä¸ºè„šæœ¬å¼€å¯ä¸¥æ ¼æ¨¡å¼å’Œä¸ºå‡½æ•°å¼€å¯ä¸¥æ ¼æ¨¡å¼ä¸¤ç§æƒ…å†µã€‚\nä¸ºè„šæœ¬å¼€å¯ä¸¥æ ¼æ¨¡å¼ä¸ºæ•´ä¸ªè„šæœ¬æ–‡ä»¶å¼€å¯ä¸¥æ ¼æ¨¡å¼ï¼Œéœ€è¦åœ¨==æ‰€æœ‰è¯­å¥ä¹‹å‰æ”¾ä¸€ä¸ªç‰¹å®šè¯­å¥â€œuse strictâ€;ï¼ˆæˆ–â€˜use strictâ€™;ï¼‰ã€‚==\n&lt;!--ä¸ºæ•´ä¸ªè„šæœ¬æ–‡ä»¶å¼€å¯ä¸¥æ ¼æ¨¡å¼--&gt;\n&lt;script&gt;\nã€€ã€€&quot;use strict&quot;;\nã€€ã€€console.log(&quot;è¿™æ˜¯ä¸¥æ ¼æ¨¡å¼ã€‚&quot;);\n&lt;/script&gt;å› ä¸ºâ€use strictâ€åŠ äº†å¼•å·ï¼Œæ‰€ä»¥è€ç‰ˆæœ¬çš„æµè§ˆå™¨ä¼šæŠŠå®ƒå½“ä½œä¸€è¡Œæ™®é€šå­—ç¬¦ä¸²è€Œå¿½ç•¥ã€‚\n==æœ‰çš„ script åŸºæœ¬æ˜¯ä¸¥æ ¼æ¨¡å¼ï¼Œæœ‰çš„scriptè„šæœ¬æ˜¯æ­£å¸¸æ¨¡å¼ï¼Œè¿™æ ·ä¸åˆ©äºæ–‡ä»¶åˆå¹¶ï¼Œæ‰€ä»¥å¯ä»¥å°†æ•´ä¸ªè„šæœ¬æ–‡ä»¶æ”¾åœ¨ä¸€ä¸ªç«‹å³æ‰§è¡Œçš„åŒ¿åå‡½æ•°ä¹‹ä¸­ã€‚è¿™æ ·ç‹¬ç«‹åˆ›å»ºä¸€ä¸ªä½œç”¨åŸŸè€Œä¸å½±å“å…¶ä»– script è„šæœ¬æ–‡ä»¶ã€‚==\n&lt;script&gt;\n  (function (){\nã€€ã€€ã€€ã€€&quot;use strict&quot;;\nã€€ã€€ã€€ã€€function fn() {}\nã€€  })();\n&lt;/script&gt;ä¸ºå‡½æ•°å¼€å¯ä¸¥æ ¼æ¨¡å¼è¦ç»™æŸä¸ªå‡½æ•°å¼€å¯ä¸¥æ ¼æ¨¡å¼ï¼Œéœ€è¦æŠŠâ€œuse strictâ€;  (æˆ– â€˜use strictâ€™; ) å£°æ˜æ”¾åœ¨å‡½æ•°ä½“æ‰€æœ‰è¯­å¥ä¹‹å‰ã€‚\nfunction fn(){\n&lt;!--å°† &quot;usestrict&quot;æ”¾åœ¨å‡½æ•°ä½“çš„ç¬¬ä¸€è¡Œï¼Œåˆ™æ•´ä¸ªå‡½æ•°ä»¥ &quot;ä¸¥æ ¼æ¨¡å¼&quot; è¿è¡Œã€‚--&gt;\nã€€ã€€&quot;use strict&quot;;\nã€€ã€€è¿™é‡Œé¢çš„ä»£ç æŒ‰ç…§ä¸¥æ ¼æ¨¡å¼æ‰§è¡Œ\n}\nfunction fun(){\n    è¿™é‡Œé¢è¿˜æ˜¯æŒ‰ç…§æ™®é€šæ¨¡å¼æ‰§è¡Œ\n}ä¸¥æ ¼æ¨¡å¼ä¸­çš„å˜åŒ–å˜é‡è§„å®šåœ¨æ­£å¸¸æ¨¡å¼ä¸­ï¼Œå¦‚æœä¸€ä¸ªå˜é‡æ²¡æœ‰å£°æ˜å°±èµ‹å€¼ï¼Œé»˜è®¤æ˜¯å…¨å±€å˜é‡ã€‚ä¸¥æ ¼æ¨¡å¼ç¦æ­¢è¿™ç§ç”¨æ³•ï¼Œå˜é‡éƒ½å¿…é¡»å…ˆç”¨var å‘½ä»¤å£°æ˜ï¼Œç„¶åå†ä½¿ç”¨ã€‚\nä¸¥ç¦åˆ é™¤å·²ç»å£°æ˜å˜é‡ã€‚ä¾‹å¦‚ï¼Œdelete x; è¯­æ³•æ˜¯é”™è¯¯çš„ã€‚\nä¸¥æ ¼æ¨¡å¼ä¸‹ this æŒ‡å‘é—®é¢˜ä¸¥æ ¼æ¨¡å¼ä¸‹å…¨å±€ä½œç”¨åŸŸä¸­çš„å‡½æ•°thisæŒ‡å‘çš„æ˜¯undefinedï¼›\næœªå¼€å¯ä¸¥æ ¼æ¨¡å¼æ„é€ å‡½æ•°æ—¶ä¸åŠ newä¹Ÿå¯ä»¥è°ƒç”¨ï¼Œå½“æ™®é€šå‡½æ•°ï¼ŒthisæŒ‡å‘å…¨å±€å¯¹è±¡ï¼›ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œå¿…é¡»åŠ newã€‚å¦‚æœä¸åŠ newï¼Œä¼šæŠ¥é”™undefinedã€‚ç»™å®ƒèµ‹å€¼ï¼Œä¼šæŠ¥é”™ï¼›\nnew å®ä¾‹åŒ–çš„æ„é€ å‡½æ•°æŒ‡å‘åˆ›å»ºçš„å¯¹è±¡å®ä¾‹ï¼›\nå®šæ—¶å™¨ this è¿˜æ˜¯æŒ‡å‘ window ï¼›\näº‹ä»¶ã€å¯¹è±¡è¿˜æ˜¯æŒ‡å‘è°ƒç”¨è€…ã€‚\nå‡½æ•°å˜åŒ–å‡½æ•°ä¸èƒ½æœ‰é‡åçš„å‚æ•°ã€‚\nå‡½æ•°å¿…é¡»å£°æ˜åœ¨é¡¶å±‚ã€‚æ–°ç‰ˆæœ¬çš„ JavaScript ä¼šå¼•å…¥â€œå—çº§ä½œç”¨åŸŸâ€ï¼ˆES6ä¸­å·²å¼•å…¥ï¼‰ã€‚ä¸ºäº†ä¸æ–°ç‰ˆæœ¬æ¥è½¨ï¼Œä¸å…è®¸åœ¨éå‡½æ•°çš„ä»£ç å—å†…å£°æ˜å‡½æ•°ã€‚\næ›´å¤šä¸¥æ ¼æ¨¡å¼è¦æ±‚å‚è€ƒï¼šhttps://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Strict_mode\né«˜é˜¶å‡½æ•°é«˜é˜¶å‡½æ•°æ˜¯å¯¹å…¶ä»–å‡½æ•°è¿›è¡Œæ“ä½œçš„å‡½æ•°ï¼Œå®ƒ==æ¥æ”¶å‡½æ•°ä½œä¸ºå‚æ•°==æˆ–==å°†å‡½æ•°ä½œä¸ºè¿”å›å€¼è¾“å‡ºã€‚==\n&lt;!--æ¥æ”¶å‡½æ•°ä½œä¸ºå‚æ•°--&gt;\n&lt;script&gt;\n    function fn(callback){\n      callback&amp;&amp;callback();\n    }\n    fn(function(){alert(&apos;hi&apos;)}\n&lt;/script&gt;\n\n&lt;!--å°†å‡½æ•°ä½œä¸ºè¿”å›å€¼è¾“å‡º--&gt;\n&lt;script&gt;\n    function fn(){\n        return function() {}\n    }\n     fn();\n&lt;/script&gt;é—­åŒ…å˜é‡ä½œç”¨åŸŸå˜é‡æ ¹æ®ä½œç”¨åŸŸçš„ä¸åŒåˆ†ä¸ºä¸¤ç§ï¼šå…¨å±€å˜é‡å’Œå±€éƒ¨å˜é‡ã€‚\nå‡½æ•°å†…éƒ¨å¯ä»¥ä½¿ç”¨å…¨å±€å˜é‡ã€‚\nå‡½æ•°å¤–éƒ¨ä¸å¯ä»¥ä½¿ç”¨å±€éƒ¨å˜é‡ã€‚\nå½“å‡½æ•°æ‰§è¡Œå®Œæ¯•ï¼Œæœ¬ä½œç”¨åŸŸå†…çš„å±€éƒ¨å˜é‡ä¼šé”€æ¯ã€‚\nä»€ä¹ˆæ˜¯é—­åŒ…\né—­åŒ…ï¼ˆclosureï¼‰æŒ‡æœ‰æƒè®¿é—®å¦ä¸€ä¸ªå‡½æ•°ä½œç”¨åŸŸä¸­å˜é‡çš„å‡½æ•°ã€‚â€”â€“  ã€ŠJavaScript é«˜çº§ç¨‹åºè®¾è®¡ã€‹\n\nç®€å•ç†è§£å°±æ˜¯ï¼Œä¸€ä¸ªä½œç”¨åŸŸå¯ä»¥è®¿é—®å¦å¤–ä¸€ä¸ªå‡½æ•°å†…éƒ¨çš„å±€éƒ¨å˜é‡ã€‚ \né—­åŒ…çš„ä½œç”¨æé—®ï¼šæˆ‘ä»¬æ€ä¹ˆèƒ½åœ¨fn()å‡½æ•°å¤–é¢è®¿é—®fn()ä¸­çš„å±€éƒ¨å˜é‡ num å‘¢\n12345678910&lt;script&gt; function fn() &#123;ã€€ã€€ã€€ã€€    var num &#x3D; 10;ã€€ã€€ã€€ã€€    return function &#123;ã€€ã€€ã€€ã€€ã€€ã€€         console.log(num); &#x2F;&#x2F; 10         ã€€ã€€ã€€ã€€     &#125;  &#125;  var f &#x3D; fn();  f()&lt;&#x2F;script&gt;\n\n\né—­åŒ…ä½œç”¨ï¼šå»¶ä¼¸å˜é‡çš„ä½œç”¨èŒƒå›´ã€‚å†…å­˜æ³„æ¼ï¼šæ˜¯æŒ‡ç¨‹åºä¸­å·±åŠ¨æ€åˆ†é…çš„å †å†…å­˜ç”±äºæŸç§åŸå› ç¨‹åºæœªé‡Šæ”¾æˆ–æ— æ³•é‡Šæ”¾ï¼Œé€ æˆç³»ç»Ÿå†…å­˜çš„æµªè´¹ï¼Œå¯¼è‡´ç¨‹åºè¿è¡Œé€Ÿåº¦å‡æ…¢ç”šè‡³ç³»ç»Ÿå´©æºƒç­‰ä¸¥é‡åæœã€‚\né€’å½’ä»€ä¹ˆæ˜¯é€’å½’ï¼Ÿå¦‚æœ==ä¸€ä¸ªå‡½æ•°åœ¨å†…éƒ¨å¯ä»¥è°ƒç”¨å…¶æœ¬èº«==ï¼Œé‚£ä¹ˆè¿™ä¸ªå‡½æ•°å°±æ˜¯é€’å½’å‡½æ•°ï¼›\nç®€å•ç†è§£:å‡½æ•°å†…éƒ¨è‡ªå·±è°ƒç”¨è‡ªå·±, è¿™ä¸ªå‡½æ•°å°±æ˜¯é€’å½’å‡½æ•°ï¼›\né€’å½’å‡½æ•°çš„ä½œç”¨å’Œå¾ªç¯æ•ˆæœä¸€æ ·ï¼›\n==ç”±äºé€’å½’å¾ˆå®¹æ˜“å‘ç”Ÿâ€œæ ˆæº¢å‡ºâ€é”™è¯¯ï¼ˆstack overflowï¼‰ï¼Œæ‰€ä»¥å¿…é¡»è¦åŠ é€€å‡ºæ¡ä»¶ returnã€‚==\næµ…æ‹·è´å’Œæ·±æ‹·è´æµ…æ‹·è´åªæ˜¯æ‹·è´ä¸€å±‚, æ›´æ·±å±‚æ¬¡å¯¹è±¡çº§åˆ«çš„åªæ‹·è´å¼•ç”¨ã€‚åªæ˜¯æŠŠåœ°å€æ‹·è´äº†ï¼Œè¢«æ‹·è´çš„æ•°æ®ä¿®æ”¹ï¼Œæµ…æ‹·è´å¾—åˆ°çš„ä¹Ÿä¼šè¢«ä¿®æ”¹ã€‚\næ·±æ‹·è´æ‹·è´å¤šå±‚, æ¯ä¸€çº§åˆ«çš„æ•°æ®éƒ½ä¼šæ‹·è´.\næµ…æ‹·è´Object.assign(target, ...sources)     \nå±äºes6 æ–°å¢æ–¹æ³•ï¼Œå¯ä»¥æµ…æ‹·è´ã€‚æ·±æ‹·è´è¿™å—çš„ä»£ç å»ºè®®é…åˆè§†é¢‘ç†è§£ã€‚\n12345678910111213141516171819202122232425262728293031323334353637383940 &lt;script&gt;    &#x2F;&#x2F; æ·±æ‹·è´æ‹·è´å¤šå±‚, æ¯ä¸€çº§åˆ«çš„æ•°æ®éƒ½ä¼šæ‹·è´.    var obj &#x3D; &#123;        id: 1,        name: &#39;andy&#39;,        msg: &#123;            age: 18        &#125;,        color: [&#39;pink&#39;, &#39;red&#39;]    &#125;;    var o &#x3D; &#123;&#125;;    &#x2F;&#x2F; å°è£…å‡½æ•°     function deepCopy(newobj, oldobj) &#123;        for (var k in oldobj) &#123;            &#x2F;&#x2F; åˆ¤æ–­æˆ‘ä»¬çš„å±æ€§å€¼å±äºé‚£ç§æ•°æ®ç±»å‹            &#x2F;&#x2F; 1. è·å–å±æ€§å€¼  oldobj[k]            var item &#x3D; oldobj[k];            &#x2F;&#x2F; 2. åˆ¤æ–­è¿™ä¸ªå€¼æ˜¯å¦æ˜¯æ•°ç»„            if (item instanceof Array) &#123;                newobj[k] &#x3D; [];                deepCopy(newobj[k], item)            &#125; else if (item instanceof Object) &#123;                &#x2F;&#x2F; 3. åˆ¤æ–­è¿™ä¸ªå€¼æ˜¯å¦æ˜¯å¯¹è±¡                newobj[k] &#x3D; &#123;&#125;;                deepCopy(newobj[k], item)            &#125; else &#123;                &#x2F;&#x2F; 4. å±äºç®€å•æ•°æ®ç±»å‹                newobj[k] &#x3D; item;            &#125;        &#125;    &#125;    deepCopy(o, obj);    console.log(o);    var arr &#x3D; [];    console.log(arr instanceof Object);    o.msg.age &#x3D; 20;    console.log(obj);&lt;&#x2F;script&gt;\nå…¶ä½™æ·±æ‹·è´æ“ä½œå¯ä»¥å‚ç…§ä»¥ä¸‹é“¾æ¥çš„å†…å®¹åŠå…¶è¯„è®ºã€‚\n\nhttps://www.cnblogs.com/renbo/p/9563050.html\n\næ­£åˆ™è¡¨è¾¾å¼å› ä¹‹å‰æ¥è§¦è¿‡æ­£åˆ™è¡¨è¾¾å¼ï¼Œä¸ªäººè§‰å¾—ç”¨æ—¶ç™¾åº¦å°±å¯ä»¥äº†ï¼Œè§†é¢‘è®²çš„å†…å®¹ç†è§£å°±å¤Ÿäº†ã€‚\nç‰¹ç‚¹1. çµæ´»æ€§ã€é€»è¾‘æ€§å’ŒåŠŸèƒ½æ€§éå¸¸çš„å¼ºã€‚\n2. å¯ä»¥è¿…é€Ÿåœ°ç”¨æç®€å•çš„æ–¹å¼è¾¾åˆ°å­—ç¬¦ä¸²çš„å¤æ‚æ§åˆ¶ã€‚\n3. å¯¹äºåˆšæ¥è§¦çš„äººæ¥è¯´ï¼Œæ¯”è¾ƒæ™¦æ¶©éš¾æ‡‚ã€‚æ¯”å¦‚éªŒè¯é‚®ç®±ï¼š\n^\\w+([-+.]\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*$\n4. å®é™…å¼€å‘,ä¸€èˆ¬éƒ½æ˜¯ç›´æ¥å¤åˆ¶å†™å¥½çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚ \nä½†æ˜¯è¦æ±‚ä¼šä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼å¹¶ä¸”æ ¹æ®å®é™…æƒ…å†µä¿®æ”¹æ­£åˆ™\nè¡¨è¾¾å¼ã€‚æ¯”å¦‚ç”¨æˆ·å:  /^[a-z0-9_-]{3,16}$/ åˆ›å»ºæ­£åˆ™è¡¨è¾¾å¼åœ¨ JavaScript ä¸­ï¼Œå¯ä»¥é€šè¿‡ä¸¤ç§æ–¹å¼åˆ›å»ºä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ã€‚\n1. é€šè¿‡è°ƒç”¨ RegExp å¯¹è±¡çš„æ„é€ å‡½æ•°åˆ›å»º\nvar å˜é‡å = new RegExp(/è¡¨è¾¾å¼/); 2. é€šè¿‡å­—é¢é‡åˆ›å»º\nvar å˜é‡å = /è¡¨è¾¾å¼/; ä»¥ä¸Š    // æ³¨é‡Šä¸­é—´æ”¾è¡¨è¾¾å¼å°±æ˜¯æ­£åˆ™å­—é¢é‡ï¼Œæ›´æ¨èä½¿ç”¨ç¬¬äºŒç§\næµ‹è¯•æ­£åˆ™è¡¨è¾¾å¼ testtest() æ­£åˆ™å¯¹è±¡æ–¹æ³•ï¼Œç”¨äºæ£€æµ‹å­—ç¬¦ä¸²æ˜¯å¦ç¬¦åˆè¯¥è§„åˆ™ï¼Œè¯¥å¯¹è±¡ä¼šè¿”å› true æˆ– falseï¼Œå…¶å‚æ•°æ˜¯æµ‹è¯•å­—ç¬¦ä¸²ã€‚\nregexObj.test(str) \n\nregexObj æ˜¯å†™çš„æ­£åˆ™è¡¨è¾¾å¼\nstr æˆ‘ä»¬è¦æµ‹è¯•çš„æ–‡æœ¬\nå°±æ˜¯æ£€æµ‹stræ–‡æœ¬æ˜¯å¦ç¬¦åˆæˆ‘ä»¬å†™çš„æ­£åˆ™è¡¨è¾¾å¼è§„èŒƒ.æ­£åˆ™è¡¨è¾¾å¼çš„ç»„æˆä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼å¯ä»¥ç”±ç®€å•çš„å­—ç¬¦æ„æˆï¼Œæ¯”å¦‚ /abc/ï¼Œä¹Ÿå¯ä»¥æ˜¯ç®€å•å’Œç‰¹æ®Šå­—ç¬¦çš„ç»„åˆï¼Œæ¯”å¦‚ /ab*c/ ã€‚å…¶ä¸­ç‰¹æ®Šå­—ç¬¦ä¹Ÿè¢«ç§°ä¸ºå…ƒå­—ç¬¦ï¼Œåœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­æ˜¯å…·æœ‰ç‰¹æ®Šæ„ä¹‰çš„ä¸“ç”¨ç¬¦å·ï¼Œå¦‚ ^ ã€$ ã€+ ç­‰ã€‚\nç‰¹æ®Šå­—ç¬¦éå¸¸å¤šï¼Œå¯ä»¥å‚è€ƒï¼š      \nMDNï¼šhttps://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Regular_Expressions\njQuery æ‰‹å†Œï¼šæ­£åˆ™è¡¨è¾¾å¼éƒ¨åˆ†\næ­£åˆ™æµ‹è¯•å·¥å…·: http://tool.oschina.net/regex\nè¾¹ç•Œç¬¦æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„è¾¹ç•Œç¬¦ï¼ˆä½ç½®ç¬¦ï¼‰ç”¨æ¥æç¤ºå­—ç¬¦æ‰€å¤„çš„ä½ç½®ï¼Œä¸»è¦æœ‰ä¸¤ä¸ªå­—ç¬¦ã€‚\n\nè¾¹ç•Œç¬¦è¯´æ˜\n\n^è¡¨ç¤ºåŒ¹é…è¡Œé¦–çš„æ–‡æœ¬ï¼ˆä»¥è°å¼€å§‹ï¼‰\n\n$è¡¨ç¤ºåŒ¹é…è¡Œå°¾çš„æ–‡æœ¬ï¼ˆä»¥è°ç»“æŸï¼‰\nå¦‚æœ ^ å’Œ $ åœ¨ä¸€èµ·ï¼Œè¡¨ç¤ºå¿…é¡»æ˜¯ç²¾ç¡®åŒ¹é…ã€‚\nå­—ç¬¦ç±»å­—ç¬¦ç±»è¡¨ç¤ºæœ‰ä¸€ç³»åˆ—å­—ç¬¦å¯ä¾›é€‰æ‹©ï¼Œåªè¦åŒ¹é…å…¶ä¸­ä¸€ä¸ªå°±å¯ä»¥äº†ã€‚æ‰€æœ‰å¯ä¾›é€‰æ‹©çš„å­—ç¬¦éƒ½æ”¾åœ¨æ–¹æ‹¬å·å†…ã€‚\n1. []  æ–¹æ‹¬å·å¤šé€‰ä¸€\n\n/[abc]/.test(&apos;andy&apos;)     // true\n\nå­—ç¬¦ä¸²åªè¦åŒ…å« abc ä¸­ä»»æ„ä¸€ä¸ªå­—ç¬¦éƒ½ä¼šè¿”å› true ã€‚\n\n\n/^[abc]$/.test(&apos;andy&apos;)     // true\n\nä¸‰é€‰ä¸€ åªæœ‰æ˜¯a æˆ–è€…æ˜¯ b  æˆ–è€…æ˜¯c è¿™ä¸‰ä¸ªå­—æ¯æ‰è¿”å› true2. [-]  æ–¹æ‹¬å·å†…éƒ¨ èŒƒå›´ç¬¦ -var reg = /^[a-z]$/; //\n\n26ä¸ªè‹±æ–‡å­—æ¯ä»»ä½•ä¸€ä¸ªå­—æ¯è¿”å› true  - è¡¨ç¤ºçš„æ˜¯a åˆ°z çš„èŒƒå›´  \n\næ–¹æ‹¬å·å†…éƒ¨åŠ ä¸Š - è¡¨ç¤ºèŒƒå›´ï¼Œè¿™é‡Œè¡¨ç¤º a åˆ° z 26ä¸ªè‹±æ–‡å­—æ¯éƒ½å¯ä»¥ã€‚3. å­—ç¬¦ç»„åˆvar reg = /^[a-zA-Z0-9_-]$/; \n\n26ä¸ªè‹±æ–‡å­—æ¯(å¤§å†™å’Œå°å†™éƒ½å¯ä»¥)ä»»ä½•ä¸€ä¸ªå­—æ¯è¿”å› true  4. [^]  æ–¹æ‹¬å·å†…éƒ¨ å–åç¬¦^å¦‚æœä¸­æ‹¬å·é‡Œé¢æœ‰^ è¡¨ç¤ºå–åçš„æ„æ€ ä¸è¦ä¸ è¾¹ç•Œç¬¦ ^ æ··æ·†\n\nvar reg = /^[^a-zA-Z0-9_-]$/;é‡è¯ç¬¦é‡è¯ç¬¦ç”¨æ¥è®¾å®šæŸä¸ªæ¨¡å¼å‡ºç°çš„æ¬¡æ•°ã€‚\n\nheader 1header 2\n\n*é‡å¤ 0 æ¬¡ æˆ–è€… æ›´å¤šæ¬¡\n\n+é‡å¤ä¸€æ¬¡ æˆ–è€… æ›´å¤šæ¬¡\n\n?é‡å¤ 0 æ¬¡ æˆ– ä¸€æ¬¡\n\n{n}é‡å¤ n æ¬¡\n\n{n,}é‡å¤ n æ¬¡ æˆ–è€… æ›´å¤šæ¬¡\n\n{n,m}é‡å¤ n æ¬¡ åˆ° m æ¬¡\næ‹¬å·æ€»ç»“\nç¬¦å·å±æ€§æ„ä¹‰\n\nå¤§æ‹¬å·é‡è¯ç¬¦ã€‚é‡Œé¢è¡¨ç¤ºé‡å¤æ¬¡æ•°\n\nä¸­æ‹¬å·å­—ç¬¦é›†åˆã€‚åŒ¹é…æ–¹æ‹¬å·ä¸­çš„ä»»æ„å­—ç¬¦.\n\nå°æ‹¬å·è¡¨ç¤ºä¼˜å…ˆçº§ã€‚\nä¸­æ‹¬å·ï¼šå­—ç¬¦é›†åˆã€‚åŒ¹é…æ–¹æ‹¬å·ä¸­çš„ä»»æ„å­—ç¬¦ã€‚\n\nvar reg = /^[abc]$/;\n&lt;!--a ä¹Ÿå¯ä»¥ b ä¹Ÿå¯ä»¥ c å¯ä»¥  a ||b || c--&gt;\n\n\n\nå¤§æ‹¬å·ï¼šé‡è¯ç¬¦ã€‚é‡Œé¢è¡¨ç¤ºé‡å¤æ¬¡æ•°ã€‚\n\nvar reg = /^abc{3}$/; \n&lt;!--å®ƒåªæ˜¯è®©cé‡å¤ä¸‰æ¬¡   abccc--&gt;\n\n\nå°æ‹¬å·ï¼šè¡¨ç¤ºä¼˜å…ˆçº§ã€‚\n\nvar reg = /^(abc){3}$/; \n&lt;!--å®ƒæ˜¯è®©abccé‡å¤ä¸‰æ¬¡--&gt;replaceæ›¿æ¢str.replace(regexp|substr, newSubStr|function)\nå‚æ•°å®šä¹‰\n\nregexp (pattern)ä¸€ä¸ªRegExpå¯¹è±¡æˆ–è€…å…¶å­—é¢é‡ã€‚è¯¥æ­£åˆ™æ‰€åŒ¹é…çš„å†…å®¹ä¼šè¢«ç¬¬äºŒä¸ªå‚æ•°çš„è¿”å›å€¼æ›¿æ¢æ‰ã€‚\n\nsubstr (pattern)ä¸€ä¸ªå°†è¢« newSubStræ›¿æ¢çš„ å­—ç¬¦ä¸²ã€‚å…¶è¢«è§†ä¸ºä¸€æ•´ä¸ªå­—ç¬¦ä¸²ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ã€‚ä»…ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹ä¼šè¢«æ›¿æ¢ã€‚\n\nnewSubStr (replacement)ç”¨äºæ›¿æ¢æ‰ç¬¬ä¸€ä¸ªå‚æ•°åœ¨åŸå­—ç¬¦ä¸²ä¸­çš„åŒ¹é…éƒ¨åˆ†çš„å­—ç¬¦ä¸²ã€‚è¯¥å­—ç¬¦ä¸²ä¸­å¯ä»¥å†…æ’ä¸€äº›ç‰¹æ®Šçš„å˜é‡åã€‚å‚è€ƒä¸‹é¢çš„ä½¿ç”¨å­—ç¬¦ä¸²ä½œä¸ºå‚æ•°ã€‚\n\nfunction (replacement)ä¸€ä¸ªç”¨æ¥åˆ›å»ºæ–°å­å­—ç¬¦ä¸²çš„å‡½æ•°ï¼Œè¯¥å‡½æ•°çš„è¿”å›å€¼å°†æ›¿æ¢æ‰ç¬¬ä¸€ä¸ªå‚æ•°åŒ¹é…åˆ°çš„ç»“æœã€‚\næ­£åˆ™è¡¨è¾¾å¼å‚æ•°/è¡¨è¾¾å¼/[switch]switchï¼ˆä¹Ÿç§°ä¿®é¥°ç¬¦ï¼‰ï¼šæŒ‰ç…§ä»€ä¹ˆæ ·çš„æ¨¡å¼æ¥åŒ¹é…ï¼Œæœ‰ä¸‰ç§å€¼ï¼š        \ngï¼šå…¨å±€åŒ¹é…\niï¼šå¿½ç•¥å¤§å°å†™\ngiï¼šå…¨å±€åŒ¹é…+å¿½ç•¥å¤§å°å†™\nç”¨å¤šä¸ªæ•æ„Ÿè¯ä½¿ç”¨ â€œ | â€  \nä¾‹å¦‚ï¼š/ç¬¬ä¸€ä¸ª|ç¬¬äºŒä¸ª/123456789101112131415161718&lt;body&gt;    &lt;textarea name&#x3D;&quot;&quot; id&#x3D;&quot;&quot; cols&#x3D;&quot;30&quot; rows&#x3D;&quot;10&quot;&gt;&lt;&#x2F;textarea&gt;    &lt;button&gt;submit&lt;&#x2F;button&gt;    &lt;div&gt;&lt;&#x2F;div&gt;&lt;&#x2F;body&gt;&lt;script&gt;    &#x2F;&#x2F;æ›¿æ¢ replace    &#x2F;&#x2F; var str&#x3D;&quot;andyå’Œred&quot;    &#x2F;&#x2F; var newStr&#x3D;str.replace(&quot;andy&quot;,&quot;baby&quot;)    &#x2F;&#x2F; console.log(newStr)    var text &#x3D; document.querySelector(&quot;textarea&quot;)    var btn &#x3D; document.querySelector(&quot;button&quot;)    var div &#x3D; document.querySelector(&#39;div&#39;)    btn.onclick &#x3D; function () &#123;        div.innerHTML &#x3D; text.value.replace(&#x2F;æ¿€æƒ…|å—¯å“¼&#x2F;g, &#39;**&#39;)    &#125;  &lt;&#x2F;script&gt;","plink":"https://www.hansomezao.com/2019/10/18/note/ES6 bilibiliï¼ˆ92é›†ä¹‹å‰ï¼‰/"},{"title":"ES6 bilibiliï¼ˆ92é›†ä¹‹åï¼‰","date":"2019-10-13T02:42:58.000Z","date_formatted":{"ll":"2019å¹´10æœˆ13æ—¥","L":"2019/10/13","MM-DD":"10-13"},"author":"zao","updated":"2019-10-13T02:42:58.000Z","content":"ES6çš„æ–°å¢è¯­æ³•letå…³é”®å­—letå…³é”®å­—å°±æ˜¯ç”¨æ¥å£°æ˜å˜é‡çš„ï¼›ä½¿ç”¨letå…³é”®å­—å£°æ˜çš„å˜é‡å…·æœ‰å—çº§ä½œç”¨åŸŸï¼›\næ³¨æ„ï¼šä½¿ç”¨letå…³é”®å­—å£°æ˜çš„å˜é‡æ‰å…·æœ‰å—çº§ä½œç”¨åŸŸï¼Œä½¿ç”¨varå£°æ˜çš„ä¸å…·æœ‰å—çº§ä½œç”¨åŸŸç‰¹æ€§ï¼›\né˜²æ­¢å¾ªç¯å˜é‡å˜æˆå…¨å±€å˜é‡ï¼›\nä¸å­˜åœ¨å˜é‡æå‡ï¼›\næš‚æ—¶æ€§æ­»åŒºï¼›123&lt;!--letå…³é”®å­—å°±æ˜¯ç”¨æ¥å£°æ˜å˜é‡çš„--&gt;let a &#x3D; 10;console.log(a);&#x2F;&#x2F; a is not defined\n\n\n12345678910&lt;!--ä½¿ç”¨letå…³é”®å­—å£°æ˜çš„å˜é‡å…·æœ‰å—çº§ä½œç”¨åŸŸ--&gt;\tif (true) &#123;\t    let b &#x3D; 20;    \tconsole.log(b)        if (true) &#123;    \t    let c &#x3D; 30;\t    &#125;\t    console.log(c);\t&#125;\tconsole.log(b)\n\n123456789&lt;!--åœ¨ä¸€ä¸ªå¤§æ‹¬å·ä¸­,ä½¿ç”¨letå…³é”®å­—å£°æ˜çš„å˜é‡æ‰å…·æœ‰å—çº§ä½œç”¨åŸŸï¼Œvarå…³é”®å­—æ˜¯ä¸å…·å¤‡è¿™ä¸ªç‰¹ç‚¹çš„ã€‚--&gt;\tif (true) &#123;\t    let num &#x3D; 100;    \tvar abc &#x3D; 200;\t&#125;\tconsole.log(abc);\tconsole.log(num)\n123&lt;!--é˜²æ­¢å¾ªç¯å˜é‡å˜æˆå…¨å±€å˜é‡--&gt;\tfor (let i &#x3D; 0; i &lt; 2; i++) &#123;&#125;\tconsole.log(i)\n123&lt;!--ä½¿ç”¨letå…³é”®å­—å£°æ˜çš„å˜é‡æ²¡æœ‰å˜é‡æå‡--&gt;\tconsole.log(a);\tlet a &#x3D; 100;\n123456&lt;!--ä½¿ç”¨letå…³é”®å­—å£°æ˜çš„å˜é‡å…·æœ‰æš‚æ—¶æ€§æ­»åŒºç‰¹æ€§--&gt;var tmp &#x3D; 123;if (true) &#123;     tmp &#x3D; &#39;abc&#39;;    let tmp; &#x2F;&#x2F;tmp is not defined&#125;\n\nç»å…¸é¢è¯•é¢˜é¢è¯•é¢˜1 var12345678var arr &#x3D; [];for (var i &#x3D; 0; i &lt; 2; i++) &#123;    arr[i] &#x3D; function () &#123;        console.log(i);     &#125;&#125;arr[0]();arr[1]();\n\nç»å…¸é¢è¯•é¢˜å›¾è§£ï¼šæ­¤é¢˜çš„å…³é”®ç‚¹åœ¨äºå˜é‡iæ˜¯å…¨å±€çš„ï¼Œå‡½æ•°æ‰§\nè¡Œæ—¶è¾“å‡ºçš„éƒ½æ˜¯å…¨å±€ä½œç”¨åŸŸä¸‹çš„iå€¼ã€‚é¢è¯•é¢˜2 let12345678let arr &#x3D; [];for (let i &#x3D; 0; i &lt; 2; i++) &#123;    arr[i] &#x3D; function () &#123;        console.log(i);     &#125;&#125;arr[0]();arr[1]();\n\nç»å…¸é¢è¯•é¢˜å›¾è§£ï¼šæ­¤é¢˜çš„å…³é”®ç‚¹åœ¨äºæ¯æ¬¡å¾ªç¯éƒ½ä¼šäº§ç”Ÿä¸€ä¸ªå—\nçº§ä½œç”¨åŸŸï¼Œæ¯ä¸ªå—çº§ä½œç”¨åŸŸä¸­çš„å˜é‡éƒ½æ˜¯ä¸åŒçš„ï¼Œå‡½æ•°æ‰§è¡Œæ—¶\nè¾“å‡ºçš„æ˜¯è‡ªå·±ä¸Šä¸€çº§ï¼ˆå¾ªç¯äº§ç”Ÿçš„å—çº§ä½œç”¨åŸŸï¼‰ä½œç”¨åŸŸä¸‹çš„i\nå€¼.constå…³é”®å­—ä½œç”¨ï¼šå£°æ˜å¸¸é‡ï¼Œå¸¸é‡å°±æ˜¯å€¼ï¼ˆå†…å­˜åœ°å€ï¼‰ä¸èƒ½å˜åŒ–çš„é‡;å…·æœ‰å—çº§ä½œç”¨åŸŸ;\nå£°æ˜å¸¸é‡æ—¶å¿…é¡»èµ‹å€¼;\nå¸¸é‡èµ‹å€¼åï¼Œå€¼ä¸èƒ½ä¿®æ”¹;\n12345&lt;!--ä½¿ç”¨constå…³é”®å­—å£°æ˜çš„å¸¸é‡å…·æœ‰å—çº§ä½œç”¨åŸŸ--&gt;if (true) &#123;     const a &#x3D; 10;&#125;console.log(a) &#x2F;&#x2F; a is not defined\n\n\n12&lt;!--&#x2F;ä½¿ç”¨constå…³é”®å­—å£°æ˜çš„å¸¸é‡å¿…é¡»èµ‹åˆå§‹å€¼--&gt;const PI; &#x2F;&#x2F; Missing initializer in const declaration\n\n12345678&lt;!--å¸¸é‡å£°æ˜åå€¼ä¸å¯æ›´æ”¹--&gt;const PI &#x3D; 3.14;PI &#x3D; 100;const ary &#x3D; [100, 200];ary[0] &#x3D; 123;&#x2F;&#x2F;ï¼ˆæ²¡æœ‰æ›´æ”¹å†…å­˜åœ°å€ï¼‰æ•°æ®å¯ä»¥æ›´æ”¹å³æ•°æ®ç»“æ„å†…éƒ¨çš„å€¼å¯ä»¥æ›´æ”¹ary &#x3D; [1, 2] &#x2F;&#x2F;æ›´æ”¹çš„æ˜¯å†…å­˜åœ°å€ï¼Œæ‰€ä»¥æ•°æ®å€¼æœ¬èº«ä¸å¯æ›´æ”¹console.log(ary);\n\nlet const varçš„åŒºåˆ«ä½¿ç”¨ var å£°æ˜çš„å˜é‡ï¼Œå…¶ä½œç”¨åŸŸä¸ºè¯¥è¯­å¥æ‰€åœ¨çš„å‡½æ•°å†…ï¼Œä¸”å­˜åœ¨å˜é‡æå‡ç°è±¡ã€‚\nä½¿ç”¨ let å£°æ˜çš„å˜é‡ï¼Œå…¶ä½œç”¨åŸŸä¸ºè¯¥è¯­å¥æ‰€åœ¨çš„ä»£ç å—å†…ï¼Œä¸å­˜åœ¨å˜é‡æå‡ã€‚\nä½¿ç”¨ const å£°æ˜çš„æ˜¯å¸¸é‡ï¼Œåœ¨åé¢å‡ºç°çš„ä»£ç ä¸­ä¸èƒ½å†ä¿®æ”¹è¯¥å¸¸é‡çš„å€¼ã€‚\n\nvarletconst\n\nå‡½æ•°çº§ä½œç”¨åŸŸå—çº§ä½œç”¨åŸŸå—çº§ä½œç”¨åŸŸ\n\nå˜é‡æå‡ä¸å­˜åœ¨å˜é‡æå‡ä¸å­˜åœ¨å˜é‡æå‡\n\nåªå¯æ›´æ”¹åªå¯æ›´æ”¹å€¼ä¸å¯æ›´æ”¹\nè§£æ„èµ‹å€¼ES6ä¸­å…è®¸ä»æ•°ç»„ä¸­æå–å€¼ï¼ŒæŒ‰ç…§å¯¹åº”ä½ç½®ï¼Œå¯¹å˜é‡èµ‹å€¼ã€‚å¯¹\nè±¡ä¹Ÿå¯ä»¥å®ç°è§£æ„ã€‚æ•°ç»„è§£æ„å…è®¸æˆ‘ä»¬æŒ‰ç…§ä¸€ä¸€å¯¹åº”çš„å…³ç³»ä»æ•°ç»„ä¸­æå–å€¼ï¼Œç„¶åå°†å€¼èµ‹ç»™å˜é‡1234let [a, b, c] &#x3D; [1, 2, 3];console.log(a)console.log(b)console.log(c)\nå¦‚æœè§£æ„ä¸æˆåŠŸï¼Œå˜é‡çš„å€¼ä¸ºundefinedã€‚\n12let [foo] &#x3D; [];let [bar, foo] &#x3D; [1];\nå¯¹è±¡è§£æ„å¯¹è±¡è§£æ„å…è®¸æˆ‘ä»¬ä½¿ç”¨å˜é‡çš„åå­—åŒ¹é…å¯¹è±¡çš„å±æ€§ï¼ŒåŒ¹é…æˆ\nåŠŸå°†å¯¹è±¡å±æ€§çš„å€¼èµ‹ç»™å˜é‡12345678let person &#x3D; &#123; name: &#39;zhangsan&#39;, age: 20 &#125;; let &#123; name, age &#125; &#x3D; person;console.log(name); &#x2F;&#x2F; &#39;zhangsan&#39; console.log(age); &#x2F;&#x2F; 20let &#123;name: myName, age: myAge&#125; &#x3D; person; &#x2F;&#x2F; myName myAge å±äºåˆ«åconsole.log(myName); &#x2F;&#x2F; &#39;zhangsan&#39; console.log(myAge); &#x2F;&#x2F; 20\n\nç®­å¤´å‡½æ•°ES6ä¸­æ–°å¢çš„å®šä¹‰å‡½æ•°çš„æ–¹å¼ï¼Œç”¨æ¥ç®€åŒ–å‡½æ•°å®šä¹‰è¯­æ³•çš„ã€‚\nä¹¦å†™æ ¼å¼ ï¼š () =&gt; {} å‡½æ•°ä½“ä¸­åªæœ‰ä¸€å¥ä»£ç ï¼Œä¸”ä»£ç çš„æ‰§è¡Œç»“æœå°±æ˜¯è¿”å›å€¼ï¼Œå¯ä»¥çœç•¥å¤§æ‹¬å·;\nåœ¨ç®­å¤´å‡½æ•°ä¸­ï¼Œå¦‚æœå½¢å‚åªæœ‰ä¸€ä¸ªï¼Œå½¢å‚å¤–é¢çš„å°æ‹¬å·ä¹Ÿå¯ä»¥çœç•¥;\nç®­å¤´å‡½æ•°ä¸ç»‘å®šthiså…³é”®å­—ï¼Œç®­å¤´å‡½æ•°ä¸­çš„thisï¼ŒæŒ‡å‘çš„æ˜¯å‡½æ•°å®šä¹‰ä½ç½®çš„ä¸Šä¸‹æ–‡thisã€‚1234const fn &#x3D; () &#x3D;&gt; &#123;    console.log(123)&#125;fn()\n  å‡½æ•°ä½“ä¸­åªæœ‰ä¸€å¥ä»£ç ï¼Œä¸”ä»£ç çš„æ‰§è¡Œç»“æœå°±æ˜¯è¿”å›å€¼ï¼Œå¯  ä»¥çœç•¥å¤§æ‹¬å·ã€‚12345678&lt;!--ä¼ ç»Ÿå‡½æ•°--&gt;function sum(num1, num2) &#123;     return num1 + num2; &#125;&lt;!--ES6--&gt;const sum &#x3D; (num1, num2) &#x3D;&gt; num1 + num2;const result&#x3D;sum(10,20)\n  åœ¨ç®­å¤´å‡½æ•°ä¸­ï¼Œå¦‚æœå½¢å‚åªæœ‰ä¸€ä¸ªï¼Œå½¢å‚å¤–é¢çš„å°æ‹¬å·ä¹Ÿå¯ä»¥çœç•¥.1234function fn (v) &#123;    return v;&#125; const fn &#x3D; v &#x3D;&gt; v;\n  ç®­å¤´å‡½æ•°ä¸ç»‘å®šthiså…³é”®å­—ï¼Œç®­å¤´å‡½æ•°ä¸­çš„thisï¼ŒæŒ‡å‘çš„æ˜¯  å‡½æ•°å®šä¹‰ä½ç½®çš„ä¸Šä¸‹æ–‡thisã€‚  ä¹Ÿå°±æ˜¯è¯´ç®­å¤´å‡½æ•°è¢«å®šä¹‰åœ¨å“ªé‡Œï¼Œç®­å¤´å‡½æ•°ä¸­çš„thiså°±æŒ‡å‘å“ªé‡Œã€‚123456789const obj &#x3D; &#123; name: &#39;å¼ ä¸‰&#39;&#125; function fn () &#123;     console.log(this);    return () &#x3D;&gt; &#123;         console.log(this)    &#125; &#125; const resFn &#x3D; fn.call(obj); resFn();\nç®­å¤´å‡½æ•°é¢è¯•é¢˜12345678var obj &#x3D; &#123;    age: 20,    say: () &#x3D;&gt; &#123;        alert(this.age)    &#125;&#125;obj.say();&#x2F;&#x2F;ä¼šalert undefined\n  ä¸Šæ–¹ä»£ç ä¸­å¯¹è±¡ä¸èƒ½äº§ç”Ÿä½œç”¨åŸŸï¼Œæ‰€ä»¥æ­¤å¤„çš„ç®­å¤´å‡½æ•°è¢«å®š  ä¹‰åœ¨äº†å…¨å±€ ä½œç”¨åŸŸä¸‹ï¼Œæ­¤æ—¶çš„thisæŒ‡å‘çš„æ˜¯windowï¼Œwindow  ä¸‹æ²¡æœ‰ageå±æ€§ï¼Œæ‰€ä»¥undefinedã€‚\n123456789var age&#x3D;100var obj &#x3D; &#123;    age: 20,    say: () &#x3D;&gt; &#123;        alert(this.age)    &#125;&#125;obj.say();&#x2F;&#x2F;ä¼šalert undefined\n\nå‰©ä½™å‚æ•°å‰©ä½™å‚æ•°è¯­æ³•å…è®¸æˆ‘ä»¬å°†ä¸€ä¸ªä¸å®šæ•°é‡çš„å‚æ•°è¡¨ç¤ºä¸ºä¸€ä¸ªæ•°ç»„ã€‚ç®­å¤´å‡½æ•°ä½¿ç”¨ä¸äº†ä¼ é€å‡½æ•°ä¸­çš„argumentsï¼›\n(â€¦å‚æ•°å)ï¼šè¡¨ç¤ºæ¥æ”¶æ‰€æœ‰çš„å‚æ•°ï¼›\n(å‚æ•°å1,â€¦å‚æ•°å2)ï¼šå‚æ•°å2ï¼Œè¡¨ç¤ºç»“æŸå‰©ä½™çš„æ‰€æœ‰å‚æ•°ã€‚12345678910111213function sum (first, ...args) &#123;    console.log(first); &#x2F;&#x2F; 10    console.log(args); &#x2F;&#x2F; [20, 30] &#125;sum(10, 20, 30)const sum &#x3D; (...args) &#x3D;&gt; &#123;    let total &#x3D; 0;        args.forEach(item &#x3D;&gt; total +&#x3D; item);        return total;    &#125;;console.log(sum(10, 20));console.log(sum(10, 20, 30));\nå‰©ä½™å‚æ•°å’Œè§£æ„é…åˆä½¿ç”¨\n1234let ary1 &#x3D; [&#39;å¼ ä¸‰&#39; , &#39;æå››&#39;, &#39;ç‹äº”&#39;];let [s1, ...s2] &#x3D; ary1;console.log(s1)console.log(s2)&#x2F;&#x2F;...s2å·²ç»å˜æˆäº†ä¸€ä¸ªæ•°ç»„ï¼Œå­˜å‚¨äº†&quot;æå››&quot;,&quot;ç‹äº”&quot;\nES6çš„å†…ç½®è¯­æ³•æ‰©å±•Arrayçš„æ‰©å±•æ–¹æ³•æ‰©å±•è¿ç®—ç¬¦ï¼ˆå±•å¼€è¯­æ³•ï¼‰æ‰©å±•è¿ç®—ç¬¦å¯ä»¥å°†æ•°ç»„æˆ–è€…å¯¹è±¡è½¬ä¸ºç”¨é€—å·åˆ†éš”çš„å‚æ•°åºåˆ—ã€‚1234let ary &#x3D; [1, 2, 3];...ary  &#x2F;&#x2F; 1, 2, 3console.log(...ary);    &#x2F;&#x2F; 1 2 3console.log(1, 2, 3)\n\næ‰©å±•è¿ç®—ç¬¦çš„åº”ç”¨1. æ‰©å±•è¿ç®—ç¬¦å¯ä»¥åº”ç”¨äºåˆå¹¶æ•°ç»„12345678910&#x2F;&#x2F; æ–¹æ³•ä¸€ let ary1 &#x3D; [1, 2, 3]; let ary2 &#x3D; [3, 4, 5];let ary3 &#x3D; [...ary1, ...ary2];&#x2F;&#x2F; æ–¹æ³•äºŒ let ary1 &#x3D; [1, 2, 3];let ary2 &#x3D; [4, 5, 6];ary1.push(...ary2);console.log(ary1)\n2.  åˆ©ç”¨æ‰©å±•è¿ç®—ç¬¦å°†ä¼ªæ•°ç»„æˆ–è€…å¯éå†å¯¹è±¡è½¬æ¢ä¸ºçœŸæ­£çš„æ•°ç»„12345var oDivs &#x3D; document.getElementsByTagName(&#39;div&#39;);console.log(oDivs)var ary &#x3D; [...oDivs];ary.push(&#39;a&#39;);console.log(ary);\n\næ„é€ å‡½æ•°æ–¹æ³•ï¼šArray.from()1. å°†ç±»æ•°ç»„æˆ–å¯éå†å¯¹è±¡è½¬æ¢ä¸ºçœŸæ­£çš„æ•°ç»„\n2. è¯¥æ–¹æ³•è¿˜å¯ä»¥æ¥å—ç¬¬äºŒä¸ªå‚æ•°ï¼Œä½œç”¨ç±»ä¼¼äºæ•°ç»„çš„mapæ–¹\n   æ³•ï¼Œç”¨æ¥å¯¹æ¯ä¸ªå…ƒç´ è¿›è¡Œå¤„ç†ï¼Œå°†å¤„ç†åçš„å€¼æ”¾å…¥è¿”å›çš„\n   æ•°ç»„ã€‚123456789var arrayLike &#x3D; &#123; \t&quot;0&quot;: &quot;å¼ ä¸‰&quot;,\t&quot;1&quot;: &quot;æå››&quot;,\t&quot;2&quot;: &quot;ç‹äº”&quot;,\t&quot;length&quot;: 3\t&#125;var ary &#x3D; Array.from(arrayLike);console.log(ary)\n12345678var arrayLike &#x3D; &#123;\t&quot;0&quot;: &quot;1&quot;,\t&quot;1&quot;: &quot;2&quot;,\t&quot;length&quot;: 2&#125;var ary &#x3D; Array.from(arrayLike, item &#x3D;&gt; item * 2)console.log(ary)&#x2F;&#x2F;è¾“å‡ºå¤„ç†åçš„ç»“æœã€‚\nå®ä¾‹æ–¹æ³•find()ç”¨äºæ‰¾å‡ºç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„æ•°ç»„æˆå‘˜ï¼Œå®ƒçš„å‚æ•°æ˜¯ä¸€ä¸ªå›è°ƒ\nå‡½æ•°ï¼Œæ‰€æœ‰æ•°ç»„æˆå‘˜ä¾æ¬¡æ‰§è¡Œè¯¥å›è°ƒå‡½æ•°ï¼Œç›´åˆ°æ‰¾å‡ºç¬¬ä¸€ä¸ª\nè¿”å›å€¼ä¸ºtrueçš„æˆå‘˜ï¼Œç„¶åè¿”å›è¯¥æˆå‘˜ã€‚å¦‚æœæ²¡æœ‰æ‰¾åˆ°è¿”å›\nundefined123456789var ary &#x3D; [&#123;    id: 1,    name: &#39;å¼ ä¸‰&#39;&#125;, &#123;    id: 2,    name: &#39;æå››&#39;&#125;];let target &#x3D; ary.find(item &#x3D;&gt; item.id &#x3D;&#x3D; 3);console.log(target)&#x2F;&#x2F;è¿”å›undefined\nfindIndex()è¿”å›ç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„æ•°ç»„æˆå‘˜çš„ä½ç½®ï¼Œå¦‚æœæ‰€æœ‰æˆå‘˜éƒ½ä¸\nç¬¦åˆæ¡ä»¶ï¼Œåˆ™è¿”å›-1ã€‚123let ary &#x3D; [1, 5, 10, 15];let index &#x3D; ary.findIndex((value, index) &#x3D;&gt; value &gt; 9); console.log(index); &#x2F;&#x2F; 2(ç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„ç´¢å¼•ï¼Œå³10çš„ç´¢å¼•æ˜¯2)\nincludes()åˆ¤æ–­æŸä¸ªæ•°ç»„æ˜¯å¦åŒ…å«ç»™å®šçš„å€¼ï¼Œè¿”å›å¸ƒå°”å€¼12[1, 2, 3].includes(2) &#x2F;&#x2F; true [1, 2, 3].includes(4) &#x2F;&#x2F; false\nè¯¥æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºæœç´¢çš„èµ·å§‹ä½ç½®ï¼Œé»˜è®¤ä¸º0ã€‚å¦‚æœç¬¬\näºŒä¸ªå‚æ•°ä¸ºè´Ÿæ•°ï¼Œåˆ™è¡¨ç¤ºå€’æ•°ï¼ˆshuï¼‰çš„ä½ç½®ï¼Œå¦‚æœè¿™æ—¶å®ƒå¤§äºæ•°ç»„\né•¿åº¦ï¼ˆæ¯”å¦‚ç¬¬äºŒä¸ªå‚æ•°ä¸º-4ï¼Œä½†æ•°ç»„é•¿åº¦ä¸º3ï¼‰ï¼Œåˆ™ä¼šé‡ç½®ä¸º\nä»0å¼€å§‹ã€‚12[1, 2, 3].includes(3, 3);  &#x2F;&#x2F; false[1, 2, 3].includes(3, -1); &#x2F;&#x2F; true\n\nString çš„æ‰©å±•æ–¹æ³•æ¨¡æ¿å­—ç¬¦ä¸²ES6æ–°å¢çš„åˆ›å»ºå­—ç¬¦ä¸²çš„æ–¹å¼ï¼Œä½¿ç”¨åå¼•å·å®šä¹‰ã€‚\n1. æ¨¡æ¿å­—ç¬¦ä¸²ä¸­å¯ä»¥è§£æå˜é‡;\n2. æ¨¡æ¿å­—ç¬¦ä¸²ä¸­å¯ä»¥æ¢è¡Œ;\n3. åœ¨æ¨¡æ¿å­—ç¬¦ä¸²ä¸­å¯ä»¥è°ƒç”¨å‡½æ•°ã€‚12345let name &#x3D; &#96;å¼ ä¸‰&#96;;console.log(name)&lt;!--æ¨¡æ¿å­—ç¬¦ä¸²ä¸­å¯ä»¥è§£æå˜é‡--&gt;let sayHello &#x3D; &#96;Hello, æˆ‘çš„åå­—å«$&#123;name&#125;&#96;;console.log(sayHello);\n123456789101112&lt;!--æ¨¡æ¿å­—ç¬¦ä¸²ä¸­å¯ä»¥æ¢è¡Œ--&gt;&#x2F;&#x2F; let html &#x3D; &#96;        &lt;div&gt;        &lt;span&gt;$&#123;result.name&#125;&lt;&#x2F;span&gt;        &lt;span&gt;$&#123;result.age&#125;&lt;&#x2F;span&gt;        &lt;&#x2F;div&gt;    &#96;;console.log(html);\t\t\t\tconst fn &#x3D; () &#x3D;&gt; &#123;\t\t\treturn &#39;æˆ‘æ˜¯fnå‡½æ•°&#39;\t\t&#125;\n1234567&lt;!--åœ¨æ¨¡æ¿å­—ç¬¦ä¸²ä¸­å¯ä»¥è°ƒç”¨å‡½æ•°--&gt;const fn &#x3D; () &#x3D;&gt; &#123;    return &#39;æˆ‘æ˜¯fnå‡½æ•°&#39;&#125;let html &#x3D; &#96;æˆ‘æ˜¯æ¨¡æ¿å­—ç¬¦ä¸² $&#123;fn()&#125;&#96;;console.log(html)\n\nstartsWith() å’Œ endsWith()includes()ï¼šè¿”å›å¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦æ‰¾åˆ°äº†å‚æ•°å­—ç¬¦ä¸²ï¼›\nstartsWith()ï¼šè¡¨ç¤ºå‚æ•°å­—ç¬¦ä¸²æ˜¯å¦åœ¨åŸå­—ç¬¦ä¸²çš„å¤´éƒ¨ï¼Œè¿”å›å¸ƒå°”å€¼ï¼›\nendsWith()ï¼šè¡¨ç¤ºå‚æ•°å­—ç¬¦ä¸²æ˜¯å¦åœ¨åŸå­—ç¬¦ä¸²çš„å°¾éƒ¨ï¼Œè¿”å›å¸ƒå°”å€¼ã€‚\nè¿™ä¸‰ä¸ªæ–¹æ³•éƒ½æ”¯æŒç¬¬äºŒä¸ªå‚æ•°ï¼Œè¡¨ç¤ºå¼€å§‹æœç´¢çš„ä½ç½®ã€‚123456789let str &#x3D; &#39;Hello ECMAScript 2015&#39;;let r1 &#x3D; str.startsWith(&#39;Hello&#39;);console.log(r1);&#x2F;&#x2F; truelet r2 &#x3D; str.endsWith(&#39;2015&#39;);console.log(r2);&#x2F;&#x2F; truelet r2 &#x3D; str.endsWith(&#39;2016&#39;);console.log(r2) &#x2F;&#x2F;false\nrepeat()repeatæ–¹æ³•è¡¨ç¤ºå°†åŸå­—ç¬¦ä¸²é‡å¤næ¬¡ï¼Œè¿”å›ä¸€ä¸ªæ–°å­—ç¬¦ä¸²ã€‚Set æ•°æ®ç»“æ„ES6 æä¾›äº†æ–°çš„æ•°æ®ç»“æ„â€”â€”Setã€‚\n1. å®ƒç±»ä¼¼äºæ•°ç»„ï¼Œä½†æ˜¯æˆå‘˜çš„å€¼éƒ½æ˜¯å”¯ä¸€çš„ï¼Œæ²¡æœ‰é‡å¤çš„å€¼ã€‚\n2. Setæœ¬èº«æ˜¯ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œç”¨æ¥ç”Ÿæˆ Set æ•°æ®ç»“æ„ã€‚\n3. Setå‡½æ•°å¯ä»¥æ¥å—ä¸€ä¸ªæ•°ç»„ä½œä¸ºå‚æ•°ï¼Œç”¨æ¥åˆå§‹åŒ–ã€‚\n4. Setå¯ä»¥å»é™¤æ•°ç»„é‡å¤å…ƒç´ ã€‚1234567891011const s1 &#x3D; new Set();console.log(s1.size)&#x2F;&#x2F;è¿”å›0const s2 &#x3D; new Set([&quot;a&quot;, &quot;b&quot;]);console.log(s2.size)&#x2F;&#x2F;è¿”å›2const s3 &#x3D; new Set([&quot;a&quot;,&quot;a&quot;,&quot;b&quot;,&quot;b&quot;]);console.log(s3.size)&#x2F;&#x2F;è¿”å›2const ary &#x3D; [...s3];console.log(ary)&#x2F;&#x2F;æ•°ç»„ä¸­å­˜å‚¨äº†[&quot;a&quot;,&quot;b&quot;]\n\nå®ä¾‹æ–¹æ³•add(value)ï¼šæ·»åŠ æŸä¸ªå€¼ï¼Œè¿”å› Set ç»“æ„æœ¬èº«ï¼›\ndelete(value)ï¼šåˆ é™¤æŸä¸ªå€¼ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºåˆ é™¤æ˜¯å¦æˆåŠŸï¼›\nhas(value)ï¼šè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºè¯¥å€¼æ˜¯å¦ä¸º Set çš„æˆå‘˜ï¼›\nclear()ï¼šæ¸…é™¤æ‰€æœ‰æˆå‘˜ï¼Œæ²¡æœ‰è¿”å›å€¼ã€‚123456789101112131415161718const s4 &#x3D; new Set();&lt;!--å‘setç»“æ„ä¸­æ·»åŠ å€¼ ä½¿ç”¨addæ–¹æ³•--&gt;s4.add(&#39;a&#39;).add(&#39;b&#39;);&#x2F;&#x2F;é“¾å¼è°ƒç”¨console.log(s4.size)&lt;!--ä»setç»“æ„ä¸­åˆ é™¤å€¼ ç”¨åˆ°çš„æ–¹æ³•æ˜¯delete--&gt;const r1 &#x3D; s4.delete(&#39;c&#39;);console.log(s4.size)console.log(r1);&lt;!--åˆ¤æ–­æŸä¸€ä¸ªå€¼æ˜¯å¦æ˜¯setæ•°æ®ç»“æ„ä¸­çš„æˆå‘˜ ä½¿ç”¨has--&gt;const r2 &#x3D; s4.has(&#39;d&#39;);console.log(r2)&lt;!--æ¸…ç©ºsetæ•°æ®ç»“æ„ä¸­çš„å€¼ ä½¿ç”¨clearæ–¹æ³•--&gt;s4.clear();console.log(s4.size);\n\n\néå†Set ç»“æ„çš„å®ä¾‹ä¸æ•°ç»„ä¸€æ ·ï¼Œä¹Ÿæ‹¥æœ‰forEachæ–¹æ³•ï¼Œç”¨äºå¯¹æ¯\nä¸ªæˆå‘˜æ‰§è¡ŒæŸç§æ“ä½œï¼Œæ²¡æœ‰è¿”å›å€¼ã€‚12345&#x2F;&#x2F; éå†setæ•°æ®ç»“æ„ ä»ä¸­å–å€¼const s5 &#x3D; new Set([&#39;a&#39;, &#39;b&#39;, &#39;c&#39;]);    s5.forEach(value &#x3D;&gt; &#123;    console.log(value)&#125;)","plink":"https://www.hansomezao.com/2019/10/13/note/ES6 bilibiliï¼ˆ92é›†ä¹‹åï¼‰/"}]