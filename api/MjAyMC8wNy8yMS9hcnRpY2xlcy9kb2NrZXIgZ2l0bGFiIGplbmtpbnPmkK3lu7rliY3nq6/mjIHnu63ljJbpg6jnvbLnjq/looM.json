{"title":"docker gitlab jenkins搭建前端持续化部署环境","date":"2020-07-21T07:44:06.000Z","date_formatted":{"ll":"2020年7月21日","L":"2020/07/21","MM-DD":"07-21"},"author":"zao","link":"2020/07/21/articles/docker gitlab jenkins搭建前端持续化部署环境","tags":["docker","gitlab","jenkins"],"categories":["articles"],"updated":"2020-07-21T07:44:06.000Z","content":"<h2 id=\"gitlab安装\">gitlab安装<a href=\"#gitlab安装\" title=\"gitlab安装\"></a></h2><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker pull gitlab/gitlab-ce</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> docker run \\</span><br><span class=\"line\">--detach \\ # 后台运行</span><br><span class=\"line\">--publish 8443:443 \\ # 映射https端口</span><br><span class=\"line\">--publish 80:80 \\ # 映射80端口</span><br><span class=\"line\">--publish 8022:22 \\ # 映射ssh 22端口</span><br><span class=\"line\">--name gitlab \\ </span><br><span class=\"line\">--restart always \\</span><br><span class=\"line\">--hostname 39.108.51.10 \\</span><br><span class=\"line\">-v /home/gitlab/etc:/etc/gitlab \\ # 挂载gitlab的配置文件</span><br><span class=\"line\">-v /home/gitlab/logs:/var/log/gitlab \\ # 挂载gitlab的日志文件</span><br><span class=\"line\">-v /home/gitlab/data:/var/opt/gitlab \\ # 挂载gitlab的数据</span><br><span class=\"line\">-v /etc/localtime:/etc/localtime:ro \\ # 保持宿主机和容器时间同步</span><br><span class=\"line\">--privileged=true gitlab/gitlab-ce # 在容器内以root身份执行操作</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"jenkins安装和加速配置\">jenkins安装和加速配置<a href=\"#jenkins安装和加速配置\" title=\"jenkins安装和加速配置\"></a></h2><h3 id=\"jenkins安装和启动\">jenkins安装和启动<a href=\"#jenkins安装和启动\" title=\"jenkins安装和启动\"></a></h3><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker pull jenkins&#x2F;jenkins</span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run --name my-jenkins --user=root -p 8080:8080 -p 50000:50000 -v /home/myjenkins/jenkins_home:/var/jenkins_home -d jenkins/jenkins</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"加速设置\">加速设置<a href=\"#加速设置\" title=\"加速设置\"></a></h3><p>进入到Jenkins工作目录</p>\n<p>我这里是</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cd /home/myjenkins/jenkins_home/updates</span><br></pre></td></tr></table></figure>\n\n<p>配置清华镜像</p>\n<figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sed -i 's/http:\\/\\/updates.jenkins-ci.org\\/download/https:\\/\\/mirrors.tuna.tsinghua.edu.cn\\/jenkins/g' default.json &amp;&amp; sed -i 's/http:\\/\\/www.google.com/https:\\/\\/www.baidu.com/g' default.json</span><br></pre></td></tr></table></figure>\n\n<p>重启jenkins容器</p>\n","next":{"title":"docker安装和使用","link":"2020/07/10/articles/docker安装和使用"},"plink":"https://www.hansomezao.com/2020/07/21/articles/docker gitlab jenkins搭建前端持续化部署环境/","toc":[{"id":"gitlab安装","title":"gitlab安装","index":"1"},{"id":"jenkins安装和加速配置","title":"jenkins安装和加速配置","index":"2","children":[{"id":"jenkins安装和启动","title":"jenkins安装和启动","index":"2.1"},{"id":"加速设置","title":"加速设置","index":"2.2"}]}],"reward":true,"copyright":{"custom":"转载请加上署名!"}}